var app=function(){function e(){}function t(e){return e()}function n(){return Object.create(null)}function i(e){e.forEach(t)}function r(e){return"function"==typeof e}function o(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}let a,s;function l(e,t){return a||(a=document.createElement("a")),a.href=t,e===a.href}function u(e,t){e.appendChild(t)}function c(e,t,n){e.insertBefore(t,n||null)}function h(e){e.parentNode.removeChild(e)}function d(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function f(e){return document.createElement(e)}function p(e){return document.createTextNode(e)}function g(){return p(" ")}function m(){return p("")}function b(e,t,n,i){return e.addEventListener(t,n,i),()=>e.removeEventListener(t,n,i)}function y(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function v(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function _(e,t){e.value=null==t?"":t}function w(e){s=e}function x(){if(!s)throw new Error("Function called outside component initialization");return s}function P(e){x().$$.on_mount.push(e)}function O(e){x().$$.on_destroy.push(e)}const k=[],T=[],S=[],I=[],E=Promise.resolve();let D=!1;function j(e){S.push(e)}function C(e){I.push(e)}const A=new Set;let M=0;function R(){const e=s;do{for(;M<k.length;){const e=k[M];M++,w(e),N(e.$$)}for(w(null),k.length=0,M=0;T.length;)T.pop()();for(let e=0;e<S.length;e+=1){const t=S[e];A.has(t)||(A.add(t),t())}S.length=0}while(k.length);for(;I.length;)I.pop()();D=!1,A.clear(),w(e)}function N(e){if(null!==e.fragment){e.update(),i(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(j)}}const L=new Set;let F;function B(){F={r:0,c:[],p:F}}function V(){F.r||i(F.c),F=F.p}function U(e,t){e&&e.i&&(L.delete(e),e.i(t))}function H(e,t,n,i){if(e&&e.o){if(L.has(e))return;L.add(e),F.c.push((()=>{L.delete(e),i&&(n&&e.d(1),i())})),e.o(t)}else i&&i()}function z(e,t,n){const i=e.$$.props[t];void 0!==i&&(e.$$.bound[i]=n,n(e.$$.ctx[i]))}function $(e){e&&e.c()}function Y(e,n,o,a){const{fragment:s,on_mount:l,on_destroy:u,after_update:c}=e.$$;s&&s.m(n,o),a||j((()=>{const n=l.map(t).filter(r);u?u.push(...n):i(n),e.$$.on_mount=[]})),c.forEach(j)}function G(e,t){const n=e.$$;null!==n.fragment&&(i(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function q(e,t){-1===e.$$.dirty[0]&&(k.push(e),D||(D=!0,E.then(R)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function W(t,r,o,a,l,u,c,d=[-1]){const f=s;w(t);const p=t.$$={fragment:null,ctx:null,props:u,update:e,not_equal:l,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(r.context||(f?f.$$.context:[])),callbacks:n(),dirty:d,skip_bound:!1,root:r.target||f.$$.root};c&&c(p.root);let g=!1;if(p.ctx=o?o(t,r.props||{},((e,n,...i)=>{const r=i.length?i[0]:n;return p.ctx&&l(p.ctx[e],p.ctx[e]=r)&&(!p.skip_bound&&p.bound[e]&&p.bound[e](r),g&&q(t,e)),n})):[],p.update(),g=!0,i(p.before_update),p.fragment=!!a&&a(p.ctx),r.target){if(r.hydrate){const e=function(e){return Array.from(e.childNodes)}(r.target);p.fragment&&p.fragment.l(e),e.forEach(h)}else p.fragment&&p.fragment.c();r.intro&&U(t.$$.fragment),Y(t,r.target,r.anchor,r.customElement),R()}w(f)}class X{$destroy(){G(this,1),this.$destroy=e}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}!function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=193)}([function(e,t,n){(function(t){function n(e){return e&&e.Math==Math&&e}e.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof t&&t)||function(){return this}()||Function("return this")()}).call(this,n(154))},function(e,t,n){n=n(60);var i=Function.prototype,r=i.bind,o=i.call,a=n&&r.bind(o,o);e.exports=n?function(e){return e&&a(e)}:function(e){return e&&function(){return o.apply(e,arguments)}}},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,n){var i=n(0),r=n(42).f,o=n(45),a=n(37),s=n(98),l=n(126),u=n(81);e.exports=function(e,t){var n,c,h,d=e.target,f=e.global,p=e.stat,g=f?i:p?i[d]||s(d,{}):(i[d]||{}).prototype;if(g)for(n in t){if(c=t[n],h=e.noTargetGet?(h=r(g,n))&&h.value:g[n],!u(f?n:d+(p?".":"#")+n,e.forced)&&void 0!==h){if(typeof c==typeof h)continue;l(c,h)}(e.sham||h&&h.sham)&&o(c,"sham",!0),a(g,n,c,e)}}},function(e,t,n){var i=n(105),r=n(37);n=n(158);i||r(Object.prototype,"toString",n,{unsafe:!0})},function(e,t,n){var i=n(30),r=n(89),o=n(68),a=n(49),s=n(22).f,l=n(109),u=n(54),c=(n=n(17),"Array Iterator"),h=a.set,d=a.getterFor(c);e.exports=l(Array,"Array",(function(e,t){h(this,{type:c,target:i(e),index:0,kind:t})}),(function(){var e=d(this),t=e.target,n=e.kind,i=e.index++;return!t||i>=t.length?{value:e.target=void 0,done:!0}:"keys"==n?{value:i,done:!1}:"values"==n?{value:t[i],done:!1}:{value:[i,t[i]],done:!1}}),"values"),a=o.Arguments=o.Array;if(r("keys"),r("values"),r("entries"),!u&&n&&"values"!==a.name)try{s(a,"name",{value:"values"})}catch(e){}},function(e,t,n){var i=n(137).charAt,r=n(23),o=n(49),a=(n=n(109),"String Iterator"),s=o.set,l=o.getterFor(a);n(String,"String",(function(e){s(this,{type:a,string:r(e),index:0})}),(function(){var e=l(this),t=e.string,n=e.index;return n>=t.length?{value:void 0,done:!0}:(t=i(t,n),e.index+=t.length,{value:t,done:!1})}))},function(e,t,n){function i(e,t){var n=pe[e]=A(ae);return ne(n,{type:te,tag:e,description:t}),y||(n.description=t),n}function r(e,t,n){return e===re&&r(ge,t,n),S(e),t=D(t),S(n),w(pe,t)?(n.enumerable?(w(e,ee)&&e[ee][t]&&(e[ee][t]=!1),n=A(n,{enumerable:C(0,!1)})):(w(e,ee)||ce(e,ee,C(1,{})),e[ee][t]=!0),ve(e,t,n)):ce(e,t,n)}function o(e,t){S(e);var n=E(t);t=M(n).concat(u(n));return Z(t,(function(t){y&&!g(a,n,t)||r(e,t,n[t])})),e}function a(e){e=D(e);var t=g(de,this,e);return!(this===re&&w(pe,e)&&!w(ge,e))&&(!(t||!w(this,e)||!w(pe,e)||w(this,ee)&&this[ee][e])||t)}function s(e,t){var n;e=E(e),t=D(t);if(e!==re||!w(pe,t)||w(ge,t))return!(n=ue(e,t))||!w(pe,t)||w(e,ee)&&e[ee][t]||(n.enumerable=!0),n}function l(e){e=he(E(e));var t=[];return Z(e,(function(e){w(pe,e)||w(G,e)||fe(t,e)})),t}function u(e){var t=e===re,n=(e=he(t?ge:E(e)),[]);return Z(e,(function(e){!w(pe,e)||t&&!w(re,e)||fe(n,pe[e])})),n}var c,h=n(3),d=n(0),f=n(43),p=n(84),g=n(21),m=n(1),b=n(54),y=n(17),v=n(96),_=n(2),w=n(20),x=n(86),P=n(14),O=n(19),k=n(44),T=n(73),S=n(18),I=n(36),E=n(30),D=n(72),j=n(23),C=n(61),A=n(50),M=n(66),R=n(55),N=n(107),L=n(103),F=n(42),B=n(22),V=n(132),U=n(70),H=n(106),z=n(37),$=n(77),Y=n(79),G=n(63),q=n(78),W=n(12),X=n(133),K=n(134),Q=n(87),J=n(49),Z=n(56).forEach,ee=Y("hidden"),te="Symbol",ne=(n="prototype",Y=W("toPrimitive"),J.set),ie=J.getterFor(te),re=Object[n],oe=d.Symbol,ae=oe&&oe[n],se=d.TypeError,le=(J=d.QObject,f("JSON","stringify")),ue=F.f,ce=B.f,he=N.f,de=U.f,fe=m([].push),pe=$("symbols"),ge=$("op-symbols"),me=$("string-to-symbol-registry"),be=$("symbol-to-string-registry"),ye=(d=$("wks"),!J||!J[n]||!J[n].findChild),ve=y&&_((function(){return 7!=A(ce({},"a",{get:function(){return ce(this,"a",{value:7}).a}})).a}))?function(e,t,n){var i=ue(re,t);i&&delete re[t],ce(e,t,n),i&&e!==re&&ce(re,t,i)}:ce;v||(z(ae=(oe=function(){if(k(ae,this))throw se("Symbol is not a constructor");var e=arguments.length&&void 0!==arguments[0]?j(arguments[0]):void 0,t=q(e),n=function(e){this===re&&g(n,ge,e),w(this,ee)&&w(this[ee],t)&&(this[ee][t]=!1),ve(this,t,C(1,e))};return y&&ye&&ve(re,t,{configurable:!0,set:n}),i(t,e)})[n],"toString",(function(){return ie(this).tag})),z(oe,"withoutSetter",(function(e){return i(q(e),e)})),U.f=a,B.f=r,V.f=o,F.f=s,R.f=N.f=l,L.f=u,X.f=function(e){return i(W(e),e)},y&&(ce(ae,"description",{configurable:!0,get:function(){return ie(this).description}}),b||z(re,"propertyIsEnumerable",a,{unsafe:!0}))),h({global:!0,wrap:!0,forced:!v,sham:!v},{Symbol:oe}),Z(M(d),(function(e){K(e)})),h({target:te,stat:!0,forced:!v},{for:function(e){if(e=j(e),w(me,e))return me[e];var t=oe(e);return me[e]=t,be[t]=e,t},keyFor:function(e){if(!T(e))throw se(e+" is not a symbol");if(w(be,e))return be[e]},useSetter:function(){ye=!0},useSimple:function(){ye=!1}}),h({target:"Object",stat:!0,forced:!v,sham:!y},{create:function(e,t){return void 0===t?A(e):o(A(e),t)},defineProperty:r,defineProperties:o,getOwnPropertyDescriptor:s}),h({target:"Object",stat:!0,forced:!v},{getOwnPropertyNames:l,getOwnPropertySymbols:u}),h({target:"Object",stat:!0,forced:_((function(){L.f(1)}))},{getOwnPropertySymbols:function(e){return L.f(I(e))}}),le&&h({target:"JSON",stat:!0,forced:!v||_((function(){var e=oe();return"[null]"!=le([e])||"{}"!=le({a:e})||"{}"!=le(Object(e))}))},{stringify:function(e,t,n){var i=H(arguments),r=t;if((O(t)||void 0!==e)&&!T(e))return x(t)||(t=function(e,t){if(P(r)&&(t=g(r,this,e,t)),!T(t))return t}),i[1]=t,p(le,null,i)}}),ae[Y]||(c=ae.valueOf,z(ae,Y,(function(e){return g(c,this)}))),Q(oe,te),G[ee]=!0},function(e,t,n){function i(e,t){if(e){if(e[c]!==d)try{u(e,c,d)}catch(t){e[c]=d}if(e[h]||u(e,h,t),a[t])for(var n in l)if(e[n]!==l[n])try{u(e,n,l[n])}catch(t){e[n]=l[n]}}}var r,o=n(0),a=n(138),s=n(139),l=n(5),u=n(45),c=(n=n(12))("iterator"),h=n("toStringTag"),d=l.values;for(r in a)i(o[r]&&o[r].prototype,r);i(s,"DOMTokenList")},function(e,t,n){function i(e){if(e&&e.forEach!==l)try{u(e,"forEach",l)}catch(t){e.forEach=l}}var r,o=n(0),a=n(138),s=n(139),l=n(168),u=n(45);for(r in a)a[r]&&i(o[r]&&o[r].prototype);i(s)},function(e,t,n){var i,r,o,a,s,l,u,c=n(3),h=n(17),d=n(0),f=n(1),p=n(20),g=n(14),m=n(44),b=n(23),y=n(22).f,v=(n=n(126),d.Symbol),_=v&&v.prototype;!h||!g(v)||"description"in _&&void 0===v().description||(i={},n(d=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:b(arguments[0]),t=m(_,this)?new v(e):void 0===e?v():v(e);return""===e&&(i[t]=!0),t},v),(d.prototype=_).constructor=d,r="Symbol(test)"==String(v("test")),o=f(_.toString),a=f(_.valueOf),s=/^Symbol\((.*)\)[^)]+$/,l=f("".replace),u=f("".slice),y(_,"description",{configurable:!0,get:function(){var e=a(this),t=o(e);return p(i,e)?"":""===(e=r?u(t,7,-1):l(t,s,"$1"))?void 0:e}}),c({global:!0,forced:!0},{Symbol:d}))},function(e,t,n){n(134)("iterator")},function(e,t,n){var i=n(0),r=n(77),o=n(20),a=n(78),s=n(96),l=n(123),u=r("wks"),c=i.Symbol,h=c&&c.for,d=l?c:c&&c.withoutSetter||a;e.exports=function(e){var t;return o(u,e)&&(s||"string"==typeof u[e])||(t="Symbol."+e,s&&o(c,e)?u[e]=c[e]:u[e]=(l&&h?h:d)(t)),u[e]}},function(e,t,n){var i=n(3),r=n(36),o=n(66);i({target:"Object",stat:!0,forced:n(2)((function(){o(1)}))},{keys:function(e){return o(r(e))}})},function(e,t){e.exports=function(e){return"function"==typeof e}},function(e,t,n){var i=n(3),r=n(56).filter;i({target:"Array",proto:!0,forced:!n(94)("filter")},{filter:function(e){return r(this,e,1<arguments.length?arguments[1]:void 0)}})},function(e,t,n){var i=n(3);n=n(90);i({target:"RegExp",proto:!0,forced:/./.exec!==n},{exec:n})},function(e,t,n){n=n(2),e.exports=!n((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},function(e,t,n){var i=n(0),r=n(19),o=i.String,a=i.TypeError;e.exports=function(e){if(r(e))return e;throw a(o(e)+" is not an object")}},function(e,t,n){var i=n(14);e.exports=function(e){return"object"==typeof e?null!==e:i(e)}},function(e,t,n){var i=n(1),r=n(36),o=i({}.hasOwnProperty);e.exports=Object.hasOwn||function(e,t){return o(r(e),t)}},function(e,t,n){n=n(60);var i=Function.prototype.call;e.exports=n?i.bind(i):function(){return i.apply(i,arguments)}},function(e,t,n){var i=n(0),r=n(17),o=n(124),a=n(125),s=n(18),l=n(72),u=i.TypeError,c=Object.defineProperty,h=Object.getOwnPropertyDescriptor,d="enumerable",f="configurable",p="writable";t.f=r?a?function(e,t,n){var i;return s(e),t=l(t),s(n),"function"==typeof e&&"prototype"===t&&"value"in n&&p in n&&!n[p]&&(i=h(e,t))&&i[p]&&(e[t]=n.value,n={configurable:(f in n?n:i)[f],enumerable:(d in n?n:i)[d],writable:!1}),c(e,t,n)}:c:function(e,t,n){if(s(e),t=l(t),s(n),o)try{return c(e,t,n)}catch(e){}if("get"in n||"set"in n)throw u("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){var i=n(0),r=n(83),o=i.String;e.exports=function(e){if("Symbol"===r(e))throw TypeError("Cannot convert a Symbol value to a string");return o(e)}},function(e,t,n){var i=n(3),r=n(2),o=n(30),a=n(42).f;n=n(17),r=r((function(){a(1)}));i({target:"Object",stat:!0,forced:!n||r,sham:!n},{getOwnPropertyDescriptor:function(e,t){return a(o(e),t)}})},function(e,t,n){var i=n(3),r=n(17),o=n(127),a=n(30),s=n(42),l=n(67);i({target:"Object",stat:!0,sham:!r},{getOwnPropertyDescriptors:function(e){for(var t,n,i=a(e),r=s.f,u=o(i),c={},h=0;u.length>h;)void 0!==(n=r(i,t=u[h++]))&&l(c,t,n);return c}})},function(e,t,n){var i=n(3),r=n(0),o=n(2),a=n(86),s=n(19),l=n(36),u=n(46),c=n(67),h=n(135),d=n(94),f=n(12),p=(n=n(74),f("isConcatSpreadable")),g=9007199254740991,m="Maximum allowed index exceeded",b=r.TypeError;f=51<=n||!o((function(){var e=[];return e[p]=!1,e.concat()[0]!==e})),r=d("concat");i({target:"Array",proto:!0,forced:!f||!r},{concat:function(e){for(var t,n,i,r=l(this),o=h(r,0),d=0,f=-1,y=arguments.length;f<y;f++)if(function(e){if(!s(e))return!1;var t=e[p];return void 0!==t?!!t:a(e)}(i=-1===f?r:arguments[f])){if(n=u(i),g<d+n)throw b(m);for(t=0;t<n;t++,d++)t in i&&c(o,d,i[t])}else{if(g<=d)throw b(m);c(o,d++,i)}return o.length=d,o}})},function(e,t,n){var i=n(3),r=n(0),o=n(86),a=n(85),s=n(19),l=n(101),u=n(46),c=n(30),h=n(67),d=n(12),f=n(94),p=n(106),g=(n=f("slice"),d("species")),m=r.Array,b=Math.max;i({target:"Array",proto:!0,forced:!n},{slice:function(e,t){var n,i,r,d=c(this),f=u(d),y=l(e,f),v=l(void 0===t?f:t,f);if(o(d)&&(n=d.constructor,(n=a(n)&&(n===m||o(n.prototype))||s(n)&&null===(n=n[g])?void 0:n)===m||void 0===n))return p(d,y,v);for(i=new(void 0===n?m:n)(b(v-y,0)),r=0;y<v;y++,r++)y in d&&h(i,r,d[y]);return i.length=r,i}})},function(e,t,n){var i=n(3),r=n(56).find,o=(n=n(89),"find"),a=!0;o in[]&&Array(1)[o]((function(){a=!1})),i({target:"Array",proto:!0,forced:a},{find:function(e){return r(this,e,1<arguments.length?arguments[1]:void 0)}}),n(o)},function(e,t,n){n(3)({target:"Object",stat:!0},{setPrototypeOf:n(104)})},function(e,t,n){var i=n(71),r=n(39);e.exports=function(e){return i(r(e))}},function(e,t,n){var i=n(3),r=n(2),o=n(36),a=n(82);n=n(130);i({target:"Object",stat:!0,forced:r((function(){a(1)})),sham:!n},{getPrototypeOf:function(e){return a(o(e))}})},function(e,t,n){var i=n(3),r=n(43),o=n(84),a=n(159),s=n(131),l=n(18),u=n(19),c=n(50),h=(n=n(2),r("Reflect","construct")),d=Object.prototype,f=[].push,p=n((function(){function e(){}return!(h((function(){}),[],e)instanceof e)})),g=!n((function(){h((function(){}))}));i({target:"Reflect",stat:!0,forced:r=p||g,sham:r},{construct:function(e,t){s(e),l(t);var n=arguments.length<3?e:s(arguments[2]);if(g&&!p)return h(e,t,n);if(e==n){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var i=[null];return o(f,i,t),new(o(a,e,i))}return i=n.prototype,n=c(u(i)?i:d),i=o(e,n,t),u(i)?i:n}})},function(e,t,n){var i=n(3),r=n(129).includes;n=n(89);i({target:"Array",proto:!0},{includes:function(e){return r(this,e,1<arguments.length?arguments[1]:void 0)}}),n("includes")},function(e,t,n){var i=n(17),r=n(0),o=n(1),a=n(81),s=n(37),l=n(20),u=n(117),c=n(44),h=n(73),d=n(122),f=n(2),p=n(55).f,g=n(42).f,m=n(22).f,b=n(167),y=n(92).trim,v=r[n="Number"],_=v.prototype,w=r.TypeError,x=o("".slice),P=o("".charCodeAt),O=function(e){var t,n,i,r,o,a,s,l=d(e,"number");if(h(l))throw w("Cannot convert a Symbol value to a number");if("string"==typeof l&&2<l.length)if(l=y(l),43===(e=P(l,0))||45===e){if(88===(t=P(l,2))||120===t)return NaN}else if(48===e){switch(P(l,1)){case 66:case 98:n=2,i=49;break;case 79:case 111:n=8,i=55;break;default:return+l}for(o=(r=x(l,2)).length,a=0;a<o;a++)if((s=P(r,a))<48||i<s)return NaN;return parseInt(r,n)}return+l};if(a(n,!v(" 0o1")||!v("0b1")||v("+0x1"))){for(var k,T=function(e){e=arguments.length<1?0:v(function(e){return"bigint"==typeof(e=d(e,"number"))?e:O(e)}(e));var t=this;return c(_,t)&&f((function(){b(t)}))?u(Object(e),t,T):e},S=i?p(v):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),I=0;S.length>I;I++)l(v,k=S[I])&&!l(T,k)&&m(T,k,g(v,k));s(r,n,(T.prototype=_).constructor=T)}},function(e,t,n){var i=n(3),r=n(174);i({target:"Array",stat:!0,forced:!n(152)((function(e){Array.from(e)}))},{from:r})},function(e,t,n){var i=n(0),r=n(39),o=i.Object;e.exports=function(e){return o(r(e))}},function(e,t,n){var i=n(0),r=n(14),o=n(20),a=n(45),s=n(98),l=n(100),u=n(49),c=n(64).CONFIGURABLE,h=u.get,d=u.enforce,f=String(String).split("String");(e.exports=function(e,t,n,l){var u,h=!!l&&!!l.unsafe,p=!!l&&!!l.enumerable,g=!!l&&!!l.noTargetGet;l=l&&void 0!==l.name?l.name:t;r(n)&&("Symbol("===String(l).slice(0,7)&&(l="["+String(l).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!o(n,"name")||c&&n.name!==l)&&a(n,"name",l),(u=d(n)).source||(u.source=f.join("string"==typeof l?l:""))),e===i?p?e[t]=n:s(t,n):(h?!g&&e[t]&&(p=!0):delete e[t],p?e[t]=n:a(e,t,n))})(Function.prototype,"toString",(function(){return r(this)&&h(this).source||l(this)}))},function(e,t,n){var i=n(84),r=n(21),o=n(1),a=n(112),s=n(115),l=n(18),u=n(39),c=n(164),h=n(113),d=n(65),f=n(23),p=n(53),g=n(108),m=n(114),b=n(90),y=n(111),v=(n=n(2),y.UNSUPPORTED_Y),_=4294967295,w=Math.min,x=[].push,P=o(/./.exec),O=o(x),k=o("".slice);a("split",(function(e,t,n){var o="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||1<".".split(/()()/).length||"".split(/.?/).length?function(e,n){var o=f(u(this)),a=void 0===n?_:n>>>0;if(0==a)return[];if(void 0===e)return[o];if(!s(e))return r(t,o,e,a);for(var l,c,h,d=[],p=(n=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),0),m=new RegExp(e.source,n+"g");(l=r(b,m,o))&&!(p<(c=m.lastIndex)&&(O(d,k(o,p,l.index)),1<l.length&&l.index<o.length&&i(x,d,g(l,1)),h=l[0].length,p=c,a<=d.length));)m.lastIndex===l.index&&m.lastIndex++;return p===o.length?!h&&P(m,"")||O(d,""):O(d,k(o,p)),a<d.length?g(d,0,a):d}:"0".split(void 0,0).length?function(e,n){return void 0===e&&0===n?[]:r(t,this,e,n)}:t;return[function(t,n){var i=u(this),a=null==t?void 0:p(t,e);return a?r(a,t,i,n):r(o,f(i),t,n)},function(e,i){var r=l(this),a=f(e);if((e=n(o,r,a,i,o!==t)).done)return e.value;e=c(r,RegExp);var s=r.unicode,u=(r.ignoreCase?"i":"")+(r.multiline?"m":"")+(r.unicode?"u":"")+(v?"g":"y"),p=new e(v?"^(?:"+r.source+")":r,u),g=void 0===i?_:i>>>0;if(0==g)return[];if(0===a.length)return null===m(p,a)?[a]:[];for(var b=0,y=0,x=[];y<a.length;){p.lastIndex=v?0:y;var P,T=m(p,v?k(a,y):a);if(null===T||(P=w(d(p.lastIndex+(v?y:0)),a.length))===b)y=h(a,y,s);else{if(O(x,k(a,b,y)),x.length===g)return x;for(var S=1;S<=T.length-1;S++)if(O(x,T[S]),x.length===g)return x;y=b=P}}return O(x,k(a,b)),x}]}),!!n((function(){var e=(t=/(?:)/).exec,t=(t.exec=function(){return e.apply(this,arguments)},"ab".split(t));return 2!==t.length||"a"!==t[0]||"b"!==t[1]})),v)},function(e,t,n){var i=n(0).TypeError;e.exports=function(e){if(null==e)throw i("Can't call method on "+e);return e}},function(e,t,n){var i=n(1),r=n(64).PROPER,o=n(37),a=n(18),s=n(44),l=n(23),u=n(2),c=(n=n(110),"toString"),h=RegExp.prototype,d=h[c],f=i(n);i=u((function(){return"/a/b"!=d.call({source:"a",flags:"b"})})),n=r&&d.name!=c;(i||n)&&o(RegExp.prototype,c,(function(){var e=a(this),t=l(e.source),n=e.flags;return"/"+t+"/"+l(void 0!==n||!s(h,e)||"flags"in h?n:f(e))}),{unsafe:!0})},function(e,t,n){var i=n(17),r=n(64).EXISTS,o=n(1),a=(n=n(22).f,Function.prototype),s=o(a.toString),l=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,u=o(l.exec);i&&!r&&n(a,"name",{configurable:!0,get:function(){try{return u(l,s(this))[1]}catch(e){return""}}})},function(e,t,n){var i=n(17),r=n(21),o=n(70),a=n(61),s=n(30),l=n(72),u=n(20),c=n(124),h=Object.getOwnPropertyDescriptor;t.f=i?h:function(e,t){if(e=s(e),t=l(t),c)try{return h(e,t)}catch(e){}if(u(e,t))return a(!r(o.f,e,t),e[t])}},function(e,t,n){var i=n(0),r=n(14);e.exports=function(e,t){return arguments.length<2?(n=i[e],r(n)?n:void 0):i[e]&&i[e][t];var n}},function(e,t,n){n=n(1),e.exports=n({}.isPrototypeOf)},function(e,t,n){var i=n(17),r=n(22),o=n(61);e.exports=i?function(e,t,n){return r.f(e,t,o(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){var i=n(65);e.exports=function(e){return i(e.length)}},function(e,t,n){var i=n(84),r=n(21),o=n(1),a=n(112),s=n(2),l=n(18),u=n(14),c=n(80),h=n(65),d=n(23),f=n(39),p=n(113),g=n(53),m=n(173),b=n(114),y=n(12)("replace"),v=Math.max,_=Math.min,w=o([].concat),x=o([].push),P=o("".indexOf),O=o("".slice),k=(n="$0"==="a".replace(/./,"$0"),!!/./[y]&&""===/./[y]("a","$0"));a("replace",(function(e,t,n){var o=k?"$":"$0";return[function(e,n){var i=f(this),o=null==e?void 0:g(e,y);return o?r(o,e,i,n):r(t,d(i),e,n)},function(e,r){var a=l(this),s=d(e);if("string"==typeof r&&-1===P(r,o)&&-1===P(r,"$<")&&(e=n(t,a,s,r)).done)return e.value;for(var f,g=u(r),y=(g||(r=d(r)),a.global),k=(y&&(f=a.unicode,a.lastIndex=0),[]);null!==(D=b(a,s))&&(x(k,D),y);)""===d(D[0])&&(a.lastIndex=p(s,h(a.lastIndex),f));for(var T,S="",I=0,E=0;E<k.length;E++){for(var D,j=d((D=k[E])[0]),C=v(_(c(D.index),s.length),0),A=[],M=1;M<D.length;M++)x(A,void 0===(T=D[M])?T:String(T));var R=D.groups,N=g?(N=w([j],A,C,s),void 0!==R&&x(N,R),d(i(r,void 0,N))):m(j,s,C,A,R,r);I<=C&&(S+=O(s,I,C)+N,I=C+j.length)}return S+O(s,I)}]}),!!s((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}))||!n||k)},function(e,t,n){var i=(n=n(1))({}.toString),r=n("".slice);e.exports=function(e){return r(i(e),8,-1)}},function(e,t,n){var i,r,o,a,s,l,u,c,h=n(156),d=n(0),f=n(1),p=n(19),g=n(45),m=n(20),b=n(97),y=n(79),v=(n=n(63),"Object already initialized"),_=d.TypeError;d=d.WeakMap;u=h||b.state?(i=b.state||(b.state=new d),r=f(i.get),o=f(i.has),a=f(i.set),s=function(e,t){if(o(i,e))throw new _(v);return t.facade=e,a(i,e,t),t},l=function(e){return r(i,e)||{}},function(e){return o(i,e)}):(n[c=y("state")]=!0,s=function(e,t){if(m(e,c))throw new _(v);return t.facade=e,g(e,c,t),t},l=function(e){return m(e,c)?e[c]:{}},function(e){return m(e,c)}),e.exports={set:s,get:l,has:u,enforce:function(e){return u(e)?l(e):s(e,{})},getterFor:function(e){return function(t){if(p(t)&&(t=l(t)).type===e)return t;throw _("Incompatible receiver, "+e+" required")}}}},function(e,t,n){function i(){}var r,o=n(18),a=n(132),s=n(102),l=n(63),u=n(160),c=n(99),h=(n=n(79),"prototype"),d="script",f=n("IE_PROTO"),p=function(e){return"<"+d+">"+e+"</"+d+">"},g=function(){try{r=new ActiveXObject("htmlfile")}catch(e){}g="undefined"==typeof document||document.domain&&r?function(e){e.write(p("")),e.close();var t=e.parentWindow.Object;return e=null,t}(r):(e=c("iframe"),t="java"+d+":",e.style.display="none",u.appendChild(e),e.src=String(t),(t=e.contentWindow.document).open(),t.write(p("document.F=Object")),t.close(),t.F);for(var e,t,n=s.length;n--;)delete g[h][s[n]];return g()};l[f]=!0,e.exports=Object.create||function(e,t){var n;return null!==e?(i[h]=o(e),n=new i,i[h]=null,n[f]=e):n=g(),void 0===t?n:a.f(n,t)}},function(e,t,n){var i=n(3),r=n(1),o=n(142),a=n(39),s=n(23),l=(n=n(143),r("".indexOf));i({target:"String",proto:!0,forced:!n("includes")},{includes:function(e){return!!~l(s(a(this)),s(o(e)),1<arguments.length?arguments[1]:void 0)}})},function(e,t,n){var i=n(17),r=n(0),o=n(1),a=n(81),s=n(117),l=n(45),u=n(22).f,c=n(55).f,h=n(44),d=n(115),f=n(23),p=n(110),g=n(111),m=n(37),b=n(2),y=n(20),v=n(49).enforce,_=n(144),w=n(12),x=n(140),P=n(141),O=w("match"),k=r.RegExp,T=k.prototype,S=r.SyntaxError,I=o(p),E=o(T.exec),D=o("".charAt),j=o("".replace),C=o("".indexOf),A=o("".slice),M=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,R=/a/g,N=/a/g,L=(n=new k(R)!==R,g.MISSED_STICKY),F=g.UNSUPPORTED_Y;w=i&&(!n||L||x||P||b((function(){return N[O]=!1,k(R)!=R||k(N)==N||"/a/i"!=k(R,"i")})));if(a("RegExp",w)){for(var B=function(e,t){var n,i,r=h(T,this),o=d(e),a=void 0===t,u=[],c=e;if(!r&&o&&a&&e.constructor===B)return e;if((o||h(T,e))&&(e=e.source,a&&(t="flags"in c?c.flags:I(c))),e=void 0===e?"":f(e),t=void 0===t?"":f(t),c=e,o=t=x&&"dotAll"in R&&(n=!!t&&-1<C(t,"s"))?j(t,/s/g,""):t,L&&"sticky"in R&&(i=!!t&&-1<C(t,"y"))&&F&&(t=j(t,/y/g,"")),P&&(e=(a=function(e){for(var t,n=e.length,i=0,r="",o=[],a={},s=!1,l=!1,u=0,c="";i<=n;i++){if("\\"===(t=D(e,i)))t+=D(e,++i);else if("]"===t)s=!1;else if(!s)switch(!0){case"["===t:s=!0;break;case"("===t:E(M,A(e,i+1))&&(i+=2,l=!0),r+=t,u++;continue;case">"===t&&l:if(""===c||y(a,c))throw new S("Invalid capture group name");a[c]=!0,l=!(o[o.length]=[c,u]),c="";continue}l?c+=t:r+=t}return[r,o]}(e))[0],u=a[1]),a=s(k(e,t),r?this:T,B),(n||i||u.length)&&(t=v(a),n&&(t.dotAll=!0,t.raw=B(function(e){for(var t,n=e.length,i=0,r="",o=!1;i<=n;i++)"\\"===(t=D(e,i))?r+=t+D(e,++i):o||"."!==t?("["===t?o=!0:"]"===t&&(o=!1),r+=t):r+="[\\s\\S]";return r}(e),o)),i&&(t.sticky=!0),u.length&&(t.groups=u)),e!==c)try{l(a,"source",""===c?"(?:)":c)}catch(e){}return a},V=c(k),U=0;V.length>U;)!function(e){e in B||u(B,e,{configurable:!0,get:function(){return k[e]},set:function(t){k[e]=t}})}(V[U++]);(T.constructor=B).prototype=T,m(r,"RegExp",B)}_("RegExp")},function(e,t,n){var i=n(62);e.exports=function(e,t){return null==(e=e[t])?void 0:i(e)}},function(e,t){e.exports=!1},function(e,t,n){var i=n(128),r=n(102).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return i(e,r)}},function(e,t,n){function i(e){var t=1==e,n=2==e,i=3==e,o=4==e,h=6==e,d=7==e,f=5==e||h;return function(p,g,m,b){for(var y,v,_=s(p),w=a(_),x=r(g,m),P=l(w),O=0,k=(g=b||u,t?g(p,P):n||d?g(p,0):void 0);O<P;O++)if((f||O in w)&&(v=x(y=w[O],O,_),e))if(t)k[O]=v;else if(v)switch(e){case 3:return!0;case 5:return y;case 6:return O;case 2:c(k,y)}else switch(e){case 4:return!1;case 7:c(k,y)}return h?-1:i||o?o:k}}var r=n(88),o=n(1),a=n(71),s=n(36),l=n(46),u=n(135),c=o([].push);e.exports={forEach:i(0),map:i(1),filter:i(2),some:i(3),every:i(4),find:i(5),findIndex:i(6),filterReject:i(7)}},function(e,t,n){var i=n(3),r=n(1),o=n(42).f,a=n(65),s=n(23),l=n(142),u=n(39),c=n(143),h=(n=n(54),r("".startsWith)),d=r("".slice),f=Math.min;r=c("startsWith");i({target:"String",proto:!0,forced:!(!n&&!r&&(c=o(String.prototype,"startsWith"))&&!c.writable||r)},{startsWith:function(e){var t=s(u(this)),n=(l(e),a(f(1<arguments.length?arguments[1]:void 0,t.length)));e=s(e);return h?h(t,e,n):d(t,n,n+e.length)===e}})},function(e,t,n){var i=n(3),r=n(56).map;i({target:"Array",proto:!0,forced:!n(94)("map")},{map:function(e){return r(this,e,1<arguments.length?arguments[1]:void 0)}})},function(e,t,n){var i=n(3),r=n(21),o=n(19),a=n(18),s=n(179),l=n(42),u=n(82);i({target:"Reflect",stat:!0},{get:function e(t,n){var i,c=arguments.length<3?t:arguments[2];return a(t)===c?t[n]:(i=l.f(t,n))?s(i)?i.value:void 0===i.get?void 0:r(i.get,c):o(i=u(t))?e(i,n,c):void 0}})},function(e,t,n){n=n(2),e.exports=!n((function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")}))},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,n){var i=n(0),r=n(14),o=n(76),a=i.TypeError;e.exports=function(e){if(r(e))return e;throw a(o(e)+" is not a function")}},function(e,t){e.exports={}},function(e,t,n){var i=n(17),r=(n=n(20),Function.prototype),o=i&&Object.getOwnPropertyDescriptor,a=(n=n(r,"name"))&&"something"===function(){}.name;i=n&&(!i||o(r,"name").configurable);e.exports={EXISTS:n,PROPER:a,CONFIGURABLE:i}},function(e,t,n){var i=n(80),r=Math.min;e.exports=function(e){return 0<e?r(i(e),9007199254740991):0}},function(e,t,n){var i=n(128),r=n(102);e.exports=Object.keys||function(e){return i(e,r)}},function(e,t,n){var i=n(72),r=n(22),o=n(61);e.exports=function(e,t,n){(t=i(t))in e?r.f(e,t,o(0,n)):e[t]=n}},function(e,t){e.exports={}},function(e,t,n){var i=n(21),r=n(112),o=n(18),a=n(65),s=n(23),l=n(39),u=n(53),c=n(113),h=n(114);r("match",(function(e,t,n){return[function(t){var n=l(this),r=null==t?void 0:u(t,e);return r?i(r,t,n):new RegExp(t)[e](s(n))},function(e){var i=o(this),r=s(e);if((e=n(t,i,r)).done)return e.value;if(!i.global)return h(i,r);for(var l=i.unicode,u=[],d=i.lastIndex=0;null!==(f=h(i,r));){var f=s(f[0]);""===(u[d]=f)&&(i.lastIndex=c(r,a(i.lastIndex),l)),d++}return 0===d?null:u}]}))},function(e,t,n){var i={}.propertyIsEnumerable,r=Object.getOwnPropertyDescriptor,o=r&&!i.call({1:2},1);t.f=o?function(e){return!!(e=r(this,e))&&e.enumerable}:i},function(e,t,n){var i=n(0),r=n(1),o=n(2),a=n(48),s=i.Object,l=r("".split);e.exports=o((function(){return!s("z").propertyIsEnumerable(0)}))?function(e){return"String"==a(e)?l(e,""):s(e)}:s},function(e,t,n){var i=n(122),r=n(73);e.exports=function(e){return e=i(e,"string"),r(e)?e:e+""}},function(e,t,n){var i=n(0),r=n(43),o=n(14),a=n(44),s=(n=n(123),i.Object);e.exports=n?function(e){return"symbol"==typeof e}:function(e){var t=r("Symbol");return o(t)&&a(t.prototype,s(e))}},function(e,t,n){var i,r,o=n(0),a=(n=n(75),o.process);o=o.Deno;!(r=(o=(a=a&&a.versions||o&&o.version)&&a.v8)?0<(i=o.split("."))[0]&&i[0]<4?1:+(i[0]+i[1]):r)&&n&&(!(i=n.match(/Edge\/(\d+)/))||74<=i[1])&&(i=n.match(/Chrome\/(\d+)/))&&(r=+i[1]),e.exports=r},function(e,t,n){n=n(43),e.exports=n("navigator","userAgent")||""},function(e,t,n){var i=n(0).String;e.exports=function(e){try{return i(e)}catch(e){return"Object"}}},function(e,t,n){var i=n(54),r=n(97);(e.exports=function(e,t){return r[e]||(r[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.21.1",mode:i?"pure":"global",copyright:"© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.21.1/LICENSE",source:"https://github.com/zloirock/core-js"})},function(e,t,n){n=n(1);var i=0,r=Math.random(),o=n(1..toString);e.exports=function(e){return"Symbol("+(void 0===e?"":e)+")_"+o(++i+r,36)}},function(e,t,n){var i=n(77),r=n(78),o=i("keys");e.exports=function(e){return o[e]||(o[e]=r(e))}},function(e,t){var n=Math.ceil,i=Math.floor;e.exports=function(e){return(e=+e)!=e||0==e?0:(0<e?i:n)(e)}},function(e,t,n){function i(e,t){return(e=l[s(e)])==c||e!=u&&(o(t)?r(t):!!t)}var r=n(2),o=n(14),a=/#|\.prototype\./,s=i.normalize=function(e){return String(e).replace(a,".").toLowerCase()},l=i.data={},u=i.NATIVE="N",c=i.POLYFILL="P";e.exports=i},function(e,t,n){var i=n(0),r=n(20),o=n(14),a=n(36),s=n(79),l=(n=n(130),s("IE_PROTO")),u=i.Object,c=u.prototype;e.exports=n?u.getPrototypeOf:function(e){if(e=a(e),r(e,l))return e[l];var t=e.constructor;return o(t)&&e instanceof t?t.prototype:e instanceof u?c:null}},function(e,t,n){var i=n(0),r=n(105),o=n(14),a=n(48),s=n(12)("toStringTag"),l=i.Object,u="Arguments"==a(function(){return arguments}());e.exports=r?a:function(e){var t;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(t=function(e,t){try{return e[t]}catch(e){}}(e=l(e),s))?t:u?a(e):"Object"==(t=a(e))&&o(e.callee)?"Arguments":t}},function(e,t,n){n=n(60);var i=Function.prototype,r=i.apply,o=i.call;e.exports="object"==typeof Reflect&&Reflect.apply||(n?o.bind(r):function(){return o.apply(r,arguments)})},function(e,t,n){function i(){}function r(e){if(!l(e))return!1;try{return f(i,d,e),!0}catch(e){return!1}}function o(e){if(!l(e))return!1;switch(u(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return m||!!g(p,h(e))}catch(e){return!0}}var a=n(1),s=n(2),l=n(14),u=n(83),c=n(43),h=n(100),d=[],f=c("Reflect","construct"),p=/^\s*(?:class|function)\b/,g=a(p.exec),m=!p.exec(i);o.sham=!0,e.exports=!f||s((function(){var e;return r(r.call)||!r(Object)||!r((function(){e=!0}))||e}))?o:r},function(e,t,n){var i=n(48);e.exports=Array.isArray||function(e){return"Array"==i(e)}},function(e,t,n){var i=n(22).f,r=n(20),o=n(12)("toStringTag");e.exports=function(e,t,n){(e=e&&!n?e.prototype:e)&&!r(e,o)&&i(e,o,{configurable:!0,value:t})}},function(e,t,n){var i=n(1),r=n(62),o=n(60),a=i(i.bind);e.exports=function(e,t){return r(e),void 0===t?e:o?a(e,t):function(){return e.apply(t,arguments)}}},function(e,t,n){var i=n(12),r=n(50),o=(n=n(22),i("unscopables")),a=Array.prototype;null==a[o]&&n.f(a,o,{configurable:!0,value:r(null)}),e.exports=function(e){a[o][e]=!0}},function(e,t,n){var i=n(21),r=n(1),o=n(23),a=n(110),s=n(111),l=n(77),u=n(50),c=n(49).get,h=n(140),d=(n=n(141),l("native-string-replace",String.prototype.replace)),f=RegExp.prototype.exec,p=f,g=r("".charAt),m=r("".indexOf),b=r("".replace),y=r("".slice),v=(l=/b*/g,i(f,r=/a/,"a"),i(f,l,"a"),0!==r.lastIndex||0!==l.lastIndex),_=s.BROKEN_CARET,w=void 0!==/()??/.exec("")[1];(v||w||_||h||n)&&(p=function(e){var t,n,r,s,l,h,x=this,P=c(x);e=o(e);if(k=P.raw)return k.lastIndex=x.lastIndex,T=i(p,k,e),x.lastIndex=k.lastIndex,T;var O=P.groups,k=_&&x.sticky,T=i(a,x),S=(P=x.source,0),I=e;if(k&&(T=b(T,"y",""),-1===m(T,"g")&&(T+="g"),I=y(e,x.lastIndex),0<x.lastIndex&&(!x.multiline||x.multiline&&"\n"!==g(e,x.lastIndex-1))&&(P="(?: "+P+")",I=" "+I,S++),t=new RegExp("^(?:"+P+")",T)),w&&(t=new RegExp("^"+P+"$(?!\\s)",T)),v&&(n=x.lastIndex),r=i(f,k?t:x,I),k?r?(r.input=y(r.input,S),r[0]=y(r[0],S),r.index=x.lastIndex,x.lastIndex+=r[0].length):x.lastIndex=0:v&&r&&(x.lastIndex=x.global?r.index+r[0].length:n),w&&r&&1<r.length&&i(d,r[0],t,(function(){for(s=1;s<arguments.length-2;s++)void 0===arguments[s]&&(r[s]=void 0)})),r&&O)for(r.groups=l=u(null),s=0;s<O.length;s++)l[(h=O[s])[0]]=r[h[1]];return r}),e.exports=p},function(e,t,n){var i=n(3),r=n(92).trim;i({target:"String",proto:!0,forced:n(165)("trim")},{trim:function(){return r(this)}})},function(e,t,n){function i(e){return function(t){return t=a(o(t)),1&e&&(t=s(t,l,"")),2&e?s(t,u,""):t}}var r=n(1),o=n(39),a=n(23),s=(n=n(93),r("".replace)),l=(r="["+n+"]",RegExp("^"+r+r+"*")),u=RegExp(r+r+"*$");e.exports={start:i(1),end:i(2),trim:i(3)}},function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},function(e,t,n){var i=n(2),r=n(12),o=n(74),a=r("species");e.exports=function(e){return 51<=o||!i((function(){var t=[];return(t.constructor={})[a]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},function(e,t,n){var i=n(3),r=n(1),o=n(71),a=n(30),s=(n=n(118),r([].join));r=o!=Object,o=n("join",",");i({target:"Array",proto:!0,forced:r||!o},{join:function(e){return s(a(this),void 0===e?",":e)}})},function(e,t,n){var i=n(74);n=n(2);e.exports=!!Object.getOwnPropertySymbols&&!n((function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&i&&i<41}))},function(e,t,n){var i=n(0),r=(n=n(98),"__core-js_shared__");i=i[r]||n(r,{});e.exports=i},function(e,t,n){var i=n(0),r=Object.defineProperty;e.exports=function(e,t){try{r(i,e,{value:t,configurable:!0,writable:!0})}catch(n){i[e]=t}return t}},function(e,t,n){var i=n(0),r=(n=n(19),i.document),o=n(r)&&n(r.createElement);e.exports=function(e){return o?r.createElement(e):{}}},function(e,t,n){var i=n(1),r=n(14),o=(n=n(97),i(Function.toString));r(n.inspectSource)||(n.inspectSource=function(e){return o(e)}),e.exports=n.inspectSource},function(e,t,n){var i=n(80),r=Math.max,o=Math.min;e.exports=function(e,t){return(e=i(e))<0?r(e+t,0):o(e,t)}},function(e,t){e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,n){var i=n(1),r=n(18),o=n(157);e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{(e=i(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(n,[]),t=n instanceof Array}catch(n){}return function(n,i){return r(n),o(i),t?e(n,i):n.__proto__=i,n}}():void 0)},function(e,t,n){var i={};i[n(12)("toStringTag")]="z",e.exports="[object z]"===String(i)},function(e,t,n){n=n(1),e.exports=n([].slice)},function(e,t,n){var i=n(48),r=n(30),o=n(55).f,a=n(108),s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){if(!s||"Window"!=i(e))return o(r(e));try{return o(e)}catch(e){return a(s)}}},function(e,t,n){var i=n(0),r=n(101),o=n(46),a=n(67),s=i.Array,l=Math.max;e.exports=function(e,t,n){for(var i=o(e),u=r(t,i),c=r(void 0===n?i:n,i),h=s(l(c-u,0)),d=0;u<c;u++,d++)a(h,d,e[u]);return h.length=d,h}},function(e,t,n){function i(){return this}var r=n(3),o=n(21),a=n(54),s=n(64),l=n(14),u=n(163),c=n(82),h=n(104),d=n(87),f=n(45),p=n(37),g=n(12),m=n(68),b=(n=n(136),s.PROPER),y=s.CONFIGURABLE,v=n.IteratorPrototype,_=n.BUGGY_SAFARI_ITERATORS,w=g("iterator"),x="values",P="entries";e.exports=function(e,t,n,s,g,O,k){function T(e){if(e===g&&C)return C;if(!_&&e in D)return D[e];switch(e){case"keys":case x:case P:return function(){return new n(this,e)}}return function(){return new n(this)}}u(n,t,s);s=t+" Iterator";var S,I,E=!1,D=e.prototype,j=D[w]||D["@@iterator"]||g&&D[g],C=!_&&j||T(g),A="Array"==t&&D.entries||j;if(A&&(A=c(A.call(new e)))!==Object.prototype&&A.next&&(a||c(A)===v||(h?h(A,v):l(A[w])||p(A,w,i)),d(A,s,!0,!0),a&&(m[s]=i)),b&&g==x&&j&&j.name!==x&&(!a&&y?f(D,"name",x):(E=!0,C=function(){return o(j,this)})),g)if(S={values:T(x),keys:O?C:T("keys"),entries:T(P)},k)for(I in S)!_&&!E&&I in D||p(D,I,S[I]);else r({target:t,proto:!0,forced:_||E},S);return a&&!k||D[w]===C||p(D,w,C,{name:g}),m[t]=C,S}},function(e,t,n){var i=n(18);e.exports=function(){var e=i(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},function(e,t,n){var i=n(2),r=n(0).RegExp,o=(n=i((function(){var e=r("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),n||i((function(){return!r("a","y").sticky})));i=n||i((function(){var e=r("^r","gy");return e.lastIndex=2,null!=e.exec("str")}));e.exports={BROKEN_CARET:i,MISSED_STICKY:o,UNSUPPORTED_Y:n}},function(e,t,n){n(16);var i=n(1),r=n(37),o=n(90),a=n(2),s=n(12),l=n(45),u=s("species"),c=RegExp.prototype;e.exports=function(e,t,n,h){var d,f=s(e),p=!a((function(){var t={};return t[f]=function(){return 7},7!=""[e](t)})),g=p&&!a((function(){var t=!1,n=/a/;return"split"===e&&((n={constructor:{}}).constructor[u]=function(){return n},n.flags="",n[f]=/./[f]),n.exec=function(){return t=!0,null},n[f](""),!t}));p&&g&&!n||(d=i(/./[f]),g=t(f,""[e],(function(e,t,n,r,a){e=i(e);var s=t.exec;return s===o||s===c.exec?p&&!a?{done:!0,value:d(t,n,r)}:{done:!0,value:e(n,t,r)}:{done:!1}})),r(String.prototype,e,g[0]),r(c,f,g[1])),h&&l(c[f],"sham",!0)}},function(e,t,n){var i=n(137).charAt;e.exports=function(e,t,n){return t+(n?i(e,t).length:1)}},function(e,t,n){var i=n(0),r=n(21),o=n(18),a=n(14),s=n(48),l=n(90),u=i.TypeError;e.exports=function(e,t){var n=e.exec;if(a(n))return null!==(n=r(n,e,t))&&o(n),n;if("RegExp"===s(e))return r(l,e,t);throw u("RegExp#exec called on incompatible receiver")}},function(e,t,n){var i=n(19),r=n(48),o=n(12)("match");e.exports=function(e){var t;return i(e)&&(void 0!==(t=e[o])?!!t:"RegExp"==r(e))}},function(e,t,n){var i=n(3);n=n(166);i({target:"Number",stat:!0,forced:Number.parseFloat!=n},{parseFloat:n})},function(e,t,n){var i=n(14),r=n(19),o=n(104);e.exports=function(e,t,n){return o&&i(t=t.constructor)&&t!==n&&r(t=t.prototype)&&t!==n.prototype&&o(e,t),e}},function(e,t,n){var i=n(2);e.exports=function(e,t){var n=[][e];return!!n&&i((function(){n.call(null,t||function(){return 1},1)}))}},function(e,t,n){n(145)("Set",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),n(153))},function(e,t,n){var i=n(83),r=n(53),o=n(68),a=n(12)("iterator");e.exports=function(e){if(null!=e)return r(e,a)||r(e,"@@iterator")||o[i(e)]}},function(e,t,n){var i=n(3);n=n(178);i({target:"Number",stat:!0,forced:Number.parseInt!=n},{parseInt:n})},function(e,t,n){var i=n(0),r=n(21),o=n(19),a=n(73),s=n(53),l=n(155),u=(n=n(12),i.TypeError),c=n("toPrimitive");e.exports=function(e,t){if(!o(e)||a(e))return e;var n=s(e,c);if(n){if(n=r(n,e,t=void 0===t?"default":t),!o(n)||a(n))return n;throw u("Can't convert object to primitive value")}return l(e,t=void 0===t?"number":t)}},function(e,t,n){n=n(96),e.exports=n&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},function(e,t,n){var i=n(17),r=n(2),o=n(99);e.exports=!i&&!r((function(){return 7!=Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a}))},function(e,t,n){var i=n(17);n=n(2);e.exports=i&&n((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},function(e,t,n){var i=n(20),r=n(127),o=n(42),a=n(22);e.exports=function(e,t,n){for(var s=r(t),l=a.f,u=o.f,c=0;c<s.length;c++){var h=s[c];i(e,h)||n&&i(n,h)||l(e,h,u(t,h))}}},function(e,t,n){var i=n(43),r=n(1),o=n(55),a=n(103),s=n(18),l=r([].concat);e.exports=i("Reflect","ownKeys")||function(e){var t=o.f(s(e)),n=a.f;return n?l(t,n(e)):t}},function(e,t,n){var i=n(1),r=n(20),o=n(30),a=n(129).indexOf,s=n(63),l=i([].push);e.exports=function(e,t){var n,i=o(e),u=0,c=[];for(n in i)!r(s,n)&&r(i,n)&&l(c,n);for(;t.length>u;)!r(i,n=t[u++])||~a(c,n)||l(c,n);return c}},function(e,t,n){function i(e){return function(t,n,i){var s,l=r(t),u=a(l),c=o(i,u);if(e&&n!=n){for(;c<u;)if((s=l[c++])!=s)return!0}else for(;c<u;c++)if((e||c in l)&&l[c]===n)return e||c||0;return!e&&-1}}var r=n(30),o=n(101),a=n(46);e.exports={includes:i(!0),indexOf:i(!1)}},function(e,t,n){n=n(2),e.exports=!n((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))},function(e,t,n){var i=n(0),r=n(85),o=n(76),a=i.TypeError;e.exports=function(e){if(r(e))return e;throw a(o(e)+" is not a constructor")}},function(e,t,n){var i=n(17),r=n(125),o=n(22),a=n(18),s=n(30),l=n(66);t.f=i&&!r?Object.defineProperties:function(e,t){a(e);for(var n,i=s(t),r=l(t),u=r.length,c=0;c<u;)o.f(e,n=r[c++],i[n]);return e}},function(e,t,n){n=n(12),t.f=n},function(e,t,n){var i=n(161),r=n(20),o=n(133),a=n(22).f;e.exports=function(e){var t=i.Symbol||(i.Symbol={});r(t,e)||a(t,e,{value:o.f(e)})}},function(e,t,n){var i=n(162);e.exports=function(e,t){return new(i(e))(0===t?0:t)}},function(e,t,n){var i,r,o=n(2),a=n(14),s=n(50),l=n(82),u=n(37),c=n(12),h=(n=n(54),c("iterator"));c=!1;[].keys&&("next"in(r=[].keys())?(l=l(l(r)))!==Object.prototype&&(i=l):c=!0),null==i||o((function(){var e={};return i[h].call(e)!==e}))?i={}:n&&(i=s(i)),a(i[h])||u(i,h,(function(){return this})),e.exports={IteratorPrototype:i,BUGGY_SAFARI_ITERATORS:c}},function(e,t,n){function i(e){return function(t,n){t=a(s(t)),n=o(n);var i,r=t.length;return n<0||r<=n?e?"":void 0:(i=u(t,n))<55296||56319<i||n+1===r||(r=u(t,n+1))<56320||57343<r?e?l(t,n):i:e?c(t,n,n+2):r-56320+(i-55296<<10)+65536}}var r=n(1),o=n(80),a=n(23),s=n(39),l=r("".charAt),u=r("".charCodeAt),c=r("".slice);e.exports={codeAt:i(!1),charAt:i(!0)}},function(e,t){e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},function(e,t,n){n=(n=n(99)("span").classList)&&n.constructor&&n.constructor.prototype,e.exports=n===Object.prototype?void 0:n},function(e,t,n){var i=n(2),r=n(0).RegExp;e.exports=i((function(){var e=r(".","s");return!(e.dotAll&&e.exec("\n")&&"s"===e.flags)}))},function(e,t,n){var i=n(2),r=n(0).RegExp;e.exports=i((function(){var e=r("(?<a>b)","g");return"b"!==e.exec("b").groups.a||"bc"!=="b".replace(e,"$<a>c")}))},function(e,t,n){var i=n(0),r=n(115),o=i.TypeError;e.exports=function(e){if(r(e))throw o("The method doesn't accept regular expressions");return e}},function(e,t,n){var i=n(12)("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[i]=!1,"/./"[e](t)}catch(e){}}return!1}},function(e,t,n){var i=n(43),r=n(22),o=n(12),a=n(17),s=o("species");e.exports=function(e){e=i(e);var t=r.f;a&&e&&!e[s]&&t(e,s,{configurable:!0,get:function(){return this}})}},function(e,t,n){var i=n(3),r=n(0),o=n(1),a=n(81),s=n(37),l=n(146),u=n(147),c=n(151),h=n(14),d=n(19),f=n(2),p=n(152),g=n(87),m=n(117);e.exports=function(e,t,n){function b(e){var t=o(S[e]);s(S,e,"add"==e?function(e){return t(this,0===e?0:e),this}:"delete"==e?function(e){return!(O&&!d(e))&&t(this,0===e?0:e)}:"get"==e?function(e){return O&&!d(e)?void 0:t(this,0===e?0:e)}:"has"==e?function(e){return!(O&&!d(e))&&t(this,0===e?0:e)}:function(e,n){return t(this,0===e?0:e,n),this})}var y,v,_,w,x,P=-1!==e.indexOf("Map"),O=-1!==e.indexOf("Weak"),k=P?"set":"add",T=r[e],S=T&&T.prototype,I=T,E={};return a(e,!h(T)||!(O||S.forEach&&!f((function(){(new T).entries().next()}))))?(I=n.getConstructor(t,e,P,k),l.enable()):a(e,!0)&&(v=(y=new I)[k](O?{}:-0,1)!=y,_=f((function(){y.has(1)})),w=p((function(e){new T(e)})),x=!O&&f((function(){for(var e=new T,t=5;t--;)e[k](t,t);return!e.has(-0)})),w||(((I=t((function(e,t){return c(e,S),e=m(new T,e,I),null!=t&&u(t,e[k],{that:e,AS_ENTRIES:P}),e}))).prototype=S).constructor=I),(_||x)&&(b("delete"),b("has"),P&&b("get")),(x||v)&&b(k),O&&S.clear&&delete S.clear),E[e]=I,i({global:!0,forced:I!=T},E),g(I,e),O||n.setStrong(I,e,P),I}},function(e,t,n){function i(e){u(e,m,{value:{objectID:"O"+b++,weakData:{}}})}var r=n(3),o=n(1),a=n(63),s=n(19),l=n(20),u=n(22).f,c=n(55),h=n(107),d=n(169),f=n(78),p=n(171),g=!1,m=f("meta"),b=0,y=e.exports={enable:function(){y.enable=function(){},g=!0;var e=c.f,t=o([].splice),n={};n[m]=1,e(n).length&&(c.f=function(n){for(var i=e(n),r=0,o=i.length;r<o;r++)if(i[r]===m){t(i,r,1);break}return i},r({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:h.f}))},fastKey:function(e,t){if(!s(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!l(e,m)){if(!d(e))return"F";if(!t)return"E";i(e)}return e[m].objectID},getWeakData:function(e,t){if(!l(e,m)){if(!d(e))return!0;if(!t)return!1;i(e)}return e[m].weakData},onFreeze:function(e){return p&&g&&d(e)&&!l(e,m)&&i(e),e}};a[m]=!0},function(e,t,n){function i(e,t){this.stopped=e,this.result=t}var r=n(0),o=n(88),a=n(21),s=n(18),l=n(76),u=n(148),c=n(46),h=n(44),d=n(149),f=n(120),p=n(150),g=r.TypeError,m=i.prototype;e.exports=function(e,t,n){function r(e){return y&&p(y,"normal",e),new i(!0,e)}function b(e){return k?(s(e),S?I(e[0],e[1],r):I(e[0],e[1])):S?I(e,r):I(e)}var y,v,_,w,x,P,O=n&&n.that,k=!(!n||!n.AS_ENTRIES),T=!(!n||!n.IS_ITERATOR),S=!(!n||!n.INTERRUPTED),I=o(t,O);if(T)y=e;else{if(!(n=f(e)))throw g(l(e)+" is not iterable");if(u(n)){for(v=0,_=c(e);v<_;v++)if((w=b(e[v]))&&h(m,w))return w;return new i(!1)}y=d(e,n)}for(x=y.next;!(P=a(x,y)).done;){try{w=b(P.value)}catch(e){p(y,"throw",e)}if("object"==typeof w&&w&&h(m,w))return w}return new i(!1)}},function(e,t,n){var i=n(12),r=n(68),o=i("iterator"),a=Array.prototype;e.exports=function(e){return void 0!==e&&(r.Array===e||a[o]===e)}},function(e,t,n){var i=n(0),r=n(21),o=n(62),a=n(18),s=n(76),l=n(120),u=i.TypeError;e.exports=function(e,t){var n=arguments.length<2?l(e):t;if(o(n))return a(r(n,e));throw u(s(e)+" is not iterable")}},function(e,t,n){var i=n(21),r=n(18),o=n(53);e.exports=function(e,t,n){var a,s;r(e);try{if(!(a=o(e,"return"))){if("throw"===t)throw n;return n}a=i(a,e)}catch(e){s=!0,a=e}if("throw"===t)throw n;if(s)throw a;return r(a),n}},function(e,t,n){var i=n(0),r=n(44),o=i.TypeError;e.exports=function(e,t){if(r(t,e))return e;throw o("Incorrect invocation")}},function(e,t,n){var i=n(12)("iterator"),r=!1;try{var o=0,a={next:function(){return{done:!!o++}},return:function(){r=!0}};a[i]=function(){return this},Array.from(a,(function(){throw 2}))}catch(e){}e.exports=function(e,t){if(!t&&!r)return!1;var n=!1;try{var o={};o[i]=function(){return{next:function(){return{done:n=!0}}}},e(o)}catch(e){}return n}},function(e,t,n){var i=n(22).f,r=n(50),o=n(172),a=n(88),s=n(151),l=n(147),u=n(109),c=n(144),h=n(17),d=n(146).fastKey,f=(n=n(49)).set,p=n.getterFor;e.exports={getConstructor:function(e,t,n,u){function c(e,t,n){var i,r=b(e),o=g(e,t);return o?o.value=n:(r.last=o={index:i=d(t,!0),key:t,value:n,previous:t=r.last,next:void 0,removed:!1},r.first||(r.first=o),t&&(t.next=o),h?r.size++:e.size++,"F"!==i&&(r.index[i]=o)),e}function g(e,t){e=b(e);var n,i=d(t);if("F"!==i)return e.index[i];for(n=e.first;n;n=n.next)if(n.key==t)return n}e=e((function(e,i){s(e,m),f(e,{type:t,index:r(null),first:void 0,last:void 0,size:0}),h||(e.size=0),null!=i&&l(i,e[u],{that:e,AS_ENTRIES:n})}));var m=e.prototype,b=p(t);return o(m,{clear:function(){for(var e=b(this),t=e.index,n=e.first;n;)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete t[n.index],n=n.next;e.first=e.last=void 0,h?e.size=0:this.size=0},delete:function(e){var t,n,i=b(this);return(e=g(this,e))&&(t=e.next,n=e.previous,delete i.index[e.index],e.removed=!0,n&&(n.next=t),t&&(t.previous=n),i.first==e&&(i.first=t),i.last==e&&(i.last=n),h?i.size--:this.size--),!!e},forEach:function(e){for(var t,n=b(this),i=a(e,1<arguments.length?arguments[1]:void 0);t=t?t.next:n.first;)for(i(t.value,t.key,this);t&&t.removed;)t=t.previous},has:function(e){return!!g(this,e)}}),o(m,n?{get:function(e){return(e=g(this,e))&&e.value},set:function(e,t){return c(this,0===e?0:e,t)}}:{add:function(e){return c(this,e=0===e?0:e,e)}}),h&&i(m,"size",{get:function(){return b(this).size}}),e},setStrong:function(e,t,n){var i=t+" Iterator",r=p(t),o=p(i);u(e,t,(function(e,t){f(this,{type:i,target:e,state:r(e),kind:t,last:void 0})}),(function(){for(var e=o(this),t=e.kind,n=e.last;n&&n.removed;)n=n.previous;return e.target&&(e.last=n=n?n.next:e.state.first)?"keys"==t?{value:n.key,done:!1}:"values"==t?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:{value:e.target=void 0,done:!0}}),n?"entries":"values",!n,!0),c(t)}}},function(e,t){var n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){var i=n(0),r=n(21),o=n(14),a=n(19),s=i.TypeError;e.exports=function(e,t){var n,i;if("string"===t&&o(n=e.toString)&&!a(i=r(n,e)))return i;if(o(n=e.valueOf)&&!a(i=r(n,e)))return i;if("string"!==t&&o(n=e.toString)&&!a(i=r(n,e)))return i;throw s("Can't convert object to primitive value")}},function(e,t,n){var i=n(0),r=n(14);n=n(100),i=i.WeakMap;e.exports=r(i)&&/native code/.test(n(i))},function(e,t,n){var i=n(0),r=n(14),o=i.String,a=i.TypeError;e.exports=function(e){if("object"==typeof e||r(e))return e;throw a("Can't set "+o(e)+" as a prototype")}},function(e,t,n){var i=n(105),r=n(83);e.exports=i?{}.toString:function(){return"[object "+r(this)+"]"}},function(e,t,n){var i=n(0),r=n(1),o=n(62),a=n(19),s=n(20),l=n(106),u=(n=n(60),i.Function),c=r([].concat),h=r([].join),d={};e.exports=n?u.bind:function(e){var t=o(this),n=t.prototype,i=l(arguments,1),r=function(){var n=c(i,l(arguments));if(this instanceof r){var o=t,a=n.length,f=n;if(!s(d,a)){for(var p=[],g=0;g<a;g++)p[g]="a["+g+"]";d[a]=u("C,a","return new C("+h(p,",")+")")}return d[a](o,f)}return t.apply(e,n)};return a(n)&&(r.prototype=n),r}},function(e,t,n){n=n(43),e.exports=n("document","documentElement")},function(e,t,n){n=n(0),e.exports=n},function(e,t,n){var i=n(0),r=n(86),o=n(85),a=n(19),s=n(12)("species"),l=i.Array;e.exports=function(e){var t;return r(e)&&(t=e.constructor,(o(t)&&(t===l||r(t.prototype))||a(t)&&null===(t=t[s]))&&(t=void 0)),void 0===t?l:t}},function(e,t,n){function i(){return this}var r=n(136).IteratorPrototype,o=n(50),a=n(61),s=n(87),l=n(68);e.exports=function(e,t,n,u){return t+=" Iterator",e.prototype=o(r,{next:a(+!u,n)}),s(e,t,!1,!0),l[t]=i,e}},function(e,t,n){var i=n(18),r=n(131),o=n(12)("species");e.exports=function(e,t){return void 0===(e=i(e).constructor)||null==(e=i(e)[o])?t:r(e)}},function(e,t,n){var i=n(64).PROPER,r=n(2),o=n(93);e.exports=function(e){return r((function(){return!!o[e]()||"​᠎"!=="​᠎"[e]()||i&&o[e].name!==e}))}},function(e,t,n){var i=n(0),r=n(2),o=n(1),a=n(23),s=n(92).trim,l=(n=n(93),o("".charAt)),u=i.parseFloat,c=(o=i.Symbol)&&o.iterator;i=1/u(n+"-0")!=-1/0||c&&!r((function(){u(Object(c))}));e.exports=i?function(e){e=s(a(e));var t=u(e);return 0===t&&"-"==l(e,0)?-0:t}:u},function(e,t,n){n=n(1),e.exports=n(1..valueOf)},function(e,t,n){var i=n(56).forEach;n=n(118)("forEach");e.exports=n?[].forEach:function(e){return i(this,e,1<arguments.length?arguments[1]:void 0)}},function(e,t,n){var i=n(2),r=n(19),o=n(48),a=n(170),s=Object.isExtensible;n=i((function(){}));e.exports=n||a?function(e){return!!r(e)&&(!a||"ArrayBuffer"!=o(e))&&(!s||s(e))}:s},function(e,t,n){n=n(2),e.exports=n((function(){var e;"function"==typeof ArrayBuffer&&(e=new ArrayBuffer(8),Object.isExtensible(e)&&Object.defineProperty(e,"a",{value:8}))}))},function(e,t,n){n=n(2),e.exports=!n((function(){return Object.isExtensible(Object.preventExtensions({}))}))},function(e,t,n){var i=n(37);e.exports=function(e,t,n){for(var r in t)i(e,r,t[r],n);return e}},function(e,t,n){var i=n(1),r=n(36),o=Math.floor,a=i("".charAt),s=i("".replace),l=i("".slice),u=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,c=/\$([$&'`]|\d{1,2})/g;e.exports=function(e,t,n,i,h,d){var f=n+e.length,p=i.length,g=c;return void 0!==h&&(h=r(h),g=u),s(d,g,(function(r,s){var u;switch(a(s,0)){case"$":return"$";case"&":return e;case"`":return l(t,0,n);case"'":return l(t,f);case"<":u=h[l(s,1,-1)];break;default:var c,d=+s;if(0==d)return r;if(p<d)return 0!==(c=o(d/10))&&c<=p?void 0===i[c-1]?a(s,1):i[c-1]+a(s,1):r;u=i[d-1]}return void 0===u?"":u}))}},function(e,t,n){var i=n(0),r=n(88),o=n(21),a=n(36),s=n(175),l=n(148),u=n(85),c=n(46),h=n(67),d=n(149),f=n(120),p=i.Array;e.exports=function(e){var t,n,i,g,m,b,y,v=a(e),_=(e=u(this),1<(y=arguments.length)?arguments[1]:void 0),w=void 0!==_,x=0;if(!(y=(w&&(_=r(_,2<y?arguments[2]:void 0)),f(v)))||this==p&&l(y))for(t=c(v),n=e?new this(t):p(t);x<t;x++)b=w?_(v[x],x):v[x],h(n,x,b);else for(m=(g=d(v,y)).next,n=e?new this:[];!(i=o(m,g)).done;x++)b=w?s(g,_,[i.value,x],!0):i.value,h(n,x,b);return n.length=x,n}},function(e,t,n){var i=n(18),r=n(150);e.exports=function(e,t,n,o){try{return o?t(i(n)[0],n[1]):t(n)}catch(t){r(e,"throw",t)}}},function(e,t,n){var i=n(3),r=n(2);n=n(107).f;i({target:"Object",stat:!0,forced:r((function(){return!Object.getOwnPropertyNames(1)}))},{getOwnPropertyNames:n})},function(e,t,n){n(145)("Map",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),n(153))},function(e,t,n){var i=n(0),r=n(2),o=n(1),a=n(23),s=n(92).trim,l=(n=n(93),i.parseInt),u=(i=i.Symbol)&&i.iterator,c=/^[+-]?0x/i,h=o(c.exec);i=8!==l(n+"08")||22!==l(n+"0x16")||u&&!r((function(){l(Object(u))}));e.exports=i?function(e,t){return e=s(a(e)),l(e,t>>>0||(h(c,e)?16:10))}:l},function(e,t,n){var i=n(20);e.exports=function(e){return void 0!==e&&(i(e,"value")||i(e,"writable"))}},function(e,t,n){var i=n(3),r=n(1),o=n(62),a=n(36),s=n(46),l=n(23),u=n(2),c=n(181),h=n(118),d=n(182),f=n(183),p=n(74),g=n(184),m=[],b=r(m.sort),y=r(m.push),v=(n=u((function(){m.sort(void 0)})),r=u((function(){m.sort(null)})),h=h("sort"),!u((function(){if(p)return p<70;if(!(d&&3<d)){if(f)return!0;if(g)return g<603;for(var e,t,n,i="",r=65;r<76;r++){switch(e=String.fromCharCode(r),r){case 66:case 69:case 70:case 72:t=3;break;case 68:case 71:t=4;break;default:t=2}for(n=0;n<47;n++)m.push({k:e+n,v:t})}for(m.sort((function(e,t){return t.v-e.v})),n=0;n<m.length;n++)e=m[n].k.charAt(0),i.charAt(i.length-1)!==e&&(i+=e);return"DGBEFHACIJK"!==i}})));i({target:"Array",proto:!0,forced:n||!r||!h||!v},{sort:function(e){void 0!==e&&o(e);var t=a(this);if(v)return void 0===e?b(t):b(t,e);for(var n,i,r=[],u=s(t),h=0;h<u;h++)h in t&&y(r,t[h]);for(c(r,(i=e,function(e,t){return void 0===t?-1:void 0===e?1:void 0!==i?+i(e,t)||0:l(e)>l(t)?1:-1})),n=r.length,h=0;h<n;)t[h]=r[h++];for(;h<u;)delete t[h++];return t}})},function(e,t,n){var i=n(108),r=Math.floor;e.exports=function e(t,n){var o=t.length,a=r(o/2);if(o<8){for(var s,l,u=t,c=n,h=u.length,d=1;d<h;){for(s=u[l=d];l&&0<c(u[l-1],s);)u[l]=u[--l];l!==d++&&(u[l]=s)}return u}for(var f=t,p=e(i(t,0,a),n),g=e(i(t,a),n),m=n,b=p.length,y=g.length,v=0,_=0;v<b||_<y;)f[v+_]=v<b&&_<y?m(p[v],g[_])<=0?p[v++]:g[_++]:v<b?p[v++]:g[_++];return f}},function(e,t,n){n=n(75).match(/firefox\/(\d+)/i),e.exports=!!n&&+n[1]},function(e,t,n){n=n(75),e.exports=/MSIE|Trident/.test(n)},function(e,t,n){n=n(75).match(/AppleWebKit\/(\d+)\./),e.exports=!!n&&+n[1]},function(e,t,n){var i=n(3);n=n(186);i({target:"Object",stat:!0,forced:Object.assign!==n},{assign:n})},function(e,t,n){var i=n(17),r=n(1),o=n(21),a=n(2),s=n(66),l=n(103),u=n(70),c=n(36),h=n(71),d=Object.assign,f=Object.defineProperty,p=r([].concat);e.exports=!d||a((function(){if(i&&1!==d({b:1},d(f({},"a",{enumerable:!0,get:function(){f(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach((function(e){t[e]=e})),7!=d({},e)[n]||s(d({},t)).join("")!=r}))?function(e,t){for(var n=c(e),r=arguments.length,a=1,d=l.f,f=u.f;a<r;)for(var g,m=h(arguments[a++]),b=d?p(s(m),d(m)):s(m),y=b.length,v=0;v<y;)g=b[v++],i&&!o(f,m,g)||(n[g]=m[g]);return n}:d},function(e,t,n){var i=n(3),r=n(56).findIndex,o=(n=n(89),"findIndex"),a=!0;o in[]&&Array(1)[o]((function(){a=!1})),i({target:"Array",proto:!0,forced:a},{findIndex:function(e){return r(this,e,1<arguments.length?arguments[1]:void 0)}}),n(o)},function(e,t,n){n(3)({target:"Number",stat:!0},{isNaN:function(e){return e!=e}})},function(e,t,n){var i=n(3),r=n(190).values;i({target:"Object",stat:!0},{values:function(e){return r(e)}})},function(e,t,n){function i(e){return function(t){for(var n,i=s(t),o=a(i),c=o.length,h=0,d=[];h<c;)n=o[h++],r&&!l(i,n)||u(d,e?[n,i[n]]:i[n]);return d}}var r=n(17),o=n(1),a=n(66),s=n(30),l=o(n(70).f),u=o([].push);e.exports={entries:i(!0),values:i(!1)}},function(e,t,n){n=n(3);var i=Math.ceil,r=Math.floor;n({target:"Math",stat:!0},{trunc:function(e){return(0<e?r:i)(e)}})},,function(e,t,n){n.r(t);var i={};function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e){return(e=P(e))&&document.querySelector(e)?e:null}function a(e){return(e=P(e))?document.querySelector(e):null}function s(e){e.dispatchEvent(new Event(x))}function l(e){return O(e)?e.jquery?e[0]:e:"string"==typeof e&&0<e.length?document.querySelector(e):null}function u(e,t,n){Object.keys(n).forEach((function(i){var r=n[i],o=(o=t[i])&&O(o)?"element":null==o?"".concat(o):{}.toString.call(o).match(/\s([a-z]+)/i)[1].toLowerCase();if(!new RegExp(r).test(o))throw new TypeError("".concat(e.toUpperCase(),': Option "').concat(i,'" provided type "').concat(o,'" but expected type "').concat(r,'".'))}))}function c(e){return!(!O(e)||0===e.getClientRects().length)&&"visible"===getComputedStyle(e).getPropertyValue("visibility")}function h(e){return!e||e.nodeType!==Node.ELEMENT_NODE||!!e.classList.contains("disabled")||(void 0!==e.disabled?e.disabled:e.hasAttribute("disabled")&&"false"!==e.getAttribute("disabled"))}function d(e){return document.documentElement.attachShadow?"function"==typeof e.getRootNode?(t=e.getRootNode())instanceof ShadowRoot?t:null:e instanceof ShadowRoot?e:e.parentNode?d(e.parentNode):null:null;var t}function f(){}function p(e){e.offsetHeight}function g(){var e=window.jQuery;return e&&!document.body.hasAttribute("data-bs-no-jquery")?e:null}function m(){return"rtl"===document.documentElement.dir}function b(e){var t;t=function(){var t,n,i=g();i&&(t=e.NAME,n=i.fn[t],i.fn[t]=e.jQueryInterface,i.fn[t].Constructor=e,i.fn[t].noConflict=function(){return i.fn[t]=n,e.jQueryInterface})},"loading"===document.readyState?(k.length||document.addEventListener("DOMContentLoaded",(function(){k.forEach((function(e){return e()}))})),k.push(t)):t()}function y(e){"function"==typeof e&&e()}function v(e,t){var n,i;2<arguments.length&&void 0!==arguments[2]&&!arguments[2]?y(e):(n=function(e){if(!e)return 0;var t=(e=window.getComputedStyle(e)).transitionDuration,n=(e=e.transitionDelay,Number.parseFloat(t)),i=Number.parseFloat(e);return n||i?(t=t.split(",")[0],e=e.split(",")[0],(Number.parseFloat(t)+Number.parseFloat(e))*w):0}(t)+5,i=!1,t.addEventListener(x,(function n(r){r.target===t&&(i=!0,t.removeEventListener(x,n),y(e))})),setTimeout((function(){i||s(t)}),n))}function _(e,t,n,i){if(-1===(t=e.indexOf(t)))return e[!n&&i?e.length-1:0];var r=e.length;return t+=n?1:-1,i&&(t=(t+r)%r),e[Math.max(0,Math.min(t,r-1))]}n.r(i),n.d(i,"top",(function(){return ne})),n.d(i,"bottom",(function(){return ie})),n.d(i,"right",(function(){return re})),n.d(i,"left",(function(){return oe})),n.d(i,"auto",(function(){return ae})),n.d(i,"basePlacements",(function(){return se})),n.d(i,"start",(function(){return le})),n.d(i,"end",(function(){return ue})),n.d(i,"clippingParents",(function(){return ce})),n.d(i,"viewport",(function(){return he})),n.d(i,"popper",(function(){return de})),n.d(i,"reference",(function(){return fe})),n.d(i,"variationPlacements",(function(){return pe})),n.d(i,"placements",(function(){return ge})),n.d(i,"beforeRead",(function(){return me})),n.d(i,"read",(function(){return be})),n.d(i,"afterRead",(function(){return ye})),n.d(i,"beforeMain",(function(){return ve})),n.d(i,"main",(function(){return _e})),n.d(i,"afterMain",(function(){return we})),n.d(i,"beforeWrite",(function(){return xe})),n.d(i,"write",(function(){return Pe})),n.d(i,"afterWrite",(function(){return Oe})),n.d(i,"modifierPhases",(function(){return ke})),n.d(i,"applyStyles",(function(){return je})),n.d(i,"arrow",(function(){return We})),n.d(i,"computeStyles",(function(){return Je})),n.d(i,"eventListeners",(function(){return et})),n.d(i,"flip",(function(){return pt})),n.d(i,"hide",(function(){return bt})),n.d(i,"offset",(function(){return yt})),n.d(i,"popperOffsets",(function(){return vt})),n.d(i,"preventOverflow",(function(){return _t})),n.d(i,"popperGenerator",(function(){return Ot})),n.d(i,"detectOverflow",(function(){return ft})),n.d(i,"createPopperBase",(function(){return kt})),n.d(i,"createPopper",(function(){return Tt})),n.d(i,"createPopperLite",(function(){return St})),n(29),n(31),n(4),n(32),n(7),n(10),n(11),n(5),n(6),n(8),n(16),n(69),n(33),n(51),n(57),n(38),n(91),n(116),n(34),n(9),n(13),n(52),n(40),n(26);var w=1e3,x="transitionend",P=function(e){var t=e.getAttribute("data-bs-target");if(!t||"#"===t){if(!(e=e.getAttribute("href"))||!e.includes("#")&&!e.startsWith("."))return null;t=(e=e.includes("#")&&!e.startsWith("#")?"#".concat(e.split("#")[1]):e)&&"#"!==e?e.trim():null}return t},O=function(e){return!(!e||"object"!==r(e))&&void 0!==(e=void 0!==e.jquery?e[0]:e).nodeType},k=[];function T(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,r,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(i=n.next()).done)&&(o.push(i.value),!t||o.length!==t);a=!0);}catch(e){s=!0,r=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw r}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return S(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?S(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}n(119),n(47),n(27),n(41),n(35);var I=/[^.]*(?=\..*)\.|.*/,E=/\..*/,D=/::\d+$/,j={},C=1,A={mouseenter:"mouseover",mouseleave:"mouseout"},M=/^(mouseenter|mouseleave)/i,R=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function N(e,t){return t&&"".concat(t,"::").concat(C++)||e.uidEvent||C++}function L(e){var t=N(e);return e.uidEvent=t,j[t]=j[t]||{},j[t]}function F(e,t,n){for(var i=2<arguments.length&&void 0!==n?n:null,r=Object.keys(e),o=0,a=r.length;o<a;o++){var s=e[r[o]];if(s.originalHandler===t&&s.delegationSelector===i)return s}return null}function B(e,t,n){var i="string"==typeof t;n=i?n:t,t=H(e);return[i,n,t=R.has(t)?t:e]}function V(e,t,n,i,r){var o,a,s,l,u,c,h,d,f,p;"string"==typeof t&&e&&(n||(n=i,i=null),M.test(t)&&(s=function(e){return function(t){if(!t.relatedTarget||t.relatedTarget!==t.delegateTarget&&!t.delegateTarget.contains(t.relatedTarget))return e.call(this,t)}},i?i=s(i):n=s(n)),o=(s=T(B(t,n,i),3))[0],a=s[1],s=s[2],(u=F(l=(l=L(e))[s]||(l[s]={}),a,o?n:null))?u.oneOff=u.oneOff&&r:(u=N(a,t.replace(I,"")),(t=o?(d=e,f=n,p=i,function e(t){for(var n=d.querySelectorAll(f),i=t.target;i&&i!==this;i=i.parentNode)for(var r=n.length;r--;)if(n[r]===i)return t.delegateTarget=i,e.oneOff&&z.off(d,t.type,f,p),p.apply(i,[t]);return null}):(c=e,h=n,function e(t){return t.delegateTarget=c,e.oneOff&&z.off(c,t.type,h),h.apply(c,[t])})).delegationSelector=o?n:null,t.originalHandler=a,t.oneOff=r,l[t.uidEvent=u]=t,e.addEventListener(s,t,o)))}function U(e,t,n,i,r){(i=F(t[n],i,r))&&(e.removeEventListener(n,i,Boolean(r)),delete t[n][i.uidEvent])}function H(e){return e=e.replace(E,""),A[e]||e}var z={on:function(e,t,n,i){V(e,t,n,i,!1)},one:function(e,t,n,i){V(e,t,n,i,!0)},off:function(e,t,n,i){if("string"==typeof t&&e){var r=(i=T(B(t,n,i),3))[0],o=i[1],a=i[2],s=a!==t,l=L(e);i=t.startsWith(".");if(void 0!==o)return l&&l[a]?void U(e,l,a,o,r?n:null):void 0;i&&Object.keys(l).forEach((function(n){var i,r,o,a,s;i=e,r=l,o=n,a=t.slice(1),s=r[o]||{},Object.keys(s).forEach((function(e){e.includes(a)&&(e=s[e],U(i,r,o,e.originalHandler,e.delegationSelector))}))}));var u=l[a]||{};Object.keys(u).forEach((function(n){var i=n.replace(D,"");s&&!t.includes(i)||(i=u[n],U(e,l,a,i.originalHandler,i.delegationSelector))}))}},trigger:function(e,t,n){if("string"!=typeof t||!e)return null;var i,r=g(),o=H(t),a=t!==o,s=R.has(o),l=!0,u=!0,c=!1,h=null;return a&&r&&(i=r.Event(t,n),r(e).trigger(i),l=!i.isPropagationStopped(),u=!i.isImmediatePropagationStopped(),c=i.isDefaultPrevented()),s?(h=document.createEvent("HTMLEvents")).initEvent(o,l,!0):h=new CustomEvent(t,{bubbles:l,cancelable:!0}),void 0!==n&&Object.keys(n).forEach((function(e){Object.defineProperty(h,e,{get:function(){return n[e]}})})),c&&h.preventDefault(),u&&e.dispatchEvent(h),h.defaultPrevented&&void 0!==i&&i.preventDefault(),h}},$=z,Y=(n(176),n(177),new Map),G=function(e,t,n){Y.has(e)||Y.set(e,new Map),(e=Y.get(e)).has(t)||0===e.size?e.set(t,n):console.error("Bootstrap doesn't allow more than one instance per element. Bound instance: ".concat(Array.from(e.keys())[0],"."))};function q(e){return(q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function W(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var X=function(){function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");(t=l(t))&&(this._element=t,G(this._element,this.constructor.DATA_KEY,this))}var t,n,i;return t=e,i=[{key:"getInstance",value:function(e){return function(e,t){return Y.has(e)&&Y.get(e).get(t)||null}(l(e),this.DATA_KEY)}},{key:"getOrCreateInstance",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return this.getInstance(e)||new this(e,"object"===q(t)?t:null)}},{key:"VERSION",get:function(){return"5.1.3"}},{key:"NAME",get:function(){throw new Error('You have to implement the static method "NAME", for each component!')}},{key:"DATA_KEY",get:function(){return"bs.".concat(this.NAME)}},{key:"EVENT_KEY",get:function(){return".".concat(this.DATA_KEY)}}],(n=[{key:"dispose",value:function(){var e=this;(function(e,t){var n;Y.has(e)&&((n=Y.get(e)).delete(t),0===n.size&&Y.delete(e))})(this._element,this.constructor.DATA_KEY),$.off(this._element,this.constructor.EVENT_KEY),Object.getOwnPropertyNames(this).forEach((function(t){e[t]=null}))}},{key:"_queueCallback",value:function(e,t){v(e,t,!(2<arguments.length&&void 0!==arguments[2])||arguments[2])}}])&&W(t.prototype,n),i&&W(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}();function K(e){return(K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Q(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function J(e,t){return(J=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Z(e){return(Z=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}t=".".concat("bs.button");var ee='[data-bs-toggle="button"]',te=(t="click".concat(t).concat(".data-api"),function(){var e=r,t=X;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&J(e,t);var n,i=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=Z(e);if(n=t?(n=Z(this).constructor,Reflect.construct(i,arguments,n)):i.apply(this,arguments),i=this,n&&("object"===K(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==i)return i;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(r);function r(){var e=this,t=r;if(e instanceof t)return i.apply(this,arguments);throw new TypeError("Cannot call a class as a function")}return e=r,t=[{key:"NAME",get:function(){return"button"}},{key:"jQueryInterface",value:function(e){return this.each((function(){var t=r.getOrCreateInstance(this);"toggle"===e&&t[e]()}))}}],(n=[{key:"toggle",value:function(){this._element.setAttribute("aria-pressed",this._element.classList.toggle("active"))}}])&&Q(e.prototype,n),t&&Q(e,t),Object.defineProperty(e,"prototype",{writable:!1}),r}()),ne=(t=($.on(document,t,ee,(function(e){e.preventDefault(),e=e.target.closest(ee),te.getOrCreateInstance(e).toggle()})),b(te),te),n(28),n(58),n(121),n(15),n(59),n(24),n(25),"top"),ie="bottom",re="right",oe="left",ae="auto",se=[ne,ie,re,oe],le="start",ue="end",ce="clippingParents",he="viewport",de="popper",fe="reference",pe=se.reduce((function(e,t){return e.concat([t+"-"+le,t+"-"+ue])}),[]),ge=[].concat(se,[ae]).reduce((function(e,t){return e.concat([t,t+"-"+le,t+"-"+ue])}),[]),me="beforeRead",be="read",ye="afterRead",ve="beforeMain",_e="main",we="afterMain",xe="beforeWrite",Pe="write",Oe="afterWrite",ke=[me,be,ye,ve,_e,we,xe,Pe,Oe];function Te(e){return e?(e.nodeName||"").toLowerCase():null}function Se(e){return null==e?window:"[object Window]"!==e.toString()?(t=e.ownerDocument)&&t.defaultView||window:e;var t}function Ie(e){return e instanceof Se(e).Element||e instanceof Element}function Ee(e){return e instanceof Se(e).HTMLElement||e instanceof HTMLElement}function De(e){if("undefined"!=typeof ShadowRoot)return e instanceof Se(e).ShadowRoot||e instanceof ShadowRoot}var je={name:"applyStyles",enabled:!0,phase:"write",fn:function(e){var t=e.state;Object.keys(t.elements).forEach((function(e){var n=t.styles[e]||{},i=t.attributes[e]||{},r=t.elements[e];Ee(r)&&Te(r)&&(Object.assign(r.style,n),Object.keys(i).forEach((function(e){var t=i[e];!1===t?r.removeAttribute(e):r.setAttribute(e,!0===t?"":t)})))}))},effect:function(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach((function(e){var i=t.elements[e],r=t.attributes[e]||{};e=Object.keys((t.styles.hasOwnProperty(e)?t.styles:n)[e]).reduce((function(e,t){return e[t]="",e}),{});Ee(i)&&Te(i)&&(Object.assign(i.style,e),Object.keys(r).forEach((function(e){i.removeAttribute(e)})))}))}},requires:["computeStyles"]};function Ce(e){return e.split("-")[0]}var Ae=Math.max,Me=Math.min,Re=Math.round;function Ne(e,t){void 0===t&&(t=!1);var n=e.getBoundingClientRect(),i=1,r=1;return Ee(e)&&t&&(t=e.offsetHeight,0<(e=e.offsetWidth)&&(i=Re(n.width)/e||1),0<t&&(r=Re(n.height)/t||1)),{width:n.width/i,height:n.height/r,top:n.top/r,right:n.right/i,bottom:n.bottom/r,left:n.left/i,x:n.left/i,y:n.top/r}}function Le(e){var t=Ne(e),n=e.offsetWidth,i=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-i)<=1&&(i=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:i}}function Fe(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&De(n)){var i=t;do{if(i&&e.isSameNode(i))return!0}while(i=i.parentNode||i.host)}return!1}function Be(e){return Se(e).getComputedStyle(e)}function Ve(e){return((Ie(e)?e.ownerDocument:e.document)||window.document).documentElement}function Ue(e){return"html"===Te(e)?e:e.assignedSlot||e.parentNode||(De(e)?e.host:null)||Ve(e)}function He(e){return Ee(e)&&"fixed"!==Be(e).position?e.offsetParent:null}function ze(e){for(var t=Se(e),n=He(e);n&&0<=["table","td","th"].indexOf(Te(n))&&"static"===Be(n).position;)n=He(n);return(!n||"html"!==Te(n)&&("body"!==Te(n)||"static"!==Be(n).position))&&(n||function(e){var t=-1!==navigator.userAgent.toLowerCase().indexOf("firefox");if(-1!==navigator.userAgent.indexOf("Trident")&&Ee(e)&&"fixed"===Be(e).position)return null;var n=Ue(e);for(De(n)&&(n=n.host);Ee(n)&&["html","body"].indexOf(Te(n))<0;){var i=Be(n);if("none"!==i.transform||"none"!==i.perspective||"paint"===i.contain||-1!==["transform","perspective"].indexOf(i.willChange)||t&&"filter"===i.willChange||t&&i.filter&&"none"!==i.filter)return n;n=n.parentNode}return null}(e))||t}function $e(e){return 0<=["top","bottom"].indexOf(e)?"x":"y"}function Ye(e,t,n){return Ae(e,Me(t,n))}function Ge(e){return Object.assign({},{top:0,right:0,bottom:0,left:0},e)}function qe(e,t){return t.reduce((function(t,n){return t[n]=e,t}),{})}var We={name:"arrow",enabled:!0,phase:"main",fn:function(e){var t,n,i,r,o=e.state,a=e.name,s=(e=e.options,o.elements.arrow),l=o.modifiersData.popperOffsets,u=$e(c=Ce(o.placement)),c=0<=[oe,re].indexOf(c)?"height":"width";s&&l&&(n=o,n=Ge("number"!=typeof(e="function"==typeof(e=e.padding)?e(Object.assign({},n.rects,{placement:n.placement})):e)?e:qe(e,se)),e=Le(s),r="y"===u?ne:oe,i="y"===u?ie:re,t=o.rects.reference[c]+o.rects.reference[u]-l[u]-o.rects.popper[c],l=l[u]-o.rects.reference[u],s=(s=ze(s))?"y"===u?s.clientHeight||0:s.clientWidth||0:0,r=n[r],n=s-e[c]-n[i],r=Ye(r,i=s/2-e[c]/2+(t/2-l/2),n),o.modifiersData[a]=((s={})[u]=r,s.centerOffset=r-i,s))},effect:function(e){var t=e.state;null!=(e=void 0===(e=e.options.element)?"[data-popper-arrow]":e)&&("string"!=typeof e||(e=t.elements.popper.querySelector(e)))&&Fe(t.elements.popper,e)&&(t.elements.arrow=e)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Xe(e){return e.split("-")[1]}var Ke={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Qe(e){var t,n,i,r=e.popper,o=e.popperRect,a=e.placement,s=e.variation,l=e.offsets,u=e.position,c=e.gpuAcceleration,h=e.adaptive,d=e.roundOffsets,f=(e=e.isFixed,void 0===(f=l.x)?0:f),p=void 0===(p=l.y)?0:p,g=(f=(g="function"==typeof d?d({x:f,y:p}):{x:f,y:p}).x,p=g.y,l.hasOwnProperty("x")),m=(l=l.hasOwnProperty("y"),oe),b=ne,y=window;h&&(n="clientHeight",t="clientWidth",(i=ze(r))===Se(r)&&"static"!==Be(i=Ve(r)).position&&"absolute"===u&&(n="scrollHeight",t="scrollWidth"),a!==ne&&(a!==oe&&a!==re||s!==ue)||(b=ie,p=(p-((e&&i===y&&y.visualViewport?y.visualViewport.height:i[n])-o.height))*(c?1:-1)),a!==oe&&(a!==ne&&a!==ie||s!==ue)||(m=re,f=(f-((e&&i===y&&y.visualViewport?y.visualViewport.width:i[t])-o.width))*(c?1:-1))),r=Object.assign({position:u},h&&Ke);return f=(e=!0===d?(a=(n={x:f,y:p}).x,n=n.y,s=window.devicePixelRatio||1,{x:Re(a*s)/s||0,y:Re(n*s)/s||0}):{x:f,y:p}).x,p=e.y,c?Object.assign({},r,((i={})[b]=l?"0":"",i[m]=g?"0":"",i.transform=(y.devicePixelRatio||1)<=1?"translate("+f+"px, "+p+"px)":"translate3d("+f+"px, "+p+"px, 0)",i)):Object.assign({},r,((t={})[b]=l?p+"px":"",t[m]=g?f+"px":"",t.transform="",t))}var Je={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(e){var t=e.state,n=void 0===(n=(e=e.options).gpuAcceleration)||n,i=void 0===(i=e.adaptive)||i;e=void 0===(e=e.roundOffsets)||e,n={placement:Ce(t.placement),variation:Xe(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:n,isFixed:"fixed"===t.options.strategy};null!=t.modifiersData.popperOffsets&&(t.styles.popper=Object.assign({},t.styles.popper,Qe(Object.assign({},n,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:i,roundOffsets:e})))),null!=t.modifiersData.arrow&&(t.styles.arrow=Object.assign({},t.styles.arrow,Qe(Object.assign({},n,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:e})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})},data:{}},Ze={passive:!0},et={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(e){var t=e.state,n=e.instance,i=(e=e.options).scroll,r=void 0===i||i,o=void 0===(i=e.resize)||i,a=Se(t.elements.popper),s=[].concat(t.scrollParents.reference,t.scrollParents.popper);return r&&s.forEach((function(e){e.addEventListener("scroll",n.update,Ze)})),o&&a.addEventListener("resize",n.update,Ze),function(){r&&s.forEach((function(e){e.removeEventListener("scroll",n.update,Ze)})),o&&a.removeEventListener("resize",n.update,Ze)}},data:{}},tt={left:"right",right:"left",bottom:"top",top:"bottom"};function nt(e){return e.replace(/left|right|bottom|top/g,(function(e){return tt[e]}))}var it={start:"end",end:"start"};function rt(e){return e.replace(/start|end/g,(function(e){return it[e]}))}function ot(e){return{scrollLeft:(e=Se(e)).pageXOffset,scrollTop:e.pageYOffset}}function at(e){return Ne(Ve(e)).left+ot(e).scrollLeft}function st(e){var t=(e=Be(e)).overflow,n=e.overflowX;e=e.overflowY;return/auto|scroll|overlay|hidden/.test(t+e+n)}function lt(e,t){void 0===t&&(t=[]);var n=function e(t){return 0<=["html","body","#document"].indexOf(Te(t))?t.ownerDocument.body:Ee(t)&&st(t)?t:e(Ue(t))}(e),i=(e=n===(null==(e=e.ownerDocument)?void 0:e.body),Se(n));i=e?[i].concat(i.visualViewport||[],st(n)?n:[]):n,n=t.concat(i);return e?n:n.concat(lt(Ue(i)))}function ut(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function ct(e,t){return t===he?ut((i=Se(n=e),r=Ve(n),i=i.visualViewport,o=r.clientWidth,r=r.clientHeight,s=a=0,i&&(o=i.width,r=i.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(a=i.offsetLeft,s=i.offsetTop)),{width:o,height:r,x:a+at(n),y:s})):Ie(t)?((o=Ne(i=t)).top=o.top+i.clientTop,o.left=o.left+i.clientLeft,o.bottom=o.top+i.clientHeight,o.right=o.left+i.clientWidth,o.width=i.clientWidth,o.height=i.clientHeight,o.x=o.left,o.y=o.top,o):ut((r=Ve(e),a=Ve(r),n=ot(r),s=null==(s=r.ownerDocument)?void 0:s.body,t=Ae(a.scrollWidth,a.clientWidth,s?s.scrollWidth:0,s?s.clientWidth:0),e=Ae(a.scrollHeight,a.clientHeight,s?s.scrollHeight:0,s?s.clientHeight:0),r=-n.scrollLeft+at(r),n=-n.scrollTop,"rtl"===Be(s||a).direction&&(r+=Ae(a.clientWidth,s?s.clientWidth:0)-t),{width:t,height:e,x:r,y:n}));var n,i,r,o,a,s}function ht(e,t,n){var i,r="clippingParents"===t?(o=lt(Ue(r=e)),Ie(i=0<=["absolute","fixed"].indexOf(Be(r).position)&&Ee(r)?ze(r):r)?o.filter((function(e){return Ie(e)&&Fe(e,i)&&"body"!==Te(e)})):[]):[].concat(t),o=[].concat(r,[n]);t=o[0],n=o.reduce((function(t,n){return n=ct(e,n),t.top=Ae(n.top,t.top),t.right=Me(n.right,t.right),t.bottom=Me(n.bottom,t.bottom),t.left=Ae(n.left,t.left),t}),ct(e,t));return n.width=n.right-n.left,n.height=n.bottom-n.top,n.x=n.left,n.y=n.top,n}function dt(e){var t,n=e.reference,i=e.element,r=(e=e.placement)?Ce(e):null,o=(e=e?Xe(e):null,n.x+n.width/2-i.width/2),a=n.y+n.height/2-i.height/2;switch(r){case ne:t={x:o,y:n.y-i.height};break;case ie:t={x:o,y:n.y+n.height};break;case re:t={x:n.x+n.width,y:a};break;case oe:t={x:n.x-i.width,y:a};break;default:t={x:n.x,y:n.y}}var s=r?$e(r):null;if(null!=s){var l="y"===s?"height":"width";switch(e){case le:t[s]=t[s]-(n[l]/2-i[l]/2);break;case ue:t[s]=t[s]+(n[l]/2-i[l]/2)}}return t}function ft(e,t){var n,i=void 0===(i=(t=t=void 0===t?{}:t).placement)?e.placement:i,r=void 0===(r=t.boundary)?ce:r,o=void 0===(o=t.rootBoundary)?he:o,a=void 0===(a=t.elementContext)?de:a,s=void 0!==(s=t.altBoundary)&&s,l=(t=Ge("number"!=typeof(t=void 0===(t=t.padding)?0:t)?t:qe(t,se)),e.rects.popper),u=(s=ht(Ie(s=e.elements[s?a===de?fe:de:a])?s:s.contextElement||Ve(e.elements.popper),r,o),o=dt({reference:r=Ne(e.elements.reference),element:l,strategy:"absolute",placement:i}),l=ut(Object.assign({},l,o)),o=a===de?l:r,{top:s.top-o.top+t.top,bottom:o.bottom-s.bottom+t.bottom,left:s.left-o.left+t.left,right:o.right-s.right+t.right});l=e.modifiersData.offset;return a===de&&l&&(n=l[i],Object.keys(u).forEach((function(e){var t=0<=[re,ie].indexOf(e)?1:-1,i=0<=[ne,ie].indexOf(e)?"y":"x";u[e]+=n[i]*t}))),u}var pt={name:"flip",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options;e=e.name;if(!t.modifiersData[e]._skip){for(var i,r=void 0===(a=n.mainAxis)||a,o=void 0===(a=n.altAxis)||a,a=n.fallbackPlacements,s=n.padding,l=n.boundary,u=n.rootBoundary,c=n.altBoundary,h=void 0===(i=n.flipVariations)||i,d=n.allowedAutoPlacements,f=(n=Ce(i=t.options.placement),a=a||(n!==i&&h?function(e){if(Ce(e)===ae)return[];var t=nt(e);return[rt(e),t,rt(t)]}(i):[nt(i)]),[i].concat(a).reduce((function(e,n){return e.concat(Ce(n)===ae?(i=t,r=(e=e=void 0===(e={placement:n,boundary:l,rootBoundary:u,padding:s,flipVariations:h,allowedAutoPlacements:d})?{}:e).placement,o=e.boundary,a=e.rootBoundary,c=e.padding,f=e.flipVariations,p=void 0===(e=e.allowedAutoPlacements)?ge:e,e=(g=Xe(r))?f?pe:pe.filter((function(e){return Xe(e)===g})):se,m=(r=0===(r=e.filter((function(e){return 0<=p.indexOf(e)}))).length?e:r).reduce((function(e,t){return e[t]=ft(i,{placement:t,boundary:o,rootBoundary:a,padding:c})[Ce(t)],e}),{}),Object.keys(m).sort((function(e,t){return m[e]-m[t]}))):n);var i,r,o,a,c,f,p,g,m}),[])),p=t.rects.reference,g=t.rects.popper,m=new Map,b=!0,y=f[0],v=0;v<f.length;v++){var _=f[v],w=Ce(_),x=Xe(_)===le,P=(k=0<=[ne,ie].indexOf(w))?"width":"height",O=ft(t,{placement:_,boundary:l,rootBoundary:u,altBoundary:c,padding:s}),k=k?x?re:oe:x?ie:ne;x=(p[P]>g[P]&&(k=nt(k)),nt(k)),P=[];if(r&&P.push(O[w]<=0),o&&P.push(O[k]<=0,O[x]<=0),P.every((function(e){return e}))){y=_,b=!1;break}m.set(_,P)}if(b)for(var T=h?3:1;0<T&&"break"!==function(e){var t=f.find((function(t){if(t=m.get(t))return t.slice(0,e).every((function(e){return e}))}));if(t)return y=t,"break"}(T);T--);t.placement!==y&&(t.modifiersData[e]._skip=!0,t.placement=y,t.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function gt(e,t,n){return{top:e.top-t.height-(n=void 0===n?{x:0,y:0}:n).y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function mt(e){return[ne,re,ie,oe].some((function(t){return 0<=e[t]}))}var bt={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(e){var t=e.state,n=(e=e.name,t.rects.reference),i=t.rects.popper,r=t.modifiersData.preventOverflow,o=ft(t,{elementContext:"reference"}),a=ft(t,{altBoundary:!0});o=gt(o,n),n=gt(a,i,r),a=mt(o),i=mt(n);t.modifiersData[e]={referenceClippingOffsets:o,popperEscapeOffsets:n,isReferenceHidden:a,hasPopperEscaped:i},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":a,"data-popper-escaped":i})}},yt={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(e){var t=e.state,n=e.options,i=(e=e.name,void 0===(n=n.offset)?[0,0]:n),r=(n=ge.reduce((function(e,n){var r,o,a,s;return e[n]=(r=t.rects,o=i,a=Ce(n),s=0<=[oe,ne].indexOf(a)?-1:1,n=(r="function"==typeof o?o(Object.assign({},r,{placement:n})):o)[0]||0,o=(r[1]||0)*s,0<=[oe,re].indexOf(a)?{x:o,y:n}:{x:n,y:o}),e}),{}),(o=n[t.placement]).x),o=o.y;null!=t.modifiersData.popperOffsets&&(t.modifiersData.popperOffsets.x+=r,t.modifiersData.popperOffsets.y+=o),t.modifiersData[e]=n}},vt={name:"popperOffsets",enabled:!0,phase:"read",fn:function(e){var t=e.state;e=e.name;t.modifiersData[e]=dt({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})},data:{}},_t={name:"preventOverflow",enabled:!0,phase:"main",fn:function(e){var t,n,i,r,o,a,s,l,u,c=e.state,h=e.options,d=(e=e.name,void 0===(d=h.mainAxis)||d),f=void 0!==(f=h.altAxis)&&f,p=h.boundary,g=h.rootBoundary,m=h.altBoundary,b=h.padding,y=void 0===(y=h.tether)||y,v=(h=void 0===(h=h.tetherOffset)?0:h,p=ft(c,{boundary:p,rootBoundary:g,padding:b,altBoundary:m}),g=Ce(c.placement),m=!(b=Xe(c.placement)),$e(g)),_="x"===v?"y":"x",w=c.modifiersData.popperOffsets,x=c.rects.reference,P=c.rects.popper,O=(h="number"==typeof(h="function"==typeof h?h(Object.assign({},c.rects,{placement:c.placement})):h)?{mainAxis:h,altAxis:h}:Object.assign({mainAxis:0,altAxis:0},h),c.modifiersData.offset?c.modifiersData.offset[c.placement]:null),k={x:0,y:0};w&&(d&&(d="y"===v?"height":"width",a=(s=w[v])+p[n="y"===v?ne:oe],l=s-p[u="y"===v?ie:re],t=y?-P[d]/2:0,r=(b===le?x:P)[d],b=b===le?-P[d]:-x[d],o=c.elements.arrow,o=y&&o?Le(o):{width:0,height:0},n=(i=c.modifiersData["arrow#persistent"]?c.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0})[n],i=i[u],u=Ye(0,x[d],o[d]),o=m?x[d]/2-t-u-n-h.mainAxis:r-u-n-h.mainAxis,r=m?-x[d]/2+t+u+i+h.mainAxis:b+u+i+h.mainAxis,m=(n=c.elements.arrow&&ze(c.elements.arrow))?"y"===v?n.clientTop||0:n.clientLeft||0:0,b=s+r-(t=null!=(d=null==O?void 0:O[v])?d:0),u=Ye(y?Me(a,s+o-t-m):a,s,y?Ae(l,b):l),w[v]=u,k[v]=u-s),f&&(i="y"==_?"height":"width",r=(n=w[_])+p["x"===v?ne:oe],d=n-p["x"===v?ie:re],o=-1!==[ne,oe].indexOf(g),m=null!=(t=null==O?void 0:O[_])?t:0,a=o?r:n-x[i]-P[i]-m+h.altAxis,b=o?n+x[i]+P[i]-m-h.altAxis:d,s=y&&o?(l=Ye(l=a,n,u=b),u<l?u:l):Ye(y?a:r,n,y?b:d),w[_]=s,k[_]=s-n),c.modifiersData[e]=k)},requiresIfExists:["offset"]};function wt(e,t,n){void 0===n&&(n=!1);var i=Ee(t),r=Ee(t)&&(a=(r=t).getBoundingClientRect(),o=Re(a.width)/r.offsetWidth||1,a=Re(a.height)/r.offsetHeight||1,1!==o||1!==a),o=Ve(t),a=Ne(e,r),s=(e={scrollLeft:0,scrollTop:0},{x:0,y:0});return!i&&n||("body"===Te(t)&&!st(o)||(e=(i=t)!==Se(i)&&Ee(i)?{scrollLeft:i.scrollLeft,scrollTop:i.scrollTop}:ot(i)),Ee(t)?((s=Ne(t,!0)).x+=t.clientLeft,s.y+=t.clientTop):o&&(s.x=at(o))),{x:a.left+e.scrollLeft-s.x,y:a.top+e.scrollTop-s.y,width:a.width,height:a.height}}var xt={placement:"bottom",modifiers:[],strategy:"absolute"};function Pt(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some((function(e){return!(e&&"function"==typeof e.getBoundingClientRect)}))}function Ot(e){var t,n=void 0===(t=(e=e=void 0===e?{}:e).defaultModifiers)?[]:t,i=void 0===(t=e.defaultOptions)?xt:t;return function(e,t,r){void 0===r&&(r=i);var o,a,s={placement:"bottom",orderedModifiers:[],options:Object.assign({},xt,i),modifiersData:{},elements:{reference:e,popper:t},attributes:{},styles:{}},l=[],u=!1,c={state:s,setOptions:function(r){var o,a;r="function"==typeof r?r(s.options):r,h(),s.options=Object.assign({},i,s.options,r),s.scrollParents={reference:Ie(e)?lt(e):e.contextElement?lt(e.contextElement):[],popper:lt(t)},r=[].concat(n,s.options.modifiers),a=r.reduce((function(e,t){var n=e[t.name];return e[t.name]=n?Object.assign({},n,t,{options:Object.assign({},n.options,t.options),data:Object.assign({},n.data,t.data)}):t,e}),{}),r=Object.keys(a).map((function(e){return a[e]})),o=function(e){var t=new Map,n=new Set,i=[];return e.forEach((function(e){t.set(e.name,e)})),e.forEach((function(e){n.has(e.name)||function e(r){n.add(r.name),[].concat(r.requires||[],r.requiresIfExists||[]).forEach((function(i){n.has(i)||(i=t.get(i))&&e(i)})),i.push(r)}(e)})),i}(r),r=ke.reduce((function(e,t){return e.concat(o.filter((function(e){return e.phase===t})))}),[]);return s.orderedModifiers=r.filter((function(e){return e.enabled})),s.orderedModifiers.forEach((function(e){var t=e.name,n=e.options;"function"==typeof(e=e.effect)&&(e=e({state:s,name:t,instance:c,options:void 0===n?{}:n}),l.push(e||function(){}))})),c.update()},forceUpdate:function(){if(!u){var e,t=(e=s.elements).reference;if(Pt(t,e=e.popper)){s.rects={reference:wt(t,ze(e),"fixed"===s.options.strategy),popper:Le(e)},s.reset=!1,s.placement=s.options.placement,s.orderedModifiers.forEach((function(e){return s.modifiersData[e.name]=Object.assign({},e.data)}));for(var n,i,r,o=0;o<s.orderedModifiers.length;o++)!0===s.reset?(s.reset=!1,o=-1):(n=(r=s.orderedModifiers[o]).fn,i=r.options,r=r.name,"function"==typeof n&&(s=n({state:s,options:void 0===i?{}:i,name:r,instance:c})||s))}}},update:(o=function(){return new Promise((function(e){c.forceUpdate(),e(s)}))},function(){return a=a||new Promise((function(e){Promise.resolve().then((function(){a=void 0,e(o())}))}))}),destroy:function(){h(),u=!0}};return Pt(e,t)&&c.setOptions(r).then((function(e){!u&&r.onFirstUpdate&&r.onFirstUpdate(e)})),c;function h(){l.forEach((function(e){return e()})),l=[]}}}var kt=Ot(),Tt=Ot({defaultModifiers:[et,vt,Je,je,yt,pt,_t,We,bt]}),St=Ot({defaultModifiers:[et,vt,Je,je]});function It(e){return"true"===e||"false"!==e&&(e===Number(e).toString()?Number(e):""===e||"null"===e?null:e)}function Et(e){return e.replace(/[A-Z]/g,(function(e){return"-".concat(e.toLowerCase())}))}var Dt={setDataAttribute:function(e,t,n){e.setAttribute("data-bs-".concat(Et(t)),n)},removeDataAttribute:function(e,t){e.removeAttribute("data-bs-".concat(Et(t)))},getDataAttributes:function(e){if(!e)return{};var t={};return Object.keys(e.dataset).filter((function(e){return e.startsWith("bs")})).forEach((function(n){var i=(i=n.replace(/^bs/,"")).charAt(0).toLowerCase()+i.slice(1,i.length);t[i]=It(e.dataset[n])})),t},getDataAttribute:function(e,t){return It(e.getAttribute("data-bs-".concat(Et(t))))},offset:function(e){return{top:(e=e.getBoundingClientRect()).top+window.pageYOffset,left:e.left+window.pageXOffset}},position:function(e){return{top:e.offsetTop,left:e.offsetLeft}}};function jt(e){return function(e){if(Array.isArray(e))return Ct(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Ct(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ct(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ct(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}n(95);var At={find:function(e){var t,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:document.documentElement;return(t=[]).concat.apply(t,jt(Element.prototype.querySelectorAll.call(n,e)))},findOne:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:document.documentElement;return Element.prototype.querySelector.call(t,e)},children:function(e,t){var n;return(n=[]).concat.apply(n,jt(e.children)).filter((function(e){return e.matches(t)}))},parents:function(e,t){for(var n=[],i=e.parentNode;i&&i.nodeType===Node.ELEMENT_NODE&&3!==i.nodeType;)i.matches(t)&&n.push(i),i=i.parentNode;return n},prev:function(e,t){for(var n=e.previousElementSibling;n;){if(n.matches(t))return[n];n=n.previousElementSibling}return[]},next:function(e,t){for(var n=e.nextElementSibling;n;){if(n.matches(t))return[n];n=n.nextElementSibling}return[]},focusableChildren:function(e){var t=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map((function(e){return"".concat(e,':not([tabindex^="-"])')})).join(", ");return this.find(t,e).filter((function(e){return!h(e)&&c(e)}))}};function Mt(e){return(Mt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Rt(e,t){var n,i=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)),i}function Nt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Rt(Object(n),!0).forEach((function(t){var i,r;i=e,r=n[t],t in i?Object.defineProperty(i,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):i[t]=r})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Rt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Lt(e){return function(e){if(Array.isArray(e))return Ft(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Ft(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ft(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ft(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function Bt(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Vt(){return(Vt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ht(e)););return e}(e,t);if(i)return(i=Object.getOwnPropertyDescriptor(i,t)).get?i.get.call(arguments.length<3?e:n):i.value}).apply(this,arguments)}function Ut(e,t){return(Ut=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ht(e){return(Ht=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var zt="dropdown",$t=".".concat("bs.dropdown"),Yt=".data-api",Gt="Escape",qt="ArrowUp",Wt="ArrowDown",Xt=new RegExp("".concat(qt,"|").concat(Wt,"|").concat(Gt)),Kt="hide".concat($t),Qt="hidden".concat($t),Jt="show".concat($t),Zt="shown".concat($t),en="click".concat($t).concat(Yt),tn="keydown".concat($t).concat(Yt),nn=($t="keyup".concat($t).concat(Yt),"show"),rn='[data-bs-toggle="dropdown"]',on=".dropdown-menu",an=m()?"top-end":"top-start",sn=m()?"top-start":"top-end",ln=m()?"bottom-end":"bottom-start",un=m()?"bottom-start":"bottom-end",cn=m()?"left-start":"right-start",hn=m()?"right-start":"left-start",dn={offset:[0,2],boundary:"clippingParents",reference:"toggle",display:"dynamic",popperConfig:null,autoClose:!0},fn={offset:"(array|string|function)",boundary:"(string|element)",reference:"(string|element|object)",display:"string",popperConfig:"(null|object|function)",autoClose:"(boolean|string)"},pn=function(){var e=o,t=X;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ut(e,t);var n,r=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=Ht(e);if(n=t?(n=Ht(this).constructor,Reflect.construct(i,arguments,n)):i.apply(this,arguments),i=this,n&&("object"===Mt(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==i)return i;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(o);function o(e,t){if(this instanceof o)return(e=r.call(this,e))._popper=null,e._config=e._getConfig(t),e._menu=e._getMenuElement(),e._inNavbar=e._detectNavbar(),e;throw new TypeError("Cannot call a class as a function")}return e=o,t=[{key:"Default",get:function(){return dn}},{key:"DefaultType",get:function(){return fn}},{key:"NAME",get:function(){return zt}},{key:"jQueryInterface",value:function(e){return this.each((function(){var t=o.getOrCreateInstance(this,e);if("string"==typeof e){if(void 0===t[e])throw new TypeError('No method named "'.concat(e,'"'));t[e]()}}))}},{key:"clearMenus",value:function(e){if(!e||2!==e.button&&("keyup"!==e.type||"Tab"===e.key))for(var t=At.find(rn),n=0,i=t.length;n<i;n++){var r=o.getInstance(t[n]);if(r&&!1!==r._config.autoClose&&r._isShown()){var a={relatedTarget:r._element};if(e){var s=e.composedPath(),l=s.includes(r._menu);if(s.includes(r._element)||"inside"===r._config.autoClose&&!l||"outside"===r._config.autoClose&&l)continue;if(r._menu.contains(e.target)&&("keyup"===e.type&&"Tab"===e.key||/input|select|option|textarea|form/i.test(e.target.tagName)))continue;"click"===e.type&&(a.clickEvent=e)}r._completeHide(a)}}}},{key:"getParentFromElement",value:function(e){return a(e)||e.parentNode}},{key:"dataApiKeydownHandler",value:function(e){if(/input|textarea/i.test(e.target.tagName)?!("Space"===e.key||e.key!==Gt&&(e.key!==Wt&&e.key!==qt||e.target.closest(on))):Xt.test(e.key)){var t=this.classList.contains(nn);if((t||e.key!==Gt)&&(e.preventDefault(),e.stopPropagation(),!h(this))){var n=this.matches(rn)?this:At.prev(this,rn)[0];n=o.getOrCreateInstance(n);if(e.key!==Gt)return e.key===qt||e.key===Wt?(t||n.show(),void n._selectMenuItem(e)):void(t&&"Space"!==e.key||o.clearMenus());n.hide()}}}}],(n=[{key:"toggle",value:function(){return this._isShown()?this.hide():this.show()}},{key:"show",value:function(){var e,t;h(this._element)||this._isShown(this._menu)||(e={relatedTarget:this._element},$.trigger(this._element,Jt,e).defaultPrevented||(t=o.getParentFromElement(this._element),this._inNavbar?Dt.setDataAttribute(this._menu,"popper","none"):this._createPopper(t),"ontouchstart"in document.documentElement&&!t.closest(".navbar-nav")&&(t=[]).concat.apply(t,Lt(document.body.children)).forEach((function(e){return $.on(e,"mouseover",f)})),this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(nn),this._element.classList.add(nn),$.trigger(this._element,Zt,e)))}},{key:"hide",value:function(){var e;!h(this._element)&&this._isShown(this._menu)&&(e={relatedTarget:this._element},this._completeHide(e))}},{key:"dispose",value:function(){this._popper&&this._popper.destroy(),Vt(Ht(o.prototype),"dispose",this).call(this)}},{key:"update",value:function(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}},{key:"_completeHide",value:function(e){var t;$.trigger(this._element,Kt,e).defaultPrevented||("ontouchstart"in document.documentElement&&(t=[]).concat.apply(t,Lt(document.body.children)).forEach((function(e){return $.off(e,"mouseover",f)})),this._popper&&this._popper.destroy(),this._menu.classList.remove(nn),this._element.classList.remove(nn),this._element.setAttribute("aria-expanded","false"),Dt.removeDataAttribute(this._menu,"popper"),$.trigger(this._element,Qt,e))}},{key:"_getConfig",value:function(e){if(e=Nt(Nt(Nt({},this.constructor.Default),Dt.getDataAttributes(this._element)),e),u(zt,e,this.constructor.DefaultType),"object"!==Mt(e.reference)||O(e.reference)||"function"==typeof e.reference.getBoundingClientRect)return e;throw new TypeError("".concat(zt.toUpperCase(),': Option "reference" provided type "object" without a required "getBoundingClientRect" method.'))}},{key:"_createPopper",value:function(e){if(void 0===i)throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");var t=this._element,n=(e=("parent"===this._config.reference?t=e:O(this._config.reference)?t=l(this._config.reference):"object"===Mt(this._config.reference)&&(t=this._config.reference),this._getPopperConfig())).modifiers.find((function(e){return"applyStyles"===e.name&&!1===e.enabled}));this._popper=Tt(t,this._menu,e),n&&Dt.setDataAttribute(this._menu,"popper","static")}},{key:"_isShown",value:function(){return(0<arguments.length&&void 0!==arguments[0]?arguments[0]:this._element).classList.contains(nn)}},{key:"_getMenuElement",value:function(){return At.next(this._element,on)[0]}},{key:"_getPlacement",value:function(){var e=this._element.parentNode;if(e.classList.contains("dropend"))return cn;if(e.classList.contains("dropstart"))return hn;var t="end"===getComputedStyle(this._menu).getPropertyValue("--bs-position").trim();return e.classList.contains("dropup")?t?sn:an:t?un:ln}},{key:"_detectNavbar",value:function(){return null!==this._element.closest(".".concat("navbar"))}},{key:"_getOffset",value:function(){var e=this,t=this._config.offset;return"string"==typeof t?t.split(",").map((function(e){return Number.parseInt(e,10)})):"function"==typeof t?function(n){return t(n,e._element)}:t}},{key:"_getPopperConfig",value:function(){var e={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return"static"===this._config.display&&(e.modifiers=[{name:"applyStyles",enabled:!1}]),Nt(Nt({},e),"function"==typeof this._config.popperConfig?this._config.popperConfig(e):this._config.popperConfig)}},{key:"_selectMenuItem",value:function(e){var t=e.key,n=(e=e.target,At.find(".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",this._menu).filter(c));n.length&&_(n,e,t===Wt,!n.includes(e)).focus()}}])&&Bt(e.prototype,n),t&&Bt(e,t),Object.defineProperty(e,"prototype",{writable:!1}),o}();$.on(document,tn,rn,pn.dataApiKeydownHandler),$.on(document,tn,on,pn.dataApiKeydownHandler),$.on(document,en,pn.clearMenus),$.on(document,$t,pn.clearMenus),$.on(document,en,rn,(function(e){e.preventDefault(),pn.getOrCreateInstance(this).toggle()})),b(pn),Yt=pn;function gn(e){return(gn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function mn(e,t){var n,i=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)),i}function bn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?mn(Object(n),!0).forEach((function(t){var i,r;i=e,r=n[t],t in i?Object.defineProperty(i,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):i[t]=r})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function yn(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function vn(e,t){return(vn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _n(e){return(_n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var wn="collapse",xn="bs.collapse",Pn=(tn=".".concat(xn),{toggle:!0,parent:null}),On={toggle:"boolean",parent:"(null|element)"},kn="show".concat(tn),Tn="shown".concat(tn),Sn="hide".concat(tn),In="hidden".concat(tn),En=($t="click".concat(tn).concat(".data-api"),"show"),Dn="collapse",jn="collapsing",Cn="collapsed",An=":scope .".concat(Dn," .").concat(Dn),Mn='[data-bs-toggle="collapse"]',Rn=function(){var e=r,t=X;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&vn(e,t);var n,i=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=_n(e);if(n=t?(n=_n(this).constructor,Reflect.construct(i,arguments,n)):i.apply(this,arguments),i=this,n&&("object"===gn(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==i)return i;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(r);function r(e,t){var n;if(!(this instanceof r))throw new TypeError("Cannot call a class as a function");(n=i.call(this,e))._isTransitioning=!1,n._config=n._getConfig(t),n._triggerArray=[];for(var a=At.find(Mn),s=0,l=a.length;s<l;s++){var u=a[s],c=o(u),h=At.find(c).filter((function(e){return e===n._element}));null!==c&&h.length&&(n._selector=c,n._triggerArray.push(u))}return n._initializeChildren(),n._config.parent||n._addAriaAndCollapsedClass(n._triggerArray,n._isShown()),n._config.toggle&&n.toggle(),n}return e=r,t=[{key:"Default",get:function(){return Pn}},{key:"NAME",get:function(){return wn}},{key:"jQueryInterface",value:function(e){return this.each((function(){var t={};"string"==typeof e&&/show|hide/.test(e)&&(t.toggle=!1),t=r.getOrCreateInstance(this,t);if("string"==typeof e){if(void 0===t[e])throw new TypeError('No method named "'.concat(e,'"'));t[e]()}}))}}],(n=[{key:"toggle",value:function(){this._isShown()?this.hide():this.show()}},{key:"show",value:function(){var e=this;if(!this._isTransitioning&&!this._isShown()){var t,n,i=[],o=(this._config.parent&&(t=At.find(An,this._config.parent),i=At.find(".collapse.show, .collapse.collapsing",this._config.parent).filter((function(e){return!t.includes(e)}))),At.findOne(this._selector));if(i.length){var a,s=i.find((function(e){return o!==e}));if((a=s?r.getInstance(s):null)&&a._isTransitioning)return}$.trigger(this._element,kn).defaultPrevented||(i.forEach((function(e){o!==e&&r.getOrCreateInstance(e,{toggle:!1}).hide(),a||G(e,xn,null)})),n=this._getDimension(),this._element.classList.remove(Dn),this._element.classList.add(jn),this._element.style[n]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0,s=n[0].toUpperCase()+n.slice(1),i="scroll".concat(s),this._queueCallback((function(){e._isTransitioning=!1,e._element.classList.remove(jn),e._element.classList.add(Dn,En),e._element.style[n]="",$.trigger(e._element,Tn)}),this._element,!0),this._element.style[n]="".concat(this._element[i],"px"))}}},{key:"hide",value:function(){var e=this;if(!this._isTransitioning&&this._isShown()&&!(t=$.trigger(this._element,Sn)).defaultPrevented){for(var t=this._getDimension(),n=(this._element.style[t]="".concat(this._element.getBoundingClientRect()[t],"px"),p(this._element),this._element.classList.add(jn),this._element.classList.remove(Dn,En),this._triggerArray.length),i=0;i<n;i++){var r=this._triggerArray[i],o=a(r);o&&!this._isShown(o)&&this._addAriaAndCollapsedClass([r],!1)}this._isTransitioning=!0,this._element.style[t]="",this._queueCallback((function(){e._isTransitioning=!1,e._element.classList.remove(jn),e._element.classList.add(Dn),$.trigger(e._element,In)}),this._element,!0)}}},{key:"_isShown",value:function(){return(0<arguments.length&&void 0!==arguments[0]?arguments[0]:this._element).classList.contains(En)}},{key:"_getConfig",value:function(e){return(e=bn(bn(bn({},Pn),Dt.getDataAttributes(this._element)),e)).toggle=Boolean(e.toggle),e.parent=l(e.parent),u(wn,e,On),e}},{key:"_getDimension",value:function(){return this._element.classList.contains("collapse-horizontal")?"width":"height"}},{key:"_initializeChildren",value:function(){var e,t=this;this._config.parent&&(e=At.find(An,this._config.parent),At.find(Mn,this._config.parent).filter((function(t){return!e.includes(t)})).forEach((function(e){var n=a(e);n&&t._addAriaAndCollapsedClass([e],t._isShown(n))})))}},{key:"_addAriaAndCollapsedClass",value:function(e,t){e.length&&e.forEach((function(e){t?e.classList.remove(Cn):e.classList.add(Cn),e.setAttribute("aria-expanded",t)}))}}])&&yn(e.prototype,n),t&&yn(e,t),Object.defineProperty(e,"prototype",{writable:!1}),r}();$.on(document,$t,Mn,(function(e){("A"===e.target.tagName||e.delegateTarget&&"A"===e.delegateTarget.tagName)&&e.preventDefault(),e=o(this),At.find(e).forEach((function(e){Rn.getOrCreateInstance(e,{toggle:!1}).toggle()}))})),b(Rn),en=Rn;var Nn=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",Ln=".sticky-top",Fn=function(){function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this._element=document.body}var t,n;return t=e,(n=[{key:"getWidth",value:function(){var e=document.documentElement.clientWidth;return Math.abs(window.innerWidth-e)}},{key:"hide",value:function(){var e=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,"paddingRight",(function(t){return t+e})),this._setElementAttributes(Nn,"paddingRight",(function(t){return t+e})),this._setElementAttributes(Ln,"marginRight",(function(t){return t-e}))}},{key:"_disableOverFlow",value:function(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}},{key:"_setElementAttributes",value:function(e,t,n){var i=this,r=this.getWidth();this._applyManipulationCallback(e,(function(e){var o;e!==i._element&&window.innerWidth>e.clientWidth+r||(i._saveInitialAttribute(e,t),o=window.getComputedStyle(e)[t],e.style[t]="".concat(n(Number.parseFloat(o)),"px"))}))}},{key:"reset",value:function(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,"paddingRight"),this._resetElementAttributes(Nn,"paddingRight"),this._resetElementAttributes(Ln,"marginRight")}},{key:"_saveInitialAttribute",value:function(e,t){var n=e.style[t];n&&Dt.setDataAttribute(e,t,n)}},{key:"_resetElementAttributes",value:function(e,t){this._applyManipulationCallback(e,(function(e){var n=Dt.getDataAttribute(e,t);void 0===n?e.style.removeProperty(t):(Dt.removeDataAttribute(e,t),e.style[t]=n)}))}},{key:"_applyManipulationCallback",value:function(e,t){O(e)?t(e):At.find(e,this._element).forEach(t)}},{key:"isOverflowing",value:function(){return 0<this.getWidth()}}])&&function(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Bn(e){return(Bn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Vn(e,t){var n,i=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)),i}function Un(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Vn(Object(n),!0).forEach((function(t){var i,r;i=e,r=n[t],t in i?Object.defineProperty(i,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):i[t]=r})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Hn={className:"modal-backdrop",isVisible:!0,isAnimated:!1,rootElement:"body",clickCallback:null},zn={className:"string",isVisible:"boolean",isAnimated:"boolean",rootElement:"(element|string)",clickCallback:"(function|null)"},$n="backdrop",Yn="mousedown.bs.".concat($n),Gn=function(){function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this._config=this._getConfig(t),this._isAppended=!1,this._element=null}var t,n;return t=e,(n=[{key:"show",value:function(e){this._config.isVisible?(this._append(),this._config.isAnimated&&p(this._getElement()),this._getElement().classList.add("show"),this._emulateAnimation((function(){y(e)}))):y(e)}},{key:"hide",value:function(e){var t=this;this._config.isVisible?(this._getElement().classList.remove("show"),this._emulateAnimation((function(){t.dispose(),y(e)}))):y(e)}},{key:"_getElement",value:function(){var e;return this._element||((e=document.createElement("div")).className=this._config.className,this._config.isAnimated&&e.classList.add("fade"),this._element=e),this._element}},{key:"_getConfig",value:function(e){return(e=Un(Un({},Hn),"object"===Bn(e)?e:{})).rootElement=l(e.rootElement),u($n,e,zn),e}},{key:"_append",value:function(){var e=this;this._isAppended||(this._config.rootElement.append(this._getElement()),$.on(this._getElement(),Yn,(function(){y(e._config.clickCallback)})),this._isAppended=!0)}},{key:"dispose",value:function(){this._isAppended&&($.off(this._element,Yn),this._element.remove(),this._isAppended=!1)}},{key:"_emulateAnimation",value:function(e){v(e,this._getElement(),this._config.isAnimated)}}])&&function(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function qn(e){return(qn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Wn(e,t){var n,i=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)),i}function Xn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Wn(Object(n),!0).forEach((function(t){var i,r;i=e,r=n[t],t in i?Object.defineProperty(i,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):i[t]=r})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Kn(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"hide",n="click.dismiss".concat(e.EVENT_KEY),i=e.NAME;$.on(document,n,'[data-bs-dismiss="'.concat(i,'"]'),(function(n){["A","AREA"].includes(this.tagName)&&n.preventDefault(),h(this)||(n=a(this)||this.closest(".".concat(i)),e.getOrCreateInstance(n)[t]())}))}var Qn={trapElement:null,autofocus:!0},Jn={trapElement:"element",autofocus:"boolean"},Zn=".".concat("bs.focustrap"),ei="focusin".concat(Zn),ti="keydown.tab".concat(Zn),ni="backward",ii=function(){function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this._config=this._getConfig(t),this._isActive=!1,this._lastTabNavDirection=null}var t,n;return t=e,(n=[{key:"activate",value:function(){var e=this,t=(n=this._config).trapElement,n=n.autofocus;this._isActive||(n&&t.focus(),$.off(document,Zn),$.on(document,ei,(function(t){return e._handleFocusin(t)})),$.on(document,ti,(function(t){return e._handleKeydown(t)})),this._isActive=!0)}},{key:"deactivate",value:function(){this._isActive&&(this._isActive=!1,$.off(document,Zn))}},{key:"_handleFocusin",value:function(e){e=e.target;var t=this._config.trapElement;e===document||e===t||t.contains(e)||(0===(e=At.focusableChildren(t)).length?t:this._lastTabNavDirection===ni?e[e.length-1]:e[0]).focus()}},{key:"_handleKeydown",value:function(e){"Tab"===e.key&&(this._lastTabNavDirection=e.shiftKey?ni:"forward")}},{key:"_getConfig",value:function(e){return u("focustrap",e=Xn(Xn({},Qn),"object"===qn(e)?e:{}),Jn),e}}])&&function(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function ri(e){return(ri="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function oi(e,t){var n,i=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)),i}function ai(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oi(Object(n),!0).forEach((function(t){var i,r;i=e,r=n[t],t in i?Object.defineProperty(i,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):i[t]=r})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function si(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function li(){return(li="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ci(e)););return e}(e,t);if(i)return(i=Object.getOwnPropertyDescriptor(i,t)).get?i.get.call(arguments.length<3?e:n):i.value}).apply(this,arguments)}function ui(e,t){return(ui=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ci(e){return(ci=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var hi="offcanvas",di=(tn=".".concat("bs.offcanvas"),$t=".data-api","load".concat(tn).concat($t)),fi={backdrop:!0,keyboard:!0,scroll:!1},pi={backdrop:"boolean",keyboard:"boolean",scroll:"boolean"},gi=".offcanvas.show",mi="show".concat(tn),bi="shown".concat(tn),yi="hide".concat(tn),vi="hidden".concat(tn),_i=($t="click".concat(tn).concat($t),"keydown.dismiss".concat(tn)),wi=function(){var e=r,t=X;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ui(e,t);var n,i=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=ci(e);if(n=t?(n=ci(this).constructor,Reflect.construct(i,arguments,n)):i.apply(this,arguments),i=this,n&&("object"===ri(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==i)return i;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(r);function r(e,t){if(this instanceof r)return(e=i.call(this,e))._config=e._getConfig(t),e._isShown=!1,e._backdrop=e._initializeBackDrop(),e._focustrap=e._initializeFocusTrap(),e._addEventListeners(),e;throw new TypeError("Cannot call a class as a function")}return e=r,t=[{key:"NAME",get:function(){return hi}},{key:"Default",get:function(){return fi}},{key:"jQueryInterface",value:function(e){return this.each((function(){var t=r.getOrCreateInstance(this,e);if("string"==typeof e){if(void 0===t[e]||e.startsWith("_")||"constructor"===e)throw new TypeError('No method named "'.concat(e,'"'));t[e](this)}}))}}],(n=[{key:"toggle",value:function(e){return this._isShown?this.hide():this.show(e)}},{key:"show",value:function(e){var t=this;this._isShown||$.trigger(this._element,mi,{relatedTarget:e}).defaultPrevented||(this._isShown=!0,this._element.style.visibility="visible",this._backdrop.show(),this._config.scroll||(new Fn).hide(),this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add("show"),this._queueCallback((function(){t._config.scroll||t._focustrap.activate(),$.trigger(t._element,bi,{relatedTarget:e})}),this._element,!0))}},{key:"hide",value:function(){var e=this;this._isShown&&!$.trigger(this._element,yi).defaultPrevented&&(this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.remove("show"),this._backdrop.hide(),this._queueCallback((function(){e._element.setAttribute("aria-hidden",!0),e._element.removeAttribute("aria-modal"),e._element.removeAttribute("role"),e._element.style.visibility="hidden",e._config.scroll||(new Fn).reset(),$.trigger(e._element,vi)}),this._element,!0))}},{key:"dispose",value:function(){this._backdrop.dispose(),this._focustrap.deactivate(),li(ci(r.prototype),"dispose",this).call(this)}},{key:"_getConfig",value:function(e){return e=ai(ai(ai({},fi),Dt.getDataAttributes(this._element)),"object"===ri(e)?e:{}),u(hi,e,pi),e}},{key:"_initializeBackDrop",value:function(){var e=this;return new Gn({className:"offcanvas-backdrop",isVisible:this._config.backdrop,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:function(){return e.hide()}})}},{key:"_initializeFocusTrap",value:function(){return new ii({trapElement:this._element})}},{key:"_addEventListeners",value:function(){var e=this;$.on(this._element,_i,(function(t){e._config.keyboard&&"Escape"===t.key&&e.hide()}))}}])&&si(e.prototype,n),t&&si(e,t),Object.defineProperty(e,"prototype",{writable:!1}),r}();$.on(document,$t,'[data-bs-toggle="offcanvas"]',(function(e){var t=this,n=a(this);["A","AREA"].includes(this.tagName)&&e.preventDefault(),h(this)||($.one(n,vi,(function(){c(t)&&t.focus()})),(e=At.findOne(gi))&&e!==n&&wi.getInstance(e).hide(),wi.getOrCreateInstance(n).toggle(this))})),$.on(window,di,(function(){return At.find(gi).forEach((function(e){return wi.getOrCreateInstance(e).show()}))})),Kn(wi),b(wi),tn=wi;function xi(e){return(xi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Pi(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Oi(e,t){return(Oi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ki(e){return(ki=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}$t=".".concat("bs.alert");var Ti="close".concat($t),Si="closed".concat($t);di=function(){var e=r,t=X;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Oi(e,t);var n,i=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=ki(e);if(n=t?(n=ki(this).constructor,Reflect.construct(i,arguments,n)):i.apply(this,arguments),i=this,n&&("object"===xi(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==i)return i;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(r);function r(){var e=this,t=r;if(e instanceof t)return i.apply(this,arguments);throw new TypeError("Cannot call a class as a function")}return e=r,t=[{key:"NAME",get:function(){return"alert"}},{key:"jQueryInterface",value:function(e){return this.each((function(){var t=r.getOrCreateInstance(this);if("string"==typeof e){if(void 0===t[e]||e.startsWith("_")||"constructor"===e)throw new TypeError('No method named "'.concat(e,'"'));t[e](this)}}))}}],(n=[{key:"close",value:function(){var e,t=this;$.trigger(this._element,Ti).defaultPrevented||(this._element.classList.remove("show"),e=this._element.classList.contains("fade"),this._queueCallback((function(){return t._destroyElement()}),this._element,e))}},{key:"_destroyElement",value:function(){this._element.remove(),$.trigger(this._element,Si),this.dispose()}}])&&Pi(e.prototype,n),t&&Pi(e,t),Object.defineProperty(e,"prototype",{writable:!1}),r}(),Kn(di,"close"),b(di),$t=di;function Ii(e){return(Ii="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ei(e,t){var n,i=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)),i}function Di(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ei(Object(n),!0).forEach((function(t){Mi(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ei(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ji(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Ci(e,t){return(Ci=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ai(e){return(Ai=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Mi(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}var Ri="carousel",Ni=(di=".".concat("bs.carousel"),".data-api"),Li={interval:5e3,keyboard:!0,slide:!1,pause:"hover",wrap:!0,touch:!0},Fi={interval:"(number|boolean)",keyboard:"boolean",slide:"(boolean|string)",pause:"(string|boolean)",wrap:"boolean",touch:"boolean"},Bi="next",Vi="prev",Ui="left",Hi="right",zi=(Mi(tr={},"ArrowLeft",Hi),Mi(tr,"ArrowRight",Ui),tr),$i="slide".concat(di),Yi="slid".concat(di),Gi="keydown".concat(di),qi="mouseenter".concat(di),Wi="mouseleave".concat(di),Xi="touchstart".concat(di),Ki="touchmove".concat(di),Qi="touchend".concat(di),Ji="pointerdown".concat(di),Zi="pointerup".concat(di),er="dragstart".concat(di),tr="load".concat(di).concat(Ni),nr=(di="click".concat(di).concat(Ni),"active"),ir=".active.carousel-item",rr=function(){var e=r,t=X;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ci(e,t);var n,i=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=Ai(e);if(n=t?(n=Ai(this).constructor,Reflect.construct(i,arguments,n)):i.apply(this,arguments),i=this,n&&("object"===Ii(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==i)return i;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(r);function r(e,t){if(this instanceof r)return(e=i.call(this,e))._items=null,e._interval=null,e._activeElement=null,e._isPaused=!1,e._isSliding=!1,e.touchTimeout=null,e.touchStartX=0,e.touchDeltaX=0,e._config=e._getConfig(t),e._indicatorsElement=At.findOne(".carousel-indicators",e._element),e._touchSupported="ontouchstart"in document.documentElement||0<navigator.maxTouchPoints,e._pointerEvent=Boolean(window.PointerEvent),e._addEventListeners(),e;throw new TypeError("Cannot call a class as a function")}return e=r,t=[{key:"Default",get:function(){return Li}},{key:"NAME",get:function(){return Ri}},{key:"carouselInterface",value:function(e,t){var n=(e=r.getOrCreateInstance(e,t))._config,i=("object"===Ii(t)&&(n=Di(Di({},n),t)),"string"==typeof t?t:n.slide);if("number"==typeof t)e.to(t);else if("string"==typeof i){if(void 0===e[i])throw new TypeError('No method named "'.concat(i,'"'));e[i]()}else n.interval&&n.ride&&(e.pause(),e.cycle())}},{key:"jQueryInterface",value:function(e){return this.each((function(){r.carouselInterface(this,e)}))}},{key:"dataApiClickHandler",value:function(e){var t,n,i=a(this);i&&i.classList.contains("carousel")&&(t=Di(Di({},Dt.getDataAttributes(i)),Dt.getDataAttributes(this)),(n=this.getAttribute("data-bs-slide-to"))&&(t.interval=!1),r.carouselInterface(i,t),n&&r.getInstance(i).to(n),e.preventDefault())}}],(n=[{key:"next",value:function(){this._slide(Bi)}},{key:"nextWhenVisible",value:function(){!document.hidden&&c(this._element)&&this.next()}},{key:"prev",value:function(){this._slide(Vi)}},{key:"pause",value:function(e){e||(this._isPaused=!0),At.findOne(".carousel-item-next, .carousel-item-prev",this._element)&&(s(this._element),this.cycle(!0)),clearInterval(this._interval),this._interval=null}},{key:"cycle",value:function(e){e||(this._isPaused=!1),this._interval&&(clearInterval(this._interval),this._interval=null),this._config&&this._config.interval&&!this._isPaused&&(this._updateInterval(),this._interval=setInterval((document.visibilityState?this.nextWhenVisible:this.next).bind(this),this._config.interval))}},{key:"to",value:function(e){var t=this,n=(this._activeElement=At.findOne(ir,this._element),this._getItemIndex(this._activeElement));if(!(e>this._items.length-1||e<0))if(this._isSliding)$.one(this._element,Yi,(function(){return t.to(e)}));else{if(n===e)return this.pause(),void this.cycle();this._slide(n<e?Bi:Vi,this._items[e])}}},{key:"_getConfig",value:function(e){return e=Di(Di(Di({},Li),Dt.getDataAttributes(this._element)),"object"===Ii(e)?e:{}),u(Ri,e,Fi),e}},{key:"_handleSwipe",value:function(){var e=Math.abs(this.touchDeltaX);e<=40||(e/=this.touchDeltaX,this.touchDeltaX=0,e&&this._slide(0<e?Hi:Ui))}},{key:"_addEventListeners",value:function(){var e=this;this._config.keyboard&&$.on(this._element,Gi,(function(t){return e._keydown(t)})),"hover"===this._config.pause&&($.on(this._element,qi,(function(t){return e.pause(t)})),$.on(this._element,Wi,(function(t){return e.cycle(t)}))),this._config.touch&&this._touchSupported&&this._addTouchEventListeners()}},{key:"_addTouchEventListeners",value:function(){function e(e){i(e)?n.touchStartX=e.clientX:n._pointerEvent||(n.touchStartX=e.touches[0].clientX)}function t(e){i(e)&&(n.touchDeltaX=e.clientX-n.touchStartX),n._handleSwipe(),"hover"===n._config.pause&&(n.pause(),n.touchTimeout&&clearTimeout(n.touchTimeout),n.touchTimeout=setTimeout((function(e){return n.cycle(e)}),500+n._config.interval))}var n=this,i=function(e){return n._pointerEvent&&("pen"===e.pointerType||"touch"===e.pointerType)};At.find(".carousel-item img",this._element).forEach((function(e){$.on(e,er,(function(e){return e.preventDefault()}))})),this._pointerEvent?($.on(this._element,Ji,e),$.on(this._element,Zi,t),this._element.classList.add("pointer-event")):($.on(this._element,Xi,e),$.on(this._element,Ki,(function(e){n.touchDeltaX=e.touches&&1<e.touches.length?0:e.touches[0].clientX-n.touchStartX})),$.on(this._element,Qi,t))}},{key:"_keydown",value:function(e){var t;/input|textarea/i.test(e.target.tagName)||(t=zi[e.key])&&(e.preventDefault(),this._slide(t))}},{key:"_getItemIndex",value:function(e){return this._items=e&&e.parentNode?At.find(".carousel-item",e.parentNode):[],this._items.indexOf(e)}},{key:"_getItemByOrder",value:function(e,t){return _(this._items,t,e===Bi,this._config.wrap)}},{key:"_triggerSlideEvent",value:function(e,t){var n=this._getItemIndex(e),i=this._getItemIndex(At.findOne(ir,this._element));return $.trigger(this._element,$i,{relatedTarget:e,direction:t,from:i,to:n})}},{key:"_setActiveIndicatorElement",value:function(e){if(this._indicatorsElement)for(var t=At.findOne(".active",this._indicatorsElement),n=(t.classList.remove(nr),t.removeAttribute("aria-current"),At.find("[data-bs-target]",this._indicatorsElement)),i=0;i<n.length;i++)if(Number.parseInt(n[i].getAttribute("data-bs-slide-to"),10)===this._getItemIndex(e)){n[i].classList.add(nr),n[i].setAttribute("aria-current","true");break}}},{key:"_updateInterval",value:function(){var e=this._activeElement||At.findOne(ir,this._element);e&&((e=Number.parseInt(e.getAttribute("data-bs-interval"),10))?(this._config.defaultInterval=this._config.defaultInterval||this._config.interval,this._config.interval=e):this._config.interval=this._config.defaultInterval||this._config.interval)}},{key:"_slide",value:function(e,t){var n,i=this,r=(e=this._directionToOrder(e),At.findOne(ir,this._element)),o=this._getItemIndex(r),a=t||this._getItemByOrder(e,r),s=this._getItemIndex(a),l=(t=Boolean(this._interval),e===Bi),u=l?"carousel-item-start":"carousel-item-end",c=l?"carousel-item-next":"carousel-item-prev",h=this._orderToDirection(e);a&&a.classList.contains(nr)?this._isSliding=!1:this._isSliding||this._triggerSlideEvent(a,h).defaultPrevented||r&&a&&(this._isSliding=!0,t&&this.pause(),this._setActiveIndicatorElement(a),this._activeElement=a,n=function(){$.trigger(i._element,Yi,{relatedTarget:a,direction:h,from:o,to:s})},this._element.classList.contains("slide")?(a.classList.add(c),p(a),r.classList.add(u),a.classList.add(u),this._queueCallback((function(){a.classList.remove(u,c),a.classList.add(nr),r.classList.remove(nr,c,u),i._isSliding=!1,setTimeout(n,0)}),r,!0)):(r.classList.remove(nr),a.classList.add(nr),this._isSliding=!1,n()),t&&this.cycle())}},{key:"_directionToOrder",value:function(e){return[Hi,Ui].includes(e)?m()?e===Ui?Vi:Bi:e===Ui?Bi:Vi:e}},{key:"_orderToDirection",value:function(e){return[Bi,Vi].includes(e)?m()?e===Vi?Ui:Hi:e===Vi?Hi:Ui:e}}])&&ji(e.prototype,n),t&&ji(e,t),Object.defineProperty(e,"prototype",{writable:!1}),r}();$.on(document,di,"[data-bs-slide], [data-bs-slide-to]",rr.dataApiClickHandler),$.on(window,tr,(function(){for(var e=At.find('[data-bs-ride="carousel"]'),t=0,n=e.length;t<n;t++)rr.carouselInterface(e[t],rr.getInstance(e[t]))})),b(rr),Ni=rr;function or(e){return(or="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ar(e,t){var n,i=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)),i}function sr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ar(Object(n),!0).forEach((function(t){var i,r;i=e,r=n[t],t in i?Object.defineProperty(i,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):i[t]=r})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ar(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function lr(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function ur(){return(ur="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=hr(e)););return e}(e,t);if(i)return(i=Object.getOwnPropertyDescriptor(i,t)).get?i.get.call(arguments.length<3?e:n):i.value}).apply(this,arguments)}function cr(e,t){return(cr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function hr(e){return(hr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var dr=".".concat("bs.modal"),fr={backdrop:!0,keyboard:!0,focus:!0},pr={backdrop:"(boolean|string)",keyboard:"boolean",focus:"boolean"},gr="hide".concat(dr),mr="hidePrevented".concat(dr),br="hidden".concat(dr),yr="show".concat(dr),vr="shown".concat(dr),_r="resize".concat(dr),wr="click.dismiss".concat(dr),xr="keydown.dismiss".concat(dr),Pr="mouseup.dismiss".concat(dr),Or="mousedown.dismiss".concat(dr),kr=(di="click".concat(dr).concat(".data-api"),"modal-open"),Tr="modal-static",Sr=function(){var e=r,t=X;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&cr(e,t);var n,i=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=hr(e);if(n=t?(n=hr(this).constructor,Reflect.construct(i,arguments,n)):i.apply(this,arguments),i=this,n&&("object"===or(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==i)return i;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(r);function r(e,t){if(this instanceof r)return(e=i.call(this,e))._config=e._getConfig(t),e._dialog=At.findOne(".modal-dialog",e._element),e._backdrop=e._initializeBackDrop(),e._focustrap=e._initializeFocusTrap(),e._isShown=!1,e._ignoreBackdropClick=!1,e._isTransitioning=!1,e._scrollBar=new Fn,e;throw new TypeError("Cannot call a class as a function")}return e=r,t=[{key:"Default",get:function(){return fr}},{key:"NAME",get:function(){return"modal"}},{key:"jQueryInterface",value:function(e,t){return this.each((function(){var n=r.getOrCreateInstance(this,e);if("string"==typeof e){if(void 0===n[e])throw new TypeError('No method named "'.concat(e,'"'));n[e](t)}}))}}],(n=[{key:"toggle",value:function(e){return this._isShown?this.hide():this.show(e)}},{key:"show",value:function(e){var t=this;this._isShown||this._isTransitioning||$.trigger(this._element,yr,{relatedTarget:e}).defaultPrevented||(this._isShown=!0,this._isAnimated()&&(this._isTransitioning=!0),this._scrollBar.hide(),document.body.classList.add(kr),this._adjustDialog(),this._setEscapeEvent(),this._setResizeEvent(),$.on(this._dialog,Or,(function(){$.one(t._element,Pr,(function(e){e.target===t._element&&(t._ignoreBackdropClick=!0)}))})),this._showBackdrop((function(){return t._showElement(e)})))}},{key:"hide",value:function(){var e,t=this;!this._isShown||this._isTransitioning||$.trigger(this._element,gr).defaultPrevented||(this._isShown=!1,(e=this._isAnimated())&&(this._isTransitioning=!0),this._setEscapeEvent(),this._setResizeEvent(),this._focustrap.deactivate(),this._element.classList.remove("show"),$.off(this._element,wr),$.off(this._dialog,Or),this._queueCallback((function(){return t._hideModal()}),this._element,e))}},{key:"dispose",value:function(){[window,this._dialog].forEach((function(e){return $.off(e,dr)})),this._backdrop.dispose(),this._focustrap.deactivate(),ur(hr(r.prototype),"dispose",this).call(this)}},{key:"handleUpdate",value:function(){this._adjustDialog()}},{key:"_initializeBackDrop",value:function(){return new Gn({isVisible:Boolean(this._config.backdrop),isAnimated:this._isAnimated()})}},{key:"_initializeFocusTrap",value:function(){return new ii({trapElement:this._element})}},{key:"_getConfig",value:function(e){return u("modal",e=sr(sr(sr({},fr),Dt.getDataAttributes(this._element)),"object"===or(e)?e:{}),pr),e}},{key:"_showElement",value:function(e){var t=this,n=this._isAnimated(),i=At.findOne(".modal-body",this._dialog);this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0,i&&(i.scrollTop=0),n&&p(this._element),this._element.classList.add("show"),this._queueCallback((function(){t._config.focus&&t._focustrap.activate(),t._isTransitioning=!1,$.trigger(t._element,vr,{relatedTarget:e})}),this._dialog,n)}},{key:"_setEscapeEvent",value:function(){var e=this;this._isShown?$.on(this._element,xr,(function(t){e._config.keyboard&&"Escape"===t.key?(t.preventDefault(),e.hide()):e._config.keyboard||"Escape"!==t.key||e._triggerBackdropTransition()})):$.off(this._element,xr)}},{key:"_setResizeEvent",value:function(){var e=this;this._isShown?$.on(window,_r,(function(){return e._adjustDialog()})):$.off(window,_r)}},{key:"_hideModal",value:function(){var e=this;this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide((function(){document.body.classList.remove(kr),e._resetAdjustments(),e._scrollBar.reset(),$.trigger(e._element,br)}))}},{key:"_showBackdrop",value:function(e){var t=this;$.on(this._element,wr,(function(e){t._ignoreBackdropClick?t._ignoreBackdropClick=!1:e.target===e.currentTarget&&(!0===t._config.backdrop?t.hide():"static"===t._config.backdrop&&t._triggerBackdropTransition())})),this._backdrop.show(e)}},{key:"_isAnimated",value:function(){return this._element.classList.contains("fade")}},{key:"_triggerBackdropTransition",value:function(){var e,t,n,i,r,o=this;$.trigger(this._element,mr).defaultPrevented||(e=this._element,t=e.classList,n=e.scrollHeight,i=e.style,!(r=n>document.documentElement.clientHeight)&&"hidden"===i.overflowY||t.contains(Tr)||(r||(i.overflowY="hidden"),t.add(Tr),this._queueCallback((function(){t.remove(Tr),r||o._queueCallback((function(){i.overflowY=""}),o._dialog)}),this._dialog),this._element.focus()))}},{key:"_adjustDialog",value:function(){var e=this._element.scrollHeight>document.documentElement.clientHeight,t=this._scrollBar.getWidth(),n=0<t;(!n&&e&&!m()||n&&!e&&m())&&(this._element.style.paddingLeft="".concat(t,"px")),(n&&!e&&!m()||!n&&e&&m())&&(this._element.style.paddingRight="".concat(t,"px"))}},{key:"_resetAdjustments",value:function(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}}])&&lr(e.prototype,n),t&&lr(e,t),Object.defineProperty(e,"prototype",{writable:!1}),r}();$.on(document,di,'[data-bs-toggle="modal"]',(function(e){var t=this,n=a(this);(e=(["A","AREA"].includes(this.tagName)&&e.preventDefault(),$.one(n,yr,(function(e){e.defaultPrevented||$.one(n,br,(function(){c(t)&&t.focus()}))})),At.findOne(".modal.show")))&&Sr.getInstance(e).hide(),Sr.getOrCreateInstance(n).toggle(this)})),Kn(Sr),b(Sr),tr=Sr;function Ir(e){return function(e){if(Array.isArray(e))return Er(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Er(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Er(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Er(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var Dr=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),jr=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^#&/:?]*(?:[#/?]|$))/i,Cr=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[\d+/a-z]+=*$/i;di={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]};function Ar(e,t,n){if(!e.length)return e;if(n&&"function"==typeof n)return n(e);n=(new window.DOMParser).parseFromString(e,"text/html");for(var i=(e=[]).concat.apply(e,Ir(n.body.querySelectorAll("*"))),r=function(e,n){var r=i[e];e=r.nodeName.toLowerCase();if(!Object.keys(t).includes(e))return r.remove(),"continue";var o=(o=[]).concat.apply(o,Ir(r.attributes)),a=[].concat(t["*"]||[],t[e]||[]);o.forEach((function(e){!function(e,t){var n=e.nodeName.toLowerCase();if(t.includes(n))return!Dr.has(n)||Boolean(jr.test(e.nodeValue)||Cr.test(e.nodeValue));for(var i=t.filter((function(e){return e instanceof RegExp})),r=0,o=i.length;r<o;r++)if(i[r].test(n))return!0;return!1}(e,a)&&r.removeAttribute(e.nodeName)}))},o=0,a=i.length;o<a;o++)r(o);return n.body.innerHTML}function Mr(e){return(Mr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Rr(e,t){var n,i=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)),i}function Nr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Rr(Object(n),!0).forEach((function(t){var i,r;i=e,r=n[t],t in i?Object.defineProperty(i,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):i[t]=r})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Rr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Lr(e){return function(e){if(Array.isArray(e))return Fr(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Fr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Fr(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Fr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function Br(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Vr(){return(Vr="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Hr(e)););return e}(e,t);if(i)return(i=Object.getOwnPropertyDescriptor(i,t)).get?i.get.call(arguments.length<3?e:n):i.value}).apply(this,arguments)}function Ur(e,t){return(Ur=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Hr(e){return(Hr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var zr="tooltip",$r=".".concat("bs.tooltip"),Yr=new Set(["sanitize","allowList","sanitizeFn"]),Gr={animation:"boolean",template:"string",title:"(string|element|function)",trigger:"string",delay:"(number|object)",html:"boolean",selector:"(string|boolean)",placement:"(string|function)",offset:"(array|string|function)",container:"(string|element|boolean)",fallbackPlacements:"array",boundary:"(string|element)",customClass:"(string|function)",sanitize:"boolean",sanitizeFn:"(null|function)",allowList:"object",popperConfig:"(null|object|function)"},qr={AUTO:"auto",TOP:"top",RIGHT:m()?"left":"right",BOTTOM:"bottom",LEFT:m()?"right":"left"},Wr={animation:!0,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,selector:!1,placement:"top",offset:[0,0],container:!1,fallbackPlacements:["top","right","bottom","left"],boundary:"clippingParents",customClass:"",sanitize:!0,sanitizeFn:null,allowList:di,popperConfig:null},Xr={HIDE:"hide".concat($r),HIDDEN:"hidden".concat($r),SHOW:"show".concat($r),SHOWN:"shown".concat($r),INSERTED:"inserted".concat($r),CLICK:"click".concat($r),FOCUSIN:"focusin".concat($r),FOCUSOUT:"focusout".concat($r),MOUSEENTER:"mouseenter".concat($r),MOUSELEAVE:"mouseleave".concat($r)},Kr="fade",Qr="show",Jr="show",Zr=".tooltip-inner",eo=".".concat("modal"),to="hide.bs.modal",no="hover",io="focus",ro=(di=function(){var e=o,t=X;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ur(e,t);var n,r=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=Hr(e);if(n=t?(n=Hr(this).constructor,Reflect.construct(i,arguments,n)):i.apply(this,arguments),i=this,n&&("object"===Mr(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==i)return i;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(o);function o(e,t){if(!(this instanceof o))throw new TypeError("Cannot call a class as a function");if(void 0===i)throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");return(e=r.call(this,e))._isEnabled=!0,e._timeout=0,e._hoverState="",e._activeTrigger={},e._popper=null,e._config=e._getConfig(t),e.tip=null,e._setListeners(),e}return e=o,t=[{key:"Default",get:function(){return Wr}},{key:"NAME",get:function(){return zr}},{key:"Event",get:function(){return Xr}},{key:"DefaultType",get:function(){return Gr}},{key:"jQueryInterface",value:function(e){return this.each((function(){var t=o.getOrCreateInstance(this,e);if("string"==typeof e){if(void 0===t[e])throw new TypeError('No method named "'.concat(e,'"'));t[e]()}}))}}],(n=[{key:"enable",value:function(){this._isEnabled=!0}},{key:"disable",value:function(){this._isEnabled=!1}},{key:"toggleEnabled",value:function(){this._isEnabled=!this._isEnabled}},{key:"toggle",value:function(e){this._isEnabled&&(e?((e=this._initializeOnDelegatedTarget(e))._activeTrigger.click=!e._activeTrigger.click,e._isWithActiveTrigger()?e._enter(null,e):e._leave(null,e)):this.getTipElement().classList.contains(Qr)?this._leave(null,this):this._enter(null,this))}},{key:"dispose",value:function(){clearTimeout(this._timeout),$.off(this._element.closest(eo),to,this._hideModalHandler),this.tip&&this.tip.remove(),this._disposePopper(),Vr(Hr(o.prototype),"dispose",this).call(this)}},{key:"show",value:function(){var e,t,n,i=this;if("none"===this._element.style.display)throw new Error("Please use show on visible elements");this.isWithContent()&&this._isEnabled&&(t=$.trigger(this._element,this.constructor.Event.SHOW),n=(null===(n=d(this._element))?this._element.ownerDocument.documentElement:n).contains(this._element),!t.defaultPrevented&&n&&("tooltip"===this.constructor.NAME&&this.tip&&this.getTitle()!==this.tip.querySelector(Zr).innerHTML&&(this._disposePopper(),this.tip.remove(),this.tip=null),t=this.getTipElement(),n=function(e){for(;e+=Math.floor(1e6*Math.random()),document.getElementById(e););return e}(this.constructor.NAME),t.setAttribute("id",n),this._element.setAttribute("aria-describedby",n),this._config.animation&&t.classList.add(Kr),n="function"==typeof this._config.placement?this._config.placement.call(this,t,this._element):this._config.placement,n=this._getAttachment(n),this._addAttachmentClass(n),e=this._config.container,G(t,this.constructor.DATA_KEY,this),this._element.ownerDocument.documentElement.contains(this.tip)||(e.append(t),$.trigger(this._element,this.constructor.Event.INSERTED)),this._popper?this._popper.update():this._popper=Tt(this._element,t,this._getPopperConfig(n)),t.classList.add(Qr),(e=this._resolvePossibleFunction(this._config.customClass))&&(n=t.classList).add.apply(n,Lr(e.split(" "))),"ontouchstart"in document.documentElement&&(t=[]).concat.apply(t,Lr(document.body.children)).forEach((function(e){$.on(e,"mouseover",f)})),n=this.tip.classList.contains(Kr),this._queueCallback((function(){var e=i._hoverState;i._hoverState=null,$.trigger(i._element,i.constructor.Event.SHOWN),"out"===e&&i._leave(null,i)}),this.tip,n)))}},{key:"hide",value:function(){var e,t,n=this;this._popper&&(e=this.getTipElement(),$.trigger(this._element,this.constructor.Event.HIDE).defaultPrevented||(e.classList.remove(Qr),"ontouchstart"in document.documentElement&&(t=[]).concat.apply(t,Lr(document.body.children)).forEach((function(e){return $.off(e,"mouseover",f)})),this._activeTrigger.click=!1,this._activeTrigger[io]=!1,this._activeTrigger[no]=!1,t=this.tip.classList.contains(Kr),this._queueCallback((function(){n._isWithActiveTrigger()||(n._hoverState!==Jr&&e.remove(),n._cleanTipClass(),n._element.removeAttribute("aria-describedby"),$.trigger(n._element,n.constructor.Event.HIDDEN),n._disposePopper())}),this.tip,t),this._hoverState=""))}},{key:"update",value:function(){null!==this._popper&&this._popper.update()}},{key:"isWithContent",value:function(){return Boolean(this.getTitle())}},{key:"getTipElement",value:function(){if(this.tip)return this.tip;var e=((e=document.createElement("div")).innerHTML=this._config.template,e.children[0]);return this.setContent(e),e.classList.remove(Kr,Qr),this.tip=e,this.tip}},{key:"setContent",value:function(e){this._sanitizeAndSetContent(e,this.getTitle(),Zr)}},{key:"_sanitizeAndSetContent",value:function(e,t,n){n=At.findOne(n,e),!t&&n?n.remove():this.setElementContent(n,t)}},{key:"setElementContent",value:function(e,t){if(null!==e)return O(t)?(t=l(t),void(this._config.html?t.parentNode!==e&&(e.innerHTML="",e.append(t)):e.textContent=t.textContent)):void(this._config.html?(this._config.sanitize&&(t=Ar(t,this._config.allowList,this._config.sanitizeFn)),e.innerHTML=t):e.textContent=t)}},{key:"getTitle",value:function(){var e=this._element.getAttribute("data-bs-original-title")||this._config.title;return this._resolvePossibleFunction(e)}},{key:"updateAttachment",value:function(e){return"right"===e?"end":"left"===e?"start":e}},{key:"_initializeOnDelegatedTarget",value:function(e,t){return t||this.constructor.getOrCreateInstance(e.delegateTarget,this._getDelegateConfig())}},{key:"_getOffset",value:function(){var e=this,t=this._config.offset;return"string"==typeof t?t.split(",").map((function(e){return Number.parseInt(e,10)})):"function"==typeof t?function(n){return t(n,e._element)}:t}},{key:"_resolvePossibleFunction",value:function(e){return"function"==typeof e?e.call(this._element):e}},{key:"_getPopperConfig",value:function(e){var t=this;return Nr(Nr({},e={placement:e,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:".".concat(this.constructor.NAME,"-arrow")}},{name:"onChange",enabled:!0,phase:"afterWrite",fn:function(e){return t._handlePopperPlacementChange(e)}}],onFirstUpdate:function(e){e.options.placement!==e.placement&&t._handlePopperPlacementChange(e)}}),"function"==typeof this._config.popperConfig?this._config.popperConfig(e):this._config.popperConfig)}},{key:"_addAttachmentClass",value:function(e){this.getTipElement().classList.add("".concat(this._getBasicClassPrefix(),"-").concat(this.updateAttachment(e)))}},{key:"_getAttachment",value:function(e){return qr[e.toUpperCase()]}},{key:"_setListeners",value:function(){var e=this;this._config.trigger.split(" ").forEach((function(t){var n;"click"===t?$.on(e._element,e.constructor.Event.CLICK,e._config.selector,(function(t){return e.toggle(t)})):"manual"!==t&&(n=t===no?e.constructor.Event.MOUSEENTER:e.constructor.Event.FOCUSIN,t=t===no?e.constructor.Event.MOUSELEAVE:e.constructor.Event.FOCUSOUT,$.on(e._element,n,e._config.selector,(function(t){return e._enter(t)})),$.on(e._element,t,e._config.selector,(function(t){return e._leave(t)})))})),this._hideModalHandler=function(){e._element&&e.hide()},$.on(this._element.closest(eo),to,this._hideModalHandler),this._config.selector?this._config=Nr(Nr({},this._config),{},{trigger:"manual",selector:""}):this._fixTitle()}},{key:"_fixTitle",value:function(){var e=this._element.getAttribute("title"),t=Mr(this._element.getAttribute("data-bs-original-title"));!e&&"string"===t||(this._element.setAttribute("data-bs-original-title",e||""),!e||this._element.getAttribute("aria-label")||this._element.textContent||this._element.setAttribute("aria-label",e),this._element.setAttribute("title",""))}},{key:"_enter",value:function(e,t){t=this._initializeOnDelegatedTarget(e,t),e&&(t._activeTrigger["focusin"===e.type?io:no]=!0),t.getTipElement().classList.contains(Qr)||t._hoverState===Jr?t._hoverState=Jr:(clearTimeout(t._timeout),t._hoverState=Jr,t._config.delay&&t._config.delay.show?t._timeout=setTimeout((function(){t._hoverState===Jr&&t.show()}),t._config.delay.show):t.show())}},{key:"_leave",value:function(e,t){t=this._initializeOnDelegatedTarget(e,t),e&&(t._activeTrigger["focusout"===e.type?io:no]=t._element.contains(e.relatedTarget)),t._isWithActiveTrigger()||(clearTimeout(t._timeout),t._hoverState="out",t._config.delay&&t._config.delay.hide?t._timeout=setTimeout((function(){"out"===t._hoverState&&t.hide()}),t._config.delay.hide):t.hide())}},{key:"_isWithActiveTrigger",value:function(){for(var e in this._activeTrigger)if(this._activeTrigger[e])return!0;return!1}},{key:"_getConfig",value:function(e){var t=Dt.getDataAttributes(this._element);return Object.keys(t).forEach((function(e){Yr.has(e)&&delete t[e]})),(e=Nr(Nr(Nr({},this.constructor.Default),t),"object"===Mr(e)&&e?e:{})).container=!1===e.container?document.body:l(e.container),"number"==typeof e.delay&&(e.delay={show:e.delay,hide:e.delay}),"number"==typeof e.title&&(e.title=e.title.toString()),"number"==typeof e.content&&(e.content=e.content.toString()),u(zr,e,this.constructor.DefaultType),e.sanitize&&(e.template=Ar(e.template,e.allowList,e.sanitizeFn)),e}},{key:"_getDelegateConfig",value:function(){var e,t={};for(e in this._config)this.constructor.Default[e]!==this._config[e]&&(t[e]=this._config[e]);return t}},{key:"_cleanTipClass",value:function(){var e=this.getTipElement(),t=new RegExp("(^|\\s)".concat(this._getBasicClassPrefix(),"\\S+"),"g");null!==(t=e.getAttribute("class").match(t))&&0<t.length&&t.map((function(e){return e.trim()})).forEach((function(t){return e.classList.remove(t)}))}},{key:"_getBasicClassPrefix",value:function(){return"bs-tooltip"}},{key:"_handlePopperPlacementChange",value:function(e){(e=e.state)&&(this.tip=e.elements.popper,this._cleanTipClass(),this._addAttachmentClass(this._getAttachment(e.placement)))}},{key:"_disposePopper",value:function(){this._popper&&(this._popper.destroy(),this._popper=null)}}])&&Br(e.prototype,n),t&&Br(e,t),Object.defineProperty(e,"prototype",{writable:!1}),o}(),b(di),di);function oo(e){return(oo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ao(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function so(e,t){return(so=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function lo(e){return(lo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function uo(e,t){var n,i=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)),i}function co(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?uo(Object(n),!0).forEach((function(t){var i,r;i=e,r=n[t],t in i?Object.defineProperty(i,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):i[t]=r})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):uo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}$r=".".concat("bs.popover");var ho=co(co({},ro.Default),{},{placement:"right",offset:[0,8],trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>'}),fo=co(co({},ro.DefaultType),{},{content:"(string|element|function)"}),po={HIDE:"hide".concat($r),HIDDEN:"hidden".concat($r),SHOW:"show".concat($r),SHOWN:"shown".concat($r),INSERTED:"inserted".concat($r),CLICK:"click".concat($r),FOCUSIN:"focusin".concat($r),FOCUSOUT:"focusout".concat($r),MOUSEENTER:"mouseenter".concat($r),MOUSELEAVE:"mouseleave".concat($r)};di=function(){var e=r,t=ro;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&so(e,t);var n,i=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=lo(e);if(n=t?(n=lo(this).constructor,Reflect.construct(i,arguments,n)):i.apply(this,arguments),i=this,n&&("object"===oo(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==i)return i;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(r);function r(){var e=this,t=r;if(e instanceof t)return i.apply(this,arguments);throw new TypeError("Cannot call a class as a function")}return e=r,t=[{key:"Default",get:function(){return ho}},{key:"NAME",get:function(){return"popover"}},{key:"Event",get:function(){return po}},{key:"DefaultType",get:function(){return fo}},{key:"jQueryInterface",value:function(e){return this.each((function(){var t=r.getOrCreateInstance(this,e);if("string"==typeof e){if(void 0===t[e])throw new TypeError('No method named "'.concat(e,'"'));t[e]()}}))}}],(n=[{key:"isWithContent",value:function(){return this.getTitle()||this._getContent()}},{key:"setContent",value:function(e){this._sanitizeAndSetContent(e,this.getTitle(),".popover-header"),this._sanitizeAndSetContent(e,this._getContent(),".popover-body")}},{key:"_getContent",value:function(){return this._resolvePossibleFunction(this._config.content)}},{key:"_getBasicClassPrefix",value:function(){return"bs-popover"}}])&&ao(e.prototype,n),t&&ao(e,t),Object.defineProperty(e,"prototype",{writable:!1}),r}(),b(di),$r=di;function go(e){return(go="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function mo(e,t){var n,i=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)),i}function bo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?mo(Object(n),!0).forEach((function(t){var i,r;i=e,r=n[t],t in i?Object.defineProperty(i,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):i[t]=r})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function yo(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function vo(){return(vo="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=wo(e)););return e}(e,t);if(i)return(i=Object.getOwnPropertyDescriptor(i,t)).get?i.get.call(arguments.length<3?e:n):i.value}).apply(this,arguments)}function _o(e,t){return(_o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function wo(e){return(wo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(180);var xo="scrollspy",Po=".".concat("bs.scrollspy"),Oo={offset:10,method:"auto",target:""},ko={offset:"number",method:"string",target:"(string|element)"},To="activate".concat(Po),So="scroll".concat(Po),Io=(di="load".concat(Po).concat(".data-api"),"dropdown-item"),Eo="active",Do=".nav-link",jo=".list-group-item",Co="".concat(Do,", ").concat(jo,", .").concat(Io),Ao="position",Mo=function(){var e=r,t=X;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_o(e,t);var n,i=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=wo(e);if(n=t?(n=wo(this).constructor,Reflect.construct(i,arguments,n)):i.apply(this,arguments),i=this,n&&("object"===go(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==i)return i;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(r);function r(e,t){var n;if(this instanceof r)return(n=i.call(this,e))._scrollElement="BODY"===n._element.tagName?window:n._element,n._config=n._getConfig(t),n._offsets=[],n._targets=[],n._activeTarget=null,n._scrollHeight=0,$.on(n._scrollElement,So,(function(){return n._process()})),n.refresh(),n._process(),n;throw new TypeError("Cannot call a class as a function")}return e=r,t=[{key:"Default",get:function(){return Oo}},{key:"NAME",get:function(){return xo}},{key:"jQueryInterface",value:function(e){return this.each((function(){var t=r.getOrCreateInstance(this,e);if("string"==typeof e){if(void 0===t[e])throw new TypeError('No method named "'.concat(e,'"'));t[e]()}}))}}],(n=[{key:"refresh",value:function(){var e=this,t=this._scrollElement===this._scrollElement.window?"offset":Ao,n="auto"===this._config.method?t:this._config.method,i=n===Ao?this._getScrollTop():0;this._offsets=[],this._targets=[],this._scrollHeight=this._getScrollHeight(),At.find(Co,this._config.target).map((function(e){var t=(e=o(e))?At.findOne(e):null;if(t){var r=t.getBoundingClientRect();if(r.width||r.height)return[Dt[n](t).top+i,e]}return null})).filter((function(e){return e})).sort((function(e,t){return e[0]-t[0]})).forEach((function(t){e._offsets.push(t[0]),e._targets.push(t[1])}))}},{key:"dispose",value:function(){$.off(this._scrollElement,Po),vo(wo(r.prototype),"dispose",this).call(this)}},{key:"_getConfig",value:function(e){return(e=bo(bo(bo({},Oo),Dt.getDataAttributes(this._element)),"object"===go(e)&&e?e:{})).target=l(e.target)||document.documentElement,u(xo,e,ko),e}},{key:"_getScrollTop",value:function(){return this._scrollElement===window?this._scrollElement.pageYOffset:this._scrollElement.scrollTop}},{key:"_getScrollHeight",value:function(){return this._scrollElement.scrollHeight||Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)}},{key:"_getOffsetHeight",value:function(){return this._scrollElement===window?window.innerHeight:this._scrollElement.getBoundingClientRect().height}},{key:"_process",value:function(){var e=this._getScrollTop()+this._config.offset,t=this._getScrollHeight(),n=this._config.offset+t-this._getOffsetHeight();if(this._scrollHeight!==t&&this.refresh(),n<=e)return t=this._targets[this._targets.length-1],void(this._activeTarget!==t&&this._activate(t));if(this._activeTarget&&e<this._offsets[0]&&0<this._offsets[0])return this._activeTarget=null,void this._clear();for(var i=this._offsets.length;i--;)this._activeTarget!==this._targets[i]&&e>=this._offsets[i]&&(void 0===this._offsets[i+1]||e<this._offsets[i+1])&&this._activate(this._targets[i])}},{key:"_activate",value:function(e){this._activeTarget=e,this._clear();var t=Co.split(",").map((function(t){return"".concat(t,'[data-bs-target="').concat(e,'"],').concat(t,'[href="').concat(e,'"]')}));(t=At.findOne(t.join(","),this._config.target)).classList.add(Eo),t.classList.contains(Io)?At.findOne(".dropdown-toggle",t.closest(".dropdown")).classList.add(Eo):At.parents(t,".nav, .list-group").forEach((function(e){At.prev(e,"".concat(Do,", ").concat(jo)).forEach((function(e){return e.classList.add(Eo)})),At.prev(e,".nav-item").forEach((function(e){At.children(e,Do).forEach((function(e){return e.classList.add(Eo)}))}))})),$.trigger(this._scrollElement,To,{relatedTarget:e})}},{key:"_clear",value:function(){At.find(Co,this._config.target).filter((function(e){return e.classList.contains(Eo)})).forEach((function(e){return e.classList.remove(Eo)}))}}])&&yo(e.prototype,n),t&&yo(e,t),Object.defineProperty(e,"prototype",{writable:!1}),r}();$.on(window,di,(function(){At.find('[data-bs-spy="scroll"]').forEach((function(e){return new Mo(e)}))})),b(Mo),di=Mo;function Ro(e){return(Ro="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function No(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Lo(e,t){return(Lo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Fo(e){return(Fo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Bo=".".concat("bs.tab"),Vo="hide".concat(Bo),Uo="hidden".concat(Bo),Ho="show".concat(Bo),zo="shown".concat(Bo),$o=(Bo="click".concat(Bo).concat(".data-api"),"active"),Yo=".active",Go=":scope > li > .active",qo=function(){var e=r,t=X;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Lo(e,t);var n,i=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=Fo(e);if(n=t?(n=Fo(this).constructor,Reflect.construct(i,arguments,n)):i.apply(this,arguments),i=this,n&&("object"===Ro(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==i)return i;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(r);function r(){var e=this,t=r;if(e instanceof t)return i.apply(this,arguments);throw new TypeError("Cannot call a class as a function")}return e=r,t=[{key:"NAME",get:function(){return"tab"}},{key:"jQueryInterface",value:function(e){return this.each((function(){var t=r.getOrCreateInstance(this);if("string"==typeof e){if(void 0===t[e])throw new TypeError('No method named "'.concat(e,'"'));t[e]()}}))}}],(n=[{key:"show",value:function(){var e,t,n,i,r=this;this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE&&this._element.classList.contains($o)||(e=a(this._element),(t=this._element.closest(".nav, .list-group"))&&(i="UL"===t.nodeName||"OL"===t.nodeName?Go:Yo,n=(n=At.find(i,t))[n.length-1]),i=n?$.trigger(n,Vo,{relatedTarget:this._element}):null,$.trigger(this._element,Ho,{relatedTarget:n}).defaultPrevented||null!==i&&i.defaultPrevented||(this._activate(this._element,t),i=function(){$.trigger(n,Uo,{relatedTarget:r._element}),$.trigger(r._element,zo,{relatedTarget:n})},e?this._activate(e,e.parentNode,i):i()))}},{key:"_activate",value:function(e,t,n){function i(){return r._transitionComplete(e,o,n)}var r=this,o=(!t||"UL"!==t.nodeName&&"OL"!==t.nodeName?At.children(t,Yo):At.find(Go,t))[0];t=n&&o&&o.classList.contains("fade");o&&t?(o.classList.remove("show"),this._queueCallback(i,e,!0)):i()}},{key:"_transitionComplete",value:function(e,t,n){t&&(t.classList.remove($o),(i=At.findOne(":scope > .dropdown-menu .active",t.parentNode))&&i.classList.remove($o),"tab"===t.getAttribute("role")&&t.setAttribute("aria-selected",!1)),e.classList.add($o),"tab"===e.getAttribute("role")&&e.setAttribute("aria-selected",!0),p(e),e.classList.contains("fade")&&e.classList.add("show");var i=e.parentNode;(i=i&&"LI"===i.nodeName?i.parentNode:i)&&i.classList.contains("dropdown-menu")&&((t=e.closest(".dropdown"))&&At.find(".dropdown-toggle",t).forEach((function(e){return e.classList.add($o)})),e.setAttribute("aria-expanded",!0)),n&&n()}}])&&No(e.prototype,n),t&&No(e,t),Object.defineProperty(e,"prototype",{writable:!1}),r}();$.on(document,Bo,'[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',(function(e){["A","AREA"].includes(this.tagName)&&e.preventDefault(),h(this)||qo.getOrCreateInstance(this).show()})),b(qo),Bo=qo;function Wo(e){return(Wo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Xo(e,t){var n,i=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)),i}function Ko(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xo(Object(n),!0).forEach((function(t){var i,r;i=e,r=n[t],t in i?Object.defineProperty(i,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):i[t]=r})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Qo(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Jo(){return(Jo="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ea(e)););return e}(e,t);if(i)return(i=Object.getOwnPropertyDescriptor(i,t)).get?i.get.call(arguments.length<3?e:n):i.value}).apply(this,arguments)}function Zo(e,t){return(Zo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ea(e){return(ea=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ta(e){for(;e+=Math.floor(Math.random()*_a),document.getElementById(e););return e}function na(e,t,n){Object.keys(n).forEach((function(i){var r,o=n[i],a=(a=t[i])&&((r=a)[0]||r).nodeType?"element":null==(r=a)?"".concat(r):{}.toString.call(r).match(/\s([a-z]+)/i)[1].toLowerCase();if(!new RegExp(o).test(a))throw new Error("".concat(e.toUpperCase(),": ")+'Option "'.concat(i,'" provided type "').concat(a,'" ')+'but expected type "'.concat(o,'".'))}))}function ia(){var e=window.jQuery;return e&&!document.body.hasAttribute("data-mdb-no-jquery")?e:null}function ra(e){return document.createElement(e)}var oa,aa,sa=".".concat("bs.toast"),la="mouseover".concat(sa),ua="mouseout".concat(sa),ca="focusin".concat(sa),ha="focusout".concat(sa),da="hide".concat(sa),fa="hidden".concat(sa),pa="show".concat(sa),ga="shown".concat(sa),ma="show",ba="showing",ya={animation:"boolean",autohide:"boolean",delay:"number"},va={animation:!0,autohide:!0,delay:5e3},_a=(sa=function(){var e=r,t=X;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Zo(e,t);var n,i=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=ea(e);if(n=t?(n=ea(this).constructor,Reflect.construct(i,arguments,n)):i.apply(this,arguments),i=this,n&&("object"===Wo(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==i)return i;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(r);function r(e,t){if(this instanceof r)return(e=i.call(this,e))._config=e._getConfig(t),e._timeout=null,e._hasMouseInteraction=!1,e._hasKeyboardInteraction=!1,e._setListeners(),e;throw new TypeError("Cannot call a class as a function")}return e=r,t=[{key:"DefaultType",get:function(){return ya}},{key:"Default",get:function(){return va}},{key:"NAME",get:function(){return"toast"}},{key:"jQueryInterface",value:function(e){return this.each((function(){var t=r.getOrCreateInstance(this,e);if("string"==typeof e){if(void 0===t[e])throw new TypeError('No method named "'.concat(e,'"'));t[e](this)}}))}}],(n=[{key:"show",value:function(){var e=this;$.trigger(this._element,pa).defaultPrevented||(this._clearTimeout(),this._config.animation&&this._element.classList.add("fade"),this._element.classList.remove("hide"),p(this._element),this._element.classList.add(ma),this._element.classList.add(ba),this._queueCallback((function(){e._element.classList.remove(ba),$.trigger(e._element,ga),e._maybeScheduleHide()}),this._element,this._config.animation))}},{key:"hide",value:function(){var e=this;this._element.classList.contains(ma)&&!$.trigger(this._element,da).defaultPrevented&&(this._element.classList.add(ba),this._queueCallback((function(){e._element.classList.add("hide"),e._element.classList.remove(ba),e._element.classList.remove(ma),$.trigger(e._element,fa)}),this._element,this._config.animation))}},{key:"dispose",value:function(){this._clearTimeout(),this._element.classList.contains(ma)&&this._element.classList.remove(ma),Jo(ea(r.prototype),"dispose",this).call(this)}},{key:"_getConfig",value:function(e){return u("toast",e=Ko(Ko(Ko({},va),Dt.getDataAttributes(this._element)),"object"===Wo(e)&&e?e:{}),this.constructor.DefaultType),e}},{key:"_maybeScheduleHide",value:function(){var e=this;!this._config.autohide||this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout((function(){e.hide()}),this._config.delay))}},{key:"_onInteraction",value:function(e,t){switch(e.type){case"mouseover":case"mouseout":this._hasMouseInteraction=t;break;case"focusin":case"focusout":this._hasKeyboardInteraction=t}t?this._clearTimeout():(e=e.relatedTarget,this._element===e||this._element.contains(e)||this._maybeScheduleHide())}},{key:"_setListeners",value:function(){var e=this;$.on(this._element,la,(function(t){return e._onInteraction(t,!0)})),$.on(this._element,ua,(function(t){return e._onInteraction(t,!1)})),$.on(this._element,ca,(function(t){return e._onInteraction(t,!0)})),$.on(this._element,ha,(function(t){return e._onInteraction(t,!1)}))}},{key:"_clearTimeout",value:function(){clearTimeout(this._timeout),this._timeout=null}}])&&Qo(e.prototype,n),t&&Qo(e,t),Object.defineProperty(e,"prototype",{writable:!1}),r}(),Kn(sa),b(sa),1e6),wa=(document.documentElement.dir,oa={},aa=1,{set:function(e,t,n){void 0===e[t]&&(e[t]={key:t,id:aa},aa++),oa[e[t].id]=n},get:function(e,t){return e&&void 0!==e[t]&&(e=e[t]).key===t?oa[e.id]:null},delete:function(e,t){var n;void 0!==e[t]&&(n=e[t]).key===t&&(delete oa[n.id],delete e[t])}}),xa=function(e,t,n){wa.set(e,t,n)},Pa=function(e,t){return wa.get(e,t)},Oa=function(e,t){wa.delete(e,t)};function ka(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,r,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(i=n.next()).done)&&(o.push(i.value),!t||o.length!==t);a=!0);}catch(e){s=!0,r=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw r}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Ta(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ta(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ta(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var Sa=ia(),Ia=/[^.]*(?=\..*)\.|.*/,Ea=/\..*/,Da=/::\d+$/,ja={},Ca=1,Aa={mouseenter:"mouseover",mouseleave:"mouseout"},Ma=["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"];function Ra(e,t){return t&&"".concat(t,"::").concat(Ca++)||e.uidEvent||Ca++}function Na(e){var t=Ra(e);return e.uidEvent=t,ja[t]=ja[t]||{},ja[t]}function La(e,t,n){for(var i=2<arguments.length&&void 0!==n?n:null,r=Object.keys(e),o=0,a=r.length;o<a;o++){var s=e[r[o]];if(s.originalHandler===t&&s.delegationSelector===i)return s}return null}function Fa(e,t,n){var i="string"==typeof t,r=(n=i?n:t,t=e.replace(Ea,""),Aa[t]);return[i,n,t=-1<Ma.indexOf(t=r||t)?t:e]}function Ba(e,t,n,i,r){var o,a,s,l,u,c,h,d,f,p;"string"==typeof t&&e&&(n||(n=i,i=null),o=(s=ka(Fa(t,n,i),3))[0],a=s[1],s=s[2],(u=La(l=(l=Na(e))[s]||(l[s]={}),a,o?n:null))?u.oneOff=u.oneOff&&r:(u=Ra(a,t.replace(Ia,"")),(t=o?(d=e,f=n,p=i,function e(t){for(var n=d.querySelectorAll(f),i=t.target;i&&i!==this;i=i.parentNode)for(var r=n.length;r--;)if(n[r]===i)return t.delegateTarget=i,e.oneOff&&Ua.off(d,t.type,p),p.apply(i,[t]);return null}):(c=e,h=n,function e(t){return t.delegateTarget=c,e.oneOff&&Ua.off(c,t.type,h),h.apply(c,[t])})).delegationSelector=o?n:null,t.originalHandler=a,t.oneOff=r,l[t.uidEvent=u]=t,e.addEventListener(s,t,o)))}function Va(e,t,n,i,r){(i=La(t[n],i,r))&&(e.removeEventListener(n,i,Boolean(r)),delete t[n][i.uidEvent])}var Ua={on:function(e,t,n,i){Ba(e,t,n,i,!1)},one:function(e,t,n,i){Ba(e,t,n,i,!0)},off:function(e,t,n,i){if("string"==typeof t&&e){var r=(i=ka(Fa(t,n,i),3))[0],o=i[1],a=i[2],s=a!==t,l=Na(e);i="."===t.charAt(0);if(void 0!==o)return l&&l[a]?void Va(e,l,a,o,r?n:null):void 0;i&&Object.keys(l).forEach((function(n){var i,r,o,a,s;i=e,r=l,o=n,a=t.slice(1),s=r[o]||{},Object.keys(s).forEach((function(e){-1<e.indexOf(a)&&(e=s[e],Va(i,r,o,e.originalHandler,e.delegationSelector))}))}));var u=l[a]||{};Object.keys(u).forEach((function(n){var i=n.replace(Da,"");(!s||-1<t.indexOf(i))&&(i=u[n],Va(e,l,a,i.originalHandler,i.delegationSelector))}))}},trigger:function(e,t,n){if("string"!=typeof t||!e)return null;var i,r=t.replace(Ea,""),o=t!==r,a=-1<Ma.indexOf(r),s=!0,l=!0,u=!1,c=null;return o&&Sa&&(i=Sa.Event(t,n),Sa(e).trigger(i),s=!i.isPropagationStopped(),l=!i.isImmediatePropagationStopped(),u=i.isDefaultPrevented()),a?(c=document.createEvent("HTMLEvents")).initEvent(r,s,!0):c=new CustomEvent(t,{bubbles:s,cancelable:!0}),void 0!==n&&Object.keys(n).forEach((function(e){Object.defineProperty(c,e,{get:function(){return n[e]}})})),u&&c.preventDefault(),l&&e.dispatchEvent(c),c.defaultPrevented&&void 0!==i&&i.preventDefault(),c}},Ha=function(e,t,n,i){for(var r=t.split(" "),o=0;o<r.length;o++)Ua.on(e,r[o],n,i)},za=Ua;function $a(e,t){var n,i=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)),i}function Ya(e){return"true"===e||"false"!==e&&(e===Number(e).toString()?Number(e):""===e||"null"===e?null:e)}function Ga(e){return e.replace(/[A-Z]/g,(function(e){return"-".concat(e.toLowerCase())}))}n(185);var qa=function(e){if(!e)return{};var t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$a(Object(n),!0).forEach((function(t){var i,r;i=e,r=n[t],t in i?Object.defineProperty(i,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):i[t]=r})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e.dataset);return Object.keys(t).filter((function(e){return e.startsWith("mdb")})).forEach((function(e){var n=(n=e.replace(/^mdb/,"")).charAt(0).toLowerCase()+n.slice(1,n.length);t[n]=Ya(t[e])})),t},Wa=function(e,t){return Ya(e.getAttribute("data-mdb-".concat(Ga(t))))},Xa=function(e,t){Object.assign(e.style,t)},Ka=function(e,t){e.classList.contains(t)||e.classList.add(t)},Qa=function(e,t){Object.keys(t).forEach((function(n){e.style[n]=t[n]}))},Ja=function(e,t){e.classList.contains(t)&&e.classList.remove(t)},Za=function(e,t){return e.classList.contains(t)};function es(e){return function(e){if(Array.isArray(e))return ts(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return ts(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ts(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ts(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var ns={closest:function(e,t){return e.closest(t)},matches:function(e,t){return e.matches(t)},find:function(e){var t,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:document.documentElement;return(t=[]).concat.apply(t,es(Element.prototype.querySelectorAll.call(n,e)))},findOne:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:document.documentElement;return Element.prototype.querySelector.call(t,e)},children:function(e,t){var n;return(n=[]).concat.apply(n,es(e.children)).filter((function(e){return e.matches(t)}))},parents:function(e,t){for(var n=[],i=e.parentNode;i&&i.nodeType===Node.ELEMENT_NODE&&3!==i.nodeType;)this.matches(i,t)&&n.push(i),i=i.parentNode;return n},prev:function(e,t){for(var n=e.previousElementSibling;n;){if(n.matches(t))return[n];n=n.previousElementSibling}return[]},next:function(e,t){for(var n=e.nextElementSibling;n;){if(this.matches(n,t))return[n];n=n.nextElementSibling}return[]}};function is(e){return(is="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function rs(e,t){var n,i=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)),i}function os(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rs(Object(n),!0).forEach((function(t){var i,r;i=e,r=n[t],t in i?Object.defineProperty(i,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):i[t]=r})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rs(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function as(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var ss="ripple",ls="mdb.ripple",us="ripple-surface",cs="ripple-wave",hs=["[data-mdb-ripple]"],ds="ripple-surface-unbound",fs=[0,0,0],ps=["primary","secondary","success","danger","warning","info","light","dark"],gs={rippleCentered:!1,rippleColor:"",rippleDuration:"500ms",rippleRadius:0,rippleUnbound:!1},ms={rippleCentered:"boolean",rippleColor:"string",rippleDuration:"string",rippleRadius:"number",rippleUnbound:"boolean"},bs=function(){function e(t,n){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this._element=t,this._options=this._getConfig(n),this._element&&(xa(t,ls,this),Ka(this._element,us)),this._clickHandler=this._createRipple.bind(this),this._rippleTimer=null,this._isMinWidthSet=!1,this.init()}var t,n,i;return t=e,i=[{key:"NAME",get:function(){return ss}},{key:"autoInitial",value:function(e){return function(t){e._autoInit(t)}}},{key:"jQueryInterface",value:function(t){return this.each((function(){return Pa(this,ls)?null:new e(this,t)}))}},{key:"getInstance",value:function(e){return Pa(e,ls)}},{key:"getOrCreateInstance",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return this.getInstance(e)||new this(e,"object"===is(t)?t:null)}}],(n=[{key:"init",value:function(){this._addClickEvent(this._element)}},{key:"dispose",value:function(){Oa(this._element,ls),za.off(this._element,"click",this._clickHandler),this._element=null,this._options=null}},{key:"_autoInit",value:function(e){var t=this;hs.forEach((function(n){ns.closest(e.target,n)&&(t._element=ns.closest(e.target,n))})),this._element.style.minWidth||(Xa(this._element,{"min-width":"".concat(this._element.offsetWidth,"px")}),this._isMinWidthSet=!0),Ka(this._element,us),this._options=this._getConfig(),this._createRipple(e)}},{key:"_addClickEvent",value:function(e){za.on(e,"mousedown",this._clickHandler)}},{key:"_createRipple",value:function(e){Za(this._element,us)||Ka(this._element,us);var t=e.layerX,n=(e=e.layerY,this._element.offsetHeight),i=this._element.offsetWidth,r=this._durationToMsNumber(this._options.rippleDuration),o={offsetX:this._options.rippleCentered?n/2:t,offsetY:this._options.rippleCentered?i/2:e,height:n,width:i},a=(o=this._getDiameter(o),this._options.rippleRadius||o/2),s={delay:.5*r,duration:r-.5*r};i={left:this._options.rippleCentered?"".concat(i/2-a,"px"):"".concat(t-a,"px"),top:this._options.rippleCentered?"".concat(n/2-a,"px"):"".concat(e-a,"px"),height:"".concat(2*this._options.rippleRadius||o,"px"),width:"".concat(2*this._options.rippleRadius||o,"px"),transitionDelay:"0s, ".concat(s.delay,"ms"),transitionDuration:"".concat(r,"ms, ").concat(s.duration,"ms")},t=ra("div");this._createHTMLRipple({wrapper:this._element,ripple:t,styles:i}),this._removeHTMLRipple({ripple:t,duration:r})}},{key:"_createHTMLRipple",value:function(e){var t=e.wrapper,n=e.ripple,i=e.styles;Object.keys(i).forEach((function(e){return n.style[e]=i[e]})),n.classList.add(cs),""!==this._options.rippleColor&&(this._removeOldColorClasses(t),this._addColor(n,t)),this._toggleUnbound(t),this._appendRipple(n,t)}},{key:"_removeHTMLRipple",value:function(e){var t=this,n=e.ripple;e=e.duration;this._rippleTimer&&(clearTimeout(this._rippleTimer),this._rippleTimer=null),this._rippleTimer=setTimeout((function(){n&&(n.remove(),t._element&&(ns.find(".".concat(cs),t._element).forEach((function(e){e.remove()})),t._isMinWidthSet&&(Xa(t._element,{"min-width":""}),t._isMinWidthSet=!1),Ja(t._element,us)))}),e)}},{key:"_durationToMsNumber",value:function(e){return Number(e.replace("ms","").replace("s","000"))}},{key:"_getConfig",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=qa(this._element);e=os(os(os({},gs),t),e);return na(ss,e,ms),e}},{key:"_getDiameter",value:function(e){function t(e,t){return Math.sqrt(Math.pow(e,2)+Math.pow(t,2))}var n=e.offsetX,i=e.offsetY,r=e.height,o=n<=(e=e.width)/2,a=i===r/2&&n===e/2,s=1==(c=i<=r/2)&&0==o,l=1==c&&1==o,u=0==c&&1==o,c=0==c&&0==o;o={topLeft:t(n,i),topRight:t(e-n,i),bottomLeft:t(n,r-i),bottomRight:t(e-n,r-i)},e=0;return a||c?e=o.topLeft:u?e=o.topRight:l?e=o.bottomRight:s&&(e=o.bottomLeft),2*e}},{key:"_appendRipple",value:function(e,t){t.appendChild(e),setTimeout((function(){Ka(e,"active")}),50)}},{key:"_toggleUnbound",value:function(e){!0===this._options.rippleUnbound?Ka(e,ds):e.classList.remove(ds)}},{key:"_addColor",value:function(e,t){var n=this;ps.find((function(e){return e===n._options.rippleColor.toLowerCase()}))?Ka(t,"".concat(us,"-").concat(this._options.rippleColor.toLowerCase())):(t=this._colorToRGB(this._options.rippleColor).join(","),t="rgba({{color}}, 0.2) 0, rgba({{color}}, 0.3) 40%, rgba({{color}}, 0.4) 50%, rgba({{color}}, 0.5) 60%, rgba({{color}}, 0) 70%".split("{{color}}").join("".concat(t)),e.style.backgroundImage="radial-gradient(circle, ".concat(t,")"))}},{key:"_removeOldColorClasses",value:function(e){var t=new RegExp("".concat(us,"-[a-z]+"),"gi");(e.classList.value.match(t)||[]).forEach((function(t){e.classList.remove(t)}))}},{key:"_colorToRGB",value:function(e){return"transparent"===e.toLowerCase()?fs:"#"===e[0]?((t=e).length<7&&(t="#".concat(t[1]).concat(t[1]).concat(t[2]).concat(t[2]).concat(t[3]).concat(t[3])),[parseInt(t.substr(1,2),16),parseInt(t.substr(3,2),16),parseInt(t.substr(5,2),16)]):(-1===e.indexOf("rgb")&&(t=e,i="rgb(1, 2, 3)",(n=document.body.appendChild(document.createElement("fictum"))).style.color=i,e=n.style.color!==i?fs:(n.style.color=t,n.style.color===i||""===n.style.color?fs:(t=getComputedStyle(n).color,document.body.removeChild(n),t))),0===e.indexOf("rgb")?((i=(i=e).match(/[.\d]+/g).map((function(e){return+Number(e)}))).length=3,i):fs);var t,n,i}}])&&as(t.prototype,n),i&&as(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}(),ys=(hs.forEach((function(e){za.one(document,"mousedown",e,bs.autoInitial(new bs))})),function(e){"loading"===document.readyState?document.addEventListener("DOMContentLoaded",e):e()}((function(){var e,t=ia();t&&(e=t.fn[ss],t.fn[ss]=bs.jQueryInterface,t.fn[ss].Constructor=bs,t.fn[ss].noConflict=function(){return t.fn[ss]=e,bs.jQueryInterface})})),bs);n(187);var vs=function(){function e(t){var n=this,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=2<arguments.length?arguments[2]:void 0,o=this,a=e;if(!(o instanceof a))throw new TypeError("Cannot call a class as a function");this._element=t,this._toggler=r,this._event=i.event||"blur",this._condition=i.condition||function(){return!0},this._selector=i.selector||'button, a, input, select, textarea, [tabindex]:not([tabindex="-1"])',this._onlyVisible=i.onlyVisible||!1,this._focusableElements=[],this._firstElement=null,this._lastElement=null,this.handler=function(e){n._condition(e)&&e.target===n._lastElement&&(e.preventDefault(),n._firstElement.focus())}}var t,n;return t=e,(n=[{key:"trap",value:function(){this._setElements(),this._init(),this._setFocusTrap()}},{key:"disable",value:function(){var e=this;this._focusableElements.forEach((function(t){t.removeEventListener(e._event,e.handler)})),this._toggler&&this._toggler.focus()}},{key:"update",value:function(){this._setElements(),this._setFocusTrap()}},{key:"_init",value:function(){var e=this;window.addEventListener("keydown",(function t(n){e._firstElement&&"Tab"===n.key&&!e._focusableElements.includes(n.target)&&(n.preventDefault(),e._firstElement.focus(),window.removeEventListener("keydown",t))}))}},{key:"_filterVisible",value:function(e){return e.filter((function(e){if(!((t=e)&&t.style&&t.parentNode&&t.parentNode.style&&(n=getComputedStyle(t),t=getComputedStyle(t.parentNode),"none"!==n.display&&"none"!==t.display&&"hidden"!==n.visibility)))return!1;for(var t,n,i=ns.parents(e,"*"),r=0;r<i.length;r++){var o=window.getComputedStyle(i[r]);if(o&&("none"===o.display||"hidden"===o.visibility))return!1}return!0}))}},{key:"_setElements",value:function(){this._focusableElements=ns.find(this._selector,this._element),this._onlyVisible&&(this._focusableElements=this._filterVisible(this._focusableElements)),this._firstElement=this._focusableElements[0],this._lastElement=this._focusableElements[this._focusableElements.length-1]}},{key:"_setFocusTrap",value:function(){var e=this;this._focusableElements.forEach((function(t,n){n===e._focusableElements.length-1?t.addEventListener(e._event,e.handler):t.removeEventListener(e._event,e.handler)}))}}])&&function(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function _s(e){return e.getDate()}function ws(e){return e.getDay()}function xs(e){return e.getMonth()}function Ps(e){return e.getFullYear()}function Os(e){return Es(e.getFullYear(),e.getMonth()+1,0).getDate()}function ks(){return new Date}function Ts(e,t){return Ss(e,12*t)}function Ss(e,t){return t=Es(e.getFullYear(),e.getMonth()+t,e.getDate()),_s(e)!==_s(t)&&t.setDate(0),t}function Is(e,t){return Es(e.getFullYear(),e.getMonth(),e.getDate()+t)}function Es(e,t,n){return t=new Date(e,t,n),0<=e&&e<100&&t.setFullYear(t.getFullYear()-1900),t}function Ds(e){return Es((e=e.split("-"))[0],e[1],e[2])}function js(e,t){return e.setHours(0,0,0,0),t.setHours(0,0,0,0),e.getTime()===t.getTime()}function Cs(e,t){return((Ps(e)-function(e,t,n){var i=0;return n&&(i=(n=Ps(n))-void 0+1),i}())%t+t)%t}function As(e,t,n,i,r){return"days"===n?Ps(e)===Ps(t)&&xs(e)===xs(t):"months"===n?Ps(e)===Ps(t):"years"===n&&Ps(t)>=r&&Ps(t)<=i}function Ms(e,t,n){return e=function(e,t,n){for(var i=[],r=xs(e),o=xs(Ss(e,-1)),a=xs(Ss(e,1)),s=Ps(e),l=function(e,t,n){return n=0<(n=n.startDay)?7-n:0,7<=(e=new Date(e,t).getDay()+n)?e-7:e}(s,r,n),u=Os(e),c=Os(Ss(e,-1)),h=1,d=!1,f=1;f<7;f++){var p=[];if(1===f){for(var g=c-l+1;g<=c;g++){var m=Es(s,o,g);p.push({date:m,currentMonth:d,isSelected:t&&js(m,t),isToday:js(m,ks()),dayNumber:_s(m)})}d=!0;for(var b=7-p.length,y=0;y<b;y++){var v=Es(s,r,h);p.push({date:v,currentMonth:d,isSelected:t&&js(v,t),isToday:js(v,ks()),dayNumber:_s(v)}),h++}}else for(var _=1;_<8;_++){u<h&&(d=!(h=1));var w=Es(s,d?r:a,h);p.push({date:w,currentMonth:d,isSelected:t&&js(w,t),isToday:js(w,ks()),dayNumber:_s(w)}),h++}i.push(p)}return i}(e,t,n),t=n.weekdaysNarrow,t="\n      <tr>\n        ".concat(t.map((function(e,t){return'<th class="datepicker-day-heading" scope="col" aria-label="'.concat(n.weekdaysFull[t],'">').concat(e,"</th>")})).join(""),"\n      </tr>\n    "),e=e.map((function(e){return"\n        <tr>\n          ".concat(e.map((function(e){return'\n              <td\n              class="datepicker-cell datepicker-small-cell datepicker-day-cell\n              '.concat(e.currentMonth?"":"disabled"," ").concat(e.disabled?"disabled":"","\n              ").concat(e.isToday&&"current"," ").concat(e.isSelected&&"selected",'"\n              data-mdb-date="').concat(Ps(e.date),"-").concat(xs(e.date),"-").concat(_s(e.date),'"\n              aria-label="').concat(e.date,'"\n              aria-selected="').concat(e.isSelected,'">\n                <div\n                  class="datepicker-cell-content datepicker-small-cell-content"\n                  style="').concat(e.currentMonth?"display: block":"display: none",'">\n                  ').concat(e.dayNumber,"\n                  </div>\n              </td>\n            ")})).join(""),"\n        </tr>\n      ")})).join(""),'\n      <table class="datepicker-table">\n        <thead>\n          '.concat(t,'\n        </thead>\n        <tbody class="datepicker-table-body">\n         ').concat(e,"\n        </tbody>\n      </table>\n    ")}function Rs(e,t,n,i,r){r=function(e,t){for(var n=[],i=[],r=0;r<e.monthsShort.length;r++){var o;i.push(e.monthsShort[r]),i.length===t&&(o=i,n.push(o),i=[])}return n}(i,r);var o=xs(ks());r="\n      ".concat(r.map((function(r){return"\n          <tr>\n            ".concat(r.map((function(r){var a=i.monthsShort.indexOf(r);return'\n                <td class="datepicker-cell datepicker-large-cell datepicker-month-cell '.concat(a===n&&e===t?"selected":""," ").concat(a===o?"current":"",'" data-mdb-month="').concat(a,'" data-mdb-year="').concat(e,'" aria-label="').concat(r,", ").concat(e,'">\n                  <div class="datepicker-cell-content datepicker-large-cell-content">').concat(r,"</div>\n                </td>\n              ")})).join(""),"\n          </tr>\n        ")})).join(""),"\n    ");return'\n      <table class="datepicker-table">\n        <tbody class="datepicker-table-body">\n         '.concat(r,"\n        </tbody>\n      </table>\n    ")}function Ns(e,t,n,i,r){e=function(e,t,n){for(var i=[],r=Ps(e)-(e=Cs(e,t)),o=[],a=0;a<t;a++){var s;o.push(r+a),o.length===n&&(s=o,i.push(s),o=[])}return i}(e,i,r);var o=Ps(ks());i="\n    ".concat(e.map((function(e){return"\n        <tr>\n          ".concat(e.map((function(e){return'\n              <td class="datepicker-cell datepicker-large-cell datepicker-year-cell '.concat(e===t?"selected":""," ").concat(e===o?"current":"",'" aria-label="').concat(e,'" data-mdb-year="').concat(e,'">\n                <div class="datepicker-cell-content datepicker-large-cell-content">').concat(e,"</div>\n              </td>\n            ")})).join(""),"\n        </tr>\n      ")})).join(""),"\n  ");return'\n      <table class="datepicker-table">\n        <tbody class="datepicker-table-body">\n        '.concat(i,"\n        </tbody>\n      </table>\n    ")}function Ls(e){return(Ls="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Fs(e,t){var n,i=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)),i}function Bs(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Fs(Object(n),!0).forEach((function(t){var i,r;i=e,r=n[t],t in i?Object.defineProperty(i,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):i[t]=r})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fs(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Vs(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}n(188);var Us="datepicker",Hs="mdb.datepicker",zs=".".concat(Hs),$s="close".concat(zs),Ys="open".concat(zs),Gs="dateChange".concat(zs),qs="click".concat(zs).concat(".data-api"),Ws={title:"Select date",monthsFull:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekdaysFull:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdaysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],weekdaysNarrow:["S","M","T","W","T","F","S"],okBtnText:"Ok",clearBtnText:"Clear",cancelBtnText:"Cancel",okBtnLabel:"Confirm selection",clearBtnLabel:"Clear selection",cancelBtnLabel:"Cancel selection",nextMonthLabel:"Next month",prevMonthLabel:"Previous month",nextYearLabel:"Next year",prevYearLabel:"Previous year",nextMultiYearLabel:"Next 24 years",prevMultiYearLabel:"Previous 24 years",switchToMultiYearViewLabel:"Choose year and month",switchToMonthViewLabel:"Choose date",switchToDayViewLabel:"Choose date",startDate:null,startDay:0,format:"dd/mm/yyyy",view:"days",toggleButton:!0,disableToggleButton:!1,disableInput:!1},Xs={title:"string",monthsFull:"array",monthsShort:"array",weekdaysFull:"array",weekdaysShort:"array",weekdaysNarrow:"array",okBtnText:"string",clearBtnText:"string",cancelBtnText:"string",okBtnLabel:"string",clearBtnLabel:"string",cancelBtnLabel:"string",nextMonthLabel:"string",prevMonthLabel:"string",nextYearLabel:"string",prevYearLabel:"string",nextMultiYearLabel:"string",prevMultiYearLabel:"string",switchToMultiYearViewLabel:"string",switchToMonthViewLabel:"string",switchToDayViewLabel:"string",startDate:"(null|string|date)",startDay:"number",format:"string",view:"string",toggleButton:"boolean",disableToggleButton:"boolean",disableInput:"boolean"},Ks=function(){function e(t,n){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this._element=t,this._input=ns.findOne("input",this._element),this._options=this._getConfig(n),this._activeDate=new Date,this._selectedDate=null,this._selectedYear=null,this._selectedMonth=null,this._view=this._options.view,this._popper=null,this._focusTrap=null,this._isOpen=!1,this._toggleButtonId=ta("datepicker-toggle-"),this._element&&xa(t,Hs,this),this._init(),this.toggleButton&&this._options.disableToggle&&(this.toggleButton.disabled="true"),this._options.disableInput&&(this._input.disabled="true")}var t,n,i;return t=e,i=[{key:"NAME",get:function(){return Us}},{key:"getInstance",value:function(e){return Pa(e,Hs)}},{key:"getOrCreateInstance",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return this.getInstance(e)||new this(e,"object"===Ls(t)?t:null)}}],(n=[{key:"container",get:function(){return ns.findOne(".datepicker-modal-container".concat("-",this._toggleButtonId))||ns.findOne(".datepicker-dropdown-container".concat("-",this._toggleButtonId))}},{key:"options",get:function(){return this._options}},{key:"activeCell",get:function(){var e;return"days"===this._view&&(e=this._getActiveDayCell()),"months"===this._view&&(e=this._getActiveMonthCell()),"years"===this._view?this._getActiveYearCell():e}},{key:"activeDay",get:function(){return _s(this._activeDate)}},{key:"activeMonth",get:function(){return xs(this._activeDate)}},{key:"activeYear",get:function(){return Ps(this._activeDate)}},{key:"firstYearInView",get:function(){return this.activeYear-Cs(this._activeDate,24)}},{key:"lastYearInView",get:function(){return this.firstYearInView+24-1}},{key:"viewChangeButton",get:function(){return ns.findOne(".datepicker-view-change-button",this.container)}},{key:"previousButton",get:function(){return ns.findOne(".datepicker-previous-button",this.container)}},{key:"nextButton",get:function(){return ns.findOne(".datepicker-next-button",this.container)}},{key:"okButton",get:function(){return ns.findOne(".datepicker-ok-btn",this.container)}},{key:"cancelButton",get:function(){return ns.findOne(".datepicker-cancel-btn",this.container)}},{key:"clearButton",get:function(){return ns.findOne(".datepicker-clear-btn",this.container)}},{key:"datesContainer",get:function(){return ns.findOne(".datepicker-view",this.container)}},{key:"toggleButton",get:function(){return ns.findOne(".datepicker-toggle-button",this._element)}},{key:"_getConfig",value:function(e){var t=qa(this._element);return e=Bs(Bs(Bs({},Ws),t),e),na(Us,e,Xs),e.startDay&&0!==e.startDay&&(t=this._getNewDaysOrderArray(e),e.weekdaysNarrow=t),e}},{key:"_getNewDaysOrderArray",value:function(e){var t=e.startDay;return(e=e.weekdaysNarrow).slice(t).concat(e.slice(0,t))}},{key:"_init",value:function(){!this.toggleButton&&this._options.toggleButton&&(this._appendToggleButton(),(this._input.readOnly||this._input.disabled)&&(this.toggleButton.style.pointerEvents="none")),this._listenToUserInput(),this._listenToToggleClick(),this._listenToToggleKeydown()}},{key:"_appendToggleButton",value:function(){var e='\n    <button id="'.concat(this._toggleButtonId,'" type="button" class="datepicker-toggle-button" data-mdb-toggle="datepicker">\n      <i class="far fa-calendar datepicker-toggle-icon"></i>\n    </button>\n  ');this._element.insertAdjacentHTML("beforeend",e),Ka(this._input,"form-icon-trailing")}},{key:"open",value:function(){var e,t,n=this;this._input.readOnly||this._input.disabled||(e=za.trigger(this._element,Ys),this._isOpen||e.defaultPrevented||(this._setInitialDate(),e=ra("div"),Ka(e,"datepicker-backdrop"),t=function(e,t,n,i,r,o,a,s,l){var u,c,h=xs(e),d=Ps(e),f=_s(e),p=ws(e),g=ra("div");return a="\n      ".concat((u=h,'\n      <div class="datepicker-header">\n        <div class="datepicker-title">\n          <span class="datepicker-title-text">'.concat((c=r).title,'</span>\n        </div>\n        <div class="datepicker-date">\n          <span class="datepicker-date-text">').concat(c.weekdaysShort[p],", ").concat(c.monthsShort[u]," ").concat(f,"</span>\n        </div>\n      </div>\n    ")),"\n      ").concat((p=e,c=t,u=n,f=i,e=o,t=a,n=s,'\n    <div class="datepicker-main">\n      '.concat(function(e,t,n){return'\n    <div class="datepicker-date-controls">\n      <button class="datepicker-view-change-button" aria-label="'.concat(n.switchToMultiYearViewLabel,'">\n        ').concat(n.monthsFull[e]," ").concat(t,'\n      </button>\n      <div class="datepicker-arrow-controls">\n        <button class="datepicker-previous-button" aria-label="').concat(n.prevMonthLabel,'"></button>\n        <button class="datepicker-next-button" aria-label="').concat(n.nextMonthLabel,'"></button>\n      </div>\n    </div>\n    ')}(h,i=d,o=r),'\n      <div class="datepicker-view" tabindex="0">\n        ').concat(function(e,t,n,i,r,o,a,s,l){return"days"===o.view?Ms(e,n,o):"months"===o.view?Rs(t,i,r,o,a):Ns(e,i,0,s,l)}(p,i,c,u,f,o,e,t,n),"\n      </div>\n      ").concat(function(e){return'\n        <div class="datepicker-footer">\n          <button class="datepicker-footer-btn datepicker-clear-btn" aria-label="'.concat(e.clearBtnLabel,'">').concat(e.clearBtnText,'</button>\n          <button class="datepicker-footer-btn datepicker-cancel-btn" aria-label="').concat(e.cancelBtnLabel,'">').concat(e.cancelBtnText,'</button>\n          <button class="datepicker-footer-btn datepicker-ok-btn" aria-label="').concat(e.okBtnLabel,'">').concat(e.okBtnText,"</button>\n        </div>\n      ")}(o),"\n    </div>\n  ")),"\n    "),Ka(g,"datepicker-modal-container"),Ka(g,"datepicker-modal-container-".concat(l)),g.innerHTML=a,g}(this._activeDate,this._selectedDate,this._selectedYear,this._selectedMonth,this._options,4,24,24,this._toggleButtonId),this._openModal(e,t),Ka(this.container,"animation"),Ka(this.container,"fade-in"),this.container.style.animationDuration="300ms",Ka(e,"animation"),Ka(e,"fade-in"),e.style.animationDuration="150ms",this._setFocusTrap(this.container),this._listenToDateSelection(),this._addControlsListeners(),this._listenToEscapeClick(),this._listenToKeyboardNavigation(),this._listenToDatesContainerFocus(),this._listenToDatesContainerBlur(),this._asyncFocusDatesContainer(),this._updateViewControlsAndAttributes(this._view),this._isOpen=!0,setTimeout((function(){n._listenToOutsideClick()}),0)))}},{key:"_openDropdown",value:function(e){this._popper=Tt(this._input,e,{placement:"bottom-start"}),document.body.appendChild(e)}},{key:"_openModal",value:function(e,t){document.body.appendChild(e),document.body.appendChild(t),window.innerWidth>document.documentElement.clientWidth&&(document.body.style.overflow="hidden",document.body.style.paddingRight="15px")}},{key:"_setFocusTrap",value:function(e){this._focusTrap=new vs(e,{event:"keydown",condition:function(e){return"Tab"===e.key}}),this._focusTrap.trap()}},{key:"_listenToUserInput",value:function(){var e=this;za.on(this._input,"input",(function(t){e._handleUserInput(t.target.value)}))}},{key:"_listenToToggleClick",value:function(){var e=this;za.on(this._element,qs,'[data-mdb-toggle="datepicker"]',(function(t){t.preventDefault(),e.open()}))}},{key:"_listenToToggleKeydown",value:function(){var e=this;za.on(this._element,"keydown",'[data-mdb-toggle="datepicker"]',(function(t){13!==t.keyCode||e._isOpen||e.open()}))}},{key:"_listenToDateSelection",value:function(){var e=this;za.on(this.datesContainer,"click",(function(t){var n,i=("DIV"===t.target.nodeName?t.target.parentNode:t.target).dataset;t="DIV"===t.target.nodeName?t.target.parentNode:t.target;i.mdbDate&&e._pickDay(i.mdbDate,t),i.mdbMonth&&i.mdbYear&&(t=parseInt(i.mdbMonth,10),n=parseInt(i.mdbYear,10),e._pickMonth(t,n)),i.mdbYear&&!i.mdbMonth&&(t=parseInt(i.mdbYear,10),e._pickYear(t)),e._updateHeaderDate(e._activeDate,e._options.monthsShort,e._options.weekdaysShort)}))}},{key:"_updateHeaderDate",value:function(e,t,n){var i=ns.findOne(".datepicker-date-text",this.container),r=xs(e),o=_s(e);e=ws(e);i.innerHTML="".concat(n[e],", ").concat(t[r]," ").concat(o)}},{key:"_addControlsListeners",value:function(){var e=this;za.on(this.nextButton,"click",(function(){"days"===e._view?e.nextMonth():"years"===e._view?e.nextYears():e.nextYear()})),za.on(this.previousButton,"click",(function(){"days"===e._view?e.previousMonth():"years"===e._view?e.previousYears():e.previousYear()})),za.on(this.viewChangeButton,"click",(function(){"days"===e._view?e._changeView("years"):"years"!==e._view&&"months"!==e._view||e._changeView("days")})),this._listenToFooterButtonsClick()}},{key:"_listenToFooterButtonsClick",value:function(){var e=this;za.on(this.okButton,"click",(function(){return e.handleOk()})),za.on(this.cancelButton,"click",(function(){return e.handleCancel()})),za.on(this.clearButton,"click",(function(){return e.handleClear()}))}},{key:"_listenToOutsideClick",value:function(){var e=this;za.on(document,qs,(function(t){var n=t.target===e.container;t=e.container&&e.container.contains(t.target);n||t||e.close()}))}},{key:"_listenToEscapeClick",value:function(){var e=this;za.on(document,"keydown",(function(t){27===t.keyCode&&e._isOpen&&e.close()}))}},{key:"_listenToKeyboardNavigation",value:function(){var e=this;za.on(this.datesContainer,"keydown",(function(t){e._handleKeydown(t)}))}},{key:"_listenToDatesContainerFocus",value:function(){var e=this;za.on(this.datesContainer,"focus",(function(){e._focusActiveCell(e.activeCell)}))}},{key:"_listenToDatesContainerBlur",value:function(){var e=this;za.on(this.datesContainer,"blur",(function(){e._removeCurrentFocusStyles()}))}},{key:"_handleKeydown",value:function(e){"days"===this._view&&this._handleDaysViewKeydown(e),"months"===this._view&&this._handleMonthsViewKeydown(e),"years"===this._view&&this._handleYearsViewKeydown(e)}},{key:"_handleDaysViewKeydown",value:function(e){var t=this._activeDate,n=this.activeCell;switch(e.keyCode){case 37:this._activeDate=Is(this._activeDate,-1);break;case 39:this._activeDate=Is(this._activeDate,1);break;case 38:this._activeDate=Is(this._activeDate,-7);break;case 40:this._activeDate=Is(this._activeDate,7);break;case 36:this._activeDate=Is(this._activeDate,1-_s(this._activeDate));break;case 35:this._activeDate=Is(this._activeDate,Os(this._activeDate)-_s(this._activeDate));break;case 33:this._activeDate=Ss(this._activeDate,-1);break;case 34:this._activeDate=Ss(this._activeDate,1);break;case 13:case 32:return this._selectDate(this._activeDate),void e.preventDefault();default:return}As(t,this._activeDate,this._view,24,0)||this._changeView("days"),this._removeHighlightFromCell(n),this._focusActiveCell(this.activeCell),e.preventDefault()}},{key:"_asyncFocusDatesContainer",value:function(){var e=this;setTimeout((function(){e.datesContainer.focus()}),0)}},{key:"_focusActiveCell",value:function(e){e&&Ka(e,"focused")}},{key:"_removeHighlightFromCell",value:function(e){e&&e.classList.remove("focused")}},{key:"_getActiveDayCell",value:function(){var e=this,t=ns.find("td",this.datesContainer);return Array.from(t).find((function(t){return js(Ds(t.dataset.mdbDate),e._activeDate)}))}},{key:"_handleMonthsViewKeydown",value:function(e){var t=this._activeDate,n=this.activeCell;switch(e.keyCode){case 37:this._activeDate=Ss(this._activeDate,-1);break;case 39:this._activeDate=Ss(this._activeDate,1);break;case 38:this._activeDate=Ss(this._activeDate,-4);break;case 40:this._activeDate=Ss(this._activeDate,4);break;case 36:this._activeDate=Ss(this._activeDate,-this.activeMonth);break;case 35:this._activeDate=Ss(this._activeDate,11-this.activeMonth);break;case 33:this._activeDate=Ts(this._activeDate,-1);break;case 34:this._activeDate=Ts(this._activeDate,1);break;case 13:case 32:return void this._selectMonth(this.activeMonth);default:return}As(t,this._activeDate,this._view,24,0)||this._changeView("months"),this._removeHighlightFromCell(n),this._focusActiveCell(this.activeCell),e.preventDefault()}},{key:"_getActiveMonthCell",value:function(){var e=this,t=ns.find("td",this.datesContainer);return Array.from(t).find((function(t){var n=parseInt(t.dataset.mdbYear,10);t=parseInt(t.dataset.mdbMonth,10);return n===e.activeYear&&t===e.activeMonth}))}},{key:"_handleYearsViewKeydown",value:function(e){var t=this._activeDate,n=this.activeCell;switch(e.keyCode){case 37:this._activeDate=Ts(this._activeDate,-1);break;case 39:this._activeDate=Ts(this._activeDate,1);break;case 38:this._activeDate=Ts(this._activeDate,-4);break;case 40:this._activeDate=Ts(this._activeDate,4);break;case 36:this._activeDate=Ts(this._activeDate,-Cs(this._activeDate,24));break;case 35:this._activeDate=Ts(this._activeDate,24-Cs(this._activeDate,24)-1);break;case 33:this._activeDate=Ts(this._activeDate,-24);break;case 34:this._activeDate=Ts(this._activeDate,24);break;case 13:case 32:return void this._selectYear(this.activeYear);default:return}As(t,this._activeDate,this._view,24,0)||this._changeView("years"),this._removeHighlightFromCell(n),this._focusActiveCell(this.activeCell),e.preventDefault()}},{key:"_getActiveYearCell",value:function(){var e=this,t=ns.find("td",this.datesContainer);return Array.from(t).find((function(t){return parseInt(t.dataset.mdbYear,10)===e.activeYear}))}},{key:"_setInitialDate",value:function(){this._input.value?this._handleUserInput(this._input.value):this._options.startDate?this._activeDate=new Date(this._options.startDate):this._activeDate=new Date}},{key:"close",value:function(){var e=za.trigger(this._element,$s);this._isOpen&&!e.defaultPrevented&&(this._removeDatepickerListeners(),Ka(this.container,"animation"),Ka(this.container,"fade-out"),this._closeModal(),this._isOpen=!1,this._view=this._options.view,(this.toggleButton||this._input).focus())}},{key:"_closeDropdown",value:function(){var e=this,t=ns.findOne(".datepicker-dropdown-container");t.addEventListener("animationend",(function(){t&&document.body.removeChild(t),e._popper&&e._popper.destroy()})),this._removeFocusTrap()}},{key:"_closeModal",value:function(){var e=ns.findOne(".datepicker-backdrop"),t=ns.findOne(".datepicker-modal-container");Ka(e,"animation"),Ka(e,"fade-out"),t&&e&&e.addEventListener("animationend",(function(){document.body.removeChild(e),document.body.removeChild(t),document.body.style.overflow="",document.body.style.paddingRight=""}))}},{key:"_removeFocusTrap",value:function(){this._focusTrap&&(this._focusTrap.disable(),this._focusTrap=null)}},{key:"_removeDatepickerListeners",value:function(){za.off(this.nextButton,"click"),za.off(this.previousButton,"click"),za.off(this.viewChangeButton,"click"),za.off(this.okButton,"click"),za.off(this.cancelButton,"click"),za.off(this.clearButton,"click"),za.off(this.datesContainer,"click"),za.off(this.datesContainer,"keydown"),za.off(this.datesContainer,"focus"),za.off(this.datesContainer,"blur"),za.off(document,qs)}},{key:"dispose",value:function(){this._isOpen&&this.close(),this._removeInputAndToggleListeners();var e=ns.findOne("#".concat(this._toggleButtonId));e&&this._element.removeChild(e),Oa(this._element,Hs),this._element=null,this._input=null,this._options=null,this._activeDate=null,this._selectedDate=null,this._selectedYear=null,this._selectedMonth=null,this._view=null,this._popper=null,this._focusTrap=null}},{key:"_removeInputAndToggleListeners",value:function(){za.off(this._input,"input"),za.off(this._element,qs,'[data-mdb-toggle="datepicker"]'),za.off(this._element,"keydown",'[data-mdb-toggle="datepicker"]')}},{key:"handleOk",value:function(){this._confirmSelection(this._selectedDate),this.close()}},{key:"_selectDate",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.activeCell;this._removeCurrentSelectionStyles(),this._removeCurrentFocusStyles(),this._addSelectedStyles(t),this._selectedDate=e}},{key:"_selectYear",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.activeCell;this._removeCurrentSelectionStyles(),this._removeCurrentFocusStyles(),this._addSelectedStyles(t),this._selectedYear=e,this._asyncChangeView("months")}},{key:"_selectMonth",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.activeCell;this._removeCurrentSelectionStyles(),this._removeCurrentFocusStyles(),this._addSelectedStyles(t),this._selectedMonth=e,this._asyncChangeView("days")}},{key:"_removeSelectedStyles",value:function(e){e&&e.classList.remove("selected")}},{key:"_addSelectedStyles",value:function(e){e&&Ka(e,"selected")}},{key:"_confirmSelection",value:function(e){var t;e&&(t=this.formatDate(e),this._input.value=t,Ka(this._input,"active"),za.trigger(this._element,Gs,{date:e}))}},{key:"handleCancel",value:function(){this._selectedDate=null,this._selectedYear=null,this._selectedMonth=null,this.close()}},{key:"handleClear",value:function(){this._selectedDate=null,this._selectedMonth=null,this._selectedYear=null,this._removeCurrentSelectionStyles(),this._input.value="",this._input.classList.remove("active"),this._setInitialDate(),this._changeView("days")}},{key:"_removeCurrentSelectionStyles",value:function(){var e=ns.findOne(".selected",this.container);e&&e.classList.remove("selected")}},{key:"_removeCurrentFocusStyles",value:function(){var e=ns.findOne(".focused",this.container);e&&e.classList.remove("focused")}},{key:"formatDate",value:function(e){var t=_s(e),n=this._addLeadingZero(_s(e)),i=this._options.weekdaysShort[ws(e)],r=this._options.weekdaysFull[ws(e)],o=xs(e)+1,a=this._addLeadingZero(xs(e)+1),s=this._options.monthsShort[xs(e)],l=this._options.monthsFull[xs(e)],u=2===Ps(e).toString().length?Ps(e):Ps(e).toString().slice(2,4),c=Ps(e),h=(e=this._options.format.split(/(d{1,4}|m{1,4}|y{4}|yy|!.)/g),"");return e.forEach((function(e){switch(e){case"dddd":e=e.replace(e,r);break;case"ddd":e=e.replace(e,i);break;case"dd":e=e.replace(e,n);break;case"d":e=e.replace(e,t);break;case"mmmm":e=e.replace(e,l);break;case"mmm":e=e.replace(e,s);break;case"mm":e=e.replace(e,a);break;case"m":e=e.replace(e,o);break;case"yyyy":e=e.replace(e,c);break;case"yy":e=e.replace(e,u)}h+=e})),h}},{key:"_addLeadingZero",value:function(e){return parseInt(e,10)<10?"0".concat(e):e}},{key:"_pickDay",value:function(e,t){e=Ds(e),this._activeDate=e,this._selectDate(e,t)}},{key:"_pickYear",value:function(e){var t=Es(e,this.activeMonth,this.activeDay);this._activeDate=t,this._selectedDate=t,this._selectYear(e)}},{key:"_pickMonth",value:function(e,t){t=Es(t,e,this.activeDay),this._activeDate=t,this._selectMonth(e)}},{key:"nextMonth",value:function(){var e,t=Ms(e=Ss(this._activeDate,1),this._selectedDate,this._options);this._activeDate=e,this.viewChangeButton.textContent="".concat(this._options.monthsFull[this.activeMonth]," ").concat(this.activeYear),this.datesContainer.innerHTML=t}},{key:"previousMonth",value:function(){var e=Ss(this._activeDate,-1);e=Ms(this._activeDate=e,this._selectedDate,this._options);this.viewChangeButton.textContent="".concat(this._options.monthsFull[this.activeMonth]," ").concat(this.activeYear),this.datesContainer.innerHTML=e}},{key:"nextYear",value:function(){var e=Ts(this._activeDate,1);this._activeDate=e,this.viewChangeButton.textContent="".concat(this.activeYear),e=Rs(this.activeYear,this._selectedYear,this._selectedMonth,this._options,4);this.datesContainer.innerHTML=e}},{key:"previousYear",value:function(){var e=Ts(this._activeDate,-1);this._activeDate=e,this.viewChangeButton.textContent="".concat(this.activeYear),e=Rs(this.activeYear,this._selectedYear,this._selectedMonth,this._options,4);this.datesContainer.innerHTML=e}},{key:"nextYears",value:function(){var e=Ts(this._activeDate,24);e=Ns(this._activeDate=e,this._selectedYear,this._options,24,4);this.viewChangeButton.textContent="".concat(this.firstYearInView," - ").concat(this.lastYearInView),this.datesContainer.innerHTML=e}},{key:"previousYears",value:function(){var e=Ts(this._activeDate,-24);e=Ns(this._activeDate=e,this._selectedYear,this._options,24,4);this.viewChangeButton.textContent="".concat(this.firstYearInView," - ").concat(this.lastYearInView),this.datesContainer.innerHTML=e}},{key:"_asyncChangeView",value:function(e){var t=this;setTimeout((function(){t._changeView(e)}),0)}},{key:"_changeView",value:function(e){this._view=e,this.datesContainer.blur(),"days"===e&&(this.datesContainer.innerHTML=Ms(this._activeDate,this._selectedDate,this._options)),"months"===e&&(this.datesContainer.innerHTML=Rs(this.activeYear,this._selectedYear,this._selectedMonth,this._options,4)),"years"===e&&(this.datesContainer.innerHTML=Ns(this._activeDate,this._selectedYear,this._options,24,4)),this.datesContainer.focus(),this._updateViewControlsAndAttributes(e)}},{key:"_updateViewControlsAndAttributes",value:function(e){"days"===e&&(this.viewChangeButton.textContent="".concat(this._options.monthsFull[this.activeMonth]," ").concat(this.activeYear),this.viewChangeButton.setAttribute("aria-label",this._options.switchToMultiYearViewLabel),this.previousButton.setAttribute("aria-label",this._options.prevMonthLabel),this.nextButton.setAttribute("aria-label",this._options.nextMonthLabel)),"months"===e&&(this.viewChangeButton.textContent="".concat(this.activeYear),this.viewChangeButton.setAttribute("aria-label",this._options.switchToDayViewLabel),this.previousButton.setAttribute("aria-label",this._options.prevYearLabel),this.nextButton.setAttribute("aria-label",this._options.nextYearLabel)),"years"===e&&(this.viewChangeButton.textContent="".concat(this.firstYearInView," - ").concat(this.lastYearInView),this.viewChangeButton.setAttribute("aria-label",this._options.switchToMonthViewLabel),this.previousButton.setAttribute("aria-label",this._options.prevMultiYearLabel),this.nextButton.setAttribute("aria-label",this._options.nextMultiYearLabel))}},{key:"_handleUserInput",value:function(e){var t=this._getDelimeters(this._options.format);e=this._parseDate(e,this._options.format,t);Number.isNaN(e.getTime())?(this._activeDate=new Date,this._selectedDate=null,this._selectedMonth=null,this._selectedYear=null):(this._activeDate=e,this._selectedDate=e)}},{key:"_getDelimeters",value:function(e){return e.match(/[^(dmy)]{1,}/g)}},{key:"_parseDate",value:function(e,t,n){n=n[0]!==n[1]?n[0]+n[1]:n[0],n=new RegExp("[".concat(n,"]"));for(var i=e.split(n),r=t.split(n),o=(e=-1!==t.indexOf("mmm"),[]),a=0;a<r.length;a++)-1!==r[a].indexOf("yy")&&(o[0]={value:i[a],format:r[a]}),-1!==r[a].indexOf("m")&&(o[1]={value:i[a],format:r[a]}),-1!==r[a].indexOf("d")&&r[a].length<=2&&(o[2]={value:i[a],format:r[a]});return n=-1!==t.indexOf("mmmm")?this._options.monthsFull:this._options.monthsShort,Es(Number(o[0].value),e?this.getMonthNumberByMonthName(o[1].value,n):Number(o[1].value)-1,Number(o[2].value))}},{key:"getMonthNumberByMonthName",value:function(e,t){return t.findIndex((function(t){return t===e}))}}])&&Vs(t.prototype,n),i&&Vs(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}();zs=Ks;function Qs(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,r,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(i=n.next()).done)&&(o.push(i.value),!t||o.length!==t);a=!0);}catch(e){s=!0,r=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw r}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Js(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Js(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Js(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function Zs(e,t){var n=e.clientX,i=e.clientY,r=(e=e.touches,2<arguments.length&&void 0!==arguments[2]&&arguments[2]),o=(t=t.getBoundingClientRect()).left,a=(t=t.top,{});return r&&e?r&&0<Object.keys(e).length&&(a={x:e[0].clientX-o,y:e[0].clientY-t}):a={x:n-o,y:i-t},a}function el(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}ns.find(".datepicker").forEach((function(e){Ks.getInstance(e)||new Ks(e)})),n(189),n(191);var tl=function(e){return e&&"[object Date]"===Object.prototype.toString.call(e)&&!isNaN(e)},nl=function(e){return(e=(1<arguments.length&&void 0!==arguments[1]&&!arguments[1]?e:e.value).replace(/:/gi," ")).split(" ")};function il(e){return(il="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function rl(e,t){var n,i=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)),i}function ol(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rl(Object(n),!0).forEach((function(t){hl(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function al(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,r,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(i=n.next()).done)&&(o.push(i.value),!t||o.length!==t);a=!0);}catch(e){s=!0,r=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw r}}return o}}(e,t)||ll(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function sl(e){return function(e){if(Array.isArray(e))return ul(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ll(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ll(e,t){if(e){if("string"==typeof e)return ul(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ul(e,t):void 0}}function ul(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function cl(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function hl(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}var dl="timepicker",fl="mdb.".concat(dl),pl="active",gl="".concat(dl,"-am"),ml="".concat(dl,"-cancel"),bl="".concat(dl,"-clear"),yl="".concat(dl,"-submit"),vl="".concat(dl,"-circle"),_l="".concat(dl,"-clock-animation"),wl="".concat(dl,"-clock"),xl="".concat(dl,"-clock-inner"),Pl="".concat(dl,"-clock-wrapper"),Ol=".".concat(dl,"-current"),kl="".concat(dl,"-current-inline"),Tl="".concat(dl,"-hand-pointer"),Sl="".concat(dl,"-hour"),Il="".concat(dl,"-hour-mode"),El="".concat(dl,"-icon-down"),Dl="".concat(dl,"-icon-inline-hour"),jl="".concat(dl,"-icon-inline-minute"),Cl="".concat(dl,"-icon-up"),Al="".concat(dl,"-inline-hour-icons"),Ml="".concat(dl,"-middle-dot"),Rl="".concat(dl,"-minute"),Nl="".concat(dl,"-modal"),Ll="".concat(dl,"-pm"),Fl="".concat(dl,"-tips-element"),Bl="".concat(dl,"-time-tips-hours"),Vl="".concat(dl,"-tips-inner-element"),Ul="".concat(dl,"-time-tips-inner"),Hl="".concat(dl,"-time-tips-minutes"),zl="".concat(dl,"-transform"),$l="".concat(dl,"-wrapper"),Yl="".concat(dl,"-input"),Gl={appendValidationInfo:!0,bodyID:"",cancelLabel:"Cancel",clearLabel:"Clear",closeModalOnBackdropClick:!0,closeModalOnMinutesClick:!1,defaultTime:"",disabled:!1,focusInputAfterApprove:!1,footerID:"",format12:!0,headID:"",increment:!1,invalidLabel:"Invalid Time Format",maxHour:"",minHour:"",maxTime:"",minTime:"",modalID:"",okLabel:"Ok",overflowHidden:!0,pickerID:"",readOnly:!1,showClearBtn:!0,switchHoursToMinutesOnClick:!0,iconClass:"far fa-clock fa-sm timepicker-icon",withIcon:!0,pmLabel:"PM",amLabel:"AM"},ql={appendValidationInfo:"boolean",bodyID:"string",cancelLabel:"string",clearLabel:"string",closeModalOnBackdropClick:"boolean",closeModalOnMinutesClick:"boolean",disabled:"boolean",footerID:"string",format12:"boolean",headID:"string",increment:"boolean",invalidLabel:"string",maxHour:"(string|number)",minHour:"(string|number)",modalID:"string",okLabel:"string",overflowHidden:"boolean",pickerID:"string",readOnly:"boolean",showClearBtn:"boolean",switchHoursToMinutesOnClick:"boolean",defaultTime:"(string|date|number)",iconClass:"string",withIcon:"boolean",pmLabel:"string",amLabel:"string"},Wl=function(){function e(t){var n=this,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=this,o=e;if(!(r instanceof o))throw new TypeError("Cannot call a class as a function");hl(this,"_toggleBackgroundColorCircle",(function(e){null!==n._modal.querySelector(".".concat(e,".").concat(pl))?Qa(n._circle,{backgroundColor:"#1976d2"}):Qa(n._circle,{backgroundColor:"transparent"})})),hl(this,"_toggleClassActive",(function(e,t,n){var i=t.textContent,r=sl(e).find((function(e){return Number(e)===Number(i)}));return n.forEach((function(e){Za(e,"disabled")||(e.textContent===r?Ka(e,pl):Ja(e,pl))}))})),hl(this,"_makeMinutesDegrees",(function(e,t){var i=n._options.increment;return e=e<0?(t=Math.round(360+e/6)%60,360+6*Math.round(e/6)):(t=Math.round(e/6)%60,6*Math.round(e/6)),i&&(e=30*Math.round(e/30),60==(t=6*Math.round(e/6)/6)&&(t="00")),{degrees:e=360<=e?0:e,minute:t,addDegrees:i?30:6}})),hl(this,"_makeHourDegrees",(function(e,t,i){var r=(o=n._options).maxHour,o=o.minHour;if(e&&(Za(e,xl)||Za(e,Ul)||Za(e,Vl)?t<0?(i=Math.round(360+t/30)%24,t=360+t):12===(i=Math.round(t/30)+12)&&(i="00"):t<0?(i=Math.round(360+t/30)%12,t=360+t):(0==(i=Math.round(t/30)%12)||12<i)&&(i=12),360<=t&&(t=0),!(""!==r&&i>Number(r)||""!==o&&i<Number(o))))return{degrees:t,hour:i,addDegrees:30}})),hl(this,"_makeInnerHoursDegrees",(function(e,t){return e<0?(t=Math.round(360+e/30)%24,e=360+e):12===(t=Math.round(e/30)+12)&&(t="00"),{degrees:e,hour:t,addDegrees:30}})),hl(this,"_getAppendClock",(function(){var e,t,i,r,o=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:".".concat(wl),s=2<arguments.length?arguments[2]:void 0,l=(f=n._options).maxHour,u=f.minHour,c=f.minTime,h=f.maxTime,d=f.inline,f=f.format12,p=(r=al(nl(h,!1),3))[0],g=r[1],m=r[2],b=(r=al(nl(c,!1),3))[0],y=r[1],v=r[2],_=(d||f&&n._isInvalidTimeFormat&&!Za(n._AM,"active")&&Ka(n._PM,"active"),ns.findOne(".".concat(Il,".").concat(pl))),w=ns.findOne(a),x=360/o.length;null!==w&&(e=(w.offsetWidth-32)/2,t=(w.offsetHeight-32)/2,i=e-4,sl(o).forEach((function(r,a){a=a*x*(Math.PI/180);var d=ra("span"),f=ra("span"),P=(f.innerHTML=r,Ka(d,s),d.offsetWidth),O=d.offsetHeight;return Qa(d,{left:"".concat(e+Math.sin(a)*i-P,"px"),bottom:"".concat(t+Math.cos(a)*i-O,"px")}),o.includes("05")&&Ka(d,"".concat(Hl)),o.includes("13")?f.classList.add(Vl):f.classList.add(Fl),Za(d,"".concat(Hl))?Za(d,"".concat(Hl))&&(""!==h&&Number(r)>Number(g)&&Number(n._hour.textContent)>=Number(p)&&Ka(d,"disabled"),""!==c&&Number(r)<Number(y)&&Number(n._hour.textContent)<=Number(b)&&Ka(d,"disabled"),""!==h&&void 0!==m&&("PM"===m&&"PM"===_.textContent?Number(r)>Number(g)&&Number(n._hour.textContent)>=Number(p)&&Ka(d,"disabled"):"PM"===m&&"AM"===_.textContent&&Ja(d,"disabled"),("AM"===m&&"PM"===_.textContent||"AM"===m&&"AM"===_.textContent&&Number(n._hour.textContent)>=Number(p)&&Number(r)>Number(g))&&Ka(d,"disabled")),""!==c&&void 0!==v&&("PM"===v&&"PM"===_.textContent?(Number(r)<Number(y)&&Number(n._hour.textContent)===Number(b)||Number(n._hour.textContent)<Number(b))&&Ka(d,"disabled"):"PM"===v&&"AM"===_.textContent&&Ka(d,"disabled"),"AM"===v&&"PM"===_.textContent?Ja(d,"disabled"):"AM"===v&&"AM"===_.textContent&&(Number(n._hour.textContent)===Number(b)&&Number(r)<Number(y)||Number(n._hour.textContent)<Number(b))&&Ka(d,"disabled"))):(""!==l&&Number(r)>Number(l)&&Ka(d,"disabled"),""!==u&&Number(r)<Number(u)&&Ka(d,"disabled"),""!==h&&(void 0!==m?("PM"===m&&"PM"===_.textContent&&(n._isAmEnabled=!1,n._isPmEnabled=!0,Number(r)>Number(p)&&Ka(d,"disabled")),"AM"===m&&"PM"===_.textContent?(n._isAmEnabled=!1,n._isPmEnabled=!0,Ka(d,"disabled")):"AM"===m&&"AM"===_.textContent&&(n._isAmEnabled=!0,n._isPmEnabled=!1,Number(r)>Number(p)&&Ka(d,"disabled"))):Number(r)>Number(p)&&Ka(d,"disabled")),""!==c&&Number(r)<Number(b)&&Ka(d,"disabled"),""!==c&&void 0!==v&&("PM"===v&&"PM"===_.textContent?(n._isAmEnabled=!1,n._isPmEnabled=!0,Number(r)<Number(b)&&Ka(d,"disabled")):"PM"===v&&"AM"===_.textContent&&(n._isAmEnabled=!0,n._isPmEnabled=!1,Ka(d,"disabled")),"AM"===v&&"PM"===_.textContent?(n._isAmEnabled=!1,n._isPmEnabled=!0,Ja(d,"disabled")):"AM"===v&&"AM"===_.textContent&&(n._isAmEnabled=!0,n._isPmEnabled=!1,Number(r)<Number(b)&&Ka(d,"disabled")))),d.appendChild(f),w.appendChild(d)})))})),this._element=t,this._element&&xa(t,fl,this),this._document=document,this._options=this._getConfig(i),this._currentTime=null,this._toggleButtonId=ta("timepicker-toggle-"),this.hoursArray=["12","1","2","3","4","5","6","7","8","9","10","11"],this.innerHours=["00","13","14","15","16","17","18","19","20","21","22","23"],this.minutesArray=["00","05","10","15","20","25","30","35","40","45","50","55"],this.input=ns.findOne("input",this._element),this.dataWithIcon=t.dataset.withIcon,this.dataToggle=t.dataset.toggle,this.customIcon=ns.findOne(".timepicker-toggle-button",this._element),this._checkToggleButton(),this.inputFormatShow=ns.findOne("[data-mdb-timepicker-format24]",this._element),this.inputFormat=null===this.inputFormatShow?"":Object.values(this.inputFormatShow.dataset)[0],this.elementToggle=ns.findOne("[data-mdb-toggle]",this._element),this.toggleElement=Object.values(t.querySelector("[data-mdb-toggle]").dataset)[0],this._hour=null,this._minutes=null,this._AM=null,this._PM=null,this._wrapper=null,this._modal=null,this._hand=null,this._circle=null,this._focusTrap=null,this._popper=null,this._interval=null,this._inputValue=""!==this._options.defaultTime?this._options.defaultTime:this.input.value,this._options.format12&&(this._currentTime=function(e){var t,n,i;if(""!==e)return tl(e)?(t=e.getHours(),0==(t%=12)&&(i="AM"),t=t||12,void 0===i&&(i=12<=t?"PM":"AM"),n=(n=e.getMinutes())<10?"0".concat(n):n):(t=(e=Qs(nl(e,!1),3))[0],n=e[1],i=e[2],0==(t%=12)&&(i="AM"),t=t||12,void 0===i&&(i=12<=t?"PM":"AM")),{hours:t,minutes:n,amOrPm:i}}(this._inputValue)),this._options.readOnly&&this.input.setAttribute("readonly",!0),this.init(),this._isHours=!0,this._isMinutes=!1,this._isInvalidTimeFormat=!1,this._isMouseMove=!1,this._isInner=!1,this._isAmEnabled=!1,this._isPmEnabled=!1,this._objWithDataOnChange={degrees:null}}var t,n,i;return t=e,i=[{key:"NAME",get:function(){return dl}},{key:"getInstance",value:function(e){return Pa(e,fl)}},{key:"getOrCreateInstance",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return this.getInstance(e)||new this(e,"object"===il(t)?t:null)}}],(n=[{key:"init",value:function(){var e,t,n,i;Ka(this.input,Yl),void 0!==this._currentTime?(n=(e=this._currentTime).hours,i=e.minutes,e=e.amOrPm,t=Number(n)<10?0:"",n="".concat(t).concat(Number(n),":").concat(i),i=e,this.input.value="".concat(n," ").concat(i)):this.input.value=i=n=t="",0<this.input.value.length&&""!==this.input.value&&Ka(this.input,"active"),null===this._options&&null===this._element||(this._handleOpen(),this._listenToToggleKeydown())}},{key:"dispose",value:function(){this._removeModal(),null!==this._element&&Oa(this._element,fl),this._element=null,this._options=null,this.input=null,this._focusTrap=null,za.off(this._document,"click","[data-mdb-toggle='".concat(this.toggleElement,"']")),za.off(this._element,"keydown","[data-mdb-toggle='".concat(this.toggleElement,"']"))}},{key:"_checkToggleButton",value:function(){null===this.customIcon&&(void 0!==this.dataWithIcon&&(this._options.withIcon=null,"true"===this.dataWithIcon&&this._appendToggleButton(this._options)),this._options.withIcon&&this._appendToggleButton(this._options))}},{key:"_appendToggleButton",value:function(){var e=function(e,t){return e=e.iconClass,'\n  <button id="'.concat(t,'" tabindex="0" type="button" class="timepicker-toggle-button" data-mdb-toggle="timepicker"  >\n    <i class="').concat(e,'"></i>\n  </button>\n')}(this._options,this._toggleButtonId);this.input.insertAdjacentHTML("afterend",e)}},{key:"_getDomElements",value:function(){this._hour=ns.findOne(".".concat(Sl)),this._minutes=ns.findOne(".".concat(Rl)),this._AM=ns.findOne(".".concat(gl)),this._PM=ns.findOne(".".concat(Ll)),this._wrapper=ns.findOne(".".concat($l)),this._modal=ns.findOne(".".concat(Nl)),this._hand=ns.findOne(".".concat(Tl)),this._circle=ns.findOne(".".concat(vl)),this._clock=ns.findOne(".".concat(wl)),this._clockInner=ns.findOne(".".concat(xl))}},{key:"_handlerMaxMinHoursOptions",value:function(e,t,n,i,r,o){var a=""!==n?30*n:"",s=""!==i?30*i:"";if(""!==n&&""!==i){if((e=e<=0?360+e:e)<=a&&s<=e)return t()}else if(""!==i){if(e<=0&&(e=360+e),(s=12<Number(i)?30*i-s:s)<=e&&void 0===o)return t();if(void 0!==o){if("PM"===o&&this._isAmEnabled)return;if("PM"===o&&this._isPmEnabled&&s<=e)return t();if("AM"===o&&this._isPmEnabled)return t();if("AM"===o&&this._isAmEnabled&&s<=e)return t()}}else{if(""===n)return t();if((e=e<=0?360+e:e)<=a&&void 0===r)return t();if(void 0!==r){if("AM"===r&&this._isPmEnabled)return;if("AM"===r&&this._isAmEnabled&&e<=a)return t();if("PM"===r&&this._isPmEnabled){if(e<=a)return t()}else if("PM"===r&&this._isAmEnabled)return t()}}return t}},{key:"_handleKeyboard",value:function(){var e=this;za.on(this._document,"keydown","",(function(t){var n,i=(o=e._options).maxHour,r=o.minHour,o=o.increment,a=null!==ns.findOne(".".concat(Hl)),s=null!==ns.findOne(".".concat(Ul)),l=Number(e._hand.style.transform.replace(/[^\d-]/g,"")),u=ns.find(".".concat(Hl),e._modal),c=ns.find(".".concat(Bl),e._modal),h=ns.find(".".concat(Ul),e._modal),d=""!==i?Number(i):"",f=""!==r?Number(r):"",p=e._makeHourDegrees(t.target,l,void 0).hour,g=(y=e._makeHourDegrees(t.target,l,void 0)).degrees,m=y.addDegrees,b=(y=e._makeMinutesDegrees(l,void 0)).minute,y=y.degrees,v=e._makeMinutesDegrees(l,void 0).addDegrees;l=e._makeInnerHoursDegrees(l,void 0).hour;27===t.keyCode&&(n=ns.findOne(".".concat(ml),e._modal),za.trigger(n,"click")),a?(38===t.keyCode&&(Qa(e._hand,{transform:"rotateZ(".concat(y+=v,"deg)")}),b+=1,o&&"0014"===(b+=4)&&(b=5),e._minutes.textContent=e._setHourOrMinute(59<b?0:b),e._toggleClassActive(e.minutesArray,e._minutes,u),e._toggleBackgroundColorCircle("".concat(Hl))),40===t.keyCode&&(Qa(e._hand,{transform:"rotateZ(".concat(y-=v,"deg)")}),o?b-=5:--b,-1===b?b=59:-5===b&&(b=55),e._minutes.textContent=e._setHourOrMinute(b),e._toggleClassActive(e.minutesArray,e._minutes,u),e._toggleBackgroundColorCircle("".concat(Hl)))):(s&&(39===t.keyCode&&(e._isInner=!1,Qa(e._hand,{height:"calc(40% + 1px)"}),e._hour.textContent=e._setHourOrMinute(12<p?1:p),e._toggleClassActive(e.hoursArray,e._hour,c),e._toggleClassActive(e.innerHours,e._hour,h)),37===t.keyCode&&(e._isInner=!0,Qa(e._hand,{height:"21.5%"}),e._hour.textContent=e._setHourOrMinute(24<=l||"00"===l?0:l),e._toggleClassActive(e.innerHours,e._hour,h),e._toggleClassActive(e.hoursArray,e._hour-1,c))),38===t.keyCode&&(e._handlerMaxMinHoursOptions(g+30,(function(){return Qa(e._hand,{transform:"rotateZ(".concat(g+m,"deg)")})}),i,r),e._isInner?(24===(l+=1)?l=0:25!==l&&"001"!==l||(l=13),e._hour.textContent=e._setHourOrMinute(l),e._toggleClassActive(e.innerHours,e._hour,h)):(p+=1,""!==i&&""!==r?i<p?p=d:p<r&&(p=f):""!==i&&""===r?i<p&&(p=d):""===i&&""!==r&&12<=p&&(p=12),e._hour.textContent=e._setHourOrMinute(12<p?1:p),e._toggleClassActive(e.hoursArray,e._hour,c))),40===t.keyCode&&(e._handlerMaxMinHoursOptions(g-30,(function(){return Qa(e._hand,{transform:"rotateZ(".concat(g-m,"deg)")})}),i,r),e._isInner?(12==--l?l=0:-1===l&&(l=23),e._hour.textContent=e._setHourOrMinute(l),e._toggleClassActive(e.innerHours,e._hour,h)):(--p,""!==i&&""!==r?d<p?p=d:p<f&&(p=f):""===i&&""!==r?p<=f&&(p=f):""!==i&&""===r&&p<=1&&(p=1),e._hour.textContent=e._setHourOrMinute(0===p?12:p),e._toggleClassActive(e.hoursArray,e._hour,c))))}))}},{key:"_setActiveClassToTipsOnOpen",value:function(e){var t=this;if(!this._isInvalidTimeFormat){for(var n=arguments.length,i=new Array(1<n?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];[].concat(i).filter((function(e){return"PM"===e?Ka(t._PM,pl):"AM"===e?Ka(t._AM,pl):(Ja(t._AM,pl),Ja(t._PM,pl)),e}));var o=ns.find(".".concat(Bl),this._modal);this._addActiveClassToTip(o,e)}}},{key:"_setTipsAndTimesDependOnInputValue",value:function(e,t){var n=(i=this._options).inline,i=i.format12;this._isInvalidTimeFormat?(this._hour.textContent="12",this._minutes.textContent="00",n||Qa(this._hand,{transform:"rotateZ(0deg)"}),i&&Ka(this._PM,pl)):(i=12<e?30*e-360:30*e,this._hour.textContent=e,this._minutes.textContent=t,n||(Qa(this._hand,{transform:"rotateZ(".concat(i,"deg)")}),Qa(this._circle,{backgroundColor:"#1976d2"}),(12<Number(e)||"00"===e)&&Qa(this._hand,{height:"21.5%"})))}},{key:"_listenToToggleKeydown",value:function(){var e=this;za.on(this._element,"keydown","[data-mdb-toggle='".concat(this.toggleElement,"']"),(function(t){13===t.keyCode&&(t.preventDefault(),za.trigger(e.elementToggle,"click"))}))}},{key:"_handleOpen",value:function(){var e=this;Ha(this._element,"click","[data-mdb-toggle='".concat(this.toggleElement,"']"),(function(t){var n;null!==e._options&&(n=null!==Wa(e.input,"toggle")?200:0,setTimeout((function(){Qa(e.elementToggle,{pointerEvents:"none"}),e.elementToggle.blur(),y=""===nl(e.input)[0]?["12","00","PM"]:nl(e.input);var n,i,r,o,a,s,l,u,c,h,d=(g=e._options).modalID,f=g.inline,p=g.format12,g=g.overflowHidden,m=(y=al(y,3))[0],b=y[1],y=y[2],v=ra("div");(12<Number(m)||"00"===m)&&(e._isInner=!0),e.input.blur(),t.target.blur(),v.innerHTML=(i=(n=e._options).okLabel,r=n.cancelLabel,h=n.headID,o=n.footerID,a=n.bodyID,c=n.pickerID,s=n.clearLabel,l=n.showClearBtn,u=n.amLabel,n=n.pmLabel,"<div id='".concat(c,"' class='timepicker-wrapper h-full flex items-center justify-center flex-col fixed'>\n      <div class=\"flex items-center justify-center flex-col timepicker-container\">\n        <div class=\"flex flex-col timepicker-elements justify-around\">\n        <div id='").concat(h,"' class='timepicker-head flex flex-row items-center justify-center'>\n        <div class='timepicker-head-content flex w-100 justify-evenly'>\n            <div class=\"timepicker-current-wrapper\">\n              <span class=\"relative h-100\">\n                <button type='button' class='timepicker-current timepicker-hour active ripple' tabindex=\"0\">21</button>\n              </span>\n              <button type='button' class='timepicker-dot' disabled>:</button>\n            <span class=\"relative h-100\">\n              <button type='button' class='timepicker-current timepicker-minute ripple' tabindex=\"0\">21</button>\n            </span>\n            </div>\n            <div class=\"flex flex-col justify-center timepicker-mode-wrapper\">\n              <button type='button' class=\"timepicker-hour-mode timepicker-am ripple\" tabindex=\"0\">").concat(u,'</button>\n              <button class="timepicker-hour-mode timepicker-pm ripple" tabindex="0">').concat(n,"</button>\n            </div>\n        </div>\n      </div>\n      <div id='").concat(a,"' class='timepicker-clock-wrapper flex justify-center flex-col items-center'>\n        <div class='timepicker-clock'>\n          <span class='timepicker-middle-dot absolute'></span>\n          <div class='timepicker-hand-pointer absolute'>\n            <div class='timepicker-circle absolute'></div>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div id='").concat(o,"' class='timepicker-footer'>\n      <div class=\"w-full flex justify-between\">\n        ").concat(l?"<button type='button' class='timepicker-button timepicker-clear ripple' tabindex=\"0\">".concat(s,"</button>"):"","\n        <button type='button' class='timepicker-button timepicker-cancel ripple' tabindex=\"0\">").concat(r,"</button>\n        <button type='button' class='timepicker-button timepicker-submit ripple' tabindex=\"0\">").concat(i,"</button>\n      </div>\n    </div>\n  </div>\n</div>")),Ka(v,Nl),v.setAttribute("role","dialog"),v.setAttribute("tabIndex","-1"),v.setAttribute("id",d),f&&(e._popper=Tt(e.input,v,{placement:"bottom-start"})),e._document.body.appendChild(v),e._getDomElements(),e._toggleBackdropAnimation(),e._setActiveClassToTipsOnOpen(m,b,y),e._appendTimes(),e._setActiveClassToTipsOnOpen(m,b,y),e._setTipsAndTimesDependOnInputValue(m,b),""===e.input.value&&(c=ns.find(".".concat(Bl),e._modal),p&&Ka(e._PM,pl),e._hour.textContent="12",e._minutes.textContent="00",e._addActiveClassToTip(c,Number(e._hour.textContent))),e._handleSwitchTimeMode(),e._handleOkButton(),e._handleClose(),f?(e._handleHoverInlineBtn(),e._handleDocumentClickInline(),e._handleInlineClicks()):(e._handleSwitchHourMinute(),e._handleClockClick(),e._handleKeyboard(),Qa(e._hour,{pointerEvents:"none"}),Qa(e._minutes,{pointerEvents:""})),g&&(h=window.innerWidth>document.documentElement.clientWidth,Qa(e._document.body,{overflow:"hidden"}),!el()&&h&&Qa(e._document.body,{paddingRight:"15px"})),e._focusTrap=new vs(e._wrapper,{event:"keydown",condition:function(e){return"Tab"===e.key}}),e._focusTrap.trap()}),n))}))}},{key:"_handleInlineClicks",value:function(){var e=this;Ha(this._modal,"click mousedown mouseup touchstart touchend contextmenu",".".concat(Cl,", .").concat(El),(function(t){function n(t){t=d(t),e._hour.textContent=e._setHourOrMinute(t)}function i(t){t=h(t),e._minutes.textContent=e._setHourOrMinute(t)}function r(){n(u+=1)}function o(){i(c+=1)}function a(){n(--u)}function s(){i(--c)}var l=t.target,u=(t=t.type,Number(e._hour.textContent)),c=Number(e._minutes.textContent),h=function(e){return 59<e?e=0:e<0&&(e=59),e},d=function(e){return 12<e?e=1:e<1&&(e=12),12<e?1:e};Za(l,Cl)?Za(l.parentNode,Al)?"mousedown"===t||"touchstart"===t?(clearInterval(e._interval),e._interval=setInterval(r,100)):"mouseup"===t||"touchend"===t||"contextmenu"===t?clearInterval(e._interval):r():"mousedown"===t||"touchstart"===t?(clearInterval(e._interval),e._interval=setInterval(o,100)):"mouseup"===t||"touchend"===t||"contextmenu"===t?clearInterval(e._interval):o():Za(l,El)&&(Za(l.parentNode,Al)?"mousedown"===t||"touchstart"===t?(clearInterval(e._interval),e._interval=setInterval(a,100)):"mouseup"===t||"touchend"===t?clearInterval(e._interval):a():"mousedown"===t||"touchstart"===t?(clearInterval(e._interval),e._interval=setInterval(s,100)):"mouseup"===t||"touchend"===t?clearInterval(e._interval):s())}))}},{key:"_handleClose",value:function(){var e=this;za.on(this._modal,"click",".".concat($l,", .").concat(ml,", .").concat(bl),(function(t){t=t.target;var n,i,r,o=e._options.closeModalOnBackdropClick;Za(t,bl)?(e.input.value="",Ja(e.input,"active"),n=(r=al(r=""===nl(e.input)[0]?["12","00","PM"]:nl(e.input),3))[0],i=r[1],r=r[2],e._setTipsAndTimesDependOnInputValue("12","00"),e._setActiveClassToTipsOnOpen(n,i,r),e._hour.click()):(Za(t,ml)||Za(t,$l)&&o)&&(Qa(e.elementToggle,{pointerEvents:"auto"}),e._toggleBackdropAnimation(!0),e._removeModal(),e._focusTrap.disable(),e._focusTrap=null,e.elementToggle?e.elementToggle.focus():e.input&&e.input.focus())}))}},{key:"showValueInput",value:function(){return this.input.value}},{key:"_handleOkButton",value:function(){var e=this;Ha(this._modal,"click",".".concat(yl),(function(){var t=(n=e._options).readOnly,n=n.focusInputAfterApprove,i=e._document.querySelector(".".concat(Il,".").concat(pl)),r="".concat(e._hour.textContent,":").concat(e._minutes.textContent);Ka(e.input,"active"),Qa(e.elementToggle,{pointerEvents:"auto"}),e._isInvalidTimeFormat&&Ja(e.input,"is-invalid"),!t&&n&&e.input.focus(),Qa(e.elementToggle,{pointerEvents:"auto"}),e.input.value=null===i?"".concat(r," PM"):"".concat(r," ").concat(i.textContent),e._toggleBackdropAnimation(!0),e._removeModal(),za.trigger(e.input,"input.mdb.timepicker")}))}},{key:"_handleHoverInlineBtn",value:function(){var e=this;Ha(this._modal,"mouseover mouseleave",".".concat(kl),(function(t){var n=t.type,i=(t=t.target,ns.find(".".concat(Dl),e._modal)),r=ns.find(".".concat(jl),e._modal);"mouseover"===n?Za(t,Sl)?i.forEach((function(e){return Ka(e,pl)})):r.forEach((function(e){return Ka(e,pl)})):Za(t,Sl)?i.forEach((function(e){return Ja(e,pl)})):r.forEach((function(e){return Ja(e,pl)}))}))}},{key:"_handleDocumentClickInline",value:function(){var e=this;za.on(document,"click",(function(t){t=t.target,!e._modal||e._modal.contains(t)||Za(t,"timepicker-icon")||(clearInterval(e._interval),Qa(e.elementToggle,{pointerEvents:"auto"}),e._removeModal())}))}},{key:"_handleSwitchHourMinute",value:function(){var e,t=this;e=Ol,za.on(document,"click",e,(function(t){t=t.target,Za(t,"active")||(document.querySelectorAll(e).forEach((function(e){Za(e,"active")&&Ja(e,"active")})),Ka(t,"active"))})),za.on(this._modal,"click",Ol,(function(){function e(e,n){r.forEach((function(e){return e.remove()})),i.forEach((function(e){return e.remove()})),Ka(t._hand,zl),setTimeout((function(){Ja(t._hand,zl)}),401),t._getAppendClock(e,".".concat(wl),n),setTimeout((function(){var e,n;e=ns.find(".".concat(Bl),t._modal),n=ns.find(".".concat(Hl),t._modal),t._addActiveClassToTip(e,a),t._addActiveClassToTip(n,s)}),401)}var n=ns.find(Ol,t._modal),i=ns.find(".".concat(Hl),t._modal),r=ns.find(".".concat(Bl),t._modal),o=ns.find(".".concat(Ul),t._modal),a=Number(t._hour.textContent),s=Number(t._minutes.textContent);n.forEach((function(n){Za(n,pl)&&(Za(n,Rl)?(Ka(t._hand,zl),Qa(t._hand,{transform:"rotateZ(".concat(6*t._minutes.textContent,"deg)"),height:"calc(40% + 1px)"}),0<o.length&&o.forEach((function(e){return e.remove()})),e(t.minutesArray,"".concat(Hl)),t._hour.style.pointerEvents="",t._minutes.style.pointerEvents="none"):Za(n,Sl)&&(Qa(t._hand,{transform:"rotateZ(".concat(30*t._hour.textContent,"deg)")}),12<Number(t._hour.textContent)?(Qa(t._hand,{transform:"rotateZ(".concat(30*t._hour.textContent-360,"deg)"),height:"21.5%"}),12<Number(t._hour.textContent)&&Qa(t._hand,{height:"21.5%"})):Qa(t._hand,{height:"calc(40% + 1px)"}),0<o.length&&o.forEach((function(e){return e.remove()})),e(t.hoursArray,"".concat(Bl)),Qa(t._hour,{pointerEvents:"none"}),Qa(t._minutes,{pointerEvents:""})))}))}))}},{key:"_handleSwitchTimeMode",value:function(){za.on(document,"click",".".concat(Il),(function(e){e=e.target,Za(e,pl)||(ns.find(".".concat(Il)).forEach((function(e){Za(e,pl)&&Ja(e,pl)})),Ka(e,pl))}))}},{key:"_handleClockClick",value:function(){var e=this,t=ns.findOne(".".concat(Pl));Ha(document,"mousedown mouseup mousemove mouseleave mouseover touchstart touchmove touchend","",(function(n){el()||n.preventDefault();var i=(r=e._options).maxHour,r=r.minHour,o=n.type,a=n.target,s=(l=e._options).closeModalOnMinutesClick,l=l.switchHoursToMinutesOnClick,u=null!==ns.findOne(".".concat(Hl),e._modal),c=null!==ns.findOne(".".concat(Bl),e._modal),h=null!==ns.findOne(".".concat(Ul),e._modal),d=ns.find(".".concat(Hl),e._modal),f=Zs(n,t),p=t.offsetWidth/2,g=(f=Math.atan2(f.y-p,f.x-p),el()&&(m=Zs(n,t,!0),f=Math.atan2(m.y-p,m.x-p)),null);if("mousedown"===o||"mousemove"===o||"touchmove"===o||"touchstart"===o?"mousedown"!==o&&"touchstart"!==o&&"touchmove"!==o||(Za(a,Pl)||Za(a,wl)||Za(a,Hl)||Za(a,xl)||Za(a,Ul)||Za(a,Bl)||Za(a,vl)||Za(a,Tl)||Za(a,Ml)||Za(a,Fl)||Za(a,Vl))&&(e._isMouseMove=!0,el()&&n.touches&&(m=n.touches[0].clientX,p=n.touches[0].clientY,g=document.elementFromPoint(m,p))):"mouseup"!==o&&"touchend"!==o||(e._isMouseMove=!1,(Za(a,wl)||Za(a,xl)||Za(a,Ul)||Za(a,Bl)||Za(a,vl)||Za(a,Tl)||Za(a,Ml)||Za(a,Fl)||Za(a,Vl))&&(c||h)&&l&&za.trigger(e._minutes,"click"),u&&s&&(m=ns.findOne(".".concat(yl),e._modal),za.trigger(m,"click"))),u){if(p=Math.trunc(180*f/Math.PI)+90,l=(o=e._makeMinutesDegrees(p,void 0)).degrees,s=o.minute,void 0===e._handlerMaxMinMinutesOptions(l,s))return;var m=e._handlerMaxMinMinutesOptions(l,s);u=m.degrees,p=m.minute;if(e._isMouseMove){if(Qa(e._hand,{transform:"rotateZ(".concat(u,"deg)")}),void 0===p)return;e._minutes.textContent=10<=p||"00"===p?p:"0".concat(p),e._toggleClassActive(e.minutesArray,e._minutes,d),e._toggleBackgroundColorCircle("".concat(Hl)),e._objWithDataOnChange.degreesMinutes=u,e._objWithDataOnChange.minutes=p}}if(c||h){var b=Math.trunc(180*f/Math.PI)+90;b=30*Math.round(b/30);if(Qa(e._circle,{backgroundColor:"#1976d2"}),void 0===e._makeHourDegrees(a,b,void 0))return;e._objWithDataOnChange.degreesHours=b,e._handlerMaxMinHoursOptions(b,(function(){var t,n;return el()&&b?(t=(n=e._makeHourDegrees(g,b,void 0)).degrees,n=n.hour,e._handleMoveHand(g,n,t)):(t=(n=e._makeHourDegrees(a,b,void 0)).degrees,n=n.hour,e._handleMoveHand(a,n,t))}),i,r)}n.stopPropagation()}))}},{key:"_handleMoveHand",value:function(e,t,n){var i=ns.find(".".concat(Bl),this._modal),r=ns.find(".".concat(Ul),this._modal);this._isMouseMove&&(Za(e,xl)||Za(e,Ul)||Za(e,Vl)?Qa(this._hand,{height:"21.5%"}):Qa(this._hand,{height:"calc(40% + 1px)"}),Qa(this._hand,{transform:"rotateZ(".concat(n,"deg)")}),this._hour.textContent=10<=t||"00"===t?t:"0".concat(t),this._toggleClassActive(this.hoursArray,this._hour,i),this._toggleClassActive(this.innerHours,this._hour,r),this._objWithDataOnChange.hour=10<=t||"00"===t?t:"0".concat(t))}},{key:"_handlerMaxMinMinutesOptions",value:function(e,t){var n=(r=this._options).increment,i=r.maxTime,r=r.minTime,o=nl(i,!1)[1],a=nl(r,!1)[1],s=nl(i,!1)[0],l=nl(r,!1)[0],u=nl(i,!1)[2],c=nl(r,!1)[2];o=""!==o?6*o:"",a=""!==a?6*a:"";if(void 0===u&&void 0===c){if(""!==i&&""!==r){if(e<=o&&a<=e)return e}else if(""!==r&&Number(this._hour.textContent)<=Number(l)){if(e<=a-6)return e}else if(""!==i&&Number(this._hour.textContent)>=Number(s)&&o+6<=e)return e}else if(""!==r){if("PM"===c&&this._isAmEnabled)return;if("PM"===c&&this._isPmEnabled){if(Number(this._hour.textContent)<Number(l))return;if(Number(this._hour.textContent)<=Number(l)&&e<=a-6)return e}else if("AM"===c&&this._isAmEnabled){if(Number(this._hour.textContent)<Number(l))return;if(Number(this._hour.textContent)<=Number(l)&&e<=a-6)return e}}else if(""!==i){if("AM"===u&&this._isPmEnabled)return;if("PM"===u&&this._isPmEnabled){if(Number(this._hour.textContent)>=Number(s)&&o+6<=e)return e}else if("AM"===u&&this._isAmEnabled&&Number(this._hour.textContent)>=Number(s)&&o+6<=e)return e}return(e=n?30*Math.round(e/30):e)<=0?e=360+e:360<=e&&(e=0),{degrees:e,minute:t}}},{key:"_removeModal",value:function(){var e=this;setTimeout((function(){e._modal.remove(),Qa(e._document.body,{overflow:""}),el()||Qa(e._document.body,{paddingRight:""})}),300),function(e,t,n,i){for(var r=t.split(" "),o=0;o<r.length;o++)Ua.off(e,r[o],n,i)}(this._document,"click keydown mousedown mouseup mousemove mouseleave mouseover touchmove touchend")}},{key:"_toggleBackdropAnimation",value:function(){0<arguments.length&&void 0!==arguments[0]&&arguments[0]?(Ka(this._wrapper,"animation"),Ka(this._wrapper,"fade-out"),this._wrapper.style.animationDuration="300ms"):(Ka(this._wrapper,"animation"),Ka(this._wrapper,"fade-in"),this._wrapper.style.animationDuration="300ms",this._options.inline||Ka(this._clock,_l))}},{key:"_addActiveClassToTip",value:function(e,t){e.forEach((function(e){Number(e.textContent)===Number(t)&&Ka(e,pl)}))}},{key:"_setHourOrMinute",value:function(e){return e<10?"0".concat(e):e}},{key:"_appendTimes",value:function(){this._getAppendClock(this.hoursArray,".".concat(wl),"".concat(Bl))}},{key:"_getConfig",value:function(e){var t=qa(this._element);return e=ol(ol(ol({},Gl),t),e),na(dl,e,ql),e}}])&&cl(t.prototype,n),i&&cl(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}();n=Wl;function Xl(e){return(Xl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Kl(e,t){var n,i=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)),i}function Ql(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Kl(Object(n),!0).forEach((function(t){var i,r;i=e,r=n[t],t in i?Object.defineProperty(i,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):i[t]=r})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Kl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Jl(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}za.on(window,"DOMContentLoaded",(function(){ns.find(".".concat(dl)).forEach((function(e){Wl.getInstance(e)||new Wl(e)}))}));var Zl="stepper",eu="mdb.stepper",tu=".".concat(eu),nu="horizontal",iu="vertical",ru={stepperType:"string",stepperLinear:"boolean",stepperNoEditable:"boolean",stepperActive:"string",stepperCompleted:"string",stepperInvalid:"string",stepperDisabled:"string",stepperVerticalBreakpoint:"number",stepperMobileBreakpoint:"number",stepperMobileBarBreakpoint:"number"},ou={stepperType:nu,stepperLinear:!1,stepperNoEditable:!1,stepperActive:"",stepperCompleted:"",stepperInvalid:"",stepperDisabled:"",stepperVerticalBreakpoint:0,stepperMobileBreakpoint:0,stepperMobileBarBreakpoint:4},au="mousedown".concat(tu),su="keydown".concat(tu),lu="keyup".concat(tu),uu="resize".concat(tu),cu="animationend",hu="".concat(Zl,"-step"),du="".concat(Zl,"-head"),fu="".concat(Zl,"-content"),pu="".concat(Zl,"-active"),gu="".concat(Zl,"-completed"),mu="".concat(Zl,"-invalid"),bu="".concat(Zl,"-disabled"),yu="".concat(Zl,"-").concat(iu),vu="".concat(Zl,"-content-hide"),_u="".concat(Zl,"-").concat(nu),wu=function(){function e(t,n){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this._element=t,this._options=this._getConfig(n),this._elementHeight=0,this._steps=ns.find(".".concat(hu),this._element),this._currentView="",this._activeStepIndex=0,this._verticalStepperStyles=[],this._element&&(xa(t,eu,this),this._init())}var t,n,i;return t=e,i=[{key:"NAME",get:function(){return Zl}},{key:"getInstance",value:function(e){return Pa(e,eu)}},{key:"getOrCreateInstance",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return this.getInstance(e)||new this(e,"object"===Xl(t)?t:null)}}],(n=[{key:"activeStep",get:function(){return this._steps[this._activeStepIndex]}},{key:"activeStepIndex",get:function(){return this._activeStepIndex}},{key:"dispose",value:function(){this._steps.forEach((function(e){za.off(e,au),za.off(e,su)})),za.off(window,uu),Oa(this._element,eu),this._element=null}},{key:"changeStep",value:function(e){this._toggleStep(e)}},{key:"nextStep",value:function(){this._toggleStep(this._activeStepIndex+1)}},{key:"previousStep",value:function(){this._toggleStep(this._activeStepIndex-1)}},{key:"_init",value:function(){var e=ns.findOne(".".concat(pu),this._element);e?this._activeStepIndex=this._steps.indexOf(e):this._toggleStepClass(this._activeStepIndex,"add",pu),this._toggleStepClass(this._activeStepIndex,"add",this._options.stepperActive),this._bindMouseDown(),this._bindKeysNavigation(),this._options.stepperType===iu?this._toggleVertical():this._toggleHorizontal(),(this._options.stepperVerticalBreakpoint||this._options.stepperMobileBreakpoint)&&this._toggleStepperView(),this._bindResize()}},{key:"_getConfig",value:function(e){var t=qa(this._element);return e=Ql(Ql(Ql({},ou),t),e),na(Zl,e,ru),e}},{key:"_bindMouseDown",value:function(){var e=this;this._steps.forEach((function(t){t=ns.findOne(".".concat(du),t),za.on(t,au,(function(t){var n=ns.parents(t.target,".".concat(hu))[0];n=e._steps.indexOf(n);t.preventDefault(),e._toggleStep(n)}))}))}},{key:"_bindResize",value:function(){var e=this;za.on(window,uu,(function(){e._currentView===iu&&e._setSingleStepHeight(e.activeStep),e._currentView===nu&&e._setHeight(e.activeStep),(e._options.stepperVerticalBreakpoint||e._options.stepperMobileBreakpoint)&&e._toggleStepperView()}))}},{key:"_toggleStepperView",value:function(){var e=this,t=this._options.stepperVerticalBreakpoint<window.innerWidth,n=this._options.stepperVerticalBreakpoint>window.innerWidth,i=this._options.stepperMobileBreakpoint>window.innerWidth;t&&this._currentView!==nu&&this._toggleHorizontal(),n&&!i&&this._currentView!==iu&&(this._steps.forEach((function(t){t=ns.findOne(".".concat(fu),t),e._resetStepperHeight(),e._showElement(t)})),this._toggleVertical())}},{key:"_toggleStep",value:function(e){this._activeStepIndex!==e&&(this._options.stepperNoEditable&&this._toggleDisabled(),this._showElement(ns.findOne(".".concat(fu),this._steps[e])),this._toggleActive(e),e>this._activeStepIndex&&this._toggleCompleted(this._activeStepIndex),this._currentView===nu?this._animateHorizontalStep(e):(this._animateVerticalStep(e),this._setSingleStepHeight(this._steps[e])),this._toggleStepTabIndex(ns.findOne(".".concat(du),this.activeStep),ns.findOne(".".concat(du),this._steps[e])),this._activeStepIndex=e)}},{key:"_resetStepperHeight",value:function(){this._element.style.height=""}},{key:"_setStepsHeight",value:function(){var e=this;this._steps.forEach((function(t){t=ns.findOne(".".concat(fu),t);var n=window.getComputedStyle(t);e._verticalStepperStyles.push({paddingTop:parseFloat(n.paddingTop),paddingBottom:parseFloat(n.paddingBottom)}),n=t.scrollHeight;t.style.height="".concat(n,"px")}))}},{key:"_setSingleStepHeight",value:function(e){var t=ns.findOne(".".concat(fu),e),n=this.activeStep===e;e=this._steps.indexOf(e),n=n?(t.style.height="",t.scrollHeight):t.scrollHeight+this._verticalStepperStyles[e].paddingTop+this._verticalStepperStyles[e].paddingBottom;t.style.height="".concat(n,"px")}},{key:"_toggleVertical",value:function(){this._currentView=iu,this._toggleStepperClass(yu),this._setStepsHeight(),this._hideInactiveSteps()}},{key:"_toggleHorizontal",value:function(){this._currentView=nu,this._toggleStepperClass(_u),this._setHeight(this.activeStep),this._hideInactiveSteps()}},{key:"_toggleStepperClass",value:function(e){this._element.classList.remove(_u,yu),this._element.classList.add(e),e!==yu&&this._steps.forEach((function(e){ns.findOne(".".concat(fu),e).classList.remove(vu)}))}},{key:"_toggleStepClass",value:function(e,t,n){n&&this._steps[e].classList[t](n)}},{key:"_bindKeysNavigation",value:function(){var e=this;this._toggleStepTabIndex(!1,ns.findOne(".".concat(du),this.activeStep)),this._steps.forEach((function(t){t=ns.findOne(".".concat(du),t),za.on(t,su,(function(t){var n=ns.parents(t.currentTarget,".".concat(hu))[0],i=ns.next(n,".".concat(hu))[0],r=ns.prev(n,".".concat(hu))[0],o=ns.findOne(".".concat(du),n),a=ns.findOne(".".concat(du),e.activeStep),s=null,l=null;i&&(s=ns.findOne(".".concat(du),i)),r&&(l=ns.findOne(".".concat(du),r)),37===t.keyCode&&e._currentView!==iu&&(l?(e._toggleStepTabIndex(o,l),e._toggleOutlineStyles(o,l),l.focus()):s&&(e._toggleStepTabIndex(o,s),e._toggleOutlineStyles(o,s),s.focus())),39===t.keyCode&&e._currentView!==iu&&(s?(e._toggleStepTabIndex(o,s),e._toggleOutlineStyles(o,s),s.focus()):l&&(e._toggleStepTabIndex(o,l),e._toggleOutlineStyles(o,l),l.focus())),40===t.keyCode&&e._currentView===iu&&(t.preventDefault(),s&&(e._toggleStepTabIndex(o,s),e._toggleOutlineStyles(o,s),s.focus())),38===t.keyCode&&e._currentView===iu&&(t.preventDefault(),l&&(e._toggleStepTabIndex(o,l),e._toggleOutlineStyles(o,l),l.focus())),36===t.keyCode&&(i=ns.findOne(".".concat(du),e._steps[0]),e._toggleStepTabIndex(o,i),e._toggleOutlineStyles(o,i),i.focus()),35===t.keyCode&&(r=e._steps[e._steps.length-1],s=ns.findOne(".".concat(du),r),e._toggleStepTabIndex(o,s),e._toggleOutlineStyles(o,s),s.focus()),13!==t.keyCode&&32!==t.keyCode||(t.preventDefault(),e.changeStep(e._steps.indexOf(n))),9===t.keyCode&&(e._toggleStepTabIndex(o,a),e._toggleOutlineStyles(o,!1),a.focus())})),za.on(t,lu,(function(t){var n=ns.parents(t.currentTarget,".".concat(hu))[0],i=(n=ns.findOne(".".concat(du),n),ns.findOne(".".concat(du),e.activeStep));9===t.keyCode&&(e._toggleStepTabIndex(n,i),e._toggleOutlineStyles(!1,i),i.focus())}))}))}},{key:"_toggleStepTabIndex",value:function(e,t){e&&e.setAttribute("tabIndex",-1),t&&t.setAttribute("tabIndex",0)}},{key:"_toggleOutlineStyles",value:function(e,t){e&&(e.style.outline=""),t&&(t.style.outline="revert")}},{key:"_toggleDisabled",value:function(){this._toggleStepClass(this._activeStepIndex,"add",bu),this._toggleStepClass(this._activeStepIndex,"add",this._options.stepperDisabled)}},{key:"_toggleActive",value:function(e){this._toggleStepClass(e,"add",pu),this._toggleStepClass(this._activeStepIndex,"remove",pu),this._toggleStepClass(e,"add",this._options.stepperActive),this._toggleStepClass(this._activeStepIndex,"remove",this._options.stepperActive)}},{key:"_toggleCompleted",value:function(e){this._toggleStepClass(e,"add",gu),this._toggleStepClass(e,"remove",mu),this._toggleStepClass(e,"add",this._options.stepperCompleted),this._toggleStepClass(e,"remove",this._options.stepperInvalid)}},{key:"_hideInactiveSteps",value:function(){var e=this;this._steps.forEach((function(t){t.classList.contains(pu)||e._hideElement(ns.findOne(".".concat(fu),t))}))}},{key:"_setHeight",value:function(e){var t=ns.findOne(".".concat(fu),e),n=getComputedStyle(t),i=(e=ns.findOne(".".concat(du),e),getComputedStyle(e));t=t.offsetHeight+parseFloat(n.marginTop)+parseFloat(n.marginBottom),n=e.offsetHeight+parseFloat(i.marginTop)+parseFloat(i.marginBottom);this._element.style.height="".concat(n+t,"px")}},{key:"_hideElement",value:function(e){ns.parents(e,".".concat(hu))[0].classList.contains(pu)||this._currentView===iu?e.classList.add(vu):e.style.display="none"}},{key:"_showElement",value:function(e){this._currentView===iu?e.classList.remove(vu):e.style.display="block"}},{key:"_animateHorizontalStep",value:function(e){var t,n=this,i=e>this._activeStepIndex,r=ns.findOne(".".concat(fu),this._steps[e]),o=ns.findOne(".".concat(fu),this.activeStep);this._steps.forEach((function(t,i){t=ns.findOne(".".concat(fu),t),n._clearStepAnimation(t),i!==e&&i!==n._activeStepIndex&&n._hideElement(t)})),i=i?(t="slide-out-left","slide-in-right"):(t="slide-out-right","slide-in-left"),o.classList.add(t,"animation","fast"),r.classList.add(i,"animation","fast"),this._setHeight(this._steps[e]),za.one(o,cu,(function(e){n._clearStepAnimation(e.target),n._hideElement(e.target)})),za.one(r,cu,(function(e){n._clearStepAnimation(e.target)}))}},{key:"_animateVerticalStep",value:function(e){e=ns.findOne(".".concat(fu),this._steps[e]);var t=ns.findOne(".".concat(fu),this.activeStep);this._hideElement(t),this._showElement(e)}},{key:"_clearStepAnimation",value:function(e){e.classList.remove("slide-out-left","slide-in-right","slide-out-right","slide-in-left","animation","fast")}}])&&Jl(t.prototype,n),i&&Jl(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}();ns.find('[data-mdb-stepper="stepper"]').forEach((function(e){return wu.getInstance(e)||new wu(e)})),tu=wu;window.Alert=$t,window.Button=t,window.Dropdown=Yt,window.Carousel=Ni,window.Collapse=en,window.Offcanvas=tn,window.Modal=tr,window.Popover=$r,window.ScrollSpy=di,window.Tab=Bo,window.Toast=sa,window.Tooltip=ro,window.Ripple=ys,window.Datepicker=zs,window.Timepicker=n,window.Stepper=tu}]);const K=[{id:0,name:"Mapping UI Github",link:"https://github.com/canaleal/Capstone_Map_Client"},{id:1,name:"Pothole Object Detection",link:"https://github.com/canaleal/PotholeObjectDetection"},{id:2,name:"Project Capstone",link:"https://github.com/canaleal/Capstone"}],Q=[{id:0,name:"Animista",link:"https://animista.net/play/basic"},{id:1,name:"Developer Icons",link:"https://devicon.dev/"},{id:2,name:"Color Designer",link:"https://colordesigner.io/tools"},{id:3,name:"Font Awesome",link:"https://fontawesome.com/"},{id:4,name:"Cool Backgrounds",link:"https://coolbackgrounds.io/"},{id:5,name:"Gradient Generator",link:"https://cssgradient.io/"}],J=[{id:0,name:"Linkedin",link:"https://www.linkedin.com/in/alex-canales"},{id:1,name:"Github",link:"https://github.com/canaleal"},{id:2,name:"Bitbucket",link:"https://bitbucket.org/Canaleal/"}];function Z(e,t,n){const i=e.slice();return i[0]=t[n],i}function ee(e,t,n){const i=e.slice();return i[0]=t[n],i}function te(e,t,n){const i=e.slice();return i[0]=t[n],i}function ne(t){let n,i,r,o,a,s,l=t[0].name+"";return{c(){n=f("div"),i=f("a"),r=p(l),a=g(),y(i,"href",o=`#${t[0].link}`),y(i,"target","_blank"),y(i,"rel","noreferrer"),y(i,"class","text-sm hover:underline"),y(n,"key",s=t[0].id),y(n,"class","my-2")},m(e,t){c(e,n,t),u(n,i),u(i,r),u(n,a)},p:e,d(e){e&&h(n)}}}function ie(t){let n,i,r,o,a,s,l=t[0].name+"";return{c(){n=f("div"),i=f("a"),r=p(l),a=g(),y(i,"href",o=`${t[0].link}`),y(i,"target","_blank"),y(i,"rel","noreferrer"),y(i,"class","text-sm hover:underline"),y(n,"key",s=t[0].id),y(n,"class","my-2")},m(e,t){c(e,n,t),u(n,i),u(i,r),u(n,a)},p:e,d(e){e&&h(n)}}}function re(t){let n,i,r,o,a,s,l=t[0].name+"";return{c(){n=f("div"),i=f("a"),r=p(l),a=g(),y(i,"href",o=`${t[0].link}`),y(i,"target","_blank"),y(i,"class","text-sm hover:underline"),y(i,"rel","noreferrer"),y(n,"key",s=t[0].id),y(n,"class","my-2")},m(e,t){c(e,n,t),u(n,i),u(i,r),u(n,a)},p:e,d(e){e&&h(n)}}}function oe(t){let n,i,r,o,a,s,l,p,m,b,v,_,w,x,P,O=K,k=[];for(let e=0;e<O.length;e+=1)k[e]=ne(te(t,O,e));let T=Q,S=[];for(let e=0;e<T.length;e+=1)S[e]=ie(ee(t,T,e));let I=J,E=[];for(let e=0;e<I.length;e+=1)E[e]=re(Z(t,I,e));return{c(){n=f("footer"),i=f("div"),r=f("div"),o=f("p"),o.textContent="Project Details",a=g();for(let e=0;e<k.length;e+=1)k[e].c();s=g(),l=f("div"),p=f("p"),p.textContent="Application Tools",m=g();for(let e=0;e<S.length;e+=1)S[e].c();b=g(),v=f("div"),_=f("p"),_.textContent="About",w=g();for(let e=0;e<E.length;e+=1)E[e].c();x=g(),P=f("div"),P.innerHTML='<div class="col-span-1"><p class="font-bold">Disclaimer</p> \n\t\t\t<p class="font-bold text-xs my-2">© CAPSTONE API. All rights reserved.</p> \n\t\t\t<p class="font-bold text-xs my-2">Website Terms and Policies</p> \n\n\t\t\t<p class="text-xs my-2">If you require any more information or have any questions about our sites disclaimer, please feel free to contact me by email at alexcanales766@gmail.com. The Disclaimer was generated with the\n\t\t\t\thelp of the Disclaimer Generator. All the information on this website - Showcase - is published in good faith and for general information purpose only.</p></div> \n\n\t\t<div class="col-span-1 py-2 "></div> \n\n\t\t<div class="col-span-1"><p class="font-bold">License Terms</p> \n\n\t\t\t<p class="text-xs my-2">Welcome to the CAPSTONE API portal. The objective of this site is to make CAPSTONE data, including imagery, eminently accessible to application developers.</p></div>',y(o,"class","font-bold"),y(r,"class","col-span-1 "),y(p,"class","font-bold"),y(l,"class","col-span-1"),y(_,"class","font-bold"),y(v,"class","col-span-1 "),y(i,"class","grid grid-cols-1 md:grid-cols-3 py-2"),y(P,"class","grid grid-cols-1 sm:grid-cols-3 mt-8"),y(n,"class","bg-smoke py-8 px-5")},m(e,t){c(e,n,t),u(n,i),u(i,r),u(r,o),u(r,a);for(let e=0;e<k.length;e+=1)k[e].m(r,null);u(i,s),u(i,l),u(l,p),u(l,m);for(let e=0;e<S.length;e+=1)S[e].m(l,null);u(i,b),u(i,v),u(v,_),u(v,w);for(let e=0;e<E.length;e+=1)E[e].m(v,null);u(n,x),u(n,P)},p(e,[t]){if(0&t){let n;for(O=K,n=0;n<O.length;n+=1){const i=te(e,O,n);k[n]?k[n].p(i,t):(k[n]=ne(i),k[n].c(),k[n].m(r,null))}for(;n<k.length;n+=1)k[n].d(1);k.length=O.length}if(0&t){let n;for(T=Q,n=0;n<T.length;n+=1){const i=ee(e,T,n);S[n]?S[n].p(i,t):(S[n]=ie(i),S[n].c(),S[n].m(l,null))}for(;n<S.length;n+=1)S[n].d(1);S.length=T.length}if(0&t){let n;for(I=J,n=0;n<I.length;n+=1){const i=Z(e,I,n);E[n]?E[n].p(i,t):(E[n]=re(i),E[n].c(),E[n].m(v,null))}for(;n<E.length;n+=1)E[n].d(1);E.length=I.length}},i:e,o:e,d(e){e&&h(n),d(k,e),d(S,e),d(E,e)}}}class ae extends X{constructor(e){super(),W(this,e,null,oe,o,{})}}const se=(e,t,n)=>e.filter((e=>e[t]===n)),le=(e,t)=>{const n=`${e.name.split(".")[0]}.geojson`;return se(t,"name",n)[0]};let ue;const ce=new Uint8Array(16);function he(){if(!ue&&(ue="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!ue))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return ue(ce)}const de=[];for(let e=0;e<256;++e)de.push((e+256).toString(16).slice(1));var fe={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};function pe(e,t,n){if(fe.randomUUID&&!t&&!e)return fe.randomUUID();const i=(e=e||{}).random||(e.rng||he)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,t){n=n||0;for(let e=0;e<16;++e)t[n+e]=i[e];return t}return function(e,t=0){return(de[e[t+0]]+de[e[t+1]]+de[e[t+2]]+de[e[t+3]]+"-"+de[e[t+4]]+de[e[t+5]]+"-"+de[e[t+6]]+de[e[t+7]]+"-"+de[e[t+8]]+de[e[t+9]]+"-"+de[e[t+10]]+de[e[t+11]]+de[e[t+12]]+de[e[t+13]]+de[e[t+14]]+de[e[t+15]]).toLowerCase()}(i)}function ge(t){let n;return{c(){n=f("div"),n.innerHTML='<div class="h-full rounded-lg" id="map"></div>',y(n,"class","h-96 md:h-full scale-in-center")},m(e,t){c(e,n,t)},p:e,i:e,o:e,d(e){e&&h(n)}}}function me(e,t,n){let{layerList:i}=t,{mapStyle:r}=t,{cityDetails:o}=t,{pointOfInterest:a}=t,{gpsData:s}=t,{selectedMenu:l}=t,{isReadyForStyleSwitching:u}=t,c=null,h=!1;const d=new mapboxgl.Popup,f=(e,t,r,o,a,s,l)=>{let u=i;var h,d;(h="layerName",d=e,u.filter((e=>e[h]===d)).length>=1)&&(u=((e,t,n)=>e.filter((e=>e[t]!==n)))(u,"layerName",e),c.getLayer(e)&&(c.removeLayer(e),c.removeSource(t)));const f={id:pe(),icon:a,type:r,isShown:o,name:e,layerName:e,hasFilter:s,sourceName:t,data:l};return u.push(f),n(0,i=u),f},p=e=>{try{c.addSource(e.sourceName,{type:"geojson",data:e.data})}catch(e){console.error(e)}},g=()=>{c.addSource("mapbox-dem",{type:"raster-dem",url:"mapbox://mapbox.mapbox-terrain-dem-v1",tileSize:512,maxzoom:14}),c.setTerrain({source:"mapbox-dem",exaggeration:1.5}),c.addLayer({id:"sky",type:"sky",paint:{"sky-type":"atmosphere","sky-atmosphere-sun":[0,0],"sky-atmosphere-sun-intensity":15}})},m=(e,t=1,n="#dee7e7")=>{c.addLayer({id:e.layerName,source:e.sourceName,"source-layer":"building",filter:["==","extrude","true"],type:"fill-extrusion",minzoom:15,paint:{"fill-extrusion-color":n,"fill-extrusion-height":["interpolate",["linear"],["zoom"],15,0,15.05,["get","height"]],"fill-extrusion-base":["interpolate",["linear"],["zoom"],15,0,15.05,["get","min_height"]],"fill-extrusion-opacity":t}})},b=(e,t,i="blue")=>{c.addLayer({id:e.layerName,type:"circle",source:e.sourceName,minzoom:12,paint:{"circle-radius":["interpolate",["linear"],["zoom"],7,["interpolate",["linear"],["get",t],1,2,3,4],16,["interpolate",["linear"],["get",t],3,6,9,12]],"circle-color":i}},"waterway-label"),c.setLayoutProperty(e.layerName,"visibility","none"),c.moveLayer(e.layerName),c.on("click",e.layerName,(e=>{let t="";const i=Object.fromEntries(Object.entries(e.features[0].properties).slice(0,8));for(const[e,n]of Object.entries(i))t+=`<span class="block font-bold">${e}</span><span class="block">${n}</span>`;d.setLngLat(e.lngLat).setHTML(t).addTo(c),n(1,a={lat:e.lngLat.lat,lng:e.lngLat.lng})})),c.on("mouseenter",e.layerName,(()=>{c.getCanvas().style.cursor="pointer"})),c.on("mouseleave",e.layerName,(()=>{c.getCanvas().style.cursor=""}))},y=()=>{c.resize()};return P((async()=>{mapboxgl.accessToken="pk.eyJ1IjoiY2FuYWxlYWwiLCJhIjoiY2t6NmgzdGd0MTBhcTJ3bXprNjM1a3NsbiJ9.umUsk2Ky68kLBFUa6PeAxA",n(7,c=new mapboxgl.Map({center:o.center,zoom:o.zoom,pitch:o.pitch,bearing:o.bearing,container:"map",antialias:!0,style:"mapbox://styles/mapbox/"+r})),await(async()=>{try{f(layerName="3D-Buildings",sourceName="composite",type="Polygon",isShown=!0,faIcon="fa-building",hasFilter=!1,data=null)}catch(e){console.error(e)}})(),c.addControl(new MapboxGeocoder({accessToken:mapboxgl.accessToken,mapboxgl:mapboxgl})),c.addControl(new mapboxgl.FullscreenControl,"bottom-right"),c.addControl(new mapboxgl.NavigationControl,"bottom-right"),c.on("style.load",(function(){(()=>{try{const e=se(i,"layerName","3D-Buildings")[0];g(),m(e),n(8,h=!0)}catch(e){console.error(e)}})(),s&&(()=>{if(!(null===c||s.length<=0))try{i.forEach((function(e){const t=e.layerName,n=e.type;"3D-Buildings"!==t&&(p(e),"Point"===n&&b(e,"Count",["get","Color"]))}))}catch(e){console.log(e)}})()})),c.on("idle",(()=>{(()=>{if(null!==c)try{for(let e=0;e<i.length;e+=1){const t=i[e].layerName,n=i[e].isShown;if(!c.getLayer(t))return;!0===n?c.setLayoutProperty(t,"visibility","visible"):c.setLayoutProperty(t,"visibility","none")}}catch(e){}})()})),setInterval((function(){y()}),2e3)})),O((()=>{try{c.eachLayer((function(e){c.removeLayer(e)}));for(let e=0;e<i.length;e++)c.removeSource(i[e].sourceName);n(7,c=null)}catch(e){}})),e.$$set=e=>{"layerList"in e&&n(0,i=e.layerList),"mapStyle"in e&&n(2,r=e.mapStyle),"cityDetails"in e&&n(3,o=e.cityDetails),"pointOfInterest"in e&&n(1,a=e.pointOfInterest),"gpsData"in e&&n(4,s=e.gpsData),"selectedMenu"in e&&n(5,l=e.selectedMenu),"isReadyForStyleSwitching"in e&&n(6,u=e.isReadyForStyleSwitching)},e.$$.update=()=>{160&e.$$.dirty&&c&&null!==l&&y(),388&e.$$.dirty&&c&&r&&h&&(()=>{if(null!==c&&!1!==u)try{c.setStyle("mapbox://styles/mapbox/"+r)}catch(e){console.log(e)}})(),400&e.$$.dirty&&c&&s&&h&&(()=>{if(!(null===c||s.length<=0))try{s.forEach((function(e){console.log(e);const t=e.dataName,n=`${t}Source`,i=e.dataType,r=e.hasFilter;let o=f(layerName=t,sourceName=n,type=i,isShown=!0,faIcon="fa-road",hasFilter=r,data=e);p(o),"Point"===i&&b(o,"Count",["get","Color"])}))}catch(e){console.log(e)}})(),392&e.$$.dirty&&c&&o&&h&&(()=>{if(null!==c)try{c.flyTo({center:o.center,zoom:o.zoom})}catch(e){console.log(e)}})()},[i,a,r,o,s,l,u,c,h]}class be extends X{constructor(e){super(),W(this,e,me,ge,o,{layerList:0,mapStyle:2,cityDetails:3,pointOfInterest:1,gpsData:4,selectedMenu:5,isReadyForStyleSwitching:6})}}function ye(t){let n,i,o,a,s,l,d,m,_,w;return{c(){n=f("section"),i=f("div"),o=f("p"),o.textContent="Fetch Firebase Data:",a=g(),s=f("button"),l=f("i"),d=g(),m=p(t[1]),y(o,"class","font-bold my-1"),y(l,"class","fa-solid fa-magnifying-glass"),y(s,"class","card-btn card-btn-blue my-1"),y(i,"class","p-4"),y(n,"class","card h-fit scale-in-center")},m(e,h){c(e,n,h),u(n,i),u(i,o),u(i,a),u(i,s),u(s,l),u(s,d),u(s,m),_||(w=b(s,"click",(function(){r(t[0])&&t[0].apply(this,arguments)})),_=!0)},p(e,[n]){t=e,2&n&&v(m,t[1])},i:e,o:e,d(e){e&&h(n),_=!1,w()}}}function ve(e,t,n){let{dateTimeDictionary:i}=t,{fetchFirebaseData:r}=t,o="Search";return e.$$set=e=>{"dateTimeDictionary"in e&&n(2,i=e.dateTimeDictionary),"fetchFirebaseData"in e&&n(0,r=e.fetchFirebaseData)},e.$$.update=()=>{4&e.$$.dirty&&i&&(""===i.startDateTime||""===i.endDateTime?n(1,o="Search without Date Time"):n(1,o="Search with Date Time"))},[r,o,i]}class _e extends X{constructor(e){super(),W(this,e,ve,ye,o,{dateTimeDictionary:2,fetchFirebaseData:0})}}function we(e){let t,n,i,r,o,a,s,l,d=e[0].startDateTime+"",m=e[0].endDateTime+"";return{c(){t=f("div"),n=p(d),i=p(" to "),r=p(m),o=g(),a=f("button"),a.innerHTML='<i class="fa-solid fa-xmark "></i>',y(a,"class","float-right fa-lg"),y(t,"class","alert alert-green my-1"),y(t,"role","alert")},m(h,d){c(h,t,d),u(t,n),u(t,i),u(t,r),u(t,o),u(t,a),s||(l=b(a,"click",e[1]),s=!0)},p(e,t){1&t&&d!==(d=e[0].startDateTime+"")&&v(n,d),1&t&&m!==(m=e[0].endDateTime+"")&&v(r,m)},d(e){e&&h(t),s=!1,l()}}}function xe(t){let n;return{c(){n=f("div"),n.textContent="No date time selected.",y(n,"class","alert alert-red my-1"),y(n,"role","alert")},m(e,t){c(e,n,t)},p:e,d(e){e&&h(n)}}}function Pe(t){let n,r,o,a,s,l,d,p,m,v,w,x,P,O,k,T;function S(e,t){return""===e[0].startDateTime||""===e[0].endDateTime?xe:we}let I=S(t),E=I(t);return{c(){n=f("section"),r=f("div"),o=f("p"),o.textContent="Date Time Selection:",a=g(),s=f("div"),l=f("input"),d=g(),p=f("label"),p.textContent="Select Start date",m=g(),v=f("div"),w=f("input"),x=g(),P=f("label"),P.textContent="Select End date",O=g(),E.c(),y(o,"class","font-bold my-1"),y(l,"type","datetime-local"),y(l,"class","form-control date-picker"),y(l,"placeholder","Select a date"),y(l,"data-mdb-toggle","datepicker"),y(l,"min","2010-01-01"),y(l,"max","2022-12-31"),y(p,"for","floatingInput"),y(s,"class","datepicker form-floating my-1 w-full"),y(s,"data-mdb-toggle-button","false"),y(w,"type","datetime-local"),y(w,"class","form-control date-picker"),y(w,"placeholder","Select End Date Time"),y(w,"data-mdb-toggle","datepicker"),y(w,"min","2010-01-01"),y(w,"max","2022-12-31"),y(P,"for","floatingInput"),y(v,"class","datepicker form-floating my-1 w-full"),y(v,"data-mdb-toggle-button","false"),y(r,"class","p-4"),y(n,"class","card h-fit scale-in-center")},m(e,i){c(e,n,i),u(n,r),u(r,o),u(r,a),u(r,s),u(s,l),_(l,t[0].startDateTime),u(s,d),u(s,p),u(r,m),u(r,v),u(v,w),_(w,t[0].endDateTime),u(v,x),u(v,P),u(r,O),E.m(r,null),k||(T=[b(l,"input",t[2]),b(w,"input",t[3])],k=!0)},p(e,[t]){1&t&&_(l,e[0].startDateTime),1&t&&_(w,e[0].endDateTime),I===(I=S(e))&&E?E.p(e,t):(E.d(1),E=I(e),E&&(E.c(),E.m(r,null)))},i:e,o:e,d(e){e&&h(n),E.d(),k=!1,i(T)}}}function Oe(e,t,n){let{dateTimeDictionary:i}=t;return e.$$set=e=>{"dateTimeDictionary"in e&&n(0,i=e.dateTimeDictionary)},[i,()=>{Object.keys(i).forEach((e=>n(0,i[e]="",i)))},function(){i.startDateTime=this.value,n(0,i)},function(){i.endDateTime=this.value,n(0,i)}]}class ke extends X{constructor(e){super(),W(this,e,Oe,Pe,o,{dateTimeDictionary:0})}}function Te(t){let n,i,r,o,a,s,l,d,m;return{c(){n=f("section"),i=f("div"),r=f("p"),o=p(t[0]),a=p(":"),s=g(),l=f("div"),d=p(t[1]),y(r,"class","font-bold my-1"),y(l,"class",m="alert alert-"+t[2]+" my-1"),y(l,"role","alert"),y(i,"class","p-4"),y(n,"class","card h-fit scale-in-center")},m(e,t){c(e,n,t),u(n,i),u(i,r),u(r,o),u(r,a),u(i,s),u(i,l),u(l,d)},p(e,[t]){1&t&&v(o,e[0]),2&t&&v(d,e[1]),4&t&&m!==(m="alert alert-"+e[2]+" my-1")&&y(l,"class",m)},i:e,o:e,d(e){e&&h(n)}}}function Se(e,t,n){let{title:i="No Title"}=t,{message:r="No Message"}=t,{styleColor:o="blue"}=t;return e.$$set=e=>{"title"in e&&n(0,i=e.title),"message"in e&&n(1,r=e.message),"styleColor"in e&&n(2,o=e.styleColor)},[i,r,o]}class Ie extends X{constructor(e){super(),W(this,e,Se,Te,o,{title:0,message:1,styleColor:2})}}function Ee(e,t,n){const i=e.slice();return i[6]=t[n],i}function De(t){let n,i,r,o,a,s,l,m,_,w,x,P=t[1]?"Show All":"Disable All",O=t[0],k=[];for(let e=0;e<O.length;e+=1)k[e]=Ae(Ee(t,O,e));return{c(){n=f("section"),i=f("div"),r=f("p"),r.textContent="Layers:",o=g(),a=f("button"),s=p(P),m=g(),_=f("div");for(let e=0;e<k.length;e+=1)k[e].c();y(r,"class","font-bold my-1"),y(a,"class",l=`card-btn   ${t[1]?"card-btn-green":" card-btn-red-outline"}  my-1 `),y(_,"class","overflow-auto"),y(i,"class","p-4"),y(n,"class","card h-fit scale-in-center")},m(e,l){c(e,n,l),u(n,i),u(i,r),u(i,o),u(i,a),u(a,s),u(i,m),u(i,_);for(let e=0;e<k.length;e+=1)k[e].m(_,null);w||(x=b(a,"click",t[2]),w=!0)},p(e,t){if(2&t&&P!==(P=e[1]?"Show All":"Disable All")&&v(s,P),2&t&&l!==(l=`card-btn   ${e[1]?"card-btn-green":" card-btn-red-outline"}  my-1 `)&&y(a,"class",l),9&t){let n;for(O=e[0],n=0;n<O.length;n+=1){const i=Ee(e,O,n);k[n]?k[n].p(i,t):(k[n]=Ae(i),k[n].c(),k[n].m(_,null))}for(;n<k.length;n+=1)k[n].d(1);k.length=O.length}},i:e,o:e,d(e){e&&h(n),d(k,e),w=!1,x()}}}function je(t){let n,i;return n=new Ie({props:{title:"Recordings",message:"No Layers added.",styleColor:"red"}}),{c(){$(n.$$.fragment)},m(e,t){Y(n,e,t),i=!0},p:e,i(e){i||(U(n.$$.fragment,e),i=!0)},o(e){H(n.$$.fragment,e),i=!1},d(e){G(n,e)}}}function Ce(t){let n,i;return n=new Ie({props:{title:"Layers",message:"Loading Layers on the map.",styleColor:"red"}}),{c(){$(n.$$.fragment)},m(e,t){Y(n,e,t),i=!0},p:e,i(e){i||(U(n.$$.fragment,e),i=!0)},o(e){H(n.$$.fragment,e),i=!1},d(e){G(n,e)}}}function Ae(e){let t,n,i,r,o,a,s,l,d,m,_=e[6].name+"";function w(){return e[4](e[6])}return{c(){t=f("button"),n=f("i"),r=g(),o=p(_),a=g(),y(n,"class",i="fa-solid "+e[6].icon),y(t,"key",s=e[6].name),y(t,"class",l=`card-btn ${e[6].isShown?"card-btn-blue":""} my-1 `)},m(e,i){c(e,t,i),u(t,n),u(t,r),u(t,o),u(t,a),d||(m=b(t,"click",w),d=!0)},p(r,a){e=r,1&a&&i!==(i="fa-solid "+e[6].icon)&&y(n,"class",i),1&a&&_!==(_=e[6].name+"")&&v(o,_),1&a&&s!==(s=e[6].name)&&y(t,"key",s),1&a&&l!==(l=`card-btn ${e[6].isShown?"card-btn-blue":""} my-1 `)&&y(t,"class",l)},d(e){e&&h(t),d=!1,m()}}}function Me(e){let t,n,i,r;const o=[Ce,je,De],a=[];function s(e,t){return null===e[0]?0:e[0].length<=0?1:2}return t=s(e),n=a[t]=o[t](e),{c(){n.c(),i=m()},m(e,n){a[t].m(e,n),c(e,i,n),r=!0},p(e,[r]){let l=t;t=s(e),t===l?a[t].p(e,r):(B(),H(a[l],1,1,(()=>{a[l]=null})),V(),n=a[t],n?n.p(e,r):(n=a[t]=o[t](e),n.c()),U(n,1),n.m(i.parentNode,i))},i(e){r||(U(n),r=!0)},o(e){H(n),r=!1},d(e){a[t].d(e),e&&h(i)}}}function Re(e,t,n){let{layerList:i=[]}=t,r=!1;const o=e=>{try{let t=i,o=t.findIndex((t=>t.name===e.name));t[o].isShown=!t[o].isShown,n(0,i=t),!0===a()&&n(1,r=!t[o].isShown)}catch(e){alert("Unable to toggle Layer")}},a=()=>{let e=i[0].isShown;return i.every((t=>t.isShown===e))};return e.$$set=e=>{"layerList"in e&&n(0,i=e.layerList)},[i,r,()=>{try{let e=i;e.map((e=>(e.isShown=r,e))),n(0,i=e),n(1,r=!r)}catch(e){alert("Unable to toggle Layers")}},o,e=>o(e)]}class Ne extends X{constructor(e){super(),W(this,e,Re,Me,o,{layerList:0})}}function Le(e,t,n){const i=e.slice();return i[5]=t[n],i}function Fe(e){let t,n,i,r,o,a,s,l,d,m,v,_,w,x=e[5].name+"";function P(){return e[4](e[5])}return{c(){t=f("div"),n=f("input"),a=g(),s=f("label"),l=p(x),m=g(),y(n,"id",i=e[5].name),y(n,"type","radio"),n.value=r=e[5].id,n.checked=o=e[0]===e[5].id,y(s,"class","ml-2"),y(s,"for",d=e[5].name),y(t,"key",v=e[5].id)},m(e,i){c(e,t,i),u(t,n),u(t,a),u(t,s),u(s,l),u(t,m),_||(w=b(n,"click",P),_=!0)},p(t,i){e=t,1&i&&o!==(o=e[0]===e[5].id)&&(n.checked=o)},d(e){e&&h(t),_=!1,w()}}}function Be(t){let n,i,r,o,a=t[1],s=[];for(let e=0;e<a.length;e+=1)s[e]=Fe(Le(t,a,e));return{c(){n=f("section"),i=f("div"),r=f("p"),r.textContent="Map Style:",o=g();for(let e=0;e<s.length;e+=1)s[e].c();y(r,"class","font-bold my-1"),y(i,"class","p-4"),y(n,"class","card h-fit scale-in-center")},m(e,t){c(e,n,t),u(n,i),u(i,r),u(i,o);for(let e=0;e<s.length;e+=1)s[e].m(i,null)},p(e,[t]){if(7&t){let n;for(a=e[1],n=0;n<a.length;n+=1){const r=Le(e,a,n);s[n]?s[n].p(r,t):(s[n]=Fe(r),s[n].c(),s[n].m(i,null))}for(;n<s.length;n+=1)s[n].d(1);s.length=a.length}},i:e,o:e,d(e){e&&h(n),d(s,e)}}}function Ve(e,t,n){let{mapStyle:i}=t,{isReadyForStyleSwitching:r}=t;const o=e=>{try{n(0,i=e),n(3,r=!0)}catch(e){}};return e.$$set=e=>{"mapStyle"in e&&n(0,i=e.mapStyle),"isReadyForStyleSwitching"in e&&n(3,r=e.isReadyForStyleSwitching)},[i,[{name:"Streets",id:"streets-v11"},{name:"Dark",id:"dark-v10"},{name:"Outdoors",id:"outdoors-v11"},{name:"Satellite",id:"satellite-streets-v11"},{name:"Dark - Traffic",id:"navigation-night-v1"}],o,r,e=>o(e.id)]}class Ue extends X{constructor(e){super(),W(this,e,Ve,Be,o,{mapStyle:0,isReadyForStyleSwitching:3})}}function He(e){let t;return{c(){t=f("div"),t.textContent="Select a point on the map.",y(t,"class","alert alert-red my-1"),y(t,"role","alert")},m(e,n){c(e,t,n)},d(e){e&&h(t)}}}function ze(e){let t,n;return{c(){t=f("div"),n=p(e[2]),y(t,"class","alert alert-red my-1"),y(t,"role","alert")},m(e,i){c(e,t,i),u(t,n)},p(e,t){4&t&&v(n,e[2])},d(e){e&&h(t)}}}function $e(t){let n,i,r,o,a,s,l,d,p=null==t[0]&&He(),m=null!==t[2]&&ze(t);return{c(){n=f("section"),i=f("div"),r=f("p"),r.textContent="Street View:",o=g(),p&&p.c(),a=g(),m&&m.c(),s=g(),l=f("div"),y(r,"class","font-bold my-1"),y(l,"class",d=(null==t[0]?"h-0":"h-96")+" w-full rounded-lg"),y(i,"class","p-4"),y(n,"class","card h-fit scale-in-center")},m(e,h){c(e,n,h),u(n,i),u(i,r),u(i,o),p&&p.m(i,null),u(i,a),m&&m.m(i,null),u(i,s),u(i,l),t[3](l)},p(e,[t]){null==e[0]?p||(p=He(),p.c(),p.m(i,a)):p&&(p.d(1),p=null),null!==e[2]?m?m.p(e,t):(m=ze(e),m.c(),m.m(i,s)):m&&(m.d(1),m=null),1&t&&d!==(d=(null==e[0]?"h-0":"h-96")+" w-full rounded-lg")&&y(l,"class",d)},i:e,o:e,d(e){e&&h(n),p&&p.d(),m&&m.d(),t[3](null)}}}function Ye(e,t,n){let{pointOfInterest:i}=t,r=null,o=null,a=null;const s=()=>{try{r=new google.maps.StreetViewPanorama(o,{position:i,pov:{heading:34,pitch:10}})}catch(e){n(2,a=e)}};P((()=>{try{null!==i&&s()}catch(e){n(2,a=e)}}));return O((()=>{try{r=null,n(1,o=null)}catch(e){}})),e.$$set=e=>{"pointOfInterest"in e&&n(0,i=e.pointOfInterest)},e.$$.update=()=>{1&e.$$.dirty&&i&&(()=>{try{null===r?s():r.setPosition(i)}catch(e){n(2,a=e)}})()},[i,o,a,function(e){T[e?"unshift":"push"]((()=>{o=e,n(1,o)}))}]}class Ge extends X{constructor(e){super(),W(this,e,Ye,$e,o,{pointOfInterest:0})}}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */const qe=function(e){const t=[];let n=0;for(let i=0;i<e.length;i++){let r=e.charCodeAt(i);r<128?t[n++]=r:r<2048?(t[n++]=r>>6|192,t[n++]=63&r|128):55296==(64512&r)&&i+1<e.length&&56320==(64512&e.charCodeAt(i+1))?(r=65536+((1023&r)<<10)+(1023&e.charCodeAt(++i)),t[n++]=r>>18|240,t[n++]=r>>12&63|128,t[n++]=r>>6&63|128,t[n++]=63&r|128):(t[n++]=r>>12|224,t[n++]=r>>6&63|128,t[n++]=63&r|128)}return t},We={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let t=0;t<e.length;t+=3){const r=e[t],o=t+1<e.length,a=o?e[t+1]:0,s=t+2<e.length,l=s?e[t+2]:0,u=r>>2,c=(3&r)<<4|a>>4;let h=(15&a)<<2|l>>6,d=63&l;s||(d=64,o||(h=64)),i.push(n[u],n[c],n[h],n[d])}return i.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(qe(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,i=0;for(;n<e.length;){const r=e[n++];if(r<128)t[i++]=String.fromCharCode(r);else if(r>191&&r<224){const o=e[n++];t[i++]=String.fromCharCode((31&r)<<6|63&o)}else if(r>239&&r<365){const o=((7&r)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[i++]=String.fromCharCode(55296+(o>>10)),t[i++]=String.fromCharCode(56320+(1023&o))}else{const o=e[n++],a=e[n++];t[i++]=String.fromCharCode((15&r)<<12|(63&o)<<6|63&a)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let t=0;t<e.length;){const r=n[e.charAt(t++)],o=t<e.length?n[e.charAt(t)]:0;++t;const a=t<e.length?n[e.charAt(t)]:64;++t;const s=t<e.length?n[e.charAt(t)]:64;if(++t,null==r||null==o||null==a||null==s)throw Error();const l=r<<2|o>>4;if(i.push(l),64!==a){const e=o<<4&240|a>>2;if(i.push(e),64!==s){const e=a<<6&192|s;i.push(e)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},Xe=function(e){return function(e){const t=qe(e);return We.encodeByteArray(t,!0)}(e).replace(/\./g,"")};function Ke(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=Ke(e[n],t[n]));return e}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
class Qe{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"==typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}
/**
     * @license
     * Copyright 2021 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
function Je(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Ze(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Je())}function et(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(e){return!1}}function tt(){const e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof e&&void 0!==e.id}function nt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function it(){const e=Je();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function rt(){return"object"==typeof indexedDB}class ot extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,ot.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,at.prototype.create)}}class at{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},i=`${this.service}/${e}`,r=this.errors[e],o=r?function(e,t){return e.replace(st,((e,n)=>{const i=t[n];return null!=i?String(i):`<${n}?>`}))}(r,n):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new ot(i,a,n)}}const st=/\{\$([^}]+)}/g;
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function lt(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function ut(e,t){if(e===t)return!0;const n=Object.keys(e),i=Object.keys(t);for(const r of n){if(!i.includes(r))return!1;const n=e[r],o=t[r];if(ct(n)&&ct(o)){if(!ut(n,o))return!1}else if(n!==o)return!1}for(const e of i)if(!n.includes(e))return!1;return!0}function ct(e){return null!==e&&"object"==typeof e}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function ht(e){const t=[];for(const[n,i]of Object.entries(e))Array.isArray(i)?i.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return t.length?"&"+t.join("&"):""}function dt(e){const t={};return e.replace(/^\?/,"").split("&").forEach((e=>{if(e){const[n,i]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(i)}})),t}function ft(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function pt(e,t){const n=new gt(e,t);return n.subscribe.bind(n)}class gt{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let i;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");i=function(e,t){if("object"!=typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"==typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===i.next&&(i.next=mt),void 0===i.error&&(i.error=mt),void 0===i.complete&&(i.complete=mt);const r=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch(e){}})),this.observers.push(i),r}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(e){"undefined"!=typeof console&&console.error&&console.error(e)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function mt(){}
/**
     * @license
     * Copyright 2021 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function bt(e){return e&&e._delegate?e._delegate:e}class yt{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */const vt="[DEFAULT]";
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class _t{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new Qe;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(e){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),i=null!==(t=null==e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(i)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(e){if(i)return null;throw e}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */(e))try{this.getOrInitializeService({instanceIdentifier:vt})}catch(e){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(e){}}}}clearInstance(e="[DEFAULT]"){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(e="[DEFAULT]"){return this.instances.has(e)}getOptions(e="[DEFAULT]"){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[e,t]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(e)&&t.resolve(i)}return i}onInit(e,t){var n;const i=this.normalizeInstanceIdentifier(t),r=null!==(n=this.onInitCallbacks.get(i))&&void 0!==n?n:new Set;r.add(e),this.onInitCallbacks.set(i,r);const o=this.instances.get(i);return o&&e(o,i),()=>{r.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(e){}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:(i=e,i===vt?void 0:i),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch(e){}var i;return n||null}normalizeInstanceIdentifier(e="[DEFAULT]"){return this.component?this.component.multipleInstances?e:vt:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class wt{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new _t(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */const xt=[];var Pt;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(Pt||(Pt={}));const Ot={debug:Pt.DEBUG,verbose:Pt.VERBOSE,info:Pt.INFO,warn:Pt.WARN,error:Pt.ERROR,silent:Pt.SILENT},kt=Pt.INFO,Tt={[Pt.DEBUG]:"log",[Pt.VERBOSE]:"log",[Pt.INFO]:"info",[Pt.WARN]:"warn",[Pt.ERROR]:"error"},St=(e,t,...n)=>{if(t<e.logLevel)return;const i=(new Date).toISOString(),r=Tt[t];if(!r)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);console[r](`[${i}]  ${e.name}:`,...n)};class It{constructor(e){this.name=e,this._logLevel=kt,this._logHandler=St,this._userLogHandler=null,xt.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Pt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?Ot[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Pt.DEBUG,...e),this._logHandler(this,Pt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Pt.VERBOSE,...e),this._logHandler(this,Pt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Pt.INFO,...e),this._logHandler(this,Pt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Pt.WARN,...e),this._logHandler(this,Pt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Pt.ERROR,...e),this._logHandler(this,Pt.ERROR,...e)}}let Et,Dt;const jt=new WeakMap,Ct=new WeakMap,At=new WeakMap,Mt=new WeakMap,Rt=new WeakMap;let Nt={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Ct.get(e);if("objectStoreNames"===t)return e.objectStoreNames||At.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Bt(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function Lt(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Dt||(Dt=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(Vt(this),t),Bt(jt.get(this))}:function(...t){return Bt(e.apply(Vt(this),t))}:function(t,...n){const i=e.call(Vt(this),t,...n);return At.set(i,t.sort?t.sort():[t]),Bt(i)}}function Ft(e){return"function"==typeof e?Lt(e):(e instanceof IDBTransaction&&function(e){if(Ct.has(e))return;const t=new Promise(((t,n)=>{const i=()=>{e.removeEventListener("complete",r),e.removeEventListener("error",o),e.removeEventListener("abort",o)},r=()=>{t(),i()},o=()=>{n(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",r),e.addEventListener("error",o),e.addEventListener("abort",o)}));Ct.set(e,t)}(e),t=e,(Et||(Et=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((e=>t instanceof e))?new Proxy(e,Nt):e);var t}function Bt(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const i=()=>{e.removeEventListener("success",r),e.removeEventListener("error",o)},r=()=>{t(Bt(e.result)),i()},o=()=>{n(e.error),i()};e.addEventListener("success",r),e.addEventListener("error",o)}));return t.then((t=>{t instanceof IDBCursor&&jt.set(t,e)})).catch((()=>{})),Rt.set(t,e),t}(e);if(Mt.has(e))return Mt.get(e);const t=Ft(e);return t!==e&&(Mt.set(e,t),Rt.set(t,e)),t}const Vt=e=>Rt.get(e);const Ut=["get","getKey","getAll","getAllKeys","count"],Ht=["put","add","delete","clear"],zt=new Map;function $t(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(zt.get(t))return zt.get(t);const n=t.replace(/FromIndex$/,""),i=t!==n,r=Ht.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!r&&!Ut.includes(n))return;const o=async function(e,...t){const o=this.transaction(e,r?"readwrite":"readonly");let a=o.store;return i&&(a=a.index(t.shift())),(await Promise.all([a[n](...t),r&&o.done]))[0]};return zt.set(t,o),o}Nt=(e=>({...e,get:(t,n,i)=>$t(t,n)||e.get(t,n,i),has:(t,n)=>!!$t(t,n)||e.has(t,n)}))(Nt);
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
class Yt{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null==t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null})).filter((e=>e)).join(" ")}}const Gt="@firebase/app",qt="0.7.28",Wt=new It("@firebase/app"),Xt="[DEFAULT]",Kt={[Gt]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Qt=new Map,Jt=new Map;function Zt(e,t){try{e.container.addComponent(t)}catch(n){Wt.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function en(e,t){e.container.addOrOverwriteComponent(t)}function tn(e){const t=e.name;if(Jt.has(t))return Wt.debug(`There were multiple attempts to register component ${t}.`),!1;Jt.set(t,e);for(const t of Qt.values())Zt(t,e);return!0}function nn(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
const rn=new at("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
class on{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new yt("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw rn.create("app-deleted",{appName:this._name})}}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */const an="9.9.0";function sn(e,t={}){if("object"!=typeof t){t={name:t}}const n=Object.assign({name:Xt,automaticDataCollectionEnabled:!1},t),i=n.name;if("string"!=typeof i||!i)throw rn.create("bad-app-name",{appName:String(i)});const r=Qt.get(i);if(r){if(ut(e,r.options)&&ut(n,r.config))return r;throw rn.create("duplicate-app",{appName:i})}const o=new wt(i);for(const e of Jt.values())o.addComponent(e);const a=new on(e,n,o);return Qt.set(i,a),a}async function ln(e){const t=e.name;Qt.has(t)&&(Qt.delete(t),await Promise.all(e.container.getProviders().map((e=>e.delete()))),e.isDeleted=!0)}function un(e,t,n){var i;let r=null!==(i=Kt[e])&&void 0!==i?i:e;n&&(r+=`-${n}`);const o=r.match(/\s|\//),a=t.match(/\s|\//);if(o||a){const e=[`Unable to register library "${r}" with version "${t}":`];return o&&e.push(`library name "${r}" contains illegal characters (whitespace or "/")`),o&&a&&e.push("and"),a&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void Wt.warn(e.join(" "))}tn(new yt(`${r}-version`,(()=>({library:r,version:t})),"VERSION"))}function cn(e,t){if(null!==e&&"function"!=typeof e)throw rn.create("invalid-log-argument");!function(e,t){for(const n of xt){let i=null;t&&t.level&&(i=Ot[t.level]),n.userLogHandler=null===e?null:(t,n,...r)=>{const o=r.map((e=>{if(null==e)return null;if("string"==typeof e)return e;if("number"==typeof e||"boolean"==typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(e){return null}})).filter((e=>e)).join(" ");n>=(null!=i?i:t.logLevel)&&e({level:Pt[n].toLowerCase(),message:o,args:r,type:t.name})}}}(e,t)}function hn(e){var t;t=e,xt.forEach((e=>{e.setLogLevel(t)}))}
/**
     * @license
     * Copyright 2021 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */const dn="firebase-heartbeat-store";let fn=null;function pn(){return fn||(fn=function(e,t,{blocked:n,upgrade:i,blocking:r,terminated:o}={}){const a=indexedDB.open(e,t),s=Bt(a);return i&&a.addEventListener("upgradeneeded",(e=>{i(Bt(a.result),e.oldVersion,e.newVersion,Bt(a.transaction))})),n&&a.addEventListener("blocked",(()=>n())),s.then((e=>{o&&e.addEventListener("close",(()=>o())),r&&e.addEventListener("versionchange",(()=>r()))})).catch((()=>{})),s}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)e.createObjectStore(dn)}}).catch((e=>{throw rn.create("storage-open",{originalErrorMessage:e.message})}))),fn}async function gn(e,t){var n;try{const n=(await pn()).transaction(dn,"readwrite"),i=n.objectStore(dn);return await i.put(t,mn(e)),n.done}catch(e){throw rn.create("storage-set",{originalErrorMessage:null===(n=e)||void 0===n?void 0:n.message})}}function mn(e){return`${e.name}!${e.options.appId}`}
/**
     * @license
     * Copyright 2021 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class bn{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new vn(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){const e=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),t=yn();if(null===this._heartbeatsCache&&(this._heartbeatsCache=await this._heartbeatsCachePromise),this._heartbeatsCache.lastSentHeartbeatDate!==t&&!this._heartbeatsCache.heartbeats.some((e=>e.date===t)))return this._heartbeatsCache.heartbeats.push({date:t,agent:e}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null===this._heartbeatsCache||0===this._heartbeatsCache.heartbeats.length)return"";const e=yn(),{heartbeatsToSend:t,unsentEntries:n}=function(e,t=1024){const n=[];let i=e.slice();for(const r of e){const e=n.find((e=>e.agent===r.agent));if(e){if(e.dates.push(r.date),_n(n)>t){e.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),_n(n)>t){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}(this._heartbeatsCache.heartbeats),i=Xe(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function yn(){return(new Date).toISOString().substring(0,10)}class vn{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!rt()&&new Promise(((e,t)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),e(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var e;t((null===(e=r.error)||void 0===e?void 0:e.message)||"")}}catch(e){t(e)}})).then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){var t;try{return(await pn()).transaction(dn).objectStore(dn).get(mn(e))}catch(e){throw rn.create("storage-get",{originalErrorMessage:null===(t=e)||void 0===t?void 0:t.message})}}(this.app);return e||{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return gn(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return gn(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function _n(e){return Xe(JSON.stringify({version:2,heartbeats:e})).length}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var wn;wn="",tn(new yt("platform-logger",(e=>new Yt(e)),"PRIVATE")),tn(new yt("heartbeat",(e=>new bn(e)),"PRIVATE")),un(Gt,qt,wn),un(Gt,qt,"esm2017"),un("fire-js","");var xn,Pn=Object.freeze({__proto__:null,SDK_VERSION:an,_DEFAULT_ENTRY_NAME:Xt,_addComponent:Zt,_addOrOverwriteComponent:en,_apps:Qt,_clearComponents:function(){Jt.clear()},_components:Jt,_getProvider:nn,_registerComponent:tn,_removeServiceInstance:function(e,t,n="[DEFAULT]"){nn(e,t).clearInstance(n)},deleteApp:ln,getApp:function(e="[DEFAULT]"){const t=Qt.get(e);if(!t)throw rn.create("no-app",{appName:e});return t},getApps:function(){return Array.from(Qt.values())},initializeApp:sn,onLog:cn,registerVersion:un,setLogLevel:hn,FirebaseError:ot}),On="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},kn=kn||{},Tn=On||self;function Sn(){}function In(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function En(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var Dn="closure_uid_"+(1e9*Math.random()>>>0),jn=0;function Cn(e,t,n){return e.call.apply(e.bind,arguments)}function An(e,t,n){if(!e)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,i),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function Mn(e,t,n){return(Mn=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Cn:An).apply(null,arguments)}function Rn(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function Nn(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Vb=function(e,n,i){for(var r=Array(arguments.length-2),o=2;o<arguments.length;o++)r[o-2]=arguments[o];return t.prototype[n].apply(e,r)}}function Ln(){this.s=this.s,this.o=this.o}Ln.prototype.s=!1,Ln.prototype.na=function(){var e;!this.s&&(this.s=!0,this.M(),0)&&(e=this,Object.prototype.hasOwnProperty.call(e,Dn)&&e[Dn]||(e[Dn]=++jn))},Ln.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Fn=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"==typeof e)return"string"!=typeof t||1!=t.length?-1:e.indexOf(t,0);for(let n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},Bn=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){const i=e.length,r="string"==typeof e?e.split(""):e;for(let o=0;o<i;o++)o in r&&t.call(n,r[o],o,e)};function Vn(e){return Array.prototype.concat.apply([],arguments)}function Un(e){const t=e.length;if(0<t){const n=Array(t);for(let i=0;i<t;i++)n[i]=e[i];return n}return[]}function Hn(e){return/^[\s\xa0]*$/.test(e)}var zn,$n=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function Yn(e,t){return-1!=e.indexOf(t)}function Gn(e,t){return e<t?-1:e>t?1:0}e:{var qn=Tn.navigator;if(qn){var Wn=qn.userAgent;if(Wn){zn=Wn;break e}}zn=""}function Xn(e,t,n){for(const i in e)t.call(n,e[i],i,e)}function Kn(e){const t={};for(const n in e)t[n]=e[n];return t}var Qn="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Jn(e,t){let n,i;for(let t=1;t<arguments.length;t++){for(n in i=arguments[t],i)e[n]=i[n];for(let t=0;t<Qn.length;t++)n=Qn[t],Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}}function Zn(e){return Zn[" "](e),e}Zn[" "]=Sn;var ei,ti,ni=Yn(zn,"Opera"),ii=Yn(zn,"Trident")||Yn(zn,"MSIE"),ri=Yn(zn,"Edge"),oi=ri||ii,ai=Yn(zn,"Gecko")&&!(Yn(zn.toLowerCase(),"webkit")&&!Yn(zn,"Edge"))&&!(Yn(zn,"Trident")||Yn(zn,"MSIE"))&&!Yn(zn,"Edge"),si=Yn(zn.toLowerCase(),"webkit")&&!Yn(zn,"Edge");function li(){var e=Tn.document;return e?e.documentMode:void 0}e:{var ui="",ci=(ti=zn,ai?/rv:([^\);]+)(\)|;)/.exec(ti):ri?/Edge\/([\d\.]+)/.exec(ti):ii?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(ti):si?/WebKit\/(\S+)/.exec(ti):ni?/(?:Version)[ \/]?(\S+)/.exec(ti):void 0);if(ci&&(ui=ci?ci[1]:""),ii){var hi=li();if(null!=hi&&hi>parseFloat(ui)){ei=String(hi);break e}}ei=ui}var di,fi={};function pi(){return function(e){var t=fi;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9)}((function(){let e=0;const t=$n(String(ei)).split("."),n=$n("9").split("."),i=Math.max(t.length,n.length);for(let a=0;0==e&&a<i;a++){var r=t[a]||"",o=n[a]||"";do{if(r=/(\d*)(\D*)(.*)/.exec(r)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==r[0].length&&0==o[0].length)break;e=Gn(0==r[1].length?0:parseInt(r[1],10),0==o[1].length?0:parseInt(o[1],10))||Gn(0==r[2].length,0==o[2].length)||Gn(r[2],o[2]),r=r[3],o=o[3]}while(0==e)}return 0<=e}))}if(Tn.document&&ii){var gi=li();di=gi||(parseInt(ei,10)||void 0)}else di=void 0;var mi=di,bi=function(){if(!Tn.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{Tn.addEventListener("test",Sn,t),Tn.removeEventListener("test",Sn,t)}catch(e){}return e}();function yi(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}function vi(e,t){if(yi.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,i=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(ai){e:{try{Zn(t.nodeName);var r=!0;break e}catch(e){}r=!1}r||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"==typeof e.pointerType?e.pointerType:_i[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&vi.Z.h.call(this)}}yi.prototype.h=function(){this.defaultPrevented=!0},Nn(vi,yi);var _i={2:"touch",3:"pen",4:"mouse"};vi.prototype.h=function(){vi.Z.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var wi="closure_listenable_"+(1e6*Math.random()|0),xi=0;function Pi(e,t,n,i,r){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!i,this.ia=r,this.key=++xi,this.ca=this.fa=!1}function Oi(e){e.ca=!0,e.listener=null,e.proxy=null,e.src=null,e.ia=null}function ki(e){this.src=e,this.g={},this.h=0}function Ti(e,t){var n=t.type;if(n in e.g){var i,r=e.g[n],o=Fn(r,t);(i=0<=o)&&Array.prototype.splice.call(r,o,1),i&&(Oi(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function Si(e,t,n,i){for(var r=0;r<e.length;++r){var o=e[r];if(!o.ca&&o.listener==t&&o.capture==!!n&&o.ia==i)return r}return-1}ki.prototype.add=function(e,t,n,i,r){var o=e.toString();(e=this.g[o])||(e=this.g[o]=[],this.h++);var a=Si(e,t,i,r);return-1<a?(t=e[a],n||(t.fa=!1)):((t=new Pi(t,this.src,o,!!i,r)).fa=n,e.push(t)),t};var Ii="closure_lm_"+(1e6*Math.random()|0),Ei={};function Di(e,t,n,i,r){if(i&&i.once)return Ci(e,t,n,i,r);if(Array.isArray(t)){for(var o=0;o<t.length;o++)Di(e,t[o],n,i,r);return null}return n=Bi(n),e&&e[wi]?e.N(t,n,En(i)?!!i.capture:!!i,r):ji(e,t,n,!1,i,r)}function ji(e,t,n,i,r,o){if(!t)throw Error("Invalid event type");var a=En(r)?!!r.capture:!!r,s=Li(e);if(s||(e[Ii]=s=new ki(e)),(n=s.add(t,n,i,a,o)).proxy)return n;if(i=function(){function e(n){return t.call(e.src,e.listener,n)}var t=Ni;return e}(),n.proxy=i,i.src=e,i.listener=n,e.addEventListener)bi||(r=a),void 0===r&&(r=!1),e.addEventListener(t.toString(),i,r);else if(e.attachEvent)e.attachEvent(Ri(t.toString()),i);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(i)}return n}function Ci(e,t,n,i,r){if(Array.isArray(t)){for(var o=0;o<t.length;o++)Ci(e,t[o],n,i,r);return null}return n=Bi(n),e&&e[wi]?e.O(t,n,En(i)?!!i.capture:!!i,r):ji(e,t,n,!0,i,r)}function Ai(e,t,n,i,r){if(Array.isArray(t))for(var o=0;o<t.length;o++)Ai(e,t[o],n,i,r);else i=En(i)?!!i.capture:!!i,n=Bi(n),e&&e[wi]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=Si(o=e.g[t],n,i,r))&&(Oi(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete e.g[t],e.h--)))):e&&(e=Li(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Si(t,n,i,r)),(n=-1<e?t[e]:null)&&Mi(n))}function Mi(e){if("number"!=typeof e&&e&&!e.ca){var t=e.src;if(t&&t[wi])Ti(t.i,e);else{var n=e.type,i=e.proxy;t.removeEventListener?t.removeEventListener(n,i,e.capture):t.detachEvent?t.detachEvent(Ri(n),i):t.addListener&&t.removeListener&&t.removeListener(i),(n=Li(t))?(Ti(n,e),0==n.h&&(n.src=null,t[Ii]=null)):Oi(e)}}}function Ri(e){return e in Ei?Ei[e]:Ei[e]="on"+e}function Ni(e,t){if(e.ca)e=!0;else{t=new vi(t,this);var n=e.listener,i=e.ia||e.src;e.fa&&Mi(e),e=n.call(i,t)}return e}function Li(e){return(e=e[Ii])instanceof ki?e:null}var Fi="__closure_events_fn_"+(1e9*Math.random()>>>0);function Bi(e){return"function"==typeof e?e:(e[Fi]||(e[Fi]=function(t){return e.handleEvent(t)}),e[Fi])}function Vi(){Ln.call(this),this.i=new ki(this),this.P=this,this.I=null}function Ui(e,t){var n,i=e.I;if(i)for(n=[];i;i=i.I)n.push(i);if(e=e.P,i=t.type||t,"string"==typeof t)t=new yi(t,e);else if(t instanceof yi)t.target=t.target||e;else{var r=t;Jn(t=new yi(i,e),r)}if(r=!0,n)for(var o=n.length-1;0<=o;o--){var a=t.g=n[o];r=Hi(a,i,!0,t)&&r}if(r=Hi(a=t.g=e,i,!0,t)&&r,r=Hi(a,i,!1,t)&&r,n)for(o=0;o<n.length;o++)r=Hi(a=t.g=n[o],i,!1,t)&&r}function Hi(e,t,n,i){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var r=!0,o=0;o<t.length;++o){var a=t[o];if(a&&!a.ca&&a.capture==n){var s=a.listener,l=a.ia||a.src;a.fa&&Ti(e.i,a),r=!1!==s.call(l,i)&&r}}return r&&!i.defaultPrevented}Nn(Vi,Ln),Vi.prototype[wi]=!0,Vi.prototype.removeEventListener=function(e,t,n,i){Ai(this,e,t,n,i)},Vi.prototype.M=function(){if(Vi.Z.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],i=0;i<n.length;i++)Oi(n[i]);delete t.g[e],t.h--}}this.I=null},Vi.prototype.N=function(e,t,n,i){return this.i.add(String(e),t,!1,n,i)},Vi.prototype.O=function(e,t,n,i){return this.i.add(String(e),t,!0,n,i)};var zi=Tn.JSON.stringify;function $i(){var e=Qi;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var Yi,Gi=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}((()=>new qi),(e=>e.reset()));class qi{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Wi(e){Tn.setTimeout((()=>{throw e}),0)}function Xi(e,t){Yi||function(){var e=Tn.Promise.resolve(void 0);Yi=function(){e.then(Ji)}}(),Ki||(Yi(),Ki=!0),Qi.add(e,t)}var Ki=!1,Qi=new class{constructor(){this.h=this.g=null}add(e,t){const n=Gi.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}};function Ji(){for(var e;e=$i();){try{e.h.call(e.g)}catch(e){Wi(e)}var t=Gi;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Ki=!1}function Zi(e,t){Vi.call(this),this.h=e||1,this.g=t||Tn,this.j=Mn(this.kb,this),this.l=Date.now()}function er(e){e.da=!1,e.S&&(e.g.clearTimeout(e.S),e.S=null)}function tr(e,t,n){if("function"==typeof e)n&&(e=Mn(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=Mn(e.handleEvent,e)}return 2147483647<Number(t)?-1:Tn.setTimeout(e,t||0)}function nr(e){e.g=tr((()=>{e.g=null,e.i&&(e.i=!1,nr(e))}),e.j);const t=e.h;e.h=null,e.m.apply(null,t)}Nn(Zi,Vi),(xn=Zi.prototype).da=!1,xn.S=null,xn.kb=function(){if(this.da){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-e):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Ui(this,"tick"),this.da&&(er(this),this.start()))}},xn.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},xn.M=function(){Zi.Z.M.call(this),er(this),delete this.g};class ir extends Ln{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:nr(this)}M(){super.M(),this.g&&(Tn.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function rr(e){Ln.call(this),this.h=e,this.g={}}Nn(rr,Ln);var or=[];function ar(e,t,n,i){Array.isArray(n)||(n&&(or[0]=n.toString()),n=or);for(var r=0;r<n.length;r++){var o=Di(t,n[r],i||e.handleEvent,!1,e.h||e);if(!o)break;e.g[o.key]=o}}function sr(e){Xn(e.g,(function(e,t){this.g.hasOwnProperty(t)&&Mi(e)}),e),e.g={}}function lr(){this.g=!0}function ur(e,t,n,i){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var i=n[e];if(!(2>i.length)){var r=i[1];if(Array.isArray(r)&&!(1>r.length)){var o=r[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var a=1;a<r.length;a++)r[a]=""}}}return zi(n)}catch(e){return t}}(e,n)+(i?" "+i:"")}))}rr.prototype.M=function(){rr.Z.M.call(this),sr(this)},rr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},lr.prototype.Aa=function(){this.g=!1},lr.prototype.info=function(){};var cr={},hr=null;function dr(){return hr=hr||new Vi}function fr(e){yi.call(this,cr.Ma,e)}function pr(e){const t=dr();Ui(t,new fr(t))}function gr(e,t){yi.call(this,cr.STAT_EVENT,e),this.stat=t}function mr(e){const t=dr();Ui(t,new gr(t,e))}function br(e,t){yi.call(this,cr.Na,e),this.size=t}function yr(e,t){if("function"!=typeof e)throw Error("Fn must not be null and must be a function");return Tn.setTimeout((function(){e()}),t)}cr.Ma="serverreachability",Nn(fr,yi),cr.STAT_EVENT="statevent",Nn(gr,yi),cr.Na="timingevent",Nn(br,yi);var vr={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},_r={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function wr(){}function xr(e){return e.h||(e.h=e.i())}function Pr(){}wr.prototype.h=null;var Or,kr={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Tr(){yi.call(this,"d")}function Sr(){yi.call(this,"c")}function Ir(){}function Er(e,t,n,i){this.l=e,this.j=t,this.m=n,this.X=i||1,this.V=new rr(this),this.P=jr,e=oi?125:void 0,this.W=new Zi(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Dr}function Dr(){this.i=null,this.g="",this.h=!1}Nn(Tr,yi),Nn(Sr,yi),Nn(Ir,wr),Ir.prototype.g=function(){return new XMLHttpRequest},Ir.prototype.i=function(){return{}},Or=new Ir;var jr=45e3,Cr={},Ar={};function Mr(e,t,n){e.K=1,e.v=io(Qr(t)),e.s=n,e.U=!0,Rr(e,null)}function Rr(e,t){e.F=Date.now(),Br(e),e.A=Qr(e.v);var n=e.A,i=e.X;Array.isArray(i)||(i=[String(i)]),bo(n.h,"t",i),e.C=0,n=e.l.H,e.h=new Dr,e.g=ba(e.l,n?t:null,!e.s),0<e.O&&(e.L=new ir(Mn(e.Ia,e,e.g),e.O)),ar(e.V,e.g,"readystatechange",e.gb),t=e.H?Kn(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.s,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),pr(),function(e,t,n,i,r,o){e.info((function(){if(e.g)if(o)for(var a="",s=o.split("&"),l=0;l<s.length;l++){var u=s[l].split("=");if(1<u.length){var c=u[0];u=u[1];var h=c.split("_");a=2<=h.length&&"type"==h[1]?a+(c+"=")+u+"&":a+(c+"=redacted&")}}else a=null;else a=o;return"XMLHTTP REQ ("+i+") [attempt "+r+"]: "+t+"\n"+n+"\n"+a}))}(e.j,e.u,e.A,e.m,e.X,e.s)}function Nr(e){return!!e.g&&("GET"==e.u&&2!=e.K&&e.l.Ba)}function Lr(e,t,n){let i,r=!0;for(;!e.I&&e.C<n.length;){if(i=Fr(e,n),i==Ar){4==t&&(e.o=4,mr(14),r=!1),ur(e.j,e.m,null,"[Incomplete Response]");break}if(i==Cr){e.o=4,mr(15),ur(e.j,e.m,n,"[Invalid Chunk]"),r=!1;break}ur(e.j,e.m,i,null),$r(e,i)}Nr(e)&&i!=Ar&&i!=Cr&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,mr(16),r=!1),e.i=e.i&&r,r?0<n.length&&!e.aa&&(e.aa=!0,(t=e.l).g==e&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),ua(t),t.L=!0,mr(11))):(ur(e.j,e.m,n,"[Invalid Chunked Response]"),zr(e),Hr(e))}function Fr(e,t){var n=e.C,i=t.indexOf("\n",n);return-1==i?Ar:(n=Number(t.substring(n,i)),isNaN(n)?Cr:(i+=1)+n>t.length?Ar:(t=t.substr(i,n),e.C=i+n,t))}function Br(e){e.Y=Date.now()+e.P,Vr(e,e.P)}function Vr(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=yr(Mn(e.eb,e),t)}function Ur(e){e.B&&(Tn.clearTimeout(e.B),e.B=null)}function Hr(e){0==e.l.G||e.I||da(e.l,e)}function zr(e){Ur(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,er(e.W),sr(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function $r(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||Po(n.i,e)))if(n.I=e.N,!e.J&&Po(n.i,e)&&3==n.G){try{var i=n.Ca.g.parse(t)}catch(e){i=null}if(Array.isArray(i)&&3==i.length){var r=i;if(0==r[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;ha(n),ea(n)}la(n),mr(18)}}else n.ta=r[1],0<n.ta-n.U&&37500>r[2]&&n.N&&0==n.A&&!n.v&&(n.v=yr(Mn(n.ab,n),6e3));if(1>=xo(n.i)&&n.ka){try{n.ka()}catch(e){}n.ka=void 0}}else pa(n,11)}else if((e.J||n.g==e)&&ha(n),!Hn(t))for(r=n.Ca.g.parse(t),t=0;t<r.length;t++){let u=r[t];if(n.U=u[0],u=u[1],2==n.G)if("c"==u[0]){n.J=u[1],n.la=u[2];const t=u[3];null!=t&&(n.ma=t,n.h.info("VER="+n.ma));const r=u[4];null!=r&&(n.za=r,n.h.info("SVER="+n.za));const c=u[5];null!=c&&"number"==typeof c&&0<c&&(i=1.5*c,n.K=i,n.h.info("backChannelRequestTimeoutMs_="+i)),i=n;const h=e.g;if(h){const e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var o=i.i;!o.g&&(Yn(e,"spdy")||Yn(e,"quic")||Yn(e,"h2"))&&(o.j=o.l,o.g=new Set,o.h&&(Oo(o,o.h),o.h=null))}if(i.D){const e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(i.sa=e,no(i.F,i.D,e))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-e.F,n.h.info("Handshake RTT: "+n.O+"ms"));var a=e;if((i=n).oa=ma(i,i.H?i.la:null,i.W),a.J){ko(i.i,a);var s=a,l=i.K;l&&s.setTimeout(l),s.B&&(Ur(s),Br(s)),i.g=a}else sa(i);0<n.l.length&&ia(n)}else"stop"!=u[0]&&"close"!=u[0]||pa(n,7);else 3==n.G&&("stop"==u[0]||"close"==u[0]?"stop"==u[0]?pa(n,7):Zo(n):"noop"!=u[0]&&n.j&&n.j.wa(u),n.A=0)}pr()}catch(e){}}function Yr(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(In(e)||"string"==typeof e)Bn(e,t,void 0);else{if(e.T&&"function"==typeof e.T)var n=e.T();else if(e.R&&"function"==typeof e.R)n=void 0;else if(In(e)||"string"==typeof e){n=[];for(var i=e.length,r=0;r<i;r++)n.push(r)}else for(r in n=[],i=0,e)n[i++]=r;i=function(e){if(e.R&&"function"==typeof e.R)return e.R();if("string"==typeof e)return e.split("");if(In(e)){for(var t=[],n=e.length,i=0;i<n;i++)t.push(e[i]);return t}for(i in t=[],n=0,e)t[n++]=e[i];return t}(e),r=i.length;for(var o=0;o<r;o++)t.call(void 0,i[o],n&&n[o],e)}}function Gr(e,t){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var i=0;i<n;i+=2)this.set(arguments[i],arguments[i+1])}else if(e)if(e instanceof Gr)for(n=e.T(),i=0;i<n.length;i++)this.set(n[i],e.get(n[i]));else for(i in e)this.set(i,e[i])}function qr(e){if(e.i!=e.g.length){for(var t=0,n=0;t<e.g.length;){var i=e.g[t];Wr(e.h,i)&&(e.g[n++]=i),t++}e.g.length=n}if(e.i!=e.g.length){var r={};for(n=t=0;t<e.g.length;)Wr(r,i=e.g[t])||(e.g[n++]=i,r[i]=1),t++;e.g.length=n}}function Wr(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(xn=Er.prototype).setTimeout=function(e){this.P=e},xn.gb=function(e){e=e.target;const t=this.L;t&&3==Wo(e)?t.l():this.Ia(e)},xn.Ia=function(e){try{if(e==this.g)e:{const c=Wo(this.g);var t=this.g.Da();this.g.ba();if(!(3>c)&&(3!=c||oi||this.g&&(this.h.h||this.g.ga()||Xo(this.g)))){this.I||4!=c||7==t||pr(),Ur(this);var n=this.g.ba();this.N=n;t:if(Nr(this)){var i=Xo(this.g);e="";var r=i.length,o=4==Wo(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){zr(this),Hr(this);var a="";break t}this.h.i=new Tn.TextDecoder}for(t=0;t<r;t++)this.h.h=!0,e+=this.h.i.decode(i[t],{stream:o&&t==r-1});i.splice(0,r),this.h.g+=e,this.C=0,a=this.h.g}else a=this.g.ga();if(this.i=200==n,function(e,t,n,i,r,o,a){e.info((function(){return"XMLHTTP RESP ("+i+") [ attempt "+r+"]: "+t+"\n"+n+"\n"+o+" "+a}))}(this.j,this.u,this.A,this.m,this.X,c,n),this.i){if(this.$&&!this.J){t:{if(this.g){var s,l=this.g;if((s=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Hn(s)){var u=s;break t}}u=null}if(!(n=u)){this.i=!1,this.o=3,mr(12),zr(this),Hr(this);break e}ur(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,$r(this,n)}this.U?(Lr(this,c,a),oi&&this.i&&3==c&&(ar(this.V,this.W,"tick",this.fb),this.W.start())):(ur(this.j,this.m,a,null),$r(this,a)),4==c&&zr(this),this.i&&!this.I&&(4==c?da(this.l,this):(this.i=!1,Br(this)))}else 400==n&&0<a.indexOf("Unknown SID")?(this.o=3,mr(12)):(this.o=0,mr(13)),zr(this),Hr(this)}}}catch(e){}},xn.fb=function(){if(this.g){var e=Wo(this.g),t=this.g.ga();this.C<t.length&&(Ur(this),Lr(this,e,t),this.i&&4!=e&&Br(this))}},xn.cancel=function(){this.I=!0,zr(this)},xn.eb=function(){this.B=null;const e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.K&&(pr(),mr(17)),zr(this),this.o=2,Hr(this)):Vr(this,this.Y-e)},(xn=Gr.prototype).R=function(){qr(this);for(var e=[],t=0;t<this.g.length;t++)e.push(this.h[this.g[t]]);return e},xn.T=function(){return qr(this),this.g.concat()},xn.get=function(e,t){return Wr(this.h,e)?this.h[e]:t},xn.set=function(e,t){Wr(this.h,e)||(this.i++,this.g.push(e)),this.h[e]=t},xn.forEach=function(e,t){for(var n=this.T(),i=0;i<n.length;i++){var r=n[i],o=this.get(r);e.call(t,o,r,this)}};var Xr=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Kr(e,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,e instanceof Kr){this.g=void 0!==t?t:e.g,Jr(this,e.j),this.s=e.s,Zr(this,e.i),eo(this,e.m),this.l=e.l,t=e.h;var n=new fo;n.i=t.i,t.g&&(n.g=new Gr(t.g),n.h=t.h),to(this,n),this.o=e.o}else e&&(n=String(e).match(Xr))?(this.g=!!t,Jr(this,n[1]||"",!0),this.s=ro(n[2]||""),Zr(this,n[3]||"",!0),eo(this,n[4]),this.l=ro(n[5]||"",!0),to(this,n[6]||"",!0),this.o=ro(n[7]||"")):(this.g=!!t,this.h=new fo(null,this.g))}function Qr(e){return new Kr(e)}function Jr(e,t,n){e.j=n?ro(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Zr(e,t,n){e.i=n?ro(t,!0):t}function eo(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function to(e,t,n){t instanceof fo?(e.h=t,function(e,t){t&&!e.j&&(po(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(go(this,t),bo(this,n,e))}),e)),e.j=t}(e.h,e.g)):(n||(t=oo(t,co)),e.h=new fo(t,e.g))}function no(e,t,n){e.h.set(t,n)}function io(e){return no(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function ro(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function oo(e,t,n){return"string"==typeof e?(e=encodeURI(e).replace(t,ao),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function ao(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Kr.prototype.toString=function(){var e=[],t=this.j;t&&e.push(oo(t,so,!0),":");var n=this.i;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(oo(t,so,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&e.push("/"),e.push(oo(n,"/"==n.charAt(0)?uo:lo,!0))),(n=this.h.toString())&&e.push("?",n),(n=this.o)&&e.push("#",oo(n,ho)),e.join("")};var so=/[#\/\?@]/g,lo=/[#\?:]/g,uo=/[#\?]/g,co=/[#\?@]/g,ho=/#/g;function fo(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function po(e){e.g||(e.g=new Gr,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var i=e[n].indexOf("="),r=null;if(0<=i){var o=e[n].substring(0,i);r=e[n].substring(i+1)}else o=e[n];t(o,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function go(e,t){po(e),t=yo(e,t),Wr(e.g.h,t)&&(e.i=null,e.h-=e.g.get(t).length,Wr((e=e.g).h,t)&&(delete e.h[t],e.i--,e.g.length>2*e.i&&qr(e)))}function mo(e,t){return po(e),t=yo(e,t),Wr(e.g.h,t)}function bo(e,t,n){go(e,t),0<n.length&&(e.i=null,e.g.set(yo(e,t),Un(n)),e.h+=n.length)}function yo(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(xn=fo.prototype).add=function(e,t){po(this),this.i=null,e=yo(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},xn.forEach=function(e,t){po(this),this.g.forEach((function(n,i){Bn(n,(function(n){e.call(t,n,i,this)}),this)}),this)},xn.T=function(){po(this);for(var e=this.g.R(),t=this.g.T(),n=[],i=0;i<t.length;i++)for(var r=e[i],o=0;o<r.length;o++)n.push(t[i]);return n},xn.R=function(e){po(this);var t=[];if("string"==typeof e)mo(this,e)&&(t=Vn(t,this.g.get(yo(this,e))));else{e=this.g.R();for(var n=0;n<e.length;n++)t=Vn(t,e[n])}return t},xn.set=function(e,t){return po(this),this.i=null,mo(this,e=yo(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},xn.get=function(e,t){return e&&0<(e=this.R(e)).length?String(e[0]):t},xn.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=this.g.T(),n=0;n<t.length;n++){var i=t[n],r=encodeURIComponent(String(i));i=this.R(i);for(var o=0;o<i.length;o++){var a=r;""!==i[o]&&(a+="="+encodeURIComponent(String(i[o]))),e.push(a)}}return this.i=e.join("&")};function vo(e){this.l=e||_o,Tn.PerformanceNavigationTiming?e=0<(e=Tn.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(Tn.g&&Tn.g.Ea&&Tn.g.Ea()&&Tn.g.Ea().Zb),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var _o=10;function wo(e){return!!e.h||!!e.g&&e.g.size>=e.j}function xo(e){return e.h?1:e.g?e.g.size:0}function Po(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Oo(e,t){e.g?e.g.add(t):e.h=t}function ko(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function To(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return Un(e.i)}function So(){}function Io(){this.g=new So}function Eo(e,t,n){const i=n||"";try{Yr(e,(function(e,n){let r=e;En(e)&&(r=zi(e)),t.push(i+n+"="+encodeURIComponent(r))}))}catch(e){throw t.push(i+"type="+encodeURIComponent("_badmap")),e}}function Do(e,t,n,i,r){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,r(i)}catch(e){}}function jo(e){this.l=e.$b||null,this.j=e.ib||!1}function Co(e,t){Vi.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=Ao,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}vo.prototype.cancel=function(){if(this.i=To(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}},So.prototype.stringify=function(e){return Tn.JSON.stringify(e,void 0)},So.prototype.parse=function(e){return Tn.JSON.parse(e,void 0)},Nn(jo,wr),jo.prototype.g=function(){return new Co(this.l,this.j)},jo.prototype.i=function(e){return function(){return e}}({}),Nn(Co,Vi);var Ao=0;function Mo(e){e.j.read().then(e.Sa.bind(e)).catch(e.ha.bind(e))}function Ro(e){e.readyState=4,e.l=null,e.j=null,e.A=null,No(e)}function No(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(xn=Co.prototype).open=function(e,t){if(this.readyState!=Ao)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,No(this)},xn.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||Tn).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},xn.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Ro(this)),this.readyState=Ao},xn.Va=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,No(this)),this.g&&(this.readyState=3,No(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==Tn.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Mo(this)}else e.text().then(this.Ua.bind(this),this.ha.bind(this))},xn.Sa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Ro(this):No(this),3==this.readyState&&Mo(this)}},xn.Ua=function(e){this.g&&(this.response=this.responseText=e,Ro(this))},xn.Ta=function(e){this.g&&(this.response=e,Ro(this))},xn.ha=function(){this.g&&Ro(this)},xn.setRequestHeader=function(e,t){this.v.append(e,t)},xn.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},xn.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Co.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var Lo=Tn.JSON.parse;function Fo(e){Vi.call(this),this.headers=new Gr,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Bo,this.K=this.L=!1}Nn(Fo,Vi);var Bo="",Vo=/^https?$/i,Uo=["POST","PUT"];function Ho(e){return"content-type"==e.toLowerCase()}function zo(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,$o(e),Go(e)}function $o(e){e.D||(e.D=!0,Ui(e,"complete"),Ui(e,"error"))}function Yo(e){if(e.h&&void 0!==kn&&(!e.C[1]||4!=Wo(e)||2!=e.ba()))if(e.v&&4==Wo(e))tr(e.Fa,0,e);else if(Ui(e,"readystatechange"),4==Wo(e)){e.h=!1;try{const s=e.ba();e:switch(s){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var i;if(i=0===s){var r=String(e.H).match(Xr)[1]||null;if(!r&&Tn.self&&Tn.self.location){var o=Tn.self.location.protocol;r=o.substr(0,o.length-1)}i=!Vo.test(r?r.toLowerCase():"")}n=i}if(n)Ui(e,"complete"),Ui(e,"success");else{e.m=6;try{var a=2<Wo(e)?e.g.statusText:""}catch(e){a=""}e.j=a+" ["+e.ba()+"]",$o(e)}}finally{Go(e)}}}function Go(e,t){if(e.g){qo(e);const n=e.g,i=e.C[0]?Sn:null;e.g=null,e.C=null,t||Ui(e,"ready");try{n.onreadystatechange=i}catch(e){}}}function qo(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(Tn.clearTimeout(e.A),e.A=null)}function Wo(e){return e.g?e.g.readyState:0}function Xo(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case Bo:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(e){return null}}function Ko(e,t,n){e:{for(i in n){var i=!1;break e}i=!0}i||(n=function(e){let t="";return Xn(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}(n),"string"==typeof e?null!=n&&encodeURIComponent(String(n)):no(e,t,n))}function Qo(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Jo(e){this.za=0,this.l=[],this.h=new lr,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Qo("failFast",!1,e),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Qo("baseRetryDelayMs",5e3,e),this.$a=Qo("retryDelaySeedMs",1e4,e),this.Ya=Qo("forwardChannelMaxRetries",2,e),this.ra=Qo("forwardChannelRequestTimeoutMs",2e4,e),this.qa=e&&e.xmlHttpFactory||void 0,this.Ba=e&&e.Yb||!1,this.K=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.J="",this.i=new vo(e&&e.concurrentRequestLimit),this.Ca=new Io,this.ja=e&&e.fastHandshake||!1,this.Ra=e&&e.Wb||!1,e&&e.Aa&&this.h.Aa(),e&&e.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&e&&e.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!e||!1!==e.Xb}function Zo(e){if(ta(e),3==e.G){var t=e.V++,n=Qr(e.F);no(n,"SID",e.J),no(n,"RID",t),no(n,"TYPE","terminate"),oa(e,n),(t=new Er(e,e.h,t,void 0)).K=2,t.v=io(Qr(n)),n=!1,Tn.navigator&&Tn.navigator.sendBeacon&&(n=Tn.navigator.sendBeacon(t.v.toString(),"")),!n&&Tn.Image&&((new Image).src=t.v,n=!0),n||(t.g=ba(t.l,null),t.g.ea(t.v)),t.F=Date.now(),Br(t)}ga(e)}function ea(e){e.g&&(ua(e),e.g.cancel(),e.g=null)}function ta(e){ea(e),e.u&&(Tn.clearTimeout(e.u),e.u=null),ha(e),e.i.cancel(),e.m&&("number"==typeof e.m&&Tn.clearTimeout(e.m),e.m=null)}function na(e,t){e.l.push(new class{constructor(e,t){this.h=e,this.g=t}}(e.Za++,t)),3==e.G&&ia(e)}function ia(e){wo(e.i)||e.m||(e.m=!0,Xi(e.Ha,e),e.C=0)}function ra(e,t){var n;n=t?t.m:e.V++;const i=Qr(e.F);no(i,"SID",e.J),no(i,"RID",n),no(i,"AID",e.U),oa(e,i),e.o&&e.s&&Ko(i,e.o,e.s),n=new Er(e,e.h,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.l=t.D.concat(e.l)),t=aa(e,n,1e3),n.setTimeout(Math.round(.5*e.ra)+Math.round(.5*e.ra*Math.random())),Oo(e.i,n),Mr(n,i,t)}function oa(e,t){e.j&&Yr({},(function(e,n){no(t,n,e)}))}function aa(e,t,n){n=Math.min(e.l.length,n);var i=e.j?Mn(e.j.Oa,e.j,e):null;e:{var r=e.l;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=r[0].h,e.push("ofs="+t)):t=0:e.push("ofs="+t);let o=!0;for(let a=0;a<n;a++){let n=r[a].h;const s=r[a].g;if(n-=t,0>n)t=Math.max(0,r[a].h-100),o=!1;else try{Eo(s,e,"req"+n+"_")}catch(e){i&&i(s)}}if(o){i=e.join("&");break e}}}return e=e.l.splice(0,n),t.D=e,i}function sa(e){e.g||e.u||(e.Y=1,Xi(e.Ga,e),e.A=0)}function la(e){return!(e.g||e.u||3<=e.A)&&(e.Y++,e.u=yr(Mn(e.Ga,e),fa(e,e.A)),e.A++,!0)}function ua(e){null!=e.B&&(Tn.clearTimeout(e.B),e.B=null)}function ca(e){e.g=new Er(e,e.h,"rpc",e.Y),null===e.o&&(e.g.H=e.s),e.g.O=0;var t=Qr(e.oa);no(t,"RID","rpc"),no(t,"SID",e.J),no(t,"CI",e.N?"0":"1"),no(t,"AID",e.U),oa(e,t),no(t,"TYPE","xmlhttp"),e.o&&e.s&&Ko(t,e.o,e.s),e.K&&e.g.setTimeout(e.K);var n=e.g;e=e.la,n.K=1,n.v=io(Qr(t)),n.s=null,n.U=!0,Rr(n,e)}function ha(e){null!=e.v&&(Tn.clearTimeout(e.v),e.v=null)}function da(e,t){var n=null;if(e.g==t){ha(e),ua(e),e.g=null;var i=2}else{if(!Po(e.i,t))return;n=t.D,ko(e.i,t),i=1}if(e.I=t.N,0!=e.G)if(t.i)if(1==i){n=t.s?t.s.length:0,t=Date.now()-t.F;var r=e.C;Ui(i=dr(),new br(i,n)),ia(e)}else sa(e);else if(3==(r=t.o)||0==r&&0<e.I||!(1==i&&function(e,t){return!(xo(e.i)>=e.i.j-(e.m?1:0)||(e.m?(e.l=t.D.concat(e.l),0):1==e.G||2==e.G||e.C>=(e.Xa?0:e.Ya)||(e.m=yr(Mn(e.Ha,e,t),fa(e,e.C)),e.C++,0)))}(e,t)||2==i&&la(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),r){case 1:pa(e,5);break;case 4:pa(e,10);break;case 3:pa(e,6);break;default:pa(e,2)}}function fa(e,t){let n=e.Pa+Math.floor(Math.random()*e.$a);return e.j||(n*=2),n*t}function pa(e,t){if(e.h.info("Error code "+t),2==t){var n=null;e.j&&(n=null);var i=Mn(e.jb,e);n||(n=new Kr("//www.google.com/images/cleardot.gif"),Tn.location&&"http"==Tn.location.protocol||Jr(n,"https"),io(n)),function(e,t){const n=new lr;if(Tn.Image){const i=new Image;i.onload=Rn(Do,n,i,"TestLoadImage: loaded",!0,t),i.onerror=Rn(Do,n,i,"TestLoadImage: error",!1,t),i.onabort=Rn(Do,n,i,"TestLoadImage: abort",!1,t),i.ontimeout=Rn(Do,n,i,"TestLoadImage: timeout",!1,t),Tn.setTimeout((function(){i.ontimeout&&i.ontimeout()}),1e4),i.src=e}else t(!1)}(n.toString(),i)}else mr(2);e.G=0,e.j&&e.j.va(t),ga(e),ta(e)}function ga(e){e.G=0,e.I=-1,e.j&&(0==To(e.i).length&&0==e.l.length||(e.i.i.length=0,Un(e.l),e.l.length=0),e.j.ua())}function ma(e,t,n){let i=function(e){return e instanceof Kr?Qr(e):new Kr(e,void 0)}(n);if(""!=i.i)t&&Zr(i,t+"."+i.i),eo(i,i.m);else{const e=Tn.location;i=function(e,t,n,i){var r=new Kr(null,void 0);return e&&Jr(r,e),t&&Zr(r,t),n&&eo(r,n),i&&(r.l=i),r}(e.protocol,t?t+"."+e.hostname:e.hostname,+e.port,n)}return e.aa&&Xn(e.aa,(function(e,t){no(i,t,e)})),t=e.D,n=e.sa,t&&n&&no(i,t,n),no(i,"VER",e.ma),oa(e,i),i}function ba(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ba&&!e.qa?new Fo(new jo({ib:!0})):new Fo(e.qa)).L=e.H,t}function ya(){}function va(){if(ii&&!(10<=Number(mi)))throw Error("Environmental error: no available transport.")}function _a(e,t){Vi.call(this),this.g=new Jo(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.P=e,(e=t&&t.httpHeadersOverwriteParam)&&!Hn(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Hn(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new Pa(this)}function wa(e){Tr.call(this);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function xa(){Sr.call(this),this.status=1}function Pa(e){this.g=e}(xn=Fo.prototype).ea=function(e,t,n,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Or.g(),this.C=this.u?xr(this.u):xr(Or),this.g.onreadystatechange=Mn(this.Fa,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(e){return void zo(this,e)}e=n||"";const r=new Gr(this.headers);i&&Yr(i,(function(e,t){r.set(t,e)})),i=function(e){e:{var t=Ho;const n=e.length,i="string"==typeof e?e.split(""):e;for(let r=0;r<n;r++)if(r in i&&t.call(void 0,i[r],r,e)){t=r;break e}t=-1}return 0>t?null:"string"==typeof e?e.charAt(t):e[t]}(r.T()),n=Tn.FormData&&e instanceof Tn.FormData,!(0<=Fn(Uo,t))||i||n||r.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),r.forEach((function(e,t){this.g.setRequestHeader(t,e)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{qo(this),0<this.B&&((this.K=function(e){return ii&&pi()&&"number"==typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Mn(this.pa,this)):this.A=tr(this.pa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(e){zo(this,e)}},xn.pa=function(){void 0!==kn&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ui(this,"timeout"),this.abort(8))},xn.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,Ui(this,"complete"),Ui(this,"abort"),Go(this))},xn.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Go(this,!0)),Fo.Z.M.call(this)},xn.Fa=function(){this.s||(this.F||this.v||this.l?Yo(this):this.cb())},xn.cb=function(){Yo(this)},xn.ba=function(){try{return 2<Wo(this)?this.g.status:-1}catch(e){return-1}},xn.ga=function(){try{return this.g?this.g.responseText:""}catch(e){return""}},xn.Qa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),Lo(t)}},xn.Da=function(){return this.m},xn.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(xn=Jo.prototype).ma=8,xn.G=1,xn.hb=function(e){try{this.h.info("Origin Trials invoked: "+e)}catch(e){}},xn.Ha=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;const r=new Er(this,this.h,e,void 0);let o=this.s;if(this.P&&(o?(o=Kn(o),Jn(o,this.P)):o=this.P),null===this.o&&(r.H=o),this.ja)e:{for(var t=0,n=0;n<this.l.length;n++){var i=this.l[n];if(void 0===(i="__data__"in i.g&&"string"==typeof(i=i.g.__data__)?i.length:void 0))break;if(4096<(t+=i)){t=n;break e}if(4096===t||n===this.l.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=aa(this,r,t),no(n=Qr(this.F),"RID",e),no(n,"CVER",22),this.D&&no(n,"X-HTTP-Session-Id",this.D),oa(this,n),this.o&&o&&Ko(n,this.o,o),Oo(this.i,r),this.Ra&&no(n,"TYPE","init"),this.ja?(no(n,"$req",t),no(n,"SID","null"),r.$=!0,Mr(r,n,null)):Mr(r,n,t),this.G=2}}else 3==this.G&&(e?ra(this,e):0==this.l.length||wo(this.i)||ra(this))},xn.Ga=function(){if(this.u=null,ca(this),this.$&&!(this.L||null==this.g||0>=this.O)){var e=2*this.O;this.h.info("BP detection timer enabled: "+e),this.B=yr(Mn(this.bb,this),e)}},xn.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,mr(10),ea(this),ca(this))},xn.ab=function(){null!=this.v&&(this.v=null,ea(this),la(this),mr(19))},xn.jb=function(e){e?(this.h.info("Successfully pinged google.com"),mr(2)):(this.h.info("Failed to ping google.com"),mr(1))},(xn=ya.prototype).xa=function(){},xn.wa=function(){},xn.va=function(){},xn.ua=function(){},xn.Oa=function(){},va.prototype.g=function(e,t){return new _a(e,t)},Nn(_a,Vi),_a.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;e.Wa&&(e.h.info("Origin Trials enabled."),Xi(Mn(e.hb,e,t))),mr(0),e.W=t,e.aa=n||{},e.N=e.X,e.F=ma(e,null,e.W),ia(e)},_a.prototype.close=function(){Zo(this.g)},_a.prototype.u=function(e){if("string"==typeof e){var t={};t.__data__=e,na(this.g,t)}else this.v?((t={}).__data__=zi(e),na(this.g,t)):na(this.g,e)},_a.prototype.M=function(){this.g.j=null,delete this.j,Zo(this.g),delete this.g,_a.Z.M.call(this)},Nn(wa,Tr),Nn(xa,Sr),Nn(Pa,ya),Pa.prototype.xa=function(){Ui(this.g,"a")},Pa.prototype.wa=function(e){Ui(this.g,new wa(e))},Pa.prototype.va=function(e){Ui(this.g,new xa)},Pa.prototype.ua=function(){Ui(this.g,"b")},va.prototype.createWebChannel=va.prototype.g,_a.prototype.send=_a.prototype.u,_a.prototype.open=_a.prototype.m,_a.prototype.close=_a.prototype.close,vr.NO_ERROR=0,vr.TIMEOUT=8,vr.HTTP_ERROR=6,_r.COMPLETE="complete",Pr.EventType=kr,kr.OPEN="a",kr.CLOSE="b",kr.ERROR="c",kr.MESSAGE="d",Vi.prototype.listen=Vi.prototype.N,Fo.prototype.listenOnce=Fo.prototype.O,Fo.prototype.getLastError=Fo.prototype.La,Fo.prototype.getLastErrorCode=Fo.prototype.Da,Fo.prototype.getStatus=Fo.prototype.ba,Fo.prototype.getResponseJson=Fo.prototype.Qa,Fo.prototype.getResponseText=Fo.prototype.ga,Fo.prototype.send=Fo.prototype.ea;var Oa=vr,ka=_r,Ta=cr,Sa=10,Ia=11,Ea=jo,Da=Pr,ja=Fo;const Ca="@firebase/firestore";
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class Aa{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Aa.UNAUTHENTICATED=new Aa(null),Aa.GOOGLE_CREDENTIALS=new Aa("google-credentials-uid"),Aa.FIRST_PARTY=new Aa("first-party-uid"),Aa.MOCK_USER=new Aa("mock-user");
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
let Ma="9.9.0";
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */const Ra=new It("@firebase/firestore");function Na(){return Ra.logLevel}function La(e,...t){if(Ra.logLevel<=Pt.DEBUG){const n=t.map(Va);Ra.debug(`Firestore (${Ma}): ${e}`,...n)}}function Fa(e,...t){if(Ra.logLevel<=Pt.ERROR){const n=t.map(Va);Ra.error(`Firestore (${Ma}): ${e}`,...n)}}function Ba(e,...t){if(Ra.logLevel<=Pt.WARN){const n=t.map(Va);Ra.warn(`Firestore (${Ma}): ${e}`,...n)}}function Va(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var t}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Ua(e="Unexpected state"){const t=`FIRESTORE (${Ma}) INTERNAL ASSERTION FAILED: `+e;throw Fa(t),new Error(t)}function Ha(e,t){e||Ua()}function za(e,t){return e}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */const $a={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ya extends ot{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class Ga{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class qa{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Wa{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Aa.UNAUTHENTICATED)))}shutdown(){}}class Xa{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class Ka{constructor(e){this.t=e,this.currentUser=Aa.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let n=this.i;const i=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let r=new Ga;this.o=()=>{this.i++,this.currentUser=this.u(),r.resolve(),r=new Ga,e.enqueueRetryable((()=>i(this.currentUser)))};const o=()=>{const t=r;e.enqueueRetryable((async()=>{await t.promise,await i(this.currentUser)}))},a=e=>{La("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit((e=>a(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?a(e):(La("FirebaseAuthCredentialsProvider","Auth not yet detected"),r.resolve(),r=new Ga)}}),0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(La("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(Ha("string"==typeof t.accessToken),new qa(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Ha(null===e||"string"==typeof e),new Aa(e)}}class Qa{constructor(e,t,n){this.type="FirstParty",this.user=Aa.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const i=e.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),n&&this.headers.set("X-Goog-Iam-Authorization-Token",n)}}class Ja{constructor(e,t,n){this.h=e,this.l=t,this.m=n}getToken(){return Promise.resolve(new Qa(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable((()=>t(Aa.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Za{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class es{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const n=e=>{null!=e.error&&La("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);const n=e.token!==this.p;return this.p=e.token,La("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};const i=e=>{La("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.appCheck.addTokenListener(this.o)};this.g.onInit((e=>i(e))),setTimeout((()=>{if(!this.appCheck){const e=this.g.getImmediate({optional:!0});e?i(e):La("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(Ha("string"==typeof e.token),this.p=e.token,new Za(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function ts(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let t=0;t<e;t++)n[t]=Math.floor(256*Math.random());return n}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class ns{static I(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let n="";for(;n.length<20;){const i=ts(40);for(let r=0;r<i.length;++r)n.length<20&&i[r]<t&&(n+=e.charAt(i[r]%e.length))}return n}}function is(e,t){return e<t?-1:e>t?1:0}function rs(e,t,n){return e.length===t.length&&e.every(((e,i)=>n(e,t[i])))}function os(e){return e+"\0"}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class as{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ya($a.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ya($a.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Ya($a.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ya($a.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return as.fromMillis(Date.now())}static fromDate(e){return as.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new as(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?is(this.nanoseconds,e.nanoseconds):is(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class ss{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ss(e)}static min(){return new ss(new as(0,0))}static max(){return new ss(new as(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class ls{constructor(e,t,n){void 0===t?t=0:t>e.length&&Ua(),void 0===n?n=e.length-t:n>e.length-t&&Ua(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===ls.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ls?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let i=0;i<n;i++){const n=e.get(i),r=t.get(i);if(n<r)return-1;if(n>r)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class us extends ls{construct(e,t,n){return new us(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const n of e){if(n.indexOf("//")>=0)throw new Ya($a.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter((e=>e.length>0)))}return new us(t)}static emptyPath(){return new us([])}}const cs=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class hs extends ls{construct(e,t,n){return new hs(e,t,n)}static isValidIdentifier(e){return cs.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),hs.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new hs(["__name__"])}static fromServerFormat(e){const t=[];let n="",i=0;const r=()=>{if(0===n.length)throw new Ya($a.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let o=!1;for(;i<e.length;){const t=e[i];if("\\"===t){if(i+1===e.length)throw new Ya($a.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[i+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new Ya($a.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,i+=2}else"`"===t?(o=!o,i++):"."!==t||o?(n+=t,i++):(r(),i++)}if(r(),o)throw new Ya($a.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new hs(t)}static emptyPath(){return new hs([])}}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class ds{constructor(e){this.path=e}static fromPath(e){return new ds(us.fromString(e))}static fromName(e){return new ds(us.fromString(e).popFirst(5))}static empty(){return new ds(us.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===us.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return us.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ds(new us(e.slice()))}}
/**
     * @license
     * Copyright 2021 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class fs{constructor(e,t,n,i){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=i}}function ps(e){return e.fields.find((e=>2===e.kind))}function gs(e){return e.fields.filter((e=>2!==e.kind))}fs.UNKNOWN_ID=-1;class ms{constructor(e,t){this.fieldPath=e,this.kind=t}}class bs{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new bs(0,_s.min())}}function ys(e,t){const n=e.toTimestamp().seconds,i=e.toTimestamp().nanoseconds+1,r=ss.fromTimestamp(1e9===i?new as(n+1,0):new as(n,i));return new _s(r,ds.empty(),t)}function vs(e){return new _s(e.readTime,e.key,-1)}class _s{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new _s(ss.min(),ds.empty(),-1)}static max(){return new _s(ss.max(),ds.empty(),-1)}}function ws(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=ds.comparator(e.documentKey,t.documentKey),0!==n?n:is(e.largestBatchId,t.largestBatchId))}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */const xs="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Ps{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */async function Os(e){if(e.code!==$a.FAILED_PRECONDITION||e.message!==xs)throw e;La("LocalStore","Unexpectedly lost primary lease")}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class ks{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ua(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ks(((n,i)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,i)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,i)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof ks?t:ks.resolve(t)}catch(e){return ks.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):ks.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):ks.reject(t)}static resolve(e){return new ks(((t,n)=>{t(e)}))}static reject(e){return new ks(((t,n)=>{n(e)}))}static waitFor(e){return new ks(((t,n)=>{let i=0,r=0,o=!1;e.forEach((e=>{++i,e.next((()=>{++r,o&&r===i&&t()}),(e=>n(e)))})),o=!0,r===i&&t()}))}static or(e){let t=ks.resolve(!1);for(const n of e)t=t.next((e=>e?ks.resolve(e):n()));return t}static forEach(e,t){const n=[];return e.forEach(((e,i)=>{n.push(t.call(this,e,i))})),this.waitFor(n)}static mapArray(e,t){return new ks(((n,i)=>{const r=e.length,o=new Array(r);let a=0;for(let s=0;s<r;s++){const l=s;t(e[l]).next((e=>{o[l]=e,++a,a===r&&n(o)}),(e=>i(e)))}}))}static doWhile(e,t){return new ks(((n,i)=>{const r=()=>{!0===e()?t().next((()=>{r()}),i):n()};r()}))}}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class Ts{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.T=new Ga,this.transaction.oncomplete=()=>{this.T.resolve()},this.transaction.onabort=()=>{t.error?this.T.reject(new Es(e,t.error)):this.T.resolve()},this.transaction.onerror=t=>{const n=Ms(t.target.error);this.T.reject(new Es(e,n))}}static open(e,t,n,i){try{return new Ts(t,e.transaction(i,n))}catch(e){throw new Es(t,e)}}get A(){return this.T.promise}abort(e){e&&this.T.reject(e),this.aborted||(La("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}R(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new js(t)}}class Ss{constructor(e,t,n){this.name=e,this.version=t,this.P=n,12.2===Ss.v(Je())&&Fa("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return La("SimpleDb","Removing database:",e),Cs(window.indexedDB.deleteDatabase(e)).toPromise()}static V(){if(!rt())return!1;if(Ss.S())return!0;const e=Je(),t=Ss.v(e),n=0<t&&t<10,i=Ss.D(e),r=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||r)}static S(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.C)}static N(e,t){return e.store(t)}static v(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}static D(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}async k(e){return this.db||(La("SimpleDb","Opening database:",this.name),this.db=await new Promise(((t,n)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=e=>{const n=e.target.result;t(n)},i.onblocked=()=>{n(new Es(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=t=>{const i=t.target.error;"VersionError"===i.name?n(new Ya($a.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===i.name?n(new Ya($a.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+i)):n(new Es(e,i))},i.onupgradeneeded=e=>{La("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',e.oldVersion);const t=e.target.result;this.P.O(t,i.transaction,e.oldVersion,this.version).next((()=>{La("SimpleDb","Database upgrade to version "+this.version+" complete")}))}}))),this.M&&(this.db.onversionchange=e=>this.M(e)),this.db}F(e){this.M=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,n,i){const r="readonly"===t;let o=0;for(;;){++o;try{this.db=await this.k(e);const t=Ts.open(this.db,e,r?"readonly":"readwrite",n),o=i(t).next((e=>(t.R(),e))).catch((e=>(t.abort(e),ks.reject(e)))).toPromise();return o.catch((()=>{})),await t.A,o}catch(e){const t=e,n="FirebaseError"!==t.name&&o<3;if(La("SimpleDb","Transaction failed with error:",t.message,"Retrying:",n),this.close(),!n)return Promise.reject(t)}}}close(){this.db&&this.db.close(),this.db=void 0}}class Is{constructor(e){this.$=e,this.B=!1,this.L=null}get isDone(){return this.B}get U(){return this.L}set cursor(e){this.$=e}done(){this.B=!0}q(e){this.L=e}delete(){return Cs(this.$.delete())}}class Es extends Ya{constructor(e,t){super($a.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Ds(e){return"IndexedDbTransactionError"===e.name}class js{constructor(e){this.store=e}put(e,t){let n;return void 0!==t?(La("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(La("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Cs(n)}add(e){return La("SimpleDb","ADD",this.store.name,e,e),Cs(this.store.add(e))}get(e){return Cs(this.store.get(e)).next((t=>(void 0===t&&(t=null),La("SimpleDb","GET",this.store.name,e,t),t)))}delete(e){return La("SimpleDb","DELETE",this.store.name,e),Cs(this.store.delete(e))}count(){return La("SimpleDb","COUNT",this.store.name),Cs(this.store.count())}K(e,t){const n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){const e=this.cursor(n),t=[];return this.G(e,((e,n)=>{t.push(n)})).next((()=>t))}{const e=this.store.getAll(n.range);return new ks(((t,n)=>{e.onerror=e=>{n(e.target.error)},e.onsuccess=e=>{t(e.target.result)}}))}}j(e,t){const n=this.store.getAll(e,null===t?void 0:t);return new ks(((e,t)=>{n.onerror=e=>{t(e.target.error)},n.onsuccess=t=>{e(t.target.result)}}))}W(e,t){La("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,t);n.H=!1;const i=this.cursor(n);return this.G(i,((e,t,n)=>n.delete()))}J(e,t){let n;t?n=e:(n={},t=e);const i=this.cursor(n);return this.G(i,t)}Y(e){const t=this.cursor({});return new ks(((n,i)=>{t.onerror=e=>{const t=Ms(e.target.error);i(t)},t.onsuccess=t=>{const i=t.target.result;i?e(i.primaryKey,i.value).next((e=>{e?i.continue():n()})):n()}}))}G(e,t){const n=[];return new ks(((i,r)=>{e.onerror=e=>{r(e.target.error)},e.onsuccess=e=>{const r=e.target.result;if(!r)return void i();const o=new Is(r),a=t(r.primaryKey,r.value,o);if(a instanceof ks){const e=a.catch((e=>(o.done(),ks.reject(e))));n.push(e)}o.isDone?i():null===o.U?r.continue():r.continue(o.U)}})).next((()=>ks.waitFor(n)))}options(e,t){let n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const n=this.store.index(e.index);return e.H?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Cs(e){return new ks(((t,n)=>{e.onsuccess=e=>{const n=e.target.result;t(n)},e.onerror=e=>{const t=Ms(e.target.error);n(t)}}))}let As=!1;function Ms(e){const t=Ss.v(Je());if(t>=12.2&&t<13){const t="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(t)>=0){const e=new Ya("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return As||(As=!0,setTimeout((()=>{throw e}),0)),e}}return e}class Rs{constructor(e,t){this.asyncQueue=e,this.X=t,this.task=null}start(){}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}Z(e){La("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{La("IndexBackiller",`Documents written: ${await this.X.tt()}`)}catch(e){Ds(e)?La("IndexBackiller","Ignoring IndexedDB error during index backfill: ",e):await Os(e)}await this.Z(1)}))}}class Ns{constructor(e,t){this.localStore=e,this.persistence=t}async tt(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.et(t,e)))}et(e,t){const n=new Set;let i=t,r=!0;return ks.doWhile((()=>!0===r&&i>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((t=>{if(null!==t&&!n.has(t))return La("IndexBackiller",`Processing collection: ${t}`),this.nt(e,t,i).next((e=>{i-=e,n.add(t)}));r=!1})))).next((()=>t-i))}nt(e,t,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((i=>this.localStore.localDocuments.getNextDocuments(e,t,i,n).next((n=>{const r=n.changes;return this.localStore.indexManager.updateIndexEntries(e,r).next((()=>this.st(i,n))).next((n=>(La("IndexBackiller",`Updating offset: ${n}`),this.localStore.indexManager.updateCollectionGroup(e,t,n)))).next((()=>r.size))}))))}st(e,t){let n=e;return t.changes.forEach(((e,t)=>{const i=vs(t);ws(i,n)>0&&(n=i)})),new _s(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}
/**
     * @license
     * Copyright 2018 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class Ls{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.it(e),this.rt=e=>t.writeSequenceNumber(e))}it(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.rt&&this.rt(e),e}}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Fs(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Bs(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Vs(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */Ls.ot=-1;class Us{constructor(e,t){this.comparator=e,this.root=t||zs.EMPTY}insert(e,t){return new Us(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,zs.BLACK,null,null))}remove(e){return new Us(this.comparator,this.root.remove(e,this.comparator).copy(null,null,zs.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(0===i)return t+n.left.size;i<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push(`${t}:${n}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Hs(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Hs(this.root,e,this.comparator,!1)}getReverseIterator(){return new Hs(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Hs(this.root,e,this.comparator,!0)}}class Hs{constructor(e,t,n,i){this.isReverse=i,this.nodeStack=[];let r=1;for(;!e.isEmpty();)if(r=t?n(e.key,t):1,t&&i&&(r*=-1),r<0)e=this.isReverse?e.left:e.right;else{if(0===r){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class zs{constructor(e,t,n,i,r){this.key=e,this.value=t,this.color=null!=n?n:zs.RED,this.left=null!=i?i:zs.EMPTY,this.right=null!=r?r:zs.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,i,r){return new zs(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=i?i:this.left,null!=r?r:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let i=this;const r=n(e,i.key);return i=r<0?i.copy(null,null,null,i.left.insert(e,t,n),null):0===r?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,n)),i.fixUp()}removeMin(){if(this.left.isEmpty())return zs.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return zs.EMPTY;n=i.right.min(),i=i.copy(n.key,n.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,zs.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,zs.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ua();if(this.right.isRed())throw Ua();const e=this.left.check();if(e!==this.right.check())throw Ua();return e+(this.isRed()?0:1)}}zs.EMPTY=null,zs.RED=!0,zs.BLACK=!1,zs.EMPTY=new class{constructor(){this.size=0}get key(){throw Ua()}get value(){throw Ua()}get color(){throw Ua()}get left(){throw Ua()}get right(){throw Ua()}copy(e,t,n,i,r){return this}insert(e,t,n){return new zs(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
class $s{constructor(e){this.comparator=e,this.data=new Us(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const i=n.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Ys(this.data.getIterator())}getIteratorFrom(e){return new Ys(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof $s))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,i=n.getNext().key;if(0!==this.comparator(e,i))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new $s(this.comparator);return t.data=e,t}}class Ys{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Gs(e){return e.hasNext()?e.getNext():void 0}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class qs{constructor(e){this.fields=e,e.sort(hs.comparator)}static empty(){return new qs([])}unionWith(e){let t=new $s(hs.comparator);for(const e of this.fields)t=t.add(e);for(const n of e)t=t.add(n);return new qs(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return rs(this.fields,e.fields,((e,t)=>e.isEqual(t)))}}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
class Ws{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Ws(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new Ws(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return is(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ws.EMPTY_BYTE_STRING=new Ws("");const Xs=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ks(e){if(Ha(!!e),"string"==typeof e){let t=0;const n=Xs.exec(e);if(Ha(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Qs(e.seconds),nanos:Qs(e.nanos)}}function Qs(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Js(e){return"string"==typeof e?Ws.fromBase64String(e):Ws.fromUint8Array(e)}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Zs(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function el(e){const t=e.mapValue.fields.__previous_value__;return Zs(t)?el(t):t}function tl(e){const t=Ks(e.mapValue.fields.__local_write_time__.timestampValue);return new as(t.seconds,t.nanos)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class nl{constructor(e,t,n,i,r,o,a,s){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=i,this.ssl=r,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.useFetchStreams=s}}class il{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new il("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof il&&e.projectId===this.projectId&&e.database===this.database}}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function rl(e){return null==e}function ol(e){return 0===e&&1/e==-1/0}function al(e){return"number"==typeof e&&Number.isInteger(e)&&!ol(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */const sl={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},ll={nullValue:"NULL_VALUE"};function ul(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Zs(e)?4:Pl(e)?9007199254740991:10:Ua()}function cl(e,t){if(e===t)return!0;const n=ul(e);if(n!==ul(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return tl(e).isEqual(tl(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=Ks(e.timestampValue),i=Ks(t.timestampValue);return n.seconds===i.seconds&&n.nanos===i.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Js(e.bytesValue).isEqual(Js(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Qs(e.geoPointValue.latitude)===Qs(t.geoPointValue.latitude)&&Qs(e.geoPointValue.longitude)===Qs(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Qs(e.integerValue)===Qs(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=Qs(e.doubleValue),i=Qs(t.doubleValue);return n===i?ol(n)===ol(i):isNaN(n)&&isNaN(i)}return!1}(e,t);case 9:return rs(e.arrayValue.values||[],t.arrayValue.values||[],cl);case 10:return function(e,t){const n=e.mapValue.fields||{},i=t.mapValue.fields||{};if(Fs(n)!==Fs(i))return!1;for(const e in n)if(n.hasOwnProperty(e)&&(void 0===i[e]||!cl(n[e],i[e])))return!1;return!0}(e,t);default:return Ua()}}function hl(e,t){return void 0!==(e.values||[]).find((e=>cl(e,t)))}function dl(e,t){if(e===t)return 0;const n=ul(e),i=ul(t);if(n!==i)return is(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return is(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=Qs(e.integerValue||e.doubleValue),i=Qs(t.integerValue||t.doubleValue);return n<i?-1:n>i?1:n===i?0:isNaN(n)?isNaN(i)?0:-1:1}(e,t);case 3:return fl(e.timestampValue,t.timestampValue);case 4:return fl(tl(e),tl(t));case 5:return is(e.stringValue,t.stringValue);case 6:return function(e,t){const n=Js(e),i=Js(t);return n.compareTo(i)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),i=t.split("/");for(let e=0;e<n.length&&e<i.length;e++){const t=is(n[e],i[e]);if(0!==t)return t}return is(n.length,i.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=is(Qs(e.latitude),Qs(t.latitude));return 0!==n?n:is(Qs(e.longitude),Qs(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){const n=e.values||[],i=t.values||[];for(let e=0;e<n.length&&e<i.length;++e){const t=dl(n[e],i[e]);if(t)return t}return is(n.length,i.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===sl.mapValue&&t===sl.mapValue)return 0;if(e===sl.mapValue)return 1;if(t===sl.mapValue)return-1;const n=e.fields||{},i=Object.keys(n),r=t.fields||{},o=Object.keys(r);i.sort(),o.sort();for(let e=0;e<i.length&&e<o.length;++e){const t=is(i[e],o[e]);if(0!==t)return t;const a=dl(n[i[e]],r[o[e]]);if(0!==a)return a}return is(i.length,o.length)}(e.mapValue,t.mapValue);default:throw Ua()}}function fl(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return is(e,t);const n=Ks(e),i=Ks(t),r=is(n.seconds,i.seconds);return 0!==r?r:is(n.nanos,i.nanos)}function pl(e){return gl(e)}function gl(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=Ks(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?Js(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,ds.fromName(n).toString()):"geoPointValue"in e?`geo(${(t=e.geoPointValue).latitude},${t.longitude})`:"arrayValue"in e?function(e){let t="[",n=!0;for(const i of e.values||[])n?n=!1:t+=",",t+=gl(i);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",i=!0;for(const r of t)i?i=!1:n+=",",n+=`${r}:${gl(e.fields[r])}`;return n+"}"}(e.mapValue):Ua();var t,n}function ml(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function bl(e){return!!e&&"integerValue"in e}function yl(e){return!!e&&"arrayValue"in e}function vl(e){return!!e&&"nullValue"in e}function _l(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function wl(e){return!!e&&"mapValue"in e}function xl(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Bs(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=xl(n))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=xl(e.arrayValue.values[n]);return t}return Object.assign({},e)}function Pl(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function Ol(e){return"nullValue"in e?ll:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?ml(il.empty(),ds.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:Ua()}function kl(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?ml(il.empty(),ds.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?sl:Ua()}function Tl(e,t){const n=dl(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function Sl(e,t){const n=dl(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class Il{constructor(e){this.value=e}static empty(){return new Il({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!wl(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=xl(t)}setAll(e){let t=hs.emptyPath(),n={},i=[];e.forEach(((e,r)=>{if(!t.isImmediateParentOf(r)){const e=this.getFieldsMap(t);this.applyChanges(e,n,i),n={},i=[],t=r.popLast()}e?n[r.lastSegment()]=xl(e):i.push(r.lastSegment())}));const r=this.getFieldsMap(t);this.applyChanges(r,n,i)}delete(e){const t=this.field(e.popLast());wl(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return cl(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let i=t.mapValue.fields[e.get(n)];wl(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,n){Bs(t,((t,n)=>e[t]=n));for(const t of n)delete e[t]}clone(){return new Il(xl(this.value))}}function El(e){const t=[];return Bs(e.fields,((e,n)=>{const i=new hs([e]);if(wl(n)){const e=El(n.mapValue).fields;if(0===e.length)t.push(i);else for(const n of e)t.push(i.child(n))}else t.push(i)})),new qs(t)
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */}class Dl{constructor(e,t,n,i,r,o){this.key=e,this.documentType=t,this.version=n,this.readTime=i,this.data=r,this.documentState=o}static newInvalidDocument(e){return new Dl(e,0,ss.min(),ss.min(),Il.empty(),0)}static newFoundDocument(e,t,n){return new Dl(e,1,t,ss.min(),n,0)}static newNoDocument(e,t){return new Dl(e,2,t,ss.min(),Il.empty(),0)}static newUnknownDocument(e,t){return new Dl(e,3,t,ss.min(),Il.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Il.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Il.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ss.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Dl&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Dl(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class jl{constructor(e,t=null,n=[],i=[],r=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=i,this.limit=r,this.startAt=o,this.endAt=a,this.ut=null}}function Cl(e,t=null,n=[],i=[],r=null,o=null,a=null){return new jl(e,t,n,i,r,o,a)}function Al(e){const t=za(e);if(null===t.ut){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>{return(t=e).field.canonicalString()+t.op.toString()+pl(t.value);var t})).join(","),e+="|ob:",e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(","),rl(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((e=>pl(e))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((e=>pl(e))).join(",")),t.ut=e}return t.ut}function Ml(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!Kl(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let r=0;r<e.filters.length;r++)if(n=e.filters[r],i=t.filters[r],n.op!==i.op||!n.field.isEqual(i.field)||!cl(n.value,i.value))return!1;var n,i;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Jl(e.startAt,t.startAt)&&Jl(e.endAt,t.endAt)}function Rl(e){return ds.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function Nl(e,t){return e.filters.filter((e=>e instanceof Bl&&e.field.isEqual(t)))}function Ll(e,t,n){let i=ll,r=!0;for(const n of Nl(e,t)){let e=ll,t=!0;switch(n.op){case"<":case"<=":e=Ol(n.value);break;case"==":case"in":case">=":e=n.value;break;case">":e=n.value,t=!1;break;case"!=":case"not-in":e=ll}Tl({value:i,inclusive:r},{value:e,inclusive:t})<0&&(i=e,r=t)}if(null!==n)for(let o=0;o<e.orderBy.length;++o)if(e.orderBy[o].field.isEqual(t)){const e=n.position[o];Tl({value:i,inclusive:r},{value:e,inclusive:n.inclusive})<0&&(i=e,r=n.inclusive);break}return{value:i,inclusive:r}}function Fl(e,t,n){let i=sl,r=!0;for(const n of Nl(e,t)){let e=sl,t=!0;switch(n.op){case">=":case">":e=kl(n.value),t=!1;break;case"==":case"in":case"<=":e=n.value;break;case"<":e=n.value,t=!1;break;case"!=":case"not-in":e=sl}Sl({value:i,inclusive:r},{value:e,inclusive:t})>0&&(i=e,r=t)}if(null!==n)for(let o=0;o<e.orderBy.length;++o)if(e.orderBy[o].field.isEqual(t)){const e=n.position[o];Sl({value:i,inclusive:r},{value:e,inclusive:n.inclusive})>0&&(i=e,r=n.inclusive);break}return{value:i,inclusive:r}}class Bl extends class{}{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.ct(e,t,n):new Vl(e,t,n):"array-contains"===t?new $l(e,n):"in"===t?new Yl(e,n):"not-in"===t?new Gl(e,n):"array-contains-any"===t?new ql(e,n):new Bl(e,t,n)}static ct(e,t,n){return"in"===t?new Ul(e,n):new Hl(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.at(dl(t,this.value)):null!==t&&ul(this.value)===ul(t)&&this.at(dl(t,this.value))}at(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Ua()}}ht(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class Vl extends Bl{constructor(e,t,n){super(e,t,n),this.key=ds.fromName(n.referenceValue)}matches(e){const t=ds.comparator(e.key,this.key);return this.at(t)}}class Ul extends Bl{constructor(e,t){super(e,"in",t),this.keys=zl("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class Hl extends Bl{constructor(e,t){super(e,"not-in",t),this.keys=zl("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function zl(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((e=>ds.fromName(e.referenceValue)))}class $l extends Bl{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return yl(t)&&hl(t.arrayValue,this.value)}}class Yl extends Bl{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&hl(this.value.arrayValue,t)}}class Gl extends Bl{constructor(e,t){super(e,"not-in",t)}matches(e){if(hl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!hl(this.value.arrayValue,t)}}class ql extends Bl{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!yl(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>hl(this.value.arrayValue,e)))}}class Wl{constructor(e,t){this.position=e,this.inclusive=t}}class Xl{constructor(e,t="asc"){this.field=e,this.dir=t}}function Kl(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function Ql(e,t,n){let i=0;for(let r=0;r<e.position.length;r++){const o=t[r],a=e.position[r];if(i=o.field.isKeyField()?ds.comparator(ds.fromName(a.referenceValue),n.key):dl(a,n.data.field(o.field)),"desc"===o.dir&&(i*=-1),0!==i)break}return i}function Jl(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!cl(e.position[n],t.position[n]))return!1;return!0}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class Zl{constructor(e,t=null,n=[],i=[],r=null,o="F",a=null,s=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=i,this.limit=r,this.limitType=o,this.startAt=a,this.endAt=s,this.lt=null,this.ft=null,this.startAt,this.endAt}}function eu(e,t,n,i,r,o,a,s){return new Zl(e,t,n,i,r,o,a,s)}function tu(e){return new Zl(e)}function nu(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function iu(e){for(const t of e.filters)if(t.ht())return t.field;return null}function ru(e){return null!==e.collectionGroup}function ou(e){const t=za(e);if(null===t.lt){t.lt=[];const e=iu(t),n=nu(t);if(null!==e&&null===n)e.isKeyField()||t.lt.push(new Xl(e)),t.lt.push(new Xl(hs.keyField(),"asc"));else{let e=!1;for(const n of t.explicitOrderBy)t.lt.push(n),n.field.isKeyField()&&(e=!0);if(!e){const e=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.lt.push(new Xl(hs.keyField(),e))}}}return t.lt}function au(e){const t=za(e);if(!t.ft)if("F"===t.limitType)t.ft=Cl(t.path,t.collectionGroup,ou(t),t.filters,t.limit,t.startAt,t.endAt);else{const e=[];for(const n of ou(t)){const t="desc"===n.dir?"asc":"desc";e.push(new Xl(n.field,t))}const n=t.endAt?new Wl(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new Wl(t.startAt.position,t.startAt.inclusive):null;t.ft=Cl(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}return t.ft}function su(e,t,n){return new Zl(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function lu(e,t){return Ml(au(e),au(t))&&e.limitType===t.limitType}function uu(e){return`${Al(au(e))}|lt:${e.limitType}`}function cu(e){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map((e=>{return`${(t=e).field.canonicalString()} ${t.op} ${pl(t.value)}`;var t})).join(", ")}]`),rl(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map((e=>function(e){return`${e.field.canonicalString()} (${e.dir})`}(e))).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((e=>pl(e))).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((e=>pl(e))).join(",")),`Target(${t})`}(au(e))}; limitType=${e.limitType})`}function hu(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):ds.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of e.explicitOrderBy)if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const i=Ql(e,t,n);return e.inclusive?i<=0:i<0}(e.startAt,ou(e),t))&&!(e.endAt&&!function(e,t,n){const i=Ql(e,t,n);return e.inclusive?i>=0:i>0}(e.endAt,ou(e),t))}(e,t)}function du(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function fu(e){return(t,n)=>{let i=!1;for(const r of ou(e)){const e=pu(r,t,n);if(0!==e)return e;i=i||r.field.isKeyField()}return 0}}function pu(e,t,n){const i=e.field.isKeyField()?ds.comparator(t.key,n.key):function(e,t,n){const i=t.data.field(e),r=n.data.field(e);return null!==i&&null!==r?dl(i,r):Ua()}(e.field,t,n);switch(e.dir){case"asc":return i;case"desc":return-1*i;default:return Ua()}}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function gu(e,t){if(e.dt){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ol(t)?"-0":t}}function mu(e){return{integerValue:""+e}}function bu(e,t){return al(t)?mu(t):gu(e,t)}
/**
     * @license
     * Copyright 2018 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class yu{constructor(){this._=void 0}}function vu(e,t,n){return e instanceof xu?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Pu?Ou(e,t):e instanceof ku?Tu(e,t):function(e,t){const n=wu(e,t),i=Iu(n)+Iu(e._t);return bl(n)&&bl(e._t)?mu(i):gu(e.wt,i)}(e,t)}function _u(e,t,n){return e instanceof Pu?Ou(e,t):e instanceof ku?Tu(e,t):n}function wu(e,t){return e instanceof Su?bl(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}class xu extends yu{}class Pu extends yu{constructor(e){super(),this.elements=e}}function Ou(e,t){const n=Eu(t);for(const t of e.elements)n.some((e=>cl(e,t)))||n.push(t);return{arrayValue:{values:n}}}class ku extends yu{constructor(e){super(),this.elements=e}}function Tu(e,t){let n=Eu(t);for(const t of e.elements)n=n.filter((e=>!cl(e,t)));return{arrayValue:{values:n}}}class Su extends yu{constructor(e,t){super(),this.wt=e,this._t=t}}function Iu(e){return Qs(e.integerValue||e.doubleValue)}function Eu(e){return yl(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class Du{constructor(e,t){this.field=e,this.transform=t}}class ju{constructor(e,t){this.version=e,this.transformResults=t}}class Cu{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Cu}static exists(e){return new Cu(void 0,e)}static updateTime(e){return new Cu(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Au(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class Mu{}function Ru(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Yu(e.key,Cu.none()):new Vu(e.key,e.data,Cu.none());{const n=e.data,i=Il.empty();let r=new $s(hs.comparator);for(let e of t.fields)if(!r.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?i.delete(e):i.set(e,t),r=r.add(e)}return new Uu(e.key,i,new qs(r.toArray()),Cu.none())}}function Nu(e,t,n){e instanceof Vu?function(e,t,n){const i=e.value.clone(),r=zu(e.fieldTransforms,t,n.transformResults);i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):e instanceof Uu?function(e,t,n){if(!Au(e.precondition,t))return void t.convertToUnknownDocument(n.version);const i=zu(e.fieldTransforms,t,n.transformResults),r=t.data;r.setAll(Hu(e)),r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Lu(e,t,n,i){return e instanceof Vu?function(e,t,n,i){if(!Au(e.precondition,t))return n;const r=e.value.clone(),o=$u(e.fieldTransforms,i,t);return r.setAll(o),t.convertToFoundDocument(t.version,r).setHasLocalMutations(),null}(e,t,n,i):e instanceof Uu?function(e,t,n,i){if(!Au(e.precondition,t))return n;const r=$u(e.fieldTransforms,i,t),o=t.data;return o.setAll(Hu(e)),o.setAll(r),t.convertToFoundDocument(t.version,o).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,i):function(e,t,n){return Au(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Fu(e,t){let n=null;for(const i of e.fieldTransforms){const e=t.data.field(i.field),r=wu(i.transform,e||null);null!=r&&(null===n&&(n=Il.empty()),n.set(i.field,r))}return n||null}function Bu(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&rs(e,t,((e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Pu&&t instanceof Pu||e instanceof ku&&t instanceof ku?rs(e.elements,t.elements,cl):e instanceof Su&&t instanceof Su?cl(e._t,t._t):e instanceof xu&&t instanceof xu}(e.transform,t.transform)}(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Vu extends Mu{constructor(e,t,n,i=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Uu extends Mu{constructor(e,t,n,i,r=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=i,this.fieldTransforms=r,this.type=1}getFieldMask(){return this.fieldMask}}function Hu(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const i=e.data.field(n);t.set(n,i)}})),t}function zu(e,t,n){const i=new Map;Ha(e.length===n.length);for(let r=0;r<n.length;r++){const o=e[r],a=o.transform,s=t.data.field(o.field);i.set(o.field,_u(a,s,n[r]))}return i}function $u(e,t,n){const i=new Map;for(const r of e){const e=r.transform,o=n.data.field(r.field);i.set(r.field,vu(e,o,t))}return i}class Yu extends Mu{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Gu extends Mu{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class qu{constructor(e){this.count=e}}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Wu,Xu;function Ku(e){switch(e){default:return Ua();case $a.CANCELLED:case $a.UNKNOWN:case $a.DEADLINE_EXCEEDED:case $a.RESOURCE_EXHAUSTED:case $a.INTERNAL:case $a.UNAVAILABLE:case $a.UNAUTHENTICATED:return!1;case $a.INVALID_ARGUMENT:case $a.NOT_FOUND:case $a.ALREADY_EXISTS:case $a.PERMISSION_DENIED:case $a.FAILED_PRECONDITION:case $a.ABORTED:case $a.OUT_OF_RANGE:case $a.UNIMPLEMENTED:case $a.DATA_LOSS:return!0}}function Qu(e){if(void 0===e)return Fa("GRPC error has no .code"),$a.UNKNOWN;switch(e){case Wu.OK:return $a.OK;case Wu.CANCELLED:return $a.CANCELLED;case Wu.UNKNOWN:return $a.UNKNOWN;case Wu.DEADLINE_EXCEEDED:return $a.DEADLINE_EXCEEDED;case Wu.RESOURCE_EXHAUSTED:return $a.RESOURCE_EXHAUSTED;case Wu.INTERNAL:return $a.INTERNAL;case Wu.UNAVAILABLE:return $a.UNAVAILABLE;case Wu.UNAUTHENTICATED:return $a.UNAUTHENTICATED;case Wu.INVALID_ARGUMENT:return $a.INVALID_ARGUMENT;case Wu.NOT_FOUND:return $a.NOT_FOUND;case Wu.ALREADY_EXISTS:return $a.ALREADY_EXISTS;case Wu.PERMISSION_DENIED:return $a.PERMISSION_DENIED;case Wu.FAILED_PRECONDITION:return $a.FAILED_PRECONDITION;case Wu.ABORTED:return $a.ABORTED;case Wu.OUT_OF_RANGE:return $a.OUT_OF_RANGE;case Wu.UNIMPLEMENTED:return $a.UNIMPLEMENTED;case Wu.DATA_LOSS:return $a.DATA_LOSS;default:return Ua()}}(Xu=Wu||(Wu={}))[Xu.OK=0]="OK",Xu[Xu.CANCELLED=1]="CANCELLED",Xu[Xu.UNKNOWN=2]="UNKNOWN",Xu[Xu.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Xu[Xu.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Xu[Xu.NOT_FOUND=5]="NOT_FOUND",Xu[Xu.ALREADY_EXISTS=6]="ALREADY_EXISTS",Xu[Xu.PERMISSION_DENIED=7]="PERMISSION_DENIED",Xu[Xu.UNAUTHENTICATED=16]="UNAUTHENTICATED",Xu[Xu.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Xu[Xu.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Xu[Xu.ABORTED=10]="ABORTED",Xu[Xu.OUT_OF_RANGE=11]="OUT_OF_RANGE",Xu[Xu.UNIMPLEMENTED=12]="UNIMPLEMENTED",Xu[Xu.INTERNAL=13]="INTERNAL",Xu[Xu.UNAVAILABLE=14]="UNAVAILABLE",Xu[Xu.DATA_LOSS=15]="DATA_LOSS";
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
class Ju{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[t,i]of n)if(this.equalsFn(t,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),i=this.inner[n];if(void 0===i)return this.inner[n]=[[e,t]],void this.innerSize++;for(let n=0;n<i.length;n++)if(this.equalsFn(i[n][0],e))return void(i[n]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let i=0;i<n.length;i++)if(this.equalsFn(n[i][0],e))return 1===n.length?delete this.inner[t]:n.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Bs(this.inner,((t,n)=>{for(const[t,i]of n)e(t,i)}))}isEmpty(){return Vs(this.inner)}size(){return this.innerSize}}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */const Zu=new Us(ds.comparator);function ec(){return Zu}const tc=new Us(ds.comparator);function nc(...e){let t=tc;for(const n of e)t=t.insert(n.key,n);return t}function ic(e){let t=tc;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function rc(){return ac()}function oc(){return ac()}function ac(){return new Ju((e=>e.toString()),((e,t)=>e.isEqual(t)))}const sc=new Us(ds.comparator),lc=new $s(ds.comparator);function uc(...e){let t=lc;for(const n of e)t=t.add(n);return t}const cc=new $s(is);function hc(){return cc}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class dc{constructor(e,t,n,i,r){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=i,this.resolvedLimboDocuments=r}static createSynthesizedRemoteEventForCurrentChange(e,t){const n=new Map;return n.set(e,fc.createSynthesizedTargetChangeForCurrentChange(e,t)),new dc(ss.min(),n,hc(),ec(),uc())}}class fc{constructor(e,t,n,i,r){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=i,this.removedDocuments=r}static createSynthesizedTargetChangeForCurrentChange(e,t){return new fc(Ws.EMPTY_BYTE_STRING,t,uc(),uc(),uc())}}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class pc{constructor(e,t,n,i){this.gt=e,this.removedTargetIds=t,this.key=n,this.yt=i}}class gc{constructor(e,t){this.targetId=e,this.It=t}}class mc{constructor(e,t,n=Ws.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=i}}class bc{constructor(){this.Tt=0,this.Et=_c(),this.At=Ws.EMPTY_BYTE_STRING,this.Rt=!1,this.bt=!0}get current(){return this.Rt}get resumeToken(){return this.At}get Pt(){return 0!==this.Tt}get vt(){return this.bt}Vt(e){e.approximateByteSize()>0&&(this.bt=!0,this.At=e)}St(){let e=uc(),t=uc(),n=uc();return this.Et.forEach(((i,r)=>{switch(r){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:n=n.add(i);break;default:Ua()}})),new fc(this.At,this.Rt,e,t,n)}Dt(){this.bt=!1,this.Et=_c()}Ct(e,t){this.bt=!0,this.Et=this.Et.insert(e,t)}xt(e){this.bt=!0,this.Et=this.Et.remove(e)}Nt(){this.Tt+=1}kt(){this.Tt-=1}Ot(){this.bt=!0,this.Rt=!0}}class yc{constructor(e){this.Mt=e,this.Ft=new Map,this.$t=ec(),this.Bt=vc(),this.Lt=new $s(is)}Ut(e){for(const t of e.gt)e.yt&&e.yt.isFoundDocument()?this.qt(t,e.yt):this.Kt(t,e.key,e.yt);for(const t of e.removedTargetIds)this.Kt(t,e.key,e.yt)}Gt(e){this.forEachTarget(e,(t=>{const n=this.Qt(t);switch(e.state){case 0:this.jt(t)&&n.Vt(e.resumeToken);break;case 1:n.kt(),n.Pt||n.Dt(),n.Vt(e.resumeToken);break;case 2:n.kt(),n.Pt||this.removeTarget(t);break;case 3:this.jt(t)&&(n.Ot(),n.Vt(e.resumeToken));break;case 4:this.jt(t)&&(this.Wt(t),n.Vt(e.resumeToken));break;default:Ua()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ft.forEach(((e,n)=>{this.jt(n)&&t(n)}))}zt(e){const t=e.targetId,n=e.It.count,i=this.Ht(t);if(i){const e=i.target;if(Rl(e))if(0===n){const n=new ds(e.path);this.Kt(t,n,Dl.newNoDocument(n,ss.min()))}else Ha(1===n);else this.Jt(t)!==n&&(this.Wt(t),this.Lt=this.Lt.add(t))}}Yt(e){const t=new Map;this.Ft.forEach(((n,i)=>{const r=this.Ht(i);if(r){if(n.current&&Rl(r.target)){const t=new ds(r.target.path);null!==this.$t.get(t)||this.Xt(i,t)||this.Kt(i,t,Dl.newNoDocument(t,e))}n.vt&&(t.set(i,n.St()),n.Dt())}}));let n=uc();this.Bt.forEach(((e,t)=>{let i=!0;t.forEachWhile((e=>{const t=this.Ht(e);return!t||2===t.purpose||(i=!1,!1)})),i&&(n=n.add(e))})),this.$t.forEach(((t,n)=>n.setReadTime(e)));const i=new dc(e,t,this.Lt,this.$t,n);return this.$t=ec(),this.Bt=vc(),this.Lt=new $s(is),i}qt(e,t){if(!this.jt(e))return;const n=this.Xt(e,t.key)?2:0;this.Qt(e).Ct(t.key,n),this.$t=this.$t.insert(t.key,t),this.Bt=this.Bt.insert(t.key,this.Zt(t.key).add(e))}Kt(e,t,n){if(!this.jt(e))return;const i=this.Qt(e);this.Xt(e,t)?i.Ct(t,1):i.xt(t),this.Bt=this.Bt.insert(t,this.Zt(t).delete(e)),n&&(this.$t=this.$t.insert(t,n))}removeTarget(e){this.Ft.delete(e)}Jt(e){const t=this.Qt(e).St();return this.Mt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Nt(e){this.Qt(e).Nt()}Qt(e){let t=this.Ft.get(e);return t||(t=new bc,this.Ft.set(e,t)),t}Zt(e){let t=this.Bt.get(e);return t||(t=new $s(is),this.Bt=this.Bt.insert(e,t)),t}jt(e){const t=null!==this.Ht(e);return t||La("WatchChangeAggregator","Detected inactive target",e),t}Ht(e){const t=this.Ft.get(e);return t&&t.Pt?null:this.Mt.te(e)}Wt(e){this.Ft.set(e,new bc),this.Mt.getRemoteKeysForTarget(e).forEach((t=>{this.Kt(e,t,null)}))}Xt(e,t){return this.Mt.getRemoteKeysForTarget(e).has(t)}}function vc(){return new Us(ds.comparator)}function _c(){return new Us(ds.comparator)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */const wc={asc:"ASCENDING",desc:"DESCENDING"},xc={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class Pc{constructor(e,t){this.databaseId=e,this.dt=t}}function Oc(e,t){return e.dt?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function kc(e,t){return e.dt?t.toBase64():t.toUint8Array()}function Tc(e,t){return Oc(e,t.toTimestamp())}function Sc(e){return Ha(!!e),ss.fromTimestamp(function(e){const t=Ks(e);return new as(t.seconds,t.nanos)}(e))}function Ic(e,t){return function(e){return new us(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function Ec(e){const t=us.fromString(e);return Ha(Qc(t)),t}function Dc(e,t){return Ic(e.databaseId,t.path)}function jc(e,t){const n=Ec(t);if(n.get(1)!==e.databaseId.projectId)throw new Ya($a.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Ya($a.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new ds(Rc(n))}function Cc(e,t){return Ic(e.databaseId,t)}function Ac(e){const t=Ec(e);return 4===t.length?us.emptyPath():Rc(t)}function Mc(e){return new us(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Rc(e){return Ha(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Nc(e,t,n){return{name:Dc(e,t),fields:n.value.mapValue.fields}}function Lc(e,t,n){const i=jc(e,t.name),r=Sc(t.updateTime),o=new Il({mapValue:{fields:t.fields}}),a=Dl.newFoundDocument(i,r,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function Fc(e,t){let n;if(t instanceof Vu)n={update:Nc(e,t.key,t.value)};else if(t instanceof Yu)n={delete:Dc(e,t.key)};else if(t instanceof Uu)n={update:Nc(e,t.key,t.data),updateMask:Kc(t.fieldMask)};else{if(!(t instanceof Gu))return Ua();n={verify:Dc(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){const n=t.transform;if(n instanceof xu)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Pu)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof ku)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Su)return{fieldPath:t.field.canonicalString(),increment:n._t};throw Ua()}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Tc(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Ua()}(e,t.precondition)),n}function Bc(e,t){const n=t.currentDocument?function(e){return void 0!==e.updateTime?Cu.updateTime(Sc(e.updateTime)):void 0!==e.exists?Cu.exists(e.exists):Cu.none()}(t.currentDocument):Cu.none(),i=t.updateTransforms?t.updateTransforms.map((t=>function(e,t){let n=null;if("setToServerValue"in t)Ha("REQUEST_TIME"===t.setToServerValue),n=new xu;else if("appendMissingElements"in t){const e=t.appendMissingElements.values||[];n=new Pu(e)}else if("removeAllFromArray"in t){const e=t.removeAllFromArray.values||[];n=new ku(e)}else"increment"in t?n=new Su(e,t.increment):Ua();const i=hs.fromServerFormat(t.fieldPath);return new Du(i,n)}(e,t))):[];if(t.update){t.update.name;const r=jc(e,t.update.name),o=new Il({mapValue:{fields:t.update.fields}});if(t.updateMask){const e=function(e){const t=e.fieldPaths||[];return new qs(t.map((e=>hs.fromServerFormat(e))))}(t.updateMask);return new Uu(r,o,e,n,i)}return new Vu(r,o,n,i)}if(t.delete){const i=jc(e,t.delete);return new Yu(i,n)}if(t.verify){const i=jc(e,t.verify);return new Gu(i,n)}return Ua()}function Vc(e,t){return{documents:[Cc(e,t.path)]}}function Uc(e,t){const n={structuredQuery:{}},i=t.path;null!==t.collectionGroup?(n.parent=Cc(e,i),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=Cc(e,i.popLast()),n.structuredQuery.from=[{collectionId:i.lastSegment()}]);const r=function(e){if(0===e.length)return;const t=e.map((e=>function(e){if("=="===e.op){if(_l(e.value))return{unaryFilter:{field:Gc(e.field),op:"IS_NAN"}};if(vl(e.value))return{unaryFilter:{field:Gc(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(_l(e.value))return{unaryFilter:{field:Gc(e.field),op:"IS_NOT_NAN"}};if(vl(e.value))return{unaryFilter:{field:Gc(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Gc(e.field),op:Yc(e.op),value:e.value}}}(e)));return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}(t.filters);r&&(n.structuredQuery.where=r);const o=function(e){if(0!==e.length)return e.map((e=>function(e){return{field:Gc(e.field),direction:$c(e.dir)}}(e)))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=function(e,t){return e.dt||rl(t)?t:{value:t}}(e,t.limit);var s;return null!==a&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt={before:(s=t.startAt).inclusive,values:s.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function Hc(e){let t=Ac(e.parent);const n=e.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){Ha(1===i);const e=n.from[0];e.allDescendants?r=e.collectionId:t=t.child(e.collectionId)}let o=[];n.where&&(o=zc(n.where));let a=[];n.orderBy&&(a=n.orderBy.map((e=>function(e){return new Xl(qc(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e))));let s=null;n.limit&&(s=function(e){let t;return t="object"==typeof e?e.value:e,rl(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new Wl(n,t)}(n.startAt));let u=null;return n.endAt&&(u=function(e){const t=!e.before,n=e.values||[];return new Wl(n,t)}(n.endAt)),eu(t,r,a,o,s,"F",l,u)}function zc(e){return e?void 0!==e.unaryFilter?[Xc(e)]:void 0!==e.fieldFilter?[Wc(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((e=>zc(e))).reduce(((e,t)=>e.concat(t))):Ua():[]}function $c(e){return wc[e]}function Yc(e){return xc[e]}function Gc(e){return{fieldPath:e.canonicalString()}}function qc(e){return hs.fromServerFormat(e.fieldPath)}function Wc(e){return Bl.create(qc(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ua()}}(e.fieldFilter.op),e.fieldFilter.value)}function Xc(e){switch(e.unaryFilter.op){case"IS_NAN":const t=qc(e.unaryFilter.field);return Bl.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=qc(e.unaryFilter.field);return Bl.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=qc(e.unaryFilter.field);return Bl.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const r=qc(e.unaryFilter.field);return Bl.create(r,"!=",{nullValue:"NULL_VALUE"});default:return Ua()}}function Kc(e){const t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function Qc(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Jc(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=eh(t)),t=Zc(e.get(n),t);return eh(t)}function Zc(e,t){let n=t;const i=e.length;for(let t=0;t<i;t++){const i=e.charAt(t);switch(i){case"\0":n+="";break;case"":n+="";break;default:n+=i}}return n}function eh(e){return e+""}function th(e){const t=e.length;if(Ha(t>=2),2===t)return Ha(""===e.charAt(0)&&""===e.charAt(1)),us.emptyPath();const n=t-2,i=[];let r="";for(let o=0;o<t;){const t=e.indexOf("",o);switch((t<0||t>n)&&Ua(),e.charAt(t+1)){case"":const n=e.substring(o,t);let a;0===r.length?a=n:(r+=n,a=r,r=""),i.push(a);break;case"":r+=e.substring(o,t),r+="\0";break;case"":r+=e.substring(o,t+1);break;default:Ua()}o=t+2}return new us(i)}
/**
     * @license
     * Copyright 2022 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */const nh=["userId","batchId"];
/**
     * @license
     * Copyright 2022 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function ih(e,t){return[e,Jc(t)]}function rh(e,t,n){return[e,Jc(t),n]}const oh={},ah=["prefixPath","collectionGroup","readTime","documentId"],sh=["prefixPath","collectionGroup","documentId"],lh=["collectionGroup","readTime","prefixPath","documentId"],uh=["canonicalId","targetId"],ch=["targetId","path"],hh=["path","targetId"],dh=["collectionId","parent"],fh=["indexId","uid"],ph=["uid","sequenceNumber"],gh=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],mh=["indexId","uid","orderedDocumentKey"],bh=["userId","collectionPath","documentId"],yh=["userId","collectionPath","largestBatchId"],vh=["userId","collectionGroup","largestBatchId"],_h=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],wh=[..._h,"documentOverlays"],xh=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Ph=xh,Oh=[...Ph,"indexConfiguration","indexState","indexEntries"];
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class kh extends Ps{constructor(e,t){super(),this.ee=e,this.currentSequenceNumber=t}}function Th(e,t){const n=za(e);return Ss.N(n.ee,t)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class Sh{constructor(e,t,n,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=i}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let t=0;t<this.mutations.length;t++){const i=this.mutations[t];i.key.isEqual(e.key)&&Nu(i,e,n[t])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Lu(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Lu(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=oc();return this.mutations.forEach((i=>{const r=e.get(i.key),o=r.overlayedDocument;let a=this.applyToLocalView(o,r.mutatedFields);a=t.has(i.key)?null:a;const s=Ru(o,a);null!==s&&n.set(i.key,s),o.isValidDocument()||o.convertToNoDocument(ss.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),uc())}isEqual(e){return this.batchId===e.batchId&&rs(this.mutations,e.mutations,((e,t)=>Bu(e,t)))&&rs(this.baseMutations,e.baseMutations,((e,t)=>Bu(e,t)))}}class Ih{constructor(e,t,n,i){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=i}static from(e,t,n){Ha(e.mutations.length===n.length);let i=sc;const r=e.mutations;for(let e=0;e<r.length;e++)i=i.insert(r[e].key,n[e].version);return new Ih(e,t,n,i)}}
/**
     * @license
     * Copyright 2022 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class Eh{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class Dh{constructor(e,t,n,i,r=ss.min(),o=ss.min(),a=Ws.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=i,this.snapshotVersion=r,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a}withSequenceNumber(e){return new Dh(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Dh(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Dh(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class jh{constructor(e){this.ne=e}}function Ch(e,t){const n=t.key,i={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Ah(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())i.document=function(e,t){return{name:Dc(e,t.key),fields:t.data.value.mapValue.fields,updateTime:Oc(e,t.version.toTimestamp())}}(e.ne,t);else if(t.isNoDocument())i.noDocument={path:n.path.toArray(),readTime:Mh(t.version)};else{if(!t.isUnknownDocument())return Ua();i.unknownDocument={path:n.path.toArray(),version:Mh(t.version)}}return i}function Ah(e){const t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function Mh(e){const t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function Rh(e){const t=new as(e.seconds,e.nanoseconds);return ss.fromTimestamp(t)}function Nh(e,t){const n=(t.baseMutations||[]).map((t=>Bc(e.ne,t)));for(let e=0;e<t.mutations.length-1;++e){const n=t.mutations[e];if(e+1<t.mutations.length&&void 0!==t.mutations[e+1].transform){const i=t.mutations[e+1];n.updateTransforms=i.transform.fieldTransforms,t.mutations.splice(e+1,1),++e}}const i=t.mutations.map((t=>Bc(e.ne,t))),r=as.fromMillis(t.localWriteTimeMs);return new Sh(t.batchId,r,n,i)}function Lh(e){const t=Rh(e.readTime),n=void 0!==e.lastLimboFreeSnapshotVersion?Rh(e.lastLimboFreeSnapshotVersion):ss.min();let i;var r;return void 0!==e.query.documents?(Ha(1===(r=e.query).documents.length),i=au(tu(Ac(r.documents[0])))):i=function(e){return au(Hc(e))}(e.query),new Dh(i,e.targetId,0,e.lastListenSequenceNumber,t,n,Ws.fromBase64String(e.resumeToken))}function Fh(e,t){const n=Mh(t.snapshotVersion),i=Mh(t.lastLimboFreeSnapshotVersion);let r;r=Rl(t.target)?Vc(e.ne,t.target):Uc(e.ne,t.target);const o=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:Al(t.target),readTime:n,resumeToken:o,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:r}}function Bh(e){const t=Hc({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?su(t,t.limit,"L"):t}function Vh(e,t){return new Eh(t.largestBatchId,Bc(e.ne,t.overlayMutation))}function Uh(e,t){const n=t.path.lastSegment();return[e,Jc(t.path.popLast()),n]}function Hh(e,t,n,i){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:Mh(i.readTime),documentKey:Jc(i.documentKey.path),largestBatchId:i.largestBatchId}}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class zh{getBundleMetadata(e,t){return $h(e).get(t).next((e=>{if(e)return{id:(t=e).bundleId,createTime:Rh(t.createTime),version:t.version};var t}))}saveBundleMetadata(e,t){return $h(e).put({bundleId:(n=t).id,createTime:Mh(Sc(n.createTime)),version:n.version});var n}getNamedQuery(e,t){return Yh(e).get(t).next((e=>{if(e)return{name:(t=e).name,query:Bh(t.bundledQuery),readTime:Rh(t.readTime)};var t}))}saveNamedQuery(e,t){return Yh(e).put(function(e){return{name:e.name,readTime:Mh(Sc(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}function $h(e){return Th(e,"bundles")}function Yh(e){return Th(e,"namedQueries")}
/**
     * @license
     * Copyright 2022 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class Gh{constructor(e,t){this.wt=e,this.userId=t}static se(e,t){const n=t.uid||"";return new Gh(e,n)}getOverlay(e,t){return qh(e).get(Uh(this.userId,t)).next((e=>e?Vh(this.wt,e):null))}getOverlays(e,t){const n=rc();return ks.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){const i=[];return n.forEach(((n,r)=>{const o=new Eh(t,r);i.push(this.ie(e,o))})),ks.waitFor(i)}removeOverlaysForBatchId(e,t,n){const i=new Set;t.forEach((e=>i.add(Jc(e.getCollectionPath()))));const r=[];return i.forEach((t=>{const i=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,n+1],!1,!0);r.push(qh(e).W("collectionPathOverlayIndex",i))})),ks.waitFor(r)}getOverlaysForCollection(e,t,n){const i=rc(),r=Jc(t),o=IDBKeyRange.bound([this.userId,r,n],[this.userId,r,Number.POSITIVE_INFINITY],!0);return qh(e).K("collectionPathOverlayIndex",o).next((e=>{for(const t of e){const e=Vh(this.wt,t);i.set(e.getKey(),e)}return i}))}getOverlaysForCollectionGroup(e,t,n,i){const r=rc();let o;const a=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return qh(e).J({index:"collectionGroupOverlayIndex",range:a},((e,t,n)=>{const a=Vh(this.wt,t);r.size()<i||a.largestBatchId===o?(r.set(a.getKey(),a),o=a.largestBatchId):n.done()})).next((()=>r))}ie(e,t){return qh(e).put(function(e,t,n){const[i,r,o]=Uh(t,n.mutation.key);return{userId:t,collectionPath:r,documentId:o,collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:Fc(e.ne,n.mutation)}}(this.wt,this.userId,t))}}function qh(e){return Th(e,"documentOverlays")}
/**
     * @license
     * Copyright 2021 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class Wh{constructor(){}re(e,t){this.oe(e,t),t.ue()}oe(e,t){if("nullValue"in e)this.ce(t,5);else if("booleanValue"in e)this.ce(t,10),t.ae(e.booleanValue?1:0);else if("integerValue"in e)this.ce(t,15),t.ae(Qs(e.integerValue));else if("doubleValue"in e){const n=Qs(e.doubleValue);isNaN(n)?this.ce(t,13):(this.ce(t,15),ol(n)?t.ae(0):t.ae(n))}else if("timestampValue"in e){const n=e.timestampValue;this.ce(t,20),"string"==typeof n?t.he(n):(t.he(`${n.seconds||""}`),t.ae(n.nanos||0))}else if("stringValue"in e)this.le(e.stringValue,t),this.fe(t);else if("bytesValue"in e)this.ce(t,30),t.de(Js(e.bytesValue)),this.fe(t);else if("referenceValue"in e)this._e(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.ce(t,45),t.ae(n.latitude||0),t.ae(n.longitude||0)}else"mapValue"in e?Pl(e)?this.ce(t,Number.MAX_SAFE_INTEGER):(this.we(e.mapValue,t),this.fe(t)):"arrayValue"in e?(this.me(e.arrayValue,t),this.fe(t)):Ua()}le(e,t){this.ce(t,25),this.ge(e,t)}ge(e,t){t.he(e)}we(e,t){const n=e.fields||{};this.ce(t,55);for(const e of Object.keys(n))this.le(e,t),this.oe(n[e],t)}me(e,t){const n=e.values||[];this.ce(t,50);for(const e of n)this.oe(e,t)}_e(e,t){this.ce(t,37),ds.fromName(e).path.forEach((e=>{this.ce(t,60),this.ge(e,t)}))}ce(e,t){e.ae(t)}fe(e){e.ae(2)}}function Xh(e){if(0===e)return 8;let t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function Kh(e){const t=64-function(e){let t=0;for(let n=0;n<8;++n){const i=Xh(255&e[n]);if(t+=i,8!==i)break}return t}(e);return Math.ceil(t/8)}Wh.ye=new Wh;class Qh{constructor(){this.buffer=new Uint8Array(1024),this.position=0}pe(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Ie(n.value),n=t.next();this.Te()}Ee(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Ae(n.value),n=t.next();this.Re()}be(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Ie(e);else if(e<2048)this.Ie(960|e>>>6),this.Ie(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Ie(480|e>>>12),this.Ie(128|63&e>>>6),this.Ie(128|63&e);else{const e=t.codePointAt(0);this.Ie(240|e>>>18),this.Ie(128|63&e>>>12),this.Ie(128|63&e>>>6),this.Ie(128|63&e)}}this.Te()}Pe(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Ae(e);else if(e<2048)this.Ae(960|e>>>6),this.Ae(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Ae(480|e>>>12),this.Ae(128|63&e>>>6),this.Ae(128|63&e);else{const e=t.codePointAt(0);this.Ae(240|e>>>18),this.Ae(128|63&e>>>12),this.Ae(128|63&e>>>6),this.Ae(128|63&e)}}this.Re()}ve(e){const t=this.Ve(e),n=Kh(t);this.Se(1+n),this.buffer[this.position++]=255&n;for(let e=t.length-n;e<t.length;++e)this.buffer[this.position++]=255&t[e]}De(e){const t=this.Ve(e),n=Kh(t);this.Se(1+n),this.buffer[this.position++]=~(255&n);for(let e=t.length-n;e<t.length;++e)this.buffer[this.position++]=~(255&t[e])}Ce(){this.xe(255),this.xe(255)}Ne(){this.ke(255),this.ke(255)}reset(){this.position=0}seed(e){this.Se(e.length),this.buffer.set(e,this.position),this.position+=e.length}Oe(){return this.buffer.slice(0,this.position)}Ve(e){const t=function(e){const t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(let e=1;e<t.length;++e)t[e]^=n?255:0;return t}Ie(e){const t=255&e;0===t?(this.xe(0),this.xe(255)):255===t?(this.xe(255),this.xe(0)):this.xe(t)}Ae(e){const t=255&e;0===t?(this.ke(0),this.ke(255)):255===t?(this.ke(255),this.ke(0)):this.ke(e)}Te(){this.xe(0),this.xe(1)}Re(){this.ke(0),this.ke(1)}xe(e){this.Se(1),this.buffer[this.position++]=e}ke(e){this.Se(1),this.buffer[this.position++]=~e}Se(e){const t=e+this.position;if(t<=this.buffer.length)return;let n=2*this.buffer.length;n<t&&(n=t);const i=new Uint8Array(n);i.set(this.buffer),this.buffer=i}}class Jh{constructor(e){this.Me=e}de(e){this.Me.pe(e)}he(e){this.Me.be(e)}ae(e){this.Me.ve(e)}ue(){this.Me.Ce()}}class Zh{constructor(e){this.Me=e}de(e){this.Me.Ee(e)}he(e){this.Me.Pe(e)}ae(e){this.Me.De(e)}ue(){this.Me.Ne()}}class ed{constructor(){this.Me=new Qh,this.Fe=new Jh(this.Me),this.$e=new Zh(this.Me)}seed(e){this.Me.seed(e)}Be(e){return 0===e?this.Fe:this.$e}Oe(){return this.Me.Oe()}reset(){this.Me.reset()}}
/**
     * @license
     * Copyright 2022 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class td{constructor(e,t,n,i){this.indexId=e,this.documentKey=t,this.arrayValue=n,this.directionalValue=i}Le(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,n=new Uint8Array(t);return n.set(this.directionalValue,0),t!==e?n.set([0],this.directionalValue.length):++n[n.length-1],new td(this.indexId,this.documentKey,this.arrayValue,n)}}function nd(e,t){let n=e.indexId-t.indexId;return 0!==n?n:(n=id(e.arrayValue,t.arrayValue),0!==n?n:(n=id(e.directionalValue,t.directionalValue),0!==n?n:ds.comparator(e.documentKey,t.documentKey)))}function id(e,t){for(let n=0;n<e.length&&n<t.length;++n){const i=e[n]-t[n];if(0!==i)return i}return e.length-t.length}
/**
     * @license
     * Copyright 2022 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class rd{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ue=e.orderBy,this.qe=[];for(const t of e.filters){const e=t;e.ht()?this.Ke=e:this.qe.push(e)}}Ge(e){const t=ps(e);if(void 0!==t&&!this.Qe(t))return!1;const n=gs(e);let i=0,r=0;for(;i<n.length&&this.Qe(n[i]);++i);if(i===n.length)return!0;if(void 0!==this.Ke){const e=n[i];if(!this.je(this.Ke,e)||!this.We(this.Ue[r++],e))return!1;++i}for(;i<n.length;++i){const e=n[i];if(r>=this.Ue.length||!this.We(this.Ue[r++],e))return!1}return!0}Qe(e){for(const t of this.qe)if(this.je(t,e))return!0;return!1}je(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;const n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}We(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class od{constructor(){this.ze=new ad}addToCollectionParentIndex(e,t){return this.ze.add(t),ks.resolve()}getCollectionParents(e,t){return ks.resolve(this.ze.getEntries(t))}addFieldIndex(e,t){return ks.resolve()}deleteFieldIndex(e,t){return ks.resolve()}getDocumentsMatchingTarget(e,t){return ks.resolve(null)}getIndexType(e,t){return ks.resolve(0)}getFieldIndexes(e,t){return ks.resolve([])}getNextCollectionGroupToUpdate(e){return ks.resolve(null)}getMinOffset(e,t){return ks.resolve(_s.min())}getMinOffsetFromCollectionGroup(e,t){return ks.resolve(_s.min())}updateCollectionGroup(e,t,n){return ks.resolve()}updateIndexEntries(e,t){return ks.resolve()}}class ad{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),i=this.index[t]||new $s(us.comparator),r=!i.has(n);return this.index[t]=i.add(n),r}has(e){const t=e.lastSegment(),n=e.popLast(),i=this.index[t];return i&&i.has(n)}getEntries(e){return(this.index[e]||new $s(us.comparator)).toArray()}}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */const sd=new Uint8Array(0);class ld{constructor(e,t){this.user=e,this.databaseId=t,this.He=new ad,this.Je=new Ju((e=>Al(e)),((e,t)=>Ml(e,t))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.He.has(t)){const n=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((()=>{this.He.add(t)}));const r={collectionId:n,parent:Jc(i)};return ud(e).put(r)}return ks.resolve()}getCollectionParents(e,t){const n=[],i=IDBKeyRange.bound([t,""],[os(t),""],!1,!0);return ud(e).K(i).next((e=>{for(const i of e){if(i.collectionId!==t)break;n.push(th(i.parent))}return n}))}addFieldIndex(e,t){const n=hd(e),i=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((e=>[e.fieldPath.canonicalString(),e.kind]))}}(t);delete i.indexId;const r=n.add(i);if(t.indexState){const n=dd(e);return r.next((e=>{n.put(Hh(e,this.user,t.indexState.sequenceNumber,t.indexState.offset))}))}return r.next()}deleteFieldIndex(e,t){const n=hd(e),i=dd(e),r=cd(e);return n.delete(t.indexId).next((()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}getDocumentsMatchingTarget(e,t){const n=cd(e);let i=!0;const r=new Map;return ks.forEach(this.Ye(t),(t=>this.Xe(e,t).next((e=>{i&&(i=!!e),r.set(t,e)})))).next((()=>{if(i){let e=uc();const i=[];return ks.forEach(r,((r,o)=>{var a;La("IndexedDbIndexManager",`Using index ${a=r,`id=${a.indexId}|cg=${a.collectionGroup}|f=${a.fields.map((e=>`${e.fieldPath}:${e.kind}`)).join(",")}`} to execute ${Al(t)}`);const s=function(e,t){const n=ps(t);if(void 0===n)return null;for(const t of Nl(e,n.fieldPath))switch(t.op){case"array-contains-any":return t.value.arrayValue.values||[];case"array-contains":return[t.value]}return null}(o,r),l=function(e,t){const n=new Map;for(const i of gs(t))for(const t of Nl(e,i.fieldPath))switch(t.op){case"==":case"in":n.set(i.fieldPath.canonicalString(),t.value);break;case"not-in":case"!=":return n.set(i.fieldPath.canonicalString(),t.value),Array.from(n.values())}return null}(o,r),u=function(e,t){const n=[];let i=!0;for(const r of gs(t)){const t=0===r.kind?Ll(e,r.fieldPath,e.startAt):Fl(e,r.fieldPath,e.startAt);n.push(t.value),i&&(i=t.inclusive)}return new Wl(n,i)}(o,r),c=function(e,t){const n=[];let i=!0;for(const r of gs(t)){const t=0===r.kind?Fl(e,r.fieldPath,e.endAt):Ll(e,r.fieldPath,e.endAt);n.push(t.value),i&&(i=t.inclusive)}return new Wl(n,i)}(o,r),h=this.Ze(r,o,u),d=this.Ze(r,o,c),f=this.tn(r,o,l),p=this.en(r.indexId,s,h,u.inclusive,d,c.inclusive,f);return ks.forEach(p,(r=>n.j(r,t.limit).next((t=>{t.forEach((t=>{const n=ds.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),i.push(n))}))}))))})).next((()=>i))}return ks.resolve(null)}))}Ye(e){let t=this.Je.get(e);return t||(t=[e],this.Je.set(e,t),t)}en(e,t,n,i,r,o,a){const s=(null!=t?t.length:1)*Math.max(n.length,r.length),l=s/(null!=t?t.length:1),u=[];for(let c=0;c<s;++c){const s=t?this.nn(t[c/l]):sd,h=this.sn(e,s,n[c%l],i),d=this.rn(e,s,r[c%l],o),f=a.map((t=>this.sn(e,s,t,!0)));u.push(...this.createRange(h,d,f))}return u}sn(e,t,n,i){const r=new td(e,ds.empty(),t,n);return i?r:r.Le()}rn(e,t,n,i){const r=new td(e,ds.empty(),t,n);return i?r.Le():r}Xe(e,t){const n=new rd(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next((e=>{let t=null;for(const i of e)n.Ge(i)&&(!t||i.fields.length>t.fields.length)&&(t=i);return t}))}getIndexType(e,t){let n=2;return ks.forEach(this.Ye(t),(t=>this.Xe(e,t).next((e=>{e?0!==n&&e.fields.length<function(e){let t=new $s(hs.comparator),n=!1;for(const i of e.filters){const e=i;e.field.isKeyField()||("array-contains"===e.op||"array-contains-any"===e.op?n=!0:t=t.add(e.field))}for(const n of e.orderBy)n.field.isKeyField()||(t=t.add(n.field));return t.size+(n?1:0)}(t)&&(n=1):n=0})))).next((()=>n))}on(e,t){const n=new ed;for(const i of gs(e)){const e=t.data.field(i.fieldPath);if(null==e)return null;const r=n.Be(i.kind);Wh.ye.re(e,r)}return n.Oe()}nn(e){const t=new ed;return Wh.ye.re(e,t.Be(0)),t.Oe()}un(e,t){const n=new ed;return Wh.ye.re(ml(this.databaseId,t),n.Be(function(e){const t=gs(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Oe()}tn(e,t,n){if(null===n)return[];let i=[];i.push(new ed);let r=0;for(const o of gs(e)){const e=n[r++];for(const n of i)if(this.cn(t,o.fieldPath)&&yl(e))i=this.an(i,o,e);else{const t=n.Be(o.kind);Wh.ye.re(e,t)}}return this.hn(i)}Ze(e,t,n){return this.tn(e,t,n.position)}hn(e){const t=[];for(let n=0;n<e.length;++n)t[n]=e[n].Oe();return t}an(e,t,n){const i=[...e],r=[];for(const e of n.arrayValue.values||[])for(const n of i){const i=new ed;i.seed(n.Oe()),Wh.ye.re(e,i.Be(t.kind)),r.push(i)}return r}cn(e,t){return!!e.filters.find((e=>e instanceof Bl&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)))}getFieldIndexes(e,t){const n=hd(e),i=dd(e);return(t?n.K("collectionGroupIndex",IDBKeyRange.bound(t,t)):n.K()).next((e=>{const t=[];return ks.forEach(e,(e=>i.get([e.indexId,this.uid]).next((n=>{t.push(function(e,t){const n=t?new bs(t.sequenceNumber,new _s(Rh(t.readTime),new ds(th(t.documentKey)),t.largestBatchId)):bs.empty(),i=e.fields.map((([e,t])=>new ms(hs.fromServerFormat(e),t)));return new fs(e.indexId,e.collectionGroup,i,n)}(e,n))})))).next((()=>t))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((e=>0===e.length?null:(e.sort(((e,t)=>{const n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:is(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)))}updateCollectionGroup(e,t,n){const i=hd(e),r=dd(e);return this.ln(e).next((e=>i.K("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((t=>ks.forEach(t,(t=>r.put(Hh(t.indexId,this.user,e,n))))))))}updateIndexEntries(e,t){const n=new Map;return ks.forEach(t,((t,i)=>{const r=n.get(t.collectionGroup);return(r?ks.resolve(r):this.getFieldIndexes(e,t.collectionGroup)).next((r=>(n.set(t.collectionGroup,r),ks.forEach(r,(n=>this.fn(e,t,n).next((t=>{const r=this.dn(i,n);return t.isEqual(r)?ks.resolve():this._n(e,i,n,t,r)})))))))}))}wn(e,t,n,i){return cd(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.un(n,t.key),documentKey:t.key.path.toArray()})}mn(e,t,n,i){return cd(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.un(n,t.key),t.key.path.toArray()])}fn(e,t,n){const i=cd(e);let r=new $s(nd);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.un(n,t)])},((e,i)=>{r=r.add(new td(n.indexId,t,i.arrayValue,i.directionalValue))})).next((()=>r))}dn(e,t){let n=new $s(nd);const i=this.on(t,e);if(null==i)return n;const r=ps(t);if(null!=r){const o=e.data.field(r.fieldPath);if(yl(o))for(const r of o.arrayValue.values||[])n=n.add(new td(t.indexId,e.key,this.nn(r),i))}else n=n.add(new td(t.indexId,e.key,sd,i));return n}_n(e,t,n,i,r){La("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const o=[];return function(e,t,n,i,r){const o=e.getIterator(),a=t.getIterator();let s=Gs(o),l=Gs(a);for(;s||l;){let e=!1,t=!1;if(s&&l){const i=n(s,l);i<0?t=!0:i>0&&(e=!0)}else null!=s?t=!0:e=!0;e?(i(l),l=Gs(a)):t?(r(s),s=Gs(o)):(s=Gs(o),l=Gs(a))}}(i,r,nd,(i=>{o.push(this.wn(e,t,n,i))}),(i=>{o.push(this.mn(e,t,n,i))})),ks.waitFor(o)}ln(e){let t=1;return dd(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((e,n,i)=>{i.done(),t=n.sequenceNumber+1})).next((()=>t))}createRange(e,t,n){n=n.sort(((e,t)=>nd(e,t))).filter(((e,t,n)=>!t||0!==nd(e,n[t-1])));const i=[];i.push(e);for(const r of n){const n=nd(r,e),o=nd(r,t);if(0===n)i[0]=e.Le();else if(n>0&&o<0)i.push(r),i.push(r.Le());else if(o>0)break}i.push(t);const r=[];for(let e=0;e<i.length;e+=2)r.push(IDBKeyRange.bound([i[e].indexId,this.uid,i[e].arrayValue,i[e].directionalValue,sd,[]],[i[e+1].indexId,this.uid,i[e+1].arrayValue,i[e+1].directionalValue,sd,[]]));return r}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(fd)}getMinOffset(e,t){return ks.mapArray(this.Ye(t),(t=>this.Xe(e,t).next((e=>e||Ua())))).next(fd)}}function ud(e){return Th(e,"collectionParents")}function cd(e){return Th(e,"indexEntries")}function hd(e){return Th(e,"indexConfiguration")}function dd(e){return Th(e,"indexState")}function fd(e){Ha(0!==e.length);let t=e[0].indexState.offset,n=t.largestBatchId;for(let i=1;i<e.length;i++){const r=e[i].indexState.offset;ws(r,t)<0&&(t=r),n<r.largestBatchId&&(n=r.largestBatchId)}return new _s(t.readTime,t.documentKey,n)}
/**
     * @license
     * Copyright 2018 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */const pd={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class gd{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new gd(e,gd.DEFAULT_COLLECTION_PERCENTILE,gd.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function md(e,t,n){const i=e.store("mutations"),r=e.store("documentMutations"),o=[],a=IDBKeyRange.only(n.batchId);let s=0;const l=i.J({range:a},((e,t,n)=>(s++,n.delete())));o.push(l.next((()=>{Ha(1===s)})));const u=[];for(const e of n.mutations){const i=rh(t,e.key.path,n.batchId);o.push(r.delete(i)),u.push(e.key)}return ks.waitFor(o).next((()=>u))}function bd(e){if(!e)return 0;let t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw Ua();t=e.noDocument}return JSON.stringify(t).length}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */gd.DEFAULT_COLLECTION_PERCENTILE=10,gd.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,gd.DEFAULT=new gd(41943040,gd.DEFAULT_COLLECTION_PERCENTILE,gd.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),gd.DISABLED=new gd(-1,0,0);class yd{constructor(e,t,n,i){this.userId=e,this.wt=t,this.indexManager=n,this.referenceDelegate=i,this.gn={}}static se(e,t,n,i){Ha(""!==e.uid);const r=e.isAuthenticated()?e.uid:"";return new yd(r,t,n,i)}checkEmpty(e){let t=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return _d(e).J({index:"userMutationsIndex",range:n},((e,n,i)=>{t=!1,i.done()})).next((()=>t))}addMutationBatch(e,t,n,i){const r=wd(e),o=_d(e);return o.add({}).next((a=>{Ha("number"==typeof a);const s=new Sh(a,t,n,i),l=function(e,t,n){const i=n.baseMutations.map((t=>Fc(e.ne,t))),r=n.mutations.map((t=>Fc(e.ne,t)));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:i,mutations:r}}(this.wt,this.userId,s),u=[];let c=new $s(((e,t)=>is(e.canonicalString(),t.canonicalString())));for(const e of i){const t=rh(this.userId,e.key.path,a);c=c.add(e.key.path.popLast()),u.push(o.put(l)),u.push(r.put(t,oh))}return c.forEach((t=>{u.push(this.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((()=>{this.gn[a]=s.keys()})),ks.waitFor(u).next((()=>s))}))}lookupMutationBatch(e,t){return _d(e).get(t).next((e=>e?(Ha(e.userId===this.userId),Nh(this.wt,e)):null))}yn(e,t){return this.gn[t]?ks.resolve(this.gn[t]):this.lookupMutationBatch(e,t).next((e=>{if(e){const n=e.keys();return this.gn[t]=n,n}return null}))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,i=IDBKeyRange.lowerBound([this.userId,n]);let r=null;return _d(e).J({index:"userMutationsIndex",range:i},((e,t,i)=>{t.userId===this.userId&&(Ha(t.batchId>=n),r=Nh(this.wt,t)),i.done()})).next((()=>r))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return _d(e).J({index:"userMutationsIndex",range:t,reverse:!0},((e,t,i)=>{n=t.batchId,i.done()})).next((()=>n))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return _d(e).K("userMutationsIndex",t).next((e=>e.map((e=>Nh(this.wt,e)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const n=ih(this.userId,t.path),i=IDBKeyRange.lowerBound(n),r=[];return wd(e).J({range:i},((n,i,o)=>{const[a,s,l]=n,u=th(s);if(a===this.userId&&t.path.isEqual(u))return _d(e).get(l).next((e=>{if(!e)throw Ua();Ha(e.userId===this.userId),r.push(Nh(this.wt,e))}));o.done()})).next((()=>r))}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new $s(is);const i=[];return t.forEach((t=>{const r=ih(this.userId,t.path),o=IDBKeyRange.lowerBound(r),a=wd(e).J({range:o},((e,i,r)=>{const[o,a,s]=e,l=th(a);o===this.userId&&t.path.isEqual(l)?n=n.add(s):r.done()}));i.push(a)})),ks.waitFor(i).next((()=>this.pn(e,n)))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,i=n.length+1,r=ih(this.userId,n),o=IDBKeyRange.lowerBound(r);let a=new $s(is);return wd(e).J({range:o},((e,t,r)=>{const[o,s,l]=e,u=th(s);o===this.userId&&n.isPrefixOf(u)?u.length===i&&(a=a.add(l)):r.done()})).next((()=>this.pn(e,a)))}pn(e,t){const n=[],i=[];return t.forEach((t=>{i.push(_d(e).get(t).next((e=>{if(null===e)throw Ua();Ha(e.userId===this.userId),n.push(Nh(this.wt,e))})))})),ks.waitFor(i).next((()=>n))}removeMutationBatch(e,t){return md(e.ee,this.userId,t).next((n=>(e.addOnCommittedListener((()=>{this.In(t.batchId)})),ks.forEach(n,(t=>this.referenceDelegate.markPotentiallyOrphaned(e,t))))))}In(e){delete this.gn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return ks.resolve();const n=IDBKeyRange.lowerBound([this.userId]),i=[];return wd(e).J({range:n},((e,t,n)=>{if(e[0]===this.userId){const t=th(e[1]);i.push(t)}else n.done()})).next((()=>{Ha(0===i.length)}))}))}containsKey(e,t){return vd(e,this.userId,t)}Tn(e){return xd(e).get(this.userId).next((e=>e||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}))}}function vd(e,t,n){const i=ih(t,n.path),r=i[1],o=IDBKeyRange.lowerBound(i);let a=!1;return wd(e).J({range:o,H:!0},((e,n,i)=>{const[o,s,l]=e;o===t&&s===r&&(a=!0),i.done()})).next((()=>a))}function _d(e){return Th(e,"mutations")}function wd(e){return Th(e,"documentMutations")}function xd(e){return Th(e,"mutationQueues")}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class Pd{constructor(e){this.En=e}next(){return this.En+=2,this.En}static An(){return new Pd(0)}static Rn(){return new Pd(-1)}}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class Od{constructor(e,t){this.referenceDelegate=e,this.wt=t}allocateTargetId(e){return this.bn(e).next((t=>{const n=new Pd(t.highestTargetId);return t.highestTargetId=n.next(),this.Pn(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.bn(e).next((e=>ss.fromTimestamp(new as(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.bn(e).next((e=>e.highestListenSequenceNumber))}setTargetsMetadata(e,t,n){return this.bn(e).next((i=>(i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Pn(e,i))))}addTargetData(e,t){return this.vn(e,t).next((()=>this.bn(e).next((n=>(n.targetCount+=1,this.Vn(t,n),this.Pn(e,n))))))}updateTargetData(e,t){return this.vn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>kd(e).delete(t.targetId))).next((()=>this.bn(e))).next((t=>(Ha(t.targetCount>0),t.targetCount-=1,this.Pn(e,t))))}removeTargets(e,t,n){let i=0;const r=[];return kd(e).J(((o,a)=>{const s=Lh(a);s.sequenceNumber<=t&&null===n.get(s.targetId)&&(i++,r.push(this.removeTargetData(e,s)))})).next((()=>ks.waitFor(r))).next((()=>i))}forEachTarget(e,t){return kd(e).J(((e,n)=>{const i=Lh(n);t(i)}))}bn(e){return Td(e).get("targetGlobalKey").next((e=>(Ha(null!==e),e)))}Pn(e,t){return Td(e).put("targetGlobalKey",t)}vn(e,t){return kd(e).put(Fh(this.wt,t))}Vn(e,t){let n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.bn(e).next((e=>e.targetCount))}getTargetData(e,t){const n=Al(t),i=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let r=null;return kd(e).J({range:i,index:"queryTargetsIndex"},((e,n,i)=>{const o=Lh(n);Ml(t,o.target)&&(r=o,i.done())})).next((()=>r))}addMatchingKeys(e,t,n){const i=[],r=Sd(e);return t.forEach((t=>{const o=Jc(t.path);i.push(r.put({targetId:n,path:o})),i.push(this.referenceDelegate.addReference(e,n,t))})),ks.waitFor(i)}removeMatchingKeys(e,t,n){const i=Sd(e);return ks.forEach(t,(t=>{const r=Jc(t.path);return ks.waitFor([i.delete([n,r]),this.referenceDelegate.removeReference(e,n,t)])}))}removeMatchingKeysForTargetId(e,t){const n=Sd(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(i)}getMatchingKeysForTargetId(e,t){const n=IDBKeyRange.bound([t],[t+1],!1,!0),i=Sd(e);let r=uc();return i.J({range:n,H:!0},((e,t,n)=>{const i=th(e[1]),o=new ds(i);r=r.add(o)})).next((()=>r))}containsKey(e,t){const n=Jc(t.path),i=IDBKeyRange.bound([n],[os(n)],!1,!0);let r=0;return Sd(e).J({index:"documentTargetsIndex",H:!0,range:i},(([e,t],n,i)=>{0!==e&&(r++,i.done())})).next((()=>r>0))}te(e,t){return kd(e).get(t).next((e=>e?Lh(e):null))}}function kd(e){return Th(e,"targets")}function Td(e){return Th(e,"targetGlobal")}function Sd(e){return Th(e,"targetDocuments")}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Id([e,t],[n,i]){const r=is(e,n);return 0===r?is(t,i):r}class Ed{constructor(e){this.Sn=e,this.buffer=new $s(Id),this.Dn=0}Cn(){return++this.Dn}xn(e){const t=[e,this.Cn()];if(this.buffer.size<this.Sn)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();Id(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Dd{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Nn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.kn(6e4)}stop(){this.Nn&&(this.Nn.cancel(),this.Nn=null)}get started(){return null!==this.Nn}kn(e){La("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Nn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Nn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){Ds(e)?La("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e):await Os(e)}await this.kn(3e5)}))}}class jd{constructor(e,t){this.On=e,this.params=t}calculateTargetCount(e,t){return this.On.Mn(e).next((e=>Math.floor(t/100*e)))}nthSequenceNumber(e,t){if(0===t)return ks.resolve(Ls.ot);const n=new Ed(t);return this.On.forEachTarget(e,(e=>n.xn(e.sequenceNumber))).next((()=>this.On.Fn(e,(e=>n.xn(e))))).next((()=>n.maxValue))}removeTargets(e,t,n){return this.On.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.On.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(La("LruGarbageCollector","Garbage collection skipped; disabled"),ks.resolve(pd)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(La("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),pd):this.$n(e,t)))}getCacheSize(e){return this.On.getCacheSize(e)}$n(e,t){let n,i,r,o,a,s,l;const u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((t=>(t>this.params.maximumSequenceNumbersToCollect?(La("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${t}`),i=this.params.maximumSequenceNumbersToCollect):i=t,o=Date.now(),this.nthSequenceNumber(e,i)))).next((i=>(n=i,a=Date.now(),this.removeTargets(e,n,t)))).next((t=>(r=t,s=Date.now(),this.removeOrphanedDocuments(e,n)))).next((e=>(l=Date.now(),Na()<=Pt.DEBUG&&La("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${o-u}ms\n\tDetermined least recently used ${i} in `+(a-o)+"ms\n"+`\tRemoved ${r} targets in `+(s-a)+"ms\n"+`\tRemoved ${e} documents in `+(l-s)+"ms\n"+`Total Duration: ${l-u}ms`),ks.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:r,documentsRemoved:e}))))}}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class Cd{constructor(e,t){this.db=e,this.garbageCollector=function(e,t){return new jd(e,t)}(this,t)}Mn(e){const t=this.Bn(e);return this.db.getTargetCache().getTargetCount(e).next((e=>t.next((t=>e+t))))}Bn(e){let t=0;return this.Fn(e,(e=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Fn(e,t){return this.Ln(e,((e,n)=>t(n)))}addReference(e,t,n){return Ad(e,n)}removeReference(e,t,n){return Ad(e,n)}removeTargets(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}markPotentiallyOrphaned(e,t){return Ad(e,t)}Un(e,t){return function(e,t){let n=!1;return xd(e).Y((i=>vd(e,i,t).next((e=>(e&&(n=!0),ks.resolve(!e)))))).next((()=>n))}(e,t)}removeOrphanedDocuments(e,t){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let r=0;return this.Ln(e,((o,a)=>{if(a<=t){const t=this.Un(e,o).next((t=>{if(!t)return r++,n.getEntry(e,o).next((()=>(n.removeEntry(o,ss.min()),Sd(e).delete([0,Jc(o.path)]))))}));i.push(t)}})).next((()=>ks.waitFor(i))).next((()=>n.apply(e))).next((()=>r))}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,t){return Ad(e,t)}Ln(e,t){const n=Sd(e);let i,r=Ls.ot;return n.J({index:"documentTargetsIndex"},(([e,n],{path:o,sequenceNumber:a})=>{0===e?(r!==Ls.ot&&t(new ds(th(i)),r),r=a,i=o):r=Ls.ot})).next((()=>{r!==Ls.ot&&t(new ds(th(i)),r)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Ad(e,t){return Sd(e).put(function(e,t){return{targetId:0,path:Jc(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class Md{constructor(){this.changes=new Ju((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Dl.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?ks.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class Rd{constructor(e){this.wt=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,n){return Bd(e).put(n)}removeEntry(e,t,n){return Bd(e).delete(function(e,t){const n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],Ah(t),n[n.length-1]]}(t,n))}updateMetadata(e,t){return this.getMetadata(e).next((n=>(n.byteSize+=t,this.qn(e,n))))}getEntry(e,t){let n=Dl.newInvalidDocument(t);return Bd(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Vd(t))},((e,i)=>{n=this.Kn(t,i)})).next((()=>n))}Gn(e,t){let n={size:0,document:Dl.newInvalidDocument(t)};return Bd(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Vd(t))},((e,i)=>{n={document:this.Kn(t,i),size:bd(i)}})).next((()=>n))}getEntries(e,t){let n=ec();return this.Qn(e,t,((e,t)=>{const i=this.Kn(e,t);n=n.insert(e,i)})).next((()=>n))}jn(e,t){let n=ec(),i=new Us(ds.comparator);return this.Qn(e,t,((e,t)=>{const r=this.Kn(e,t);n=n.insert(e,r),i=i.insert(e,bd(t))})).next((()=>({documents:n,Wn:i})))}Qn(e,t,n){if(t.isEmpty())return ks.resolve();let i=new $s(Hd);t.forEach((e=>i=i.add(e)));const r=IDBKeyRange.bound(Vd(i.first()),Vd(i.last())),o=i.getIterator();let a=o.getNext();return Bd(e).J({index:"documentKeyIndex",range:r},((e,t,i)=>{const r=ds.fromSegments([...t.prefixPath,t.collectionGroup,t.documentId]);for(;a&&Hd(a,r)<0;)n(a,null),a=o.getNext();a&&a.isEqual(r)&&(n(a,t),a=o.hasNext()?o.getNext():null),a?i.q(Vd(a)):i.done()})).next((()=>{for(;a;)n(a,null),a=o.hasNext()?o.getNext():null}))}getAllFromCollection(e,t,n){const i=[t.popLast().toArray(),t.lastSegment(),Ah(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],r=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Bd(e).K(IDBKeyRange.bound(i,r,!0)).next((e=>{let t=ec();for(const n of e){const e=this.Kn(ds.fromSegments(n.prefixPath.concat(n.collectionGroup,n.documentId)),n);t=t.insert(e.key,e)}return t}))}getAllFromCollectionGroup(e,t,n,i){let r=ec();const o=Ud(t,n),a=Ud(t,_s.max());return Bd(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},((e,t,n)=>{const o=this.Kn(ds.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);r=r.insert(o.key,o),r.size===i&&n.done()})).next((()=>r))}newChangeBuffer(e){return new Ld(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((e=>e.byteSize))}getMetadata(e){return Fd(e).get("remoteDocumentGlobalKey").next((e=>(Ha(!!e),e)))}qn(e,t){return Fd(e).put("remoteDocumentGlobalKey",t)}Kn(e,t){if(t){const e=function(e,t){let n;if(t.document)n=Lc(e.ne,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const e=ds.fromSegments(t.noDocument.path),i=Rh(t.noDocument.readTime);n=Dl.newNoDocument(e,i),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return Ua();{const e=ds.fromSegments(t.unknownDocument.path),i=Rh(t.unknownDocument.version);n=Dl.newUnknownDocument(e,i)}}return t.readTime&&n.setReadTime(function(e){const t=new as(e[0],e[1]);return ss.fromTimestamp(t)}(t.readTime)),n}(this.wt,t);if(!e.isNoDocument()||!e.version.isEqual(ss.min()))return e}return Dl.newInvalidDocument(e)}}function Nd(e){return new Rd(e)}class Ld extends Md{constructor(e,t){super(),this.zn=e,this.trackRemovals=t,this.Hn=new Ju((e=>e.toString()),((e,t)=>e.isEqual(t)))}applyChanges(e){const t=[];let n=0,i=new $s(((e,t)=>is(e.canonicalString(),t.canonicalString())));return this.changes.forEach(((r,o)=>{const a=this.Hn.get(r);if(t.push(this.zn.removeEntry(e,r,a.readTime)),o.isValidDocument()){const s=Ch(this.zn.wt,o);i=i.add(r.path.popLast());const l=bd(s);n+=l-a.size,t.push(this.zn.addEntry(e,r,s))}else if(n-=a.size,this.trackRemovals){const n=Ch(this.zn.wt,o.convertToNoDocument(ss.min()));t.push(this.zn.addEntry(e,r,n))}})),i.forEach((n=>{t.push(this.zn.indexManager.addToCollectionParentIndex(e,n))})),t.push(this.zn.updateMetadata(e,n)),ks.waitFor(t)}getFromCache(e,t){return this.zn.Gn(e,t).next((e=>(this.Hn.set(t,{size:e.size,readTime:e.document.readTime}),e.document)))}getAllFromCache(e,t){return this.zn.jn(e,t).next((({documents:e,Wn:t})=>(t.forEach(((t,n)=>{this.Hn.set(t,{size:n,readTime:e.get(t).readTime})})),e)))}}function Fd(e){return Th(e,"remoteDocumentGlobal")}function Bd(e){return Th(e,"remoteDocumentsV14")}function Vd(e){const t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function Ud(e,t){const n=t.documentKey.path.toArray();return[e,Ah(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function Hd(e,t){const n=e.path.toArray(),i=t.path.toArray();let r=0;for(let e=0;e<n.length-2&&e<i.length-2;++e)if(r=is(n[e],i[e]),r)return r;return r=is(n.length,i.length),r||(r=is(n[n.length-2],i[i.length-2]),r||is(n[n.length-1],i[i.length-1]))
/**
     * @license
     * Copyright 2022 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */}class zd{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class $d{constructor(e,t,n,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=i}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((i=>(n=i,this.getBaseDocument(e,t,n)))).next((e=>(null!==n&&Lu(n.mutation,e,qs.empty(),as.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,uc()).next((()=>t))))}getLocalViewOfDocuments(e,t,n=uc()){const i=rc();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,n).next((e=>{let t=nc();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){const n=rc();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,uc())))}populateOverlays(e,t,n){const i=[];return n.forEach((e=>{t.has(e)||i.push(e)})),this.documentOverlayCache.getOverlays(e,i).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,i){let r=ec();const o=ac(),a=ac();return t.forEach(((e,t)=>{const a=n.get(t.key);i.has(t.key)&&(void 0===a||a.mutation instanceof Uu)?r=r.insert(t.key,t):void 0!==a&&(o.set(t.key,a.mutation.getFieldMask()),Lu(a.mutation,t,a.mutation.getFieldMask(),as.now()))})),this.recalculateAndSaveOverlays(e,r).next((e=>(e.forEach(((e,t)=>o.set(e,t))),t.forEach(((e,t)=>{var n;return a.set(e,new zd(t,null!==(n=o.get(e))&&void 0!==n?n:null))})),a)))}recalculateAndSaveOverlays(e,t){const n=ac();let i=new Us(((e,t)=>e-t)),r=uc();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(const r of e)r.keys().forEach((e=>{const o=t.get(e);if(null===o)return;let a=n.get(e)||qs.empty();a=r.applyToLocalView(o,a),n.set(e,a);const s=(i.get(r.batchId)||uc()).add(e);i=i.insert(r.batchId,s)}))})).next((()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const i=a.getNext(),s=i.key,l=i.value,u=oc();l.forEach((e=>{if(!r.has(e)){const i=Ru(t.get(e),n.get(e));null!==i&&u.set(e,i),r=r.add(e)}})),o.push(this.documentOverlayCache.saveOverlays(e,s,u))}return ks.waitFor(o)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n){return function(e){return ds.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):ru(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)}getNextDocuments(e,t,n,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,i).next((r=>{const o=i-r.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,i-r.size):ks.resolve(rc());let a=-1,s=r;return o.next((t=>ks.forEach(t,((t,n)=>(a<n.largestBatchId&&(a=n.largestBatchId),r.get(t)?ks.resolve():this.getBaseDocument(e,t,n).next((e=>{s=s.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,r))).next((()=>this.computeViews(e,s,t,uc()))).next((e=>({batchId:a,changes:ic(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ds(t)).next((e=>{let t=nc();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n){const i=t.collectionGroup;let r=nc();return this.indexManager.getCollectionParents(e,i).next((o=>ks.forEach(o,(o=>{const a=function(e,t){return new Zl(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return this.getDocumentsMatchingCollectionQuery(e,a,n).next((e=>{e.forEach(((e,t)=>{r=r.insert(e,t)}))}))})).next((()=>r))))}getDocumentsMatchingCollectionQuery(e,t,n){let i;return this.remoteDocumentCache.getAllFromCollection(e,t.path,n).next((r=>(i=r,this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId)))).next((e=>{e.forEach(((e,t)=>{const n=t.getKey();null===i.get(n)&&(i=i.insert(n,Dl.newInvalidDocument(n)))}));let n=nc();return i.forEach(((i,r)=>{const o=e.get(i);void 0!==o&&Lu(o.mutation,r,qs.empty(),as.now()),hu(t,r)&&(n=n.insert(i,r))})),n}))}getBaseDocument(e,t,n){return null===n||1===n.mutation.type?this.remoteDocumentCache.getEntry(e,t):ks.resolve(Dl.newInvalidDocument(t))}}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class Yd{constructor(e){this.wt=e,this.Jn=new Map,this.Yn=new Map}getBundleMetadata(e,t){return ks.resolve(this.Jn.get(t))}saveBundleMetadata(e,t){var n;return this.Jn.set(t.id,{id:(n=t).id,version:n.version,createTime:Sc(n.createTime)}),ks.resolve()}getNamedQuery(e,t){return ks.resolve(this.Yn.get(t))}saveNamedQuery(e,t){return this.Yn.set(t.name,function(e){return{name:e.name,query:Bh(e.bundledQuery),readTime:Sc(e.readTime)}}(t)),ks.resolve()}}
/**
     * @license
     * Copyright 2022 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class Gd{constructor(){this.overlays=new Us(ds.comparator),this.Xn=new Map}getOverlay(e,t){return ks.resolve(this.overlays.get(t))}getOverlays(e,t){const n=rc();return ks.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,i)=>{this.ie(e,t,i)})),ks.resolve()}removeOverlaysForBatchId(e,t,n){const i=this.Xn.get(n);return void 0!==i&&(i.forEach((e=>this.overlays=this.overlays.remove(e))),this.Xn.delete(n)),ks.resolve()}getOverlaysForCollection(e,t,n){const i=rc(),r=t.length+1,o=new ds(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const e=a.getNext().value,o=e.getKey();if(!t.isPrefixOf(o.path))break;o.path.length===r&&e.largestBatchId>n&&i.set(e.getKey(),e)}return ks.resolve(i)}getOverlaysForCollectionGroup(e,t,n,i){let r=new Us(((e,t)=>e-t));const o=this.overlays.getIterator();for(;o.hasNext();){const e=o.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=r.get(e.largestBatchId);null===t&&(t=rc(),r=r.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const a=rc(),s=r.getIterator();for(;s.hasNext()&&(s.getNext().value.forEach(((e,t)=>a.set(e,t))),!(a.size()>=i)););return ks.resolve(a)}ie(e,t,n){const i=this.overlays.get(n.key);if(null!==i){const e=this.Xn.get(i.largestBatchId).delete(n.key);this.Xn.set(i.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new Eh(t,n));let r=this.Xn.get(t);void 0===r&&(r=uc(),this.Xn.set(t,r)),this.Xn.set(t,r.add(n.key))}}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class qd{constructor(){this.Zn=new $s(Wd.ts),this.es=new $s(Wd.ns)}isEmpty(){return this.Zn.isEmpty()}addReference(e,t){const n=new Wd(e,t);this.Zn=this.Zn.add(n),this.es=this.es.add(n)}ss(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.rs(new Wd(e,t))}os(e,t){e.forEach((e=>this.removeReference(e,t)))}us(e){const t=new ds(new us([])),n=new Wd(t,e),i=new Wd(t,e+1),r=[];return this.es.forEachInRange([n,i],(e=>{this.rs(e),r.push(e.key)})),r}cs(){this.Zn.forEach((e=>this.rs(e)))}rs(e){this.Zn=this.Zn.delete(e),this.es=this.es.delete(e)}hs(e){const t=new ds(new us([])),n=new Wd(t,e),i=new Wd(t,e+1);let r=uc();return this.es.forEachInRange([n,i],(e=>{r=r.add(e.key)})),r}containsKey(e){const t=new Wd(e,0),n=this.Zn.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class Wd{constructor(e,t){this.key=e,this.ls=t}static ts(e,t){return ds.comparator(e.key,t.key)||is(e.ls,t.ls)}static ns(e,t){return is(e.ls,t.ls)||ds.comparator(e.key,t.key)}}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class Xd{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.fs=1,this.ds=new $s(Wd.ts)}checkEmpty(e){return ks.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,i){const r=this.fs;this.fs++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new Sh(r,t,n,i);this.mutationQueue.push(o);for(const t of i)this.ds=this.ds.add(new Wd(t.key,r)),this.indexManager.addToCollectionParentIndex(e,t.key.path.popLast());return ks.resolve(o)}lookupMutationBatch(e,t){return ks.resolve(this._s(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,i=this.ws(n),r=i<0?0:i;return ks.resolve(this.mutationQueue.length>r?this.mutationQueue[r]:null)}getHighestUnacknowledgedBatchId(){return ks.resolve(0===this.mutationQueue.length?-1:this.fs-1)}getAllMutationBatches(e){return ks.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new Wd(t,0),i=new Wd(t,Number.POSITIVE_INFINITY),r=[];return this.ds.forEachInRange([n,i],(e=>{const t=this._s(e.ls);r.push(t)})),ks.resolve(r)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new $s(is);return t.forEach((e=>{const t=new Wd(e,0),i=new Wd(e,Number.POSITIVE_INFINITY);this.ds.forEachInRange([t,i],(e=>{n=n.add(e.ls)}))})),ks.resolve(this.gs(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,i=n.length+1;let r=n;ds.isDocumentKey(r)||(r=r.child(""));const o=new Wd(new ds(r),0);let a=new $s(is);return this.ds.forEachWhile((e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===i&&(a=a.add(e.ls)),!0)}),o),ks.resolve(this.gs(a))}gs(e){const t=[];return e.forEach((e=>{const n=this._s(e);null!==n&&t.push(n)})),t}removeMutationBatch(e,t){Ha(0===this.ys(t.batchId,"removed")),this.mutationQueue.shift();let n=this.ds;return ks.forEach(t.mutations,(i=>{const r=new Wd(i.key,t.batchId);return n=n.delete(r),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.ds=n}))}In(e){}containsKey(e,t){const n=new Wd(t,0),i=this.ds.firstAfterOrEqual(n);return ks.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,ks.resolve()}ys(e,t){return this.ws(e)}ws(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}_s(e){const t=this.ws(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class Kd{constructor(e){this.ps=e,this.docs=new Us(ds.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,i=this.docs.get(n),r=i?i.size:0,o=this.ps(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:o}),this.size+=o-r,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return ks.resolve(n?n.document.mutableCopy():Dl.newInvalidDocument(t))}getEntries(e,t){let n=ec();return t.forEach((e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():Dl.newInvalidDocument(e))})),ks.resolve(n)}getAllFromCollection(e,t,n){let i=ec();const r=new ds(t.child("")),o=this.docs.getIteratorFrom(r);for(;o.hasNext();){const{key:e,value:{document:r}}=o.getNext();if(!t.isPrefixOf(e.path))break;e.path.length>t.length+1||ws(vs(r),n)<=0||(i=i.insert(r.key,r.mutableCopy()))}return ks.resolve(i)}getAllFromCollectionGroup(e,t,n,i){Ua()}Is(e,t){return ks.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new Qd(this)}getSize(e){return ks.resolve(this.size)}}class Qd extends Md{constructor(e){super(),this.zn=e}applyChanges(e){const t=[];return this.changes.forEach(((n,i)=>{i.isValidDocument()?t.push(this.zn.addEntry(e,i)):this.zn.removeEntry(n)})),ks.waitFor(t)}getFromCache(e,t){return this.zn.getEntry(e,t)}getAllFromCache(e,t){return this.zn.getEntries(e,t)}}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class Jd{constructor(e){this.persistence=e,this.Ts=new Ju((e=>Al(e)),Ml),this.lastRemoteSnapshotVersion=ss.min(),this.highestTargetId=0,this.Es=0,this.As=new qd,this.targetCount=0,this.Rs=Pd.An()}forEachTarget(e,t){return this.Ts.forEach(((e,n)=>t(n))),ks.resolve()}getLastRemoteSnapshotVersion(e){return ks.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ks.resolve(this.Es)}allocateTargetId(e){return this.highestTargetId=this.Rs.next(),ks.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Es&&(this.Es=t),ks.resolve()}vn(e){this.Ts.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Rs=new Pd(t),this.highestTargetId=t),e.sequenceNumber>this.Es&&(this.Es=e.sequenceNumber)}addTargetData(e,t){return this.vn(t),this.targetCount+=1,ks.resolve()}updateTargetData(e,t){return this.vn(t),ks.resolve()}removeTargetData(e,t){return this.Ts.delete(t.target),this.As.us(t.targetId),this.targetCount-=1,ks.resolve()}removeTargets(e,t,n){let i=0;const r=[];return this.Ts.forEach(((o,a)=>{a.sequenceNumber<=t&&null===n.get(a.targetId)&&(this.Ts.delete(o),r.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)})),ks.waitFor(r).next((()=>i))}getTargetCount(e){return ks.resolve(this.targetCount)}getTargetData(e,t){const n=this.Ts.get(t)||null;return ks.resolve(n)}addMatchingKeys(e,t,n){return this.As.ss(t,n),ks.resolve()}removeMatchingKeys(e,t,n){this.As.os(t,n);const i=this.persistence.referenceDelegate,r=[];return i&&t.forEach((t=>{r.push(i.markPotentiallyOrphaned(e,t))})),ks.waitFor(r)}removeMatchingKeysForTargetId(e,t){return this.As.us(t),ks.resolve()}getMatchingKeysForTargetId(e,t){const n=this.As.hs(t);return ks.resolve(n)}containsKey(e,t){return ks.resolve(this.As.containsKey(t))}}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class Zd{constructor(e,t){this.bs={},this.overlays={},this.Ps=new Ls(0),this.vs=!1,this.vs=!0,this.referenceDelegate=e(this),this.Vs=new Jd(this),this.indexManager=new od,this.remoteDocumentCache=function(e){return new Kd(e)}((e=>this.referenceDelegate.Ss(e))),this.wt=new jh(t),this.Ds=new Yd(this.wt)}start(){return Promise.resolve()}shutdown(){return this.vs=!1,Promise.resolve()}get started(){return this.vs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Gd,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.bs[e.toKey()];return n||(n=new Xd(t,this.referenceDelegate),this.bs[e.toKey()]=n),n}getTargetCache(){return this.Vs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ds}runTransaction(e,t,n){La("MemoryPersistence","Starting transaction:",e);const i=new ef(this.Ps.next());return this.referenceDelegate.Cs(),n(i).next((e=>this.referenceDelegate.xs(i).next((()=>e)))).toPromise().then((e=>(i.raiseOnCommittedEvent(),e)))}Ns(e,t){return ks.or(Object.values(this.bs).map((n=>()=>n.containsKey(e,t))))}}class ef extends Ps{constructor(e){super(),this.currentSequenceNumber=e}}class tf{constructor(e){this.persistence=e,this.ks=new qd,this.Os=null}static Ms(e){return new tf(e)}get Fs(){if(this.Os)return this.Os;throw Ua()}addReference(e,t,n){return this.ks.addReference(n,t),this.Fs.delete(n.toString()),ks.resolve()}removeReference(e,t,n){return this.ks.removeReference(n,t),this.Fs.add(n.toString()),ks.resolve()}markPotentiallyOrphaned(e,t){return this.Fs.add(t.toString()),ks.resolve()}removeTarget(e,t){this.ks.us(t.targetId).forEach((e=>this.Fs.add(e.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.Fs.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}Cs(){this.Os=new Set}xs(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ks.forEach(this.Fs,(n=>{const i=ds.fromPath(n);return this.$s(e,i).next((e=>{e||t.removeEntry(i,ss.min())}))})).next((()=>(this.Os=null,t.apply(e))))}updateLimboDocument(e,t){return this.$s(e,t).next((e=>{e?this.Fs.delete(t.toString()):this.Fs.add(t.toString())}))}Ss(e){return 0}$s(e,t){return ks.or([()=>ks.resolve(this.ks.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ns(e,t)])}}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class nf{constructor(e){this.wt=e}O(e,t,n,i){const r=new Ts("createOrUpgrade",t);n<1&&i>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",nh,{unique:!0}),e.createObjectStore("documentMutations")}(e),rf(e),function(e){e.createObjectStore("remoteDocuments")}(e));let o=ks.resolve();return n<3&&i>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),rf(e)),o=o.next((()=>function(e){const t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ss.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(r)))),n<4&&i>=4&&(0!==n&&(o=o.next((()=>function(e,t){return t.store("mutations").K().next((n=>{e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",nh,{unique:!0});const i=t.store("mutations"),r=n.map((e=>i.put(e)));return ks.waitFor(r)}))}(e,r)))),o=o.next((()=>{!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&i>=5&&(o=o.next((()=>this.Bs(r)))),n<6&&i>=6&&(o=o.next((()=>(function(e){e.createObjectStore("remoteDocumentGlobal")}(e),this.Ls(r))))),n<7&&i>=7&&(o=o.next((()=>this.Us(r)))),n<8&&i>=8&&(o=o.next((()=>this.qs(e,r)))),n<9&&i>=9&&(o=o.next((()=>{!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&i>=10&&(o=o.next((()=>this.Ks(r)))),n<11&&i>=11&&(o=o.next((()=>{!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&i>=12&&(o=o.next((()=>{!function(e){const t=e.createObjectStore("documentOverlays",{keyPath:bh});t.createIndex("collectionPathOverlayIndex",yh,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",vh,{unique:!1})}(e)}))),n<13&&i>=13&&(o=o.next((()=>function(e){const t=e.createObjectStore("remoteDocumentsV14",{keyPath:ah});t.createIndex("documentKeyIndex",sh),t.createIndex("collectionGroupIndex",lh)}(e))).next((()=>this.Gs(e,r))).next((()=>e.deleteObjectStore("remoteDocuments")))),n<14&&i>=14&&(o=o.next((()=>this.Qs(e,r)))),n<15&&i>=15&&(o=o.next((()=>function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:fh}).createIndex("sequenceNumberIndex",ph,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:gh}).createIndex("documentKeyIndex",mh,{unique:!1})}(e)))),o}Ls(e){let t=0;return e.store("remoteDocuments").J(((e,n)=>{t+=bd(n)})).next((()=>{const n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}Bs(e){const t=e.store("mutationQueues"),n=e.store("mutations");return t.K().next((t=>ks.forEach(t,(t=>{const i=IDBKeyRange.bound([t.userId,-1],[t.userId,t.lastAcknowledgedBatchId]);return n.K("userMutationsIndex",i).next((n=>ks.forEach(n,(n=>{Ha(n.userId===t.userId);const i=Nh(this.wt,n);return md(e,t.userId,i).next((()=>{}))}))))}))))}Us(e){const t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((e=>{const i=[];return n.J(((n,r)=>{const o=new us(n),a=function(e){return[0,Jc(e)]}(o);i.push(t.get(a).next((n=>n?ks.resolve():(n=>t.put({targetId:0,path:Jc(n),sequenceNumber:e.highestListenSequenceNumber}))(o))))})).next((()=>ks.waitFor(i)))}))}qs(e,t){e.createObjectStore("collectionParents",{keyPath:dh});const n=t.store("collectionParents"),i=new ad,r=e=>{if(i.add(e)){const t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:Jc(i)})}};return t.store("remoteDocuments").J({H:!0},((e,t)=>{const n=new us(e);return r(n.popLast())})).next((()=>t.store("documentMutations").J({H:!0},(([e,t,n],i)=>{const o=th(t);return r(o.popLast())}))))}Ks(e){const t=e.store("targets");return t.J(((e,n)=>{const i=Lh(n),r=Fh(this.wt,i);return t.put(r)}))}Gs(e,t){const n=t.store("remoteDocuments"),i=[];return n.J(((e,n)=>{const r=t.store("remoteDocumentsV14"),o=(a=n,a.document?new ds(us.fromString(a.document.name).popFirst(5)):a.noDocument?ds.fromSegments(a.noDocument.path):a.unknownDocument?ds.fromSegments(a.unknownDocument.path):Ua()).path.toArray();var a;
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */const s={prefixPath:o.slice(0,o.length-2),collectionGroup:o[o.length-2],documentId:o[o.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};i.push(r.put(s))})).next((()=>ks.waitFor(i)))}Qs(e,t){const n=t.store("mutations"),i=Nd(this.wt),r=new Zd(tf.Ms,this.wt.ne);return n.K().next((e=>{const n=new Map;return e.forEach((e=>{var t;let i=null!==(t=n.get(e.userId))&&void 0!==t?t:uc();Nh(this.wt,e).keys().forEach((e=>i=i.add(e))),n.set(e.userId,i)})),ks.forEach(n,((e,n)=>{const o=new Aa(n),a=Gh.se(this.wt,o),s=r.getIndexManager(o),l=yd.se(o,this.wt,s,r.referenceDelegate);return new $d(i,l,a,s).recalculateAndSaveOverlaysForDocumentKeys(new kh(t,Ls.ot),e).next()}))}))}}function rf(e){e.createObjectStore("targetDocuments",{keyPath:ch}).createIndex("documentTargetsIndex",hh,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",uh,{unique:!0}),e.createObjectStore("targetGlobal")}const of="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class af{constructor(e,t,n,i,r,o,a,s,l,u,c=14){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.js=r,this.window=o,this.document=a,this.Ws=l,this.zs=u,this.Hs=c,this.Ps=null,this.vs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Js=null,this.inForeground=!1,this.Ys=null,this.Xs=null,this.Zs=Number.NEGATIVE_INFINITY,this.ti=e=>Promise.resolve(),!af.V())throw new Ya($a.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Cd(this,i),this.ei=t+"main",this.wt=new jh(s),this.ni=new Ss(this.ei,this.Hs,new nf(this.wt)),this.Vs=new Od(this.referenceDelegate,this.wt),this.remoteDocumentCache=Nd(this.wt),this.Ds=new zh,this.window&&this.window.localStorage?this.si=this.window.localStorage:(this.si=null,!1===u&&Fa("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ii().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ya($a.FAILED_PRECONDITION,of);return this.ri(),this.oi(),this.ui(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Vs.getHighestSequenceNumber(e)))})).then((e=>{this.Ps=new Ls(e,this.Ws)})).then((()=>{this.vs=!0})).catch((e=>(this.ni&&this.ni.close(),Promise.reject(e))))}ci(e){return this.ti=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.ni.F((async t=>{null===t.newVersion&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.js.enqueueAndForget((async()=>{this.started&&await this.ii()})))}ii(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>lf(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.ai(e).next((e=>{e||(this.isPrimary=!1,this.js.enqueueRetryable((()=>this.ti(!1))))}))})).next((()=>this.hi(e))).next((t=>this.isPrimary&&!t?this.li(e).next((()=>!1)):!!t&&this.fi(e).next((()=>!0)))))).catch((e=>{if(Ds(e))return La("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return La("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.js.enqueueRetryable((()=>this.ti(e))),this.isPrimary=e}))}ai(e){return sf(e).get("owner").next((e=>ks.resolve(this.di(e))))}_i(e){return lf(e).delete(this.clientId)}async wi(){if(this.isPrimary&&!this.mi(this.Zs,18e5)){this.Zs=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(e=>{const t=Th(e,"clientMetadata");return t.K().next((e=>{const n=this.gi(e,18e5),i=e.filter((e=>-1===n.indexOf(e)));return ks.forEach(i,(e=>t.delete(e.clientId))).next((()=>i))}))})).catch((()=>[]));if(this.si)for(const t of e)this.si.removeItem(this.yi(t.clientId))}}ui(){this.Xs=this.js.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.ii().then((()=>this.wi())).then((()=>this.ui()))))}di(e){return!!e&&e.ownerId===this.clientId}hi(e){return this.zs?ks.resolve(!0):sf(e).get("owner").next((t=>{if(null!==t&&this.mi(t.leaseTimestampMs,5e3)&&!this.pi(t.ownerId)){if(this.di(t)&&this.networkEnabled)return!0;if(!this.di(t)){if(!t.allowTabSynchronization)throw new Ya($a.FAILED_PRECONDITION,of);return!1}}return!(!this.networkEnabled||!this.inForeground)||lf(e).K().next((e=>void 0===this.gi(e,5e3).find((e=>{if(this.clientId!==e.clientId){const t=!this.networkEnabled&&e.networkEnabled,n=!this.inForeground&&e.inForeground,i=this.networkEnabled===e.networkEnabled;if(t||n&&i)return!0}return!1}))))})).next((e=>(this.isPrimary!==e&&La("IndexedDbPersistence",`Client ${e?"is":"is not"} eligible for a primary lease.`),e)))}async shutdown(){this.vs=!1,this.Ii(),this.Xs&&(this.Xs.cancel(),this.Xs=null),this.Ti(),this.Ei(),await this.ni.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(e=>{const t=new kh(e,Ls.ot);return this.li(t).next((()=>this._i(t)))})),this.ni.close(),this.Ai()}gi(e,t){return e.filter((e=>this.mi(e.updateTimeMs,t)&&!this.pi(e.clientId)))}Ri(){return this.runTransaction("getActiveClients","readonly",(e=>lf(e).K().next((e=>this.gi(e,18e5).map((e=>e.clientId))))))}get started(){return this.vs}getMutationQueue(e,t){return yd.se(e,this.wt,t,this.referenceDelegate)}getTargetCache(){return this.Vs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new ld(e,this.wt.ne.databaseId)}getDocumentOverlayCache(e){return Gh.se(this.wt,e)}getBundleCache(){return this.Ds}runTransaction(e,t,n){La("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",r=15===(o=this.Hs)?Oh:14===o?Ph:13===o?xh:12===o?wh:11===o?_h:void Ua();var o;let a;return this.ni.runTransaction(e,i,r,(i=>(a=new kh(i,this.Ps?this.Ps.next():Ls.ot),"readwrite-primary"===t?this.ai(a).next((e=>!!e||this.hi(a))).next((t=>{if(!t)throw Fa(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.js.enqueueRetryable((()=>this.ti(!1))),new Ya($a.FAILED_PRECONDITION,xs);return n(a)})).next((e=>this.fi(a).next((()=>e)))):this.bi(a).next((()=>n(a)))))).then((e=>(a.raiseOnCommittedEvent(),e)))}bi(e){return sf(e).get("owner").next((e=>{if(null!==e&&this.mi(e.leaseTimestampMs,5e3)&&!this.pi(e.ownerId)&&!this.di(e)&&!(this.zs||this.allowTabSynchronization&&e.allowTabSynchronization))throw new Ya($a.FAILED_PRECONDITION,of)}))}fi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return sf(e).put("owner",t)}static V(){return Ss.V()}li(e){const t=sf(e);return t.get("owner").next((e=>this.di(e)?(La("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):ks.resolve()))}mi(e,t){const n=Date.now();return!(e<n-t||e>n&&(Fa(`Detected an update time that is in the future: ${e} > ${n}`),1))}ri(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ys=()=>{this.js.enqueueAndForget((()=>(this.inForeground="visible"===this.document.visibilityState,this.ii())))},this.document.addEventListener("visibilitychange",this.Ys),this.inForeground="visible"===this.document.visibilityState)}Ti(){this.Ys&&(this.document.removeEventListener("visibilitychange",this.Ys),this.Ys=null)}oi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Js=()=>{this.Ii(),!et()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&navigator.appVersion.match(/Version\/1[45]/)&&this.js.enterRestrictedMode(!0),this.js.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Js))}Ei(){this.Js&&(this.window.removeEventListener("pagehide",this.Js),this.Js=null)}pi(e){var t;try{const n=null!==(null===(t=this.si)||void 0===t?void 0:t.getItem(this.yi(e)));return La("IndexedDbPersistence",`Client '${e}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(e){return Fa("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}Ii(){if(this.si)try{this.si.setItem(this.yi(this.clientId),String(Date.now()))}catch(e){Fa("Failed to set zombie client id.",e)}}Ai(){if(this.si)try{this.si.removeItem(this.yi(this.clientId))}catch(e){}}yi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function sf(e){return Th(e,"owner")}function lf(e){return Th(e,"clientMetadata")}function uf(e,t){let n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */}class cf{constructor(e,t,n,i){this.targetId=e,this.fromCache=t,this.Pi=n,this.vi=i}static Vi(e,t){let n=uc(),i=uc();for(const e of t.docChanges)switch(e.type){case 0:n=n.add(e.doc.key);break;case 1:i=i.add(e.doc.key)}return new cf(e,t.fromCache,n,i)}}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class hf{constructor(){this.Si=!1}initialize(e,t){this.Di=e,this.indexManager=t,this.Si=!0}getDocumentsMatchingQuery(e,t,n,i){return this.Ci(e,t).next((r=>r||this.xi(e,t,i,n))).next((n=>n||this.Ni(e,t)))}Ci(e,t){return ks.resolve(null)}xi(e,t,n,i){return function(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}(t)||i.isEqual(ss.min())?this.Ni(e,t):this.Di.getDocuments(e,n).next((r=>{const o=this.ki(t,r);return this.Oi(t,o,n,i)?this.Ni(e,t):(Na()<=Pt.DEBUG&&La("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),cu(t)),this.Mi(e,o,t,ys(i,-1)))}))}ki(e,t){let n=new $s(fu(e));return t.forEach(((t,i)=>{hu(e,i)&&(n=n.add(i))})),n}Oi(e,t,n,i){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const r="F"===e.limitType?t.last():t.first();return!!r&&(r.hasPendingWrites||r.version.compareTo(i)>0)}Ni(e,t){return Na()<=Pt.DEBUG&&La("QueryEngine","Using full collection scan to execute query:",cu(t)),this.Di.getDocumentsMatchingQuery(e,t,_s.min())}Mi(e,t,n,i){return this.Di.getDocumentsMatchingQuery(e,n,i).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class df{constructor(e,t,n,i){this.persistence=e,this.Fi=t,this.wt=i,this.$i=new Us(is),this.Bi=new Ju((e=>Al(e)),Ml),this.Li=new Map,this.Ui=e.getRemoteDocumentCache(),this.Vs=e.getTargetCache(),this.Ds=e.getBundleCache(),this.qi(n)}qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new $d(this.Ui,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ui.setIndexManager(this.indexManager),this.Fi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.$i)))}}function ff(e,t,n,i){return new df(e,t,n,i)}async function pf(e,t){const n=za(e);return await n.persistence.runTransaction("Handle user change","readonly",(e=>{let i;return n.mutationQueue.getAllMutationBatches(e).next((r=>(i=r,n.qi(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{const r=[],o=[];let a=uc();for(const e of i){r.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}for(const e of t){o.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}return n.localDocuments.getDocuments(e,a).next((e=>({Ki:e,removedBatchIds:r,addedBatchIds:o})))}))}))}function gf(e){const t=za(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.Vs.getLastRemoteSnapshotVersion(e)))}function mf(e,t,n){let i=uc(),r=uc();return n.forEach((e=>i=i.add(e))),t.getEntries(e,i).next((e=>{let i=ec();return n.forEach(((n,o)=>{const a=e.get(n);o.isFoundDocument()!==a.isFoundDocument()&&(r=r.add(n)),o.isNoDocument()&&o.version.isEqual(ss.min())?(t.removeEntry(n,o.readTime),i=i.insert(n,o)):!a.isValidDocument()||o.version.compareTo(a.version)>0||0===o.version.compareTo(a.version)&&a.hasPendingWrites?(t.addEntry(o),i=i.insert(n,o)):La("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",o.version)})),{Gi:i,Qi:r}}))}function bf(e,t){const n=za(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t))))}function yf(e,t){const n=za(e);return n.persistence.runTransaction("Allocate target","readwrite",(e=>{let i;return n.Vs.getTargetData(e,t).next((r=>r?(i=r,ks.resolve(i)):n.Vs.allocateTargetId(e).next((r=>(i=new Dh(t,r,0,e.currentSequenceNumber),n.Vs.addTargetData(e,i).next((()=>i)))))))})).then((e=>{const i=n.$i.get(e.targetId);return(null===i||e.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.$i=n.$i.insert(e.targetId,e),n.Bi.set(t,e.targetId)),e}))}async function vf(e,t,n){const i=za(e),r=i.$i.get(t),o=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",o,(e=>i.persistence.referenceDelegate.removeTarget(e,r)))}catch(e){if(!Ds(e))throw e;La("LocalStore",`Failed to update sequence numbers for target ${t}: ${e}`)}i.$i=i.$i.remove(t),i.Bi.delete(r.target)}function _f(e,t,n){const i=za(e);let r=ss.min(),o=uc();return i.persistence.runTransaction("Execute query","readonly",(e=>function(e,t,n){const i=za(e),r=i.Bi.get(n);return void 0!==r?ks.resolve(i.$i.get(r)):i.Vs.getTargetData(t,n)}(i,e,au(t)).next((t=>{if(t)return r=t.lastLimboFreeSnapshotVersion,i.Vs.getMatchingKeysForTargetId(e,t.targetId).next((e=>{o=e}))})).next((()=>i.Fi.getDocumentsMatchingQuery(e,t,n?r:ss.min(),n?o:uc()))).next((e=>(Pf(i,du(t),e),{documents:e,ji:o})))))}function wf(e,t){const n=za(e),i=za(n.Vs),r=n.$i.get(t);return r?Promise.resolve(r.target):n.persistence.runTransaction("Get target data","readonly",(e=>i.te(e,t).next((e=>e?e.target:null))))}function xf(e,t){const n=za(e),i=n.Li.get(t)||ss.min();return n.persistence.runTransaction("Get new document changes","readonly",(e=>n.Ui.getAllFromCollectionGroup(e,t,ys(i,-1),Number.MAX_SAFE_INTEGER))).then((e=>(Pf(n,t,e),e)))}function Pf(e,t,n){let i=ss.min();n.forEach(((e,t)=>{t.readTime.compareTo(i)>0&&(i=t.readTime)})),e.Li.set(t,i)}async function Of(e,t,n=uc()){const i=await yf(e,au(Bh(t.bundledQuery))),r=za(e);return r.persistence.runTransaction("Save named query","readwrite",(e=>{const o=Sc(t.readTime);if(i.snapshotVersion.compareTo(o)>=0)return r.Ds.saveNamedQuery(e,t);const a=i.withResumeToken(Ws.EMPTY_BYTE_STRING,o);return r.$i=r.$i.insert(a.targetId,a),r.Vs.updateTargetData(e,a).next((()=>r.Vs.removeMatchingKeysForTargetId(e,i.targetId))).next((()=>r.Vs.addMatchingKeys(e,n,i.targetId))).next((()=>r.Ds.saveNamedQuery(e,t)))}))}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function kf(e,t){return`firestore_clients_${e}_${t}`}function Tf(e,t,n){let i=`firestore_mutations_${e}_${n}`;return t.isAuthenticated()&&(i+=`_${t.uid}`),i}function Sf(e,t){return`firestore_targets_${e}_${t}`}class If{constructor(e,t,n,i){this.user=e,this.batchId=t,this.state=n,this.error=i}static Ji(e,t,n){const i=JSON.parse(n);let r,o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code,o&&(r=new Ya(i.error.code,i.error.message))),o?new If(e,t,i.state,r):(Fa("SharedClientState",`Failed to parse mutation state for ID '${t}': ${n}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Ef{constructor(e,t,n){this.targetId=e,this.state=t,this.error=n}static Ji(e,t){const n=JSON.parse(t);let i,r="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error);return r&&n.error&&(r="string"==typeof n.error.message&&"string"==typeof n.error.code,r&&(i=new Ya(n.error.code,n.error.message))),r?new Ef(e,n.state,i):(Fa("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Df{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ji(e,t){const n=JSON.parse(t);let i="object"==typeof n&&n.activeTargetIds instanceof Array,r=hc();for(let e=0;i&&e<n.activeTargetIds.length;++e)i=al(n.activeTargetIds[e]),r=r.add(n.activeTargetIds[e]);return i?new Df(e,r):(Fa("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class jf{constructor(e,t){this.clientId=e,this.onlineState=t}static Ji(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new jf(t.clientId,t.onlineState):(Fa("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Cf{constructor(){this.activeTargetIds=hc()}Xi(e){this.activeTargetIds=this.activeTargetIds.add(e)}Zi(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Yi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Af{constructor(e,t,n,i,r){this.window=e,this.js=t,this.persistenceKey=n,this.tr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.er=this.nr.bind(this),this.sr=new Us(is),this.started=!1,this.ir=[];const o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=r,this.rr=kf(this.persistenceKey,this.tr),this.ur=function(e){return`firestore_sequence_number_${e}`}
/**
     * @license
     * Copyright 2018 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */(this.persistenceKey),this.sr=this.sr.insert(this.tr,new Cf),this.cr=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.ar=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.hr=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.lr=function(e){return`firestore_online_state_${e}`}(this.persistenceKey),this.dr=function(e){return`firestore_bundle_loaded_v2_${e}`}(this.persistenceKey),this.window.addEventListener("storage",this.er)}static V(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Ri();for(const t of e){if(t===this.tr)continue;const e=this.getItem(kf(this.persistenceKey,t));if(e){const n=Df.Ji(t,e);n&&(this.sr=this.sr.insert(n.clientId,n))}}this._r();const t=this.storage.getItem(this.lr);if(t){const e=this.wr(t);e&&this.mr(e)}for(const e of this.ir)this.nr(e);this.ir=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.ur,JSON.stringify(e))}getAllActiveQueryTargets(){return this.gr(this.sr)}isActiveQueryTarget(e){let t=!1;return this.sr.forEach(((n,i)=>{i.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.yr(e,"pending")}updateMutationState(e,t,n){this.yr(e,t,n),this.pr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const n=this.storage.getItem(Sf(this.persistenceKey,e));if(n){const i=Ef.Ji(e,n);i&&(t=i.state)}}return this.Ir.Xi(e),this._r(),t}removeLocalQueryTarget(e){this.Ir.Zi(e),this._r()}isLocalQueryTarget(e){return this.Ir.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Sf(this.persistenceKey,e))}updateQueryState(e,t,n){this.Tr(e,t,n)}handleUserChange(e,t,n){t.forEach((e=>{this.pr(e)})),this.currentUser=e,n.forEach((e=>{this.addPendingMutation(e)}))}setOnlineState(e){this.Er(e)}notifyBundleLoaded(e){this.Ar(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.er),this.removeItem(this.rr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return La("SharedClientState","READ",e,t),t}setItem(e,t){La("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){La("SharedClientState","REMOVE",e),this.storage.removeItem(e)}nr(e){const t=e;if(t.storageArea===this.storage){if(La("SharedClientState","EVENT",t.key,t.newValue),t.key===this.rr)return void Fa("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.js.enqueueRetryable((async()=>{if(this.started){if(null!==t.key)if(this.cr.test(t.key)){if(null==t.newValue){const e=this.Rr(t.key);return this.br(e,null)}{const e=this.Pr(t.key,t.newValue);if(e)return this.br(e.clientId,e)}}else if(this.ar.test(t.key)){if(null!==t.newValue){const e=this.vr(t.key,t.newValue);if(e)return this.Vr(e)}}else if(this.hr.test(t.key)){if(null!==t.newValue){const e=this.Sr(t.key,t.newValue);if(e)return this.Dr(e)}}else if(t.key===this.lr){if(null!==t.newValue){const e=this.wr(t.newValue);if(e)return this.mr(e)}}else if(t.key===this.ur){const e=function(e){let t=Ls.ot;if(null!=e)try{const n=JSON.parse(e);Ha("number"==typeof n),t=n}catch(e){Fa("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(t.newValue);e!==Ls.ot&&this.sequenceNumberHandler(e)}else if(t.key===this.dr){const e=this.Cr(t.newValue);await Promise.all(e.map((e=>this.syncEngine.Nr(e))))}}else this.ir.push(t)}))}}get Ir(){return this.sr.get(this.tr)}_r(){this.setItem(this.rr,this.Ir.Yi())}yr(e,t,n){const i=new If(this.currentUser,e,t,n),r=Tf(this.persistenceKey,this.currentUser,e);this.setItem(r,i.Yi())}pr(e){const t=Tf(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Er(e){const t={clientId:this.tr,onlineState:e};this.storage.setItem(this.lr,JSON.stringify(t))}Tr(e,t,n){const i=Sf(this.persistenceKey,e),r=new Ef(e,t,n);this.setItem(i,r.Yi())}Ar(e){const t=JSON.stringify(Array.from(e));this.setItem(this.dr,t)}Rr(e){const t=this.cr.exec(e);return t?t[1]:null}Pr(e,t){const n=this.Rr(e);return Df.Ji(n,t)}vr(e,t){const n=this.ar.exec(e),i=Number(n[1]),r=void 0!==n[2]?n[2]:null;return If.Ji(new Aa(r),i,t)}Sr(e,t){const n=this.hr.exec(e),i=Number(n[1]);return Ef.Ji(i,t)}wr(e){return jf.Ji(e)}Cr(e){return JSON.parse(e)}async Vr(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.kr(e.batchId,e.state,e.error);La("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}Dr(e){return this.syncEngine.Or(e.targetId,e.state,e.error)}br(e,t){const n=t?this.sr.insert(e,t):this.sr.remove(e),i=this.gr(this.sr),r=this.gr(n),o=[],a=[];return r.forEach((e=>{i.has(e)||o.push(e)})),i.forEach((e=>{r.has(e)||a.push(e)})),this.syncEngine.Mr(o,a).then((()=>{this.sr=n}))}mr(e){this.sr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}gr(e){let t=hc();return e.forEach(((e,n)=>{t=t.unionWith(n.activeTargetIds)})),t}}class Mf{constructor(){this.Fr=new Cf,this.$r={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return this.Fr.Xi(e),this.$r[e]||"not-current"}updateQueryState(e,t,n){this.$r[e]=t}removeLocalQueryTarget(e){this.Fr.Zi(e)}isLocalQueryTarget(e){return this.Fr.activeTargetIds.has(e)}clearQueryState(e){delete this.$r[e]}getAllActiveQueryTargets(){return this.Fr.activeTargetIds}isActiveQueryTarget(e){return this.Fr.activeTargetIds.has(e)}start(){return this.Fr=new Cf,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class Rf{Br(e){}shutdown(){}}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class Nf{constructor(){this.Lr=()=>this.Ur(),this.qr=()=>this.Kr(),this.Gr=[],this.Qr()}Br(e){this.Gr.push(e)}shutdown(){window.removeEventListener("online",this.Lr),window.removeEventListener("offline",this.qr)}Qr(){window.addEventListener("online",this.Lr),window.addEventListener("offline",this.qr)}Ur(){La("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Gr)e(0)}Kr(){La("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Gr)e(1)}static V(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */const Lf={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class Ff{constructor(e){this.jr=e.jr,this.Wr=e.Wr}zr(e){this.Hr=e}Jr(e){this.Yr=e}onMessage(e){this.Xr=e}close(){this.Wr()}send(e){this.jr(e)}Zr(){this.Hr()}eo(e){this.Yr(e)}no(e){this.Xr(e)}}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class Bf extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http";this.so=t+"://"+e.host,this.io="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}ro(e,t,n,i,r){const o=this.oo(e,t);La("RestConnection","Sending: ",o,n);const a={};return this.uo(a,i,r),this.co(e,o,a,n).then((e=>(La("RestConnection","Received: ",e),e)),(t=>{throw Ba("RestConnection",`${e} failed with error: `,t,"url: ",o,"request:",n),t}))}ao(e,t,n,i,r,o){return this.ro(e,t,n,i,r)}uo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Ma,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}oo(e,t){const n=Lf[e];return`${this.so}/v1/${t}:${n}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}co(e,t,n,i){return new Promise(((r,o)=>{const a=new ja;a.listenOnce(ka.COMPLETE,(()=>{try{switch(a.getLastErrorCode()){case Oa.NO_ERROR:const t=a.getResponseJson();La("Connection","XHR received:",JSON.stringify(t)),r(t);break;case Oa.TIMEOUT:La("Connection",'RPC "'+e+'" timed out'),o(new Ya($a.DEADLINE_EXCEEDED,"Request time out"));break;case Oa.HTTP_ERROR:const n=a.getStatus();if(La("Connection",'RPC "'+e+'" failed with status:',n,"response text:",a.getResponseText()),n>0){const e=a.getResponseJson().error;if(e&&e.status&&e.message){const t=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values($a).indexOf(t)>=0?t:$a.UNKNOWN}(e.status);o(new Ya(t,e.message))}else o(new Ya($a.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new Ya($a.UNAVAILABLE,"Connection failed."));break;default:Ua()}}finally{La("Connection",'RPC "'+e+'" completed.')}}));const s=JSON.stringify(i);a.send(t,"POST",s,n,15)}))}ho(e,t,n){const i=[this.so,"/","google.firestore.v1.Firestore","/",e,"/channel"],r=new va,o=dr(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(a.xmlHttpFactory=new Ea({})),this.uo(a.initMessageHeaders,t,n),Ze()||nt()||Je().indexOf("Electron/")>=0||it()||Je().indexOf("MSAppHost/")>=0||tt()||(a.httpHeadersOverwriteParam="$httpHeaders");const s=i.join("");La("Connection","Creating WebChannel: "+s,a);const l=r.createWebChannel(s,a);let u=!1,c=!1;const h=new Ff({jr:e=>{c?La("Connection","Not sending because WebChannel is closed:",e):(u||(La("Connection","Opening WebChannel transport."),l.open(),u=!0),La("Connection","WebChannel sending:",e),l.send(e))},Wr:()=>l.close()}),d=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return d(l,Da.EventType.OPEN,(()=>{c||La("Connection","WebChannel transport opened.")})),d(l,Da.EventType.CLOSE,(()=>{c||(c=!0,La("Connection","WebChannel transport closed"),h.eo())})),d(l,Da.EventType.ERROR,(e=>{c||(c=!0,Ba("Connection","WebChannel transport errored:",e),h.eo(new Ya($a.UNAVAILABLE,"The operation could not be completed")))})),d(l,Da.EventType.MESSAGE,(e=>{var t;if(!c){const n=e.data[0];Ha(!!n);const i=n,r=i.error||(null===(t=i[0])||void 0===t?void 0:t.error);if(r){La("Connection","WebChannel received error:",r);const e=r.status;let t=function(e){const t=Wu[e];if(void 0!==t)return Qu(t)}(e),n=r.message;void 0===t&&(t=$a.INTERNAL,n="Unknown error status: "+e+" with message "+r.message),c=!0,h.eo(new Ya(t,n)),l.close()}else La("Connection","WebChannel received:",n),h.no(n)}})),d(o,Ta.STAT_EVENT,(e=>{e.stat===Sa?La("Connection","Detected buffering proxy"):e.stat===Ia&&La("Connection","Detected no buffering proxy")})),setTimeout((()=>{h.Zr()}),0),h}}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Vf(){return"undefined"!=typeof window?window:null}function Uf(){return"undefined"!=typeof document?document:null}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Hf(e){return new Pc(e,!0)}class zf{constructor(e,t,n=1e3,i=1.5,r=6e4){this.js=e,this.timerId=t,this.lo=n,this.fo=i,this._o=r,this.wo=0,this.mo=null,this.yo=Date.now(),this.reset()}reset(){this.wo=0}po(){this.wo=this._o}Io(e){this.cancel();const t=Math.floor(this.wo+this.To()),n=Math.max(0,Date.now()-this.yo),i=Math.max(0,t-n);i>0&&La("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.wo} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.mo=this.js.enqueueAfterDelay(this.timerId,i,(()=>(this.yo=Date.now(),e()))),this.wo*=this.fo,this.wo<this.lo&&(this.wo=this.lo),this.wo>this._o&&(this.wo=this._o)}Eo(){null!==this.mo&&(this.mo.skipDelay(),this.mo=null)}cancel(){null!==this.mo&&(this.mo.cancel(),this.mo=null)}To(){return(Math.random()-.5)*this.wo}}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class $f{constructor(e,t,n,i,r,o,a,s){this.js=e,this.Ao=n,this.Ro=i,this.bo=r,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=s,this.state=0,this.Po=0,this.vo=null,this.Vo=null,this.stream=null,this.So=new zf(e,t)}Do(){return 1===this.state||5===this.state||this.Co()}Co(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.xo()}async stop(){this.Do()&&await this.close(0)}No(){this.state=0,this.So.reset()}ko(){this.Co()&&null===this.vo&&(this.vo=this.js.enqueueAfterDelay(this.Ao,6e4,(()=>this.Oo())))}Mo(e){this.Fo(),this.stream.send(e)}async Oo(){if(this.Co())return this.close(0)}Fo(){this.vo&&(this.vo.cancel(),this.vo=null)}$o(){this.Vo&&(this.Vo.cancel(),this.Vo=null)}async close(e,t){this.Fo(),this.$o(),this.So.cancel(),this.Po++,4!==e?this.So.reset():t&&t.code===$a.RESOURCE_EXHAUSTED?(Fa(t.toString()),Fa("Using maximum backoff delay to prevent overloading the backend."),this.So.po()):t&&t.code===$a.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Bo(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Jr(t)}Bo(){}auth(){this.state=1;const e=this.Lo(this.Po),t=this.Po;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([e,n])=>{this.Po===t&&this.Uo(e,n)}),(t=>{e((()=>{const e=new Ya($a.UNKNOWN,"Fetching auth token failed: "+t.message);return this.qo(e)}))}))}Uo(e,t){const n=this.Lo(this.Po);this.stream=this.Ko(e,t),this.stream.zr((()=>{n((()=>(this.state=2,this.Vo=this.js.enqueueAfterDelay(this.Ro,1e4,(()=>(this.Co()&&(this.state=3),Promise.resolve()))),this.listener.zr())))})),this.stream.Jr((e=>{n((()=>this.qo(e)))})),this.stream.onMessage((e=>{n((()=>this.onMessage(e)))}))}xo(){this.state=5,this.So.Io((async()=>{this.state=0,this.start()}))}qo(e){return La("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Lo(e){return t=>{this.js.enqueueAndForget((()=>this.Po===e?t():(La("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Yf extends $f{constructor(e,t,n,i,r,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,i,o),this.wt=r}Ko(e,t){return this.bo.ho("Listen",e,t)}onMessage(e){this.So.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const i=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Ua()}(t.targetChange.targetChangeType||"NO_CHANGE"),r=t.targetChange.targetIds||[],o=function(e,t){return e.dt?(Ha(void 0===t||"string"==typeof t),Ws.fromBase64String(t||"")):(Ha(void 0===t||t instanceof Uint8Array),Ws.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),a=t.targetChange.cause,s=a&&function(e){const t=void 0===e.code?$a.UNKNOWN:Qu(e.code);return new Ya(t,e.message||"")}(a);n=new mc(i,r,o,s||null)}else if("documentChange"in t){t.documentChange;const i=t.documentChange;i.document,i.document.name,i.document.updateTime;const r=jc(e,i.document.name),o=Sc(i.document.updateTime),a=new Il({mapValue:{fields:i.document.fields}}),s=Dl.newFoundDocument(r,o,a),l=i.targetIds||[],u=i.removedTargetIds||[];n=new pc(l,u,s.key,s)}else if("documentDelete"in t){t.documentDelete;const i=t.documentDelete;i.document;const r=jc(e,i.document),o=i.readTime?Sc(i.readTime):ss.min(),a=Dl.newNoDocument(r,o),s=i.removedTargetIds||[];n=new pc([],s,a.key,a)}else if("documentRemove"in t){t.documentRemove;const i=t.documentRemove;i.document;const r=jc(e,i.document),o=i.removedTargetIds||[];n=new pc([],o,r,null)}else{if(!("filter"in t))return Ua();{t.filter;const e=t.filter;e.targetId;const i=e.count||0,r=new qu(i),o=e.targetId;n=new gc(o,r)}}return n}(this.wt,e),n=function(e){if(!("targetChange"in e))return ss.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?ss.min():t.readTime?Sc(t.readTime):ss.min()}(e);return this.listener.Go(t,n)}Qo(e){const t={};t.database=Mc(this.wt),t.addTarget=function(e,t){let n;const i=t.target;return n=Rl(i)?{documents:Vc(e,i)}:{query:Uc(e,i)},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=kc(e,t.resumeToken):t.snapshotVersion.compareTo(ss.min())>0&&(n.readTime=Oc(e,t.snapshotVersion.toTimestamp())),n}(this.wt,e);const n=function(e,t){const n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Ua()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.wt,e);n&&(t.labels=n),this.Mo(t)}jo(e){const t={};t.database=Mc(this.wt),t.removeTarget=e,this.Mo(t)}}class Gf extends $f{constructor(e,t,n,i,r,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,i,o),this.wt=r,this.Wo=!1}get zo(){return this.Wo}start(){this.Wo=!1,this.lastStreamToken=void 0,super.start()}Bo(){this.Wo&&this.Ho([])}Ko(e,t){return this.bo.ho("Write",e,t)}onMessage(e){if(Ha(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Wo){this.So.reset();const t=function(e,t){return e&&e.length>0?(Ha(void 0!==t),e.map((e=>function(e,t){let n=e.updateTime?Sc(e.updateTime):Sc(t);return n.isEqual(ss.min())&&(n=Sc(t)),new ju(n,e.transformResults||[])}(e,t)))):[]}(e.writeResults,e.commitTime),n=Sc(e.commitTime);return this.listener.Jo(n,t)}return Ha(!e.writeResults||0===e.writeResults.length),this.Wo=!0,this.listener.Yo()}Xo(){const e={};e.database=Mc(this.wt),this.Mo(e)}Ho(e){const t={streamToken:this.lastStreamToken,writes:e.map((e=>Fc(this.wt,e)))};this.Mo(t)}}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class qf extends class{}{constructor(e,t,n,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.bo=n,this.wt=i,this.Zo=!1}tu(){if(this.Zo)throw new Ya($a.FAILED_PRECONDITION,"The client has already been terminated.")}ro(e,t,n){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([i,r])=>this.bo.ro(e,t,n,i,r))).catch((e=>{throw"FirebaseError"===e.name?(e.code===$a.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Ya($a.UNKNOWN,e.toString())}))}ao(e,t,n,i){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([r,o])=>this.bo.ao(e,t,n,r,o,i))).catch((e=>{throw"FirebaseError"===e.name?(e.code===$a.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Ya($a.UNKNOWN,e.toString())}))}terminate(){this.Zo=!0}}class Wf{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.eu=0,this.nu=null,this.su=!0}iu(){0===this.eu&&(this.ru("Unknown"),this.nu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.nu=null,this.ou("Backend didn't respond within 10 seconds."),this.ru("Offline"),Promise.resolve()))))}uu(e){"Online"===this.state?this.ru("Unknown"):(this.eu++,this.eu>=1&&(this.cu(),this.ou(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ru("Offline")))}set(e){this.cu(),this.eu=0,"Online"===e&&(this.su=!1),this.ru(e)}ru(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ou(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.su?(Fa(t),this.su=!1):La("OnlineStateTracker",t)}cu(){null!==this.nu&&(this.nu.cancel(),this.nu=null)}}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class Xf{constructor(e,t,n,i,r){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.au=[],this.hu=new Map,this.lu=new Set,this.fu=[],this.du=r,this.du.Br((e=>{n.enqueueAndForget((async()=>{rp(this)&&(La("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=za(e);t.lu.add(4),await Qf(t),t._u.set("Unknown"),t.lu.delete(4),await Kf(t)}(this))}))})),this._u=new Wf(n,i)}}async function Kf(e){if(rp(e))for(const t of e.fu)await t(!0)}async function Qf(e){for(const t of e.fu)await t(!1)}function Jf(e,t){const n=za(e);n.hu.has(t.targetId)||(n.hu.set(t.targetId,t),ip(n)?np(n):xp(n).Co()&&ep(n,t))}function Zf(e,t){const n=za(e),i=xp(n);n.hu.delete(t),i.Co()&&tp(n,t),0===n.hu.size&&(i.Co()?i.ko():rp(n)&&n._u.set("Unknown"))}function ep(e,t){e.wu.Nt(t.targetId),xp(e).Qo(t)}function tp(e,t){e.wu.Nt(t),xp(e).jo(t)}function np(e){e.wu=new yc({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),te:t=>e.hu.get(t)||null}),xp(e).start(),e._u.iu()}function ip(e){return rp(e)&&!xp(e).Do()&&e.hu.size>0}function rp(e){return 0===za(e).lu.size}function op(e){e.wu=void 0}async function ap(e){e.hu.forEach(((t,n)=>{ep(e,t)}))}async function sp(e,t){op(e),ip(e)?(e._u.uu(t),np(e)):e._u.set("Unknown")}async function lp(e,t,n){if(e._u.set("Online"),t instanceof mc&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const i of t.targetIds)e.hu.has(i)&&(await e.remoteSyncer.rejectListen(i,n),e.hu.delete(i),e.wu.removeTarget(i))}(e,t)}catch(n){La("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await up(e,n)}else if(t instanceof pc?e.wu.Ut(t):t instanceof gc?e.wu.zt(t):e.wu.Gt(t),!n.isEqual(ss.min()))try{const t=await gf(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.wu.Yt(t);return n.targetChanges.forEach(((n,i)=>{if(n.resumeToken.approximateByteSize()>0){const r=e.hu.get(i);r&&e.hu.set(i,r.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((t=>{const n=e.hu.get(t);if(!n)return;e.hu.set(t,n.withResumeToken(Ws.EMPTY_BYTE_STRING,n.snapshotVersion)),tp(e,t);const i=new Dh(n.target,t,1,n.sequenceNumber);ep(e,i)})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){La("RemoteStore","Failed to raise snapshot:",t),await up(e,t)}}async function up(e,t,n){if(!Ds(t))throw t;e.lu.add(1),await Qf(e),e._u.set("Offline"),n||(n=()=>gf(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{La("RemoteStore","Retrying IndexedDB access"),await n(),e.lu.delete(1),await Kf(e)}))}function cp(e,t){return t().catch((n=>up(e,n,t)))}async function hp(e){const t=za(e),n=Pp(t);let i=t.au.length>0?t.au[t.au.length-1].batchId:-1;for(;dp(t);)try{const e=await bf(t.localStore,i);if(null===e){0===t.au.length&&n.ko();break}i=e.batchId,fp(t,e)}catch(e){await up(t,e)}pp(t)&&gp(t)}function dp(e){return rp(e)&&e.au.length<10}function fp(e,t){e.au.push(t);const n=Pp(e);n.Co()&&n.zo&&n.Ho(t.mutations)}function pp(e){return rp(e)&&!Pp(e).Do()&&e.au.length>0}function gp(e){Pp(e).start()}async function mp(e){Pp(e).Xo()}async function bp(e){const t=Pp(e);for(const n of e.au)t.Ho(n.mutations)}async function yp(e,t,n){const i=e.au.shift(),r=Ih.from(i,t,n);await cp(e,(()=>e.remoteSyncer.applySuccessfulWrite(r))),await hp(e)}async function vp(e,t){t&&Pp(e).zo&&await async function(e,t){if(Ku(n=t.code)&&n!==$a.ABORTED){const n=e.au.shift();Pp(e).No(),await cp(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await hp(e)}var n}(e,t),pp(e)&&gp(e)}async function _p(e,t){const n=za(e);n.asyncQueue.verifyOperationInProgress(),La("RemoteStore","RemoteStore received new credentials");const i=rp(n);n.lu.add(3),await Qf(n),i&&n._u.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.lu.delete(3),await Kf(n)}async function wp(e,t){const n=za(e);t?(n.lu.delete(2),await Kf(n)):t||(n.lu.add(2),await Qf(n),n._u.set("Unknown"))}function xp(e){return e.mu||(e.mu=function(e,t,n){const i=za(e);return i.tu(),new Yf(t,i.bo,i.authCredentials,i.appCheckCredentials,i.wt,n)
/**
     * @license
     * Copyright 2018 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */}(e.datastore,e.asyncQueue,{zr:ap.bind(null,e),Jr:sp.bind(null,e),Go:lp.bind(null,e)}),e.fu.push((async t=>{t?(e.mu.No(),ip(e)?np(e):e._u.set("Unknown")):(await e.mu.stop(),op(e))}))),e.mu}function Pp(e){return e.gu||(e.gu=function(e,t,n){const i=za(e);return i.tu(),new Gf(t,i.bo,i.authCredentials,i.appCheckCredentials,i.wt,n)}(e.datastore,e.asyncQueue,{zr:mp.bind(null,e),Jr:vp.bind(null,e),Yo:bp.bind(null,e),Jo:yp.bind(null,e)}),e.fu.push((async t=>{t?(e.gu.No(),await hp(e)):(await e.gu.stop(),e.au.length>0&&(La("RemoteStore",`Stopping write stream with ${e.au.length} pending writes`),e.au=[]))}))),e.gu
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */}class Op{constructor(e,t,n,i,r){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=i,this.removalCallback=r,this.deferred=new Ga,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}static createAndSchedule(e,t,n,i,r){const o=Date.now()+n,a=new Op(e,t,o,i,r);return a.start(n),a}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ya($a.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function kp(e,t){if(Fa("AsyncQueue",`${t}: ${e}`),Ds(e))return new Ya($a.UNAVAILABLE,`${t}: ${e}`);throw e}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class Tp{constructor(e){this.comparator=e?(t,n)=>e(t,n)||ds.comparator(t.key,n.key):(e,t)=>ds.comparator(e.key,t.key),this.keyedMap=nc(),this.sortedSet=new Us(this.comparator)}static emptySet(e){return new Tp(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Tp))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,i=n.getNext().key;if(!e.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new Tp;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class Sp{constructor(){this.yu=new Us(ds.comparator)}track(e){const t=e.doc.key,n=this.yu.get(t);n?0!==e.type&&3===n.type?this.yu=this.yu.insert(t,e):3===e.type&&1!==n.type?this.yu=this.yu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.yu=this.yu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.yu=this.yu.remove(t):1===e.type&&2===n.type?this.yu=this.yu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):Ua():this.yu=this.yu.insert(t,e)}pu(){const e=[];return this.yu.inorderTraversal(((t,n)=>{e.push(n)})),e}}class Ip{constructor(e,t,n,i,r,o,a,s){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=i,this.mutatedKeys=r,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=s}static fromInitialDocuments(e,t,n,i){const r=[];return t.forEach((e=>{r.push({type:0,doc:e})})),new Ip(e,t,Tp.emptySet(t),r,n,i,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&lu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let e=0;e<t.length;e++)if(t[e].type!==n[e].type||!t[e].doc.isEqual(n[e].doc))return!1;return!0}}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class Ep{constructor(){this.Iu=void 0,this.listeners=[]}}class Dp{constructor(){this.queries=new Ju((e=>uu(e)),lu),this.onlineState="Unknown",this.Tu=new Set}}async function jp(e,t){const n=za(e),i=t.query;let r=!1,o=n.queries.get(i);if(o||(r=!0,o=new Ep),r)try{o.Iu=await n.onListen(i)}catch(e){const n=kp(e,`Initialization of query '${cu(t.query)}' failed`);return void t.onError(n)}n.queries.set(i,o),o.listeners.push(t),t.Eu(n.onlineState),o.Iu&&t.Au(o.Iu)&&Rp(n)}async function Cp(e,t){const n=za(e),i=t.query;let r=!1;const o=n.queries.get(i);if(o){const e=o.listeners.indexOf(t);e>=0&&(o.listeners.splice(e,1),r=0===o.listeners.length)}if(r)return n.queries.delete(i),n.onUnlisten(i)}function Ap(e,t){const n=za(e);let i=!1;for(const e of t){const t=e.query,r=n.queries.get(t);if(r){for(const t of r.listeners)t.Au(e)&&(i=!0);r.Iu=e}}i&&Rp(n)}function Mp(e,t,n){const i=za(e),r=i.queries.get(t);if(r)for(const e of r.listeners)e.onError(n);i.queries.delete(t)}function Rp(e){e.Tu.forEach((e=>{e.next()}))}class Np{constructor(e,t,n){this.query=e,this.Ru=t,this.bu=!1,this.Pu=null,this.onlineState="Unknown",this.options=n||{}}Au(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new Ip(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.bu?this.vu(e)&&(this.Ru.next(e),t=!0):this.Vu(e,this.onlineState)&&(this.Su(e),t=!0),this.Pu=e,t}onError(e){this.Ru.error(e)}Eu(e){this.onlineState=e;let t=!1;return this.Pu&&!this.bu&&this.Vu(this.Pu,e)&&(this.Su(this.Pu),t=!0),t}Vu(e,t){if(!e.fromCache)return!0;const n="Offline"!==t;return!(this.options.Du&&n||e.docs.isEmpty()&&"Offline"!==t)}vu(e){if(e.docChanges.length>0)return!0;const t=this.Pu&&this.Pu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}Su(e){e=Ip.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Ru.next(e)}}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class Lp{constructor(e,t){this.payload=e,this.byteLength=t}Cu(){return"metadata"in this.payload}}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class Fp{constructor(e){this.wt=e}Wi(e){return jc(this.wt,e)}zi(e){return e.metadata.exists?Lc(this.wt,e.document,!1):Dl.newNoDocument(this.Wi(e.metadata.name),this.Hi(e.metadata.readTime))}Hi(e){return Sc(e)}}class Bp{constructor(e,t,n){this.xu=e,this.localStore=t,this.wt=n,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Vp(e)}Nu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const n=us.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ku(e){const t=new Map,n=new Fp(this.wt);for(const i of e)if(i.metadata.queries){const e=n.Wi(i.metadata.name);for(const n of i.metadata.queries){const i=(t.get(n)||uc()).add(e);t.set(n,i)}}return t}async complete(){const e=await async function(e,t,n,i){const r=za(e);let o=uc(),a=ec();for(const e of n){const n=t.Wi(e.metadata.name);e.document&&(o=o.add(n));const i=t.zi(e);i.setReadTime(t.Hi(e.metadata.readTime)),a=a.insert(n,i)}const s=r.Ui.newChangeBuffer({trackRemovals:!0}),l=await yf(r,function(e){return au(tu(us.fromString(`__bundle__/docs/${e}`)))}(i));return r.persistence.runTransaction("Apply bundle documents","readwrite",(e=>mf(e,s,a).next((t=>(s.apply(e),t))).next((t=>r.Vs.removeMatchingKeysForTargetId(e,l.targetId).next((()=>r.Vs.addMatchingKeys(e,o,l.targetId))).next((()=>r.localDocuments.getLocalViewOfDocuments(e,t.Gi,t.Qi))).next((()=>t.Gi))))))}(this.localStore,new Fp(this.wt),this.documents,this.xu.id),t=this.ku(this.documents);for(const e of this.queries)await Of(this.localStore,e,t.get(e.name));return this.progress.taskState="Success",{progress:this.progress,Ou:this.collectionGroups,Mu:e}}}function Vp(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class Up{constructor(e){this.key=e}}class Hp{constructor(e){this.key=e}}class zp{constructor(e,t){this.query=e,this.Fu=t,this.$u=null,this.current=!1,this.Bu=uc(),this.mutatedKeys=uc(),this.Lu=fu(e),this.Uu=new Tp(this.Lu)}get qu(){return this.Fu}Ku(e,t){const n=t?t.Gu:new Sp,i=t?t.Uu:this.Uu;let r=t?t.mutatedKeys:this.mutatedKeys,o=i,a=!1;const s="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,l="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((e,t)=>{const u=i.get(e),c=hu(this.query,t)?t:null,h=!!u&&this.mutatedKeys.has(u.key),d=!!c&&(c.hasLocalMutations||this.mutatedKeys.has(c.key)&&c.hasCommittedMutations);let f=!1;u&&c?u.data.isEqual(c.data)?h!==d&&(n.track({type:3,doc:c}),f=!0):this.Qu(u,c)||(n.track({type:2,doc:c}),f=!0,(s&&this.Lu(c,s)>0||l&&this.Lu(c,l)<0)&&(a=!0)):!u&&c?(n.track({type:0,doc:c}),f=!0):u&&!c&&(n.track({type:1,doc:u}),f=!0,(s||l)&&(a=!0)),f&&(c?(o=o.add(c),r=d?r.add(e):r.delete(e)):(o=o.delete(e),r=r.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){const e="F"===this.query.limitType?o.last():o.first();o=o.delete(e.key),r=r.delete(e.key),n.track({type:1,doc:e})}return{Uu:o,Gu:n,Oi:a,mutatedKeys:r}}Qu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n){const i=this.Uu;this.Uu=e.Uu,this.mutatedKeys=e.mutatedKeys;const r=e.Gu.pu();r.sort(((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ua()}};return n(e)-n(t)}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */(e.type,t.type)||this.Lu(e.doc,t.doc))),this.ju(n);const o=t?this.Wu():[],a=0===this.Bu.size&&this.current?1:0,s=a!==this.$u;return this.$u=a,0!==r.length||s?{snapshot:new Ip(this.query,e.Uu,i,r,e.mutatedKeys,0===a,s,!1),zu:o}:{zu:o}}Eu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Uu:this.Uu,Gu:new Sp,mutatedKeys:this.mutatedKeys,Oi:!1},!1)):{zu:[]}}Hu(e){return!this.Fu.has(e)&&!!this.Uu.has(e)&&!this.Uu.get(e).hasLocalMutations}ju(e){e&&(e.addedDocuments.forEach((e=>this.Fu=this.Fu.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.Fu=this.Fu.delete(e))),this.current=e.current)}Wu(){if(!this.current)return[];const e=this.Bu;this.Bu=uc(),this.Uu.forEach((e=>{this.Hu(e.key)&&(this.Bu=this.Bu.add(e.key))}));const t=[];return e.forEach((e=>{this.Bu.has(e)||t.push(new Hp(e))})),this.Bu.forEach((n=>{e.has(n)||t.push(new Up(n))})),t}Ju(e){this.Fu=e.ji,this.Bu=uc();const t=this.Ku(e.documents);return this.applyChanges(t,!0)}Yu(){return Ip.fromInitialDocuments(this.query,this.Uu,this.mutatedKeys,0===this.$u)}}class $p{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class Yp{constructor(e){this.key=e,this.Xu=!1}}class Gp{constructor(e,t,n,i,r,o){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=i,this.currentUser=r,this.maxConcurrentLimboResolutions=o,this.Zu={},this.tc=new Ju((e=>uu(e)),lu),this.ec=new Map,this.nc=new Set,this.sc=new Us(ds.comparator),this.ic=new Map,this.rc=new qd,this.oc={},this.uc=new Map,this.cc=Pd.Rn(),this.onlineState="Unknown",this.ac=void 0}get isPrimaryClient(){return!0===this.ac}}async function qp(e,t){const n=vg(e);let i,r;const o=n.tc.get(t);if(o)i=o.targetId,n.sharedClientState.addLocalQueryTarget(i),r=o.view.Yu();else{const e=await yf(n.localStore,au(t));n.isPrimaryClient&&Jf(n.remoteStore,e);const o=n.sharedClientState.addLocalQueryTarget(e.targetId);i=e.targetId,r=await Wp(n,t,i,"current"===o)}return r}async function Wp(e,t,n,i){e.hc=(t,n,i)=>async function(e,t,n,i){let r=t.view.Ku(n);r.Oi&&(r=await _f(e.localStore,t.query,!1).then((({documents:e})=>t.view.Ku(e,r))));const o=i&&i.targetChanges.get(t.targetId),a=t.view.applyChanges(r,e.isPrimaryClient,o);return og(e,t.targetId,a.zu),a.snapshot}(e,t,n,i);const r=await _f(e.localStore,t,!0),o=new zp(t,r.ji),a=o.Ku(r.documents),s=fc.createSynthesizedTargetChangeForCurrentChange(n,i&&"Offline"!==e.onlineState),l=o.applyChanges(a,e.isPrimaryClient,s);og(e,n,l.zu);const u=new $p(t,n,o);return e.tc.set(t,u),e.ec.has(n)?e.ec.get(n).push(t):e.ec.set(n,[t]),l.snapshot}async function Xp(e,t){const n=za(e),i=n.tc.get(t),r=n.ec.get(i.targetId);if(r.length>1)return n.ec.set(i.targetId,r.filter((e=>!lu(e,t)))),void n.tc.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(i.targetId),n.sharedClientState.isActiveQueryTarget(i.targetId)||await vf(n.localStore,i.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(i.targetId),Zf(n.remoteStore,i.targetId),ig(n,i.targetId)})).catch(Os)):(ig(n,i.targetId),await vf(n.localStore,i.targetId,!0))}async function Kp(e,t){const n=za(e);try{const e=await function(e,t){const n=za(e),i=t.snapshotVersion;let r=n.$i;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(e=>{const o=n.Ui.newChangeBuffer({trackRemovals:!0});r=n.$i;const a=[];t.targetChanges.forEach(((o,s)=>{const l=r.get(s);if(!l)return;a.push(n.Vs.removeMatchingKeys(e,o.removedDocuments,s).next((()=>n.Vs.addMatchingKeys(e,o.addedDocuments,s))));let u=l.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.has(s)?u=u.withResumeToken(Ws.EMPTY_BYTE_STRING,ss.min()).withLastLimboFreeSnapshotVersion(ss.min()):o.resumeToken.approximateByteSize()>0&&(u=u.withResumeToken(o.resumeToken,i)),r=r.insert(s,u),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(l,u,o)&&a.push(n.Vs.updateTargetData(e,u))}));let s=ec(),l=uc();if(t.documentUpdates.forEach((i=>{t.resolvedLimboDocuments.has(i)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(e,i))})),a.push(mf(e,o,t.documentUpdates).next((e=>{s=e.Gi,l=e.Qi}))),!i.isEqual(ss.min())){const t=n.Vs.getLastRemoteSnapshotVersion(e).next((t=>n.Vs.setTargetsMetadata(e,e.currentSequenceNumber,i)));a.push(t)}return ks.waitFor(a).next((()=>o.apply(e))).next((()=>n.localDocuments.getLocalViewOfDocuments(e,s,l))).next((()=>s))})).then((e=>(n.$i=r,e)))}(n.localStore,t);t.targetChanges.forEach(((e,t)=>{const i=n.ic.get(t);i&&(Ha(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?i.Xu=!0:e.modifiedDocuments.size>0?Ha(i.Xu):e.removedDocuments.size>0&&(Ha(i.Xu),i.Xu=!1))})),await lg(n,e,t)}catch(e){await Os(e)}}function Qp(e,t,n){const i=za(e);if(i.isPrimaryClient&&0===n||!i.isPrimaryClient&&1===n){const e=[];i.tc.forEach(((n,i)=>{const r=i.view.Eu(t);r.snapshot&&e.push(r.snapshot)})),function(e,t){const n=za(e);n.onlineState=t;let i=!1;n.queries.forEach(((e,n)=>{for(const e of n.listeners)e.Eu(t)&&(i=!0)})),i&&Rp(n)}(i.eventManager,t),e.length&&i.Zu.Go(e),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}async function Jp(e,t,n){const i=za(e);i.sharedClientState.updateQueryState(t,"rejected",n);const r=i.ic.get(t),o=r&&r.key;if(o){let e=new Us(ds.comparator);e=e.insert(o,Dl.newNoDocument(o,ss.min()));const n=uc().add(o),r=new dc(ss.min(),new Map,new $s(is),e,n);await Kp(i,r),i.sc=i.sc.remove(o),i.ic.delete(t),sg(i)}else await vf(i.localStore,t,!1).then((()=>ig(i,t,n))).catch(Os)}async function Zp(e,t){const n=za(e),i=t.batch.batchId;try{const e=await function(e,t){const n=za(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(e=>{const i=t.batch.keys(),r=n.Ui.newChangeBuffer({trackRemovals:!0});return function(e,t,n,i){const r=n.batch,o=r.keys();let a=ks.resolve();return o.forEach((e=>{a=a.next((()=>i.getEntry(t,e))).next((t=>{const o=n.docVersions.get(e);Ha(null!==o),t.version.compareTo(o)<0&&(r.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),i.addEntry(t)))}))})),a.next((()=>e.mutationQueue.removeMutationBatch(t,r)))}(n,e,t,r).next((()=>r.apply(e))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,i,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=uc();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t)))).next((()=>n.localDocuments.getDocuments(e,i)))}))}(n.localStore,t);ng(n,i,null),tg(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await lg(n,e)}catch(e){await Os(e)}}async function eg(e,t,n){const i=za(e);try{const e=await function(e,t){const n=za(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(e=>{let i;return n.mutationQueue.lookupMutationBatch(e,t).next((t=>(Ha(null!==t),i=t.keys(),n.mutationQueue.removeMutationBatch(e,t)))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,i,t))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,i))).next((()=>n.localDocuments.getDocuments(e,i)))}))}(i.localStore,t);ng(i,t,n),tg(i,t),i.sharedClientState.updateMutationState(t,"rejected",n),await lg(i,e)}catch(n){await Os(n)}}function tg(e,t){(e.uc.get(t)||[]).forEach((e=>{e.resolve()})),e.uc.delete(t)}function ng(e,t,n){const i=za(e);let r=i.oc[i.currentUser.toKey()];if(r){const e=r.get(t);e&&(n?e.reject(n):e.resolve(),r=r.remove(t)),i.oc[i.currentUser.toKey()]=r}}function ig(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const i of e.ec.get(t))e.tc.delete(i),n&&e.Zu.lc(i,n);e.ec.delete(t),e.isPrimaryClient&&e.rc.us(t).forEach((t=>{e.rc.containsKey(t)||rg(e,t)}))}function rg(e,t){e.nc.delete(t.path.canonicalString());const n=e.sc.get(t);null!==n&&(Zf(e.remoteStore,n),e.sc=e.sc.remove(t),e.ic.delete(n),sg(e))}function og(e,t,n){for(const i of n)i instanceof Up?(e.rc.addReference(i.key,t),ag(e,i)):i instanceof Hp?(La("SyncEngine","Document no longer in limbo: "+i.key),e.rc.removeReference(i.key,t),e.rc.containsKey(i.key)||rg(e,i.key)):Ua()}function ag(e,t){const n=t.key,i=n.path.canonicalString();e.sc.get(n)||e.nc.has(i)||(La("SyncEngine","New document in limbo: "+n),e.nc.add(i),sg(e))}function sg(e){for(;e.nc.size>0&&e.sc.size<e.maxConcurrentLimboResolutions;){const t=e.nc.values().next().value;e.nc.delete(t);const n=new ds(us.fromString(t)),i=e.cc.next();e.ic.set(i,new Yp(n)),e.sc=e.sc.insert(n,i),Jf(e.remoteStore,new Dh(au(tu(n.path)),i,2,Ls.ot))}}async function lg(e,t,n){const i=za(e),r=[],o=[],a=[];i.tc.isEmpty()||(i.tc.forEach(((e,s)=>{a.push(i.hc(s,t,n).then((e=>{if(e){i.isPrimaryClient&&i.sharedClientState.updateQueryState(s.targetId,e.fromCache?"not-current":"current"),r.push(e);const t=cf.Vi(s.targetId,e);o.push(t)}})))})),await Promise.all(a),i.Zu.Go(r),await async function(e,t){const n=za(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(e=>ks.forEach(t,(t=>ks.forEach(t.Pi,(i=>n.persistence.referenceDelegate.addReference(e,t.targetId,i))).next((()=>ks.forEach(t.vi,(i=>n.persistence.referenceDelegate.removeReference(e,t.targetId,i)))))))))}catch(e){if(!Ds(e))throw e;La("LocalStore","Failed to update sequence numbers: "+e)}for(const e of t){const t=e.targetId;if(!e.fromCache){const e=n.$i.get(t),i=e.snapshotVersion,r=e.withLastLimboFreeSnapshotVersion(i);n.$i=n.$i.insert(t,r)}}}(i.localStore,o))}async function ug(e,t){const n=za(e);if(!n.currentUser.isEqual(t)){La("SyncEngine","User change. New user:",t.toKey());const e=await pf(n.localStore,t);n.currentUser=t,function(e,t){e.uc.forEach((e=>{e.forEach((e=>{e.reject(new Ya($a.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.uc.clear()}(n),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await lg(n,e.Ki)}}function cg(e,t){const n=za(e),i=n.ic.get(t);if(i&&i.Xu)return uc().add(i.key);{let e=uc();const i=n.ec.get(t);if(!i)return e;for(const t of i){const i=n.tc.get(t);e=e.unionWith(i.view.qu)}return e}}async function hg(e,t){const n=za(e),i=await _f(n.localStore,t.query,!0),r=t.view.Ju(i);return n.isPrimaryClient&&og(n,t.targetId,r.zu),r}async function dg(e,t){const n=za(e);return xf(n.localStore,t).then((e=>lg(n,e)))}async function fg(e,t,n,i){const r=za(e),o=await function(e,t){const n=za(e),i=za(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(e=>i.yn(e,t).next((t=>t?n.localDocuments.getDocuments(e,t):ks.resolve(null)))))}(r.localStore,t);null!==o?("pending"===n?await hp(r.remoteStore):"acknowledged"===n||"rejected"===n?(ng(r,t,i||null),tg(r,t),function(e,t){za(za(e).mutationQueue).In(t)}(r.localStore,t)):Ua(),await lg(r,o)):La("SyncEngine","Cannot apply mutation batch with id: "+t)}async function pg(e,t,n){const i=za(e),r=[],o=[];for(const e of t){let t;const n=i.ec.get(e);if(n&&0!==n.length){t=await yf(i.localStore,au(n[0]));for(const e of n){const t=i.tc.get(e),n=await hg(i,t);n.snapshot&&o.push(n.snapshot)}}else{const n=await wf(i.localStore,e);t=await yf(i.localStore,n),await Wp(i,gg(n),e,!1)}r.push(t)}return i.Zu.Go(o),r}function gg(e){return eu(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function mg(e){const t=za(e);return za(za(t.localStore).persistence).Ri()}async function bg(e,t,n,i){const r=za(e);if(r.ac)return void La("SyncEngine","Ignoring unexpected query state notification.");const o=r.ec.get(t);if(o&&o.length>0)switch(n){case"current":case"not-current":{const e=await xf(r.localStore,du(o[0])),i=dc.createSynthesizedRemoteEventForCurrentChange(t,"current"===n);await lg(r,e,i);break}case"rejected":await vf(r.localStore,t,!0),ig(r,t,i);break;default:Ua()}}async function yg(e,t,n){const i=vg(e);if(i.ac){for(const e of t){if(i.ec.has(e)){La("SyncEngine","Adding an already active target "+e);continue}const t=await wf(i.localStore,e),n=await yf(i.localStore,t);await Wp(i,gg(t),n.targetId,!1),Jf(i.remoteStore,n)}for(const e of n)i.ec.has(e)&&await vf(i.localStore,e,!1).then((()=>{Zf(i.remoteStore,e),ig(i,e)})).catch(Os)}}function vg(e){const t=za(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Kp.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=cg.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Jp.bind(null,t),t.Zu.Go=Ap.bind(null,t.eventManager),t.Zu.lc=Mp.bind(null,t.eventManager),t}function _g(e){const t=za(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Zp.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=eg.bind(null,t),t}class wg{constructor(){this.synchronizeTabs=!1}async initialize(e){this.wt=Hf(e.databaseInfo.databaseId),this.sharedClientState=this.dc(e),this.persistence=this._c(e),await this.persistence.start(),this.localStore=this.wc(e),this.gcScheduler=this.mc(e,this.localStore),this.indexBackfillerScheduler=this.gc(e,this.localStore)}mc(e,t){return null}gc(e,t){return null}wc(e){return ff(this.persistence,new hf,e.initialUser,this.wt)}_c(e){return new Zd(tf.Ms,this.wt)}dc(e){return new Mf}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class xg extends wg{constructor(e,t,n){super(),this.yc=e,this.cacheSizeBytes=t,this.forceOwnership=n,this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.yc.initialize(this,e),await _g(this.yc.syncEngine),await hp(this.yc.remoteStore),await this.persistence.ci((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}wc(e){return ff(this.persistence,new hf,e.initialUser,this.wt)}mc(e,t){const n=this.persistence.referenceDelegate.garbageCollector;return new Dd(n,e.asyncQueue,t)}gc(e,t){const n=new Ns(t,this.persistence);return new Rs(e.asyncQueue,n)}_c(e){const t=uf(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?gd.withCacheSize(this.cacheSizeBytes):gd.DEFAULT;return new af(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,Vf(),Uf(),this.wt,this.sharedClientState,!!this.forceOwnership)}dc(e){return new Mf}}class Pg extends xg{constructor(e,t){super(e,t,!1),this.yc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.yc.syncEngine;this.sharedClientState instanceof Af&&(this.sharedClientState.syncEngine={kr:fg.bind(null,t),Or:bg.bind(null,t),Mr:yg.bind(null,t),Ri:mg.bind(null,t),Nr:dg.bind(null,t)},await this.sharedClientState.start()),await this.persistence.ci((async e=>{await async function(e,t){const n=za(e);if(vg(n),_g(n),!0===t&&!0!==n.ac){const e=n.sharedClientState.getAllActiveQueryTargets(),t=await pg(n,e.toArray());n.ac=!0,await wp(n.remoteStore,!0);for(const e of t)Jf(n.remoteStore,e)}else if(!1===t&&!1!==n.ac){const e=[];let t=Promise.resolve();n.ec.forEach(((i,r)=>{n.sharedClientState.isLocalQueryTarget(r)?e.push(r):t=t.then((()=>(ig(n,r),vf(n.localStore,r,!0)))),Zf(n.remoteStore,r)})),await t,await pg(n,e),function(e){const t=za(e);t.ic.forEach(((e,n)=>{Zf(t.remoteStore,n)})),t.rc.cs(),t.ic=new Map,t.sc=new Us(ds.comparator)}(n),n.ac=!1,await wp(n.remoteStore,!1)}}(this.yc.syncEngine,e),this.gcScheduler&&(e&&!this.gcScheduler.started?this.gcScheduler.start():e||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(e&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():e||this.indexBackfillerScheduler.stop())}))}dc(e){const t=Vf();if(!Af.V(t))throw new Ya($a.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=uf(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Af(t,e.asyncQueue,n,e.clientId,e.initialUser)}}class Og{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>Qp(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=ug.bind(null,this.syncEngine),await wp(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new Dp}createDatastore(e){const t=Hf(e.databaseInfo.databaseId),n=(i=e.databaseInfo,new Bf(i));var i;return function(e,t,n,i){return new qf(e,t,n,i)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return t=this.localStore,n=this.datastore,i=e.asyncQueue,r=e=>Qp(this.syncEngine,e,0),o=Nf.V()?new Nf:new Rf,new Xf(t,n,i,r,o);var t,n,i,r,o}createSyncEngine(e,t){return function(e,t,n,i,r,o,a){const s=new Gp(e,t,n,i,r,o);return a&&(s.ac=!0),s}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return async function(e){const t=za(e);La("RemoteStore","RemoteStore shutting down."),t.lu.add(5),await Qf(t),t.du.shutdown(),t._u.set("Unknown")}(this.remoteStore)}}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function kg(e,t=10240){let n=0;return{async read(){if(n<e.byteLength){const i={value:e.slice(n,n+t),done:!1};return n+=t,i}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.reject("unimplemented")}}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class Tg{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ic(this.observer.next,e)}error(e){this.observer.error?this.Ic(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Tc(){this.muted=!0}Ic(e,t){this.muted||setTimeout((()=>{this.muted||e(t)}),0)}}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class Sg{constructor(e,t){this.Ec=e,this.wt=t,this.metadata=new Ga,this.buffer=new Uint8Array,this.Ac=new TextDecoder("utf-8"),this.Rc().then((e=>{e&&e.Cu()?this.metadata.resolve(e.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==e?void 0:e.payload)}`))}),(e=>this.metadata.reject(e)))}close(){return this.Ec.cancel()}async getMetadata(){return this.metadata.promise}async fc(){return await this.getMetadata(),this.Rc()}async Rc(){const e=await this.bc();if(null===e)return null;const t=this.Ac.decode(e),n=Number(t);isNaN(n)&&this.Pc(`length string (${t}) is not valid number`);const i=await this.vc(n);return new Lp(JSON.parse(i),e.length+n)}Vc(){return this.buffer.findIndex((e=>e==="{".charCodeAt(0)))}async bc(){for(;this.Vc()<0&&!await this.Sc(););if(0===this.buffer.length)return null;const e=this.Vc();e<0&&this.Pc("Reached the end of bundle when a length string is expected.");const t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async vc(e){for(;this.buffer.length<e;)await this.Sc()&&this.Pc("Reached the end of bundle when more is expected.");const t=this.Ac.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}Pc(e){throw this.Ec.cancel(),new Error(`Invalid bundle format: ${e}`)}async Sc(){const e=await this.Ec.read();if(!e.done){const t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class Ig{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new Ya($a.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const t=await async function(e,t){const n=za(e),i=Mc(n.wt)+"/documents",r={documents:t.map((e=>Dc(n.wt,e)))},o=await n.ao("BatchGetDocuments",i,r,t.length),a=new Map;o.forEach((e=>{const t=function(e,t){return"found"in t?function(e,t){Ha(!!t.found),t.found.name,t.found.updateTime;const n=jc(e,t.found.name),i=Sc(t.found.updateTime),r=new Il({mapValue:{fields:t.found.fields}});return Dl.newFoundDocument(n,i,r)}(e,t):"missing"in t?function(e,t){Ha(!!t.missing),Ha(!!t.readTime);const n=jc(e,t.missing),i=Sc(t.readTime);return Dl.newNoDocument(n,i)}(e,t):Ua()}(n.wt,e);a.set(t.key.toString(),t)}));const s=[];return t.forEach((e=>{const t=a.get(e.toString());Ha(!!t),s.push(t)})),s}(this.datastore,e);return t.forEach((e=>this.recordVersion(e))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}delete(e){this.write(new Yu(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((e,t)=>{const n=ds.fromPath(t);this.mutations.push(new Gu(n,this.precondition(n)))})),await async function(e,t){const n=za(e),i=Mc(n.wt)+"/documents",r={writes:t.map((e=>Fc(n.wt,e)))};await n.ro("Commit",i,r)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Ua();t=ss.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new Ya($a.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?Cu.updateTime(t):Cu.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(ss.min()))throw new Ya($a.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Cu.updateTime(t)}return Cu.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class Eg{constructor(e,t,n,i,r){this.asyncQueue=e,this.datastore=t,this.options=n,this.updateFunction=i,this.deferred=r,this.Dc=n.maxAttempts,this.So=new zf(this.asyncQueue,"transaction_retry")}run(){this.Dc-=1,this.Cc()}Cc(){this.So.Io((async()=>{const e=new Ig(this.datastore),t=this.xc(e);t&&t.then((t=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(t)})).catch((e=>{this.Nc(e)}))))})).catch((e=>{this.Nc(e)}))}))}xc(e){try{const t=this.updateFunction(e);return!rl(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}Nc(e){this.Dc>0&&this.kc(e)?(this.Dc-=1,this.asyncQueue.enqueueAndForget((()=>(this.Cc(),Promise.resolve())))):this.deferred.reject(e)}kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!Ku(t)}return!1}}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class Dg{constructor(e,t,n,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=i,this.user=Aa.UNAUTHENTICATED,this.clientId=ns.I(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,(async e=>{La("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(La("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user))))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ya($a.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ga;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this.onlineComponents&&await this.onlineComponents.terminate(),this.offlineComponents&&await this.offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=kp(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function jg(e,t){e.asyncQueue.verifyOperationInProgress(),La("FirestoreClient","Initializing OfflineComponentProvider");const n=await e.getConfiguration();await t.initialize(n);let i=n.initialUser;e.setCredentialChangeListener((async e=>{i.isEqual(e)||(await pf(t.localStore,e),i=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e.offlineComponents=t}async function Cg(e,t){e.asyncQueue.verifyOperationInProgress();const n=await Ag(e);La("FirestoreClient","Initializing OnlineComponentProvider");const i=await e.getConfiguration();await t.initialize(n,i),e.setCredentialChangeListener((e=>_p(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>_p(t.remoteStore,n))),e.onlineComponents=t}async function Ag(e){return e.offlineComponents||(La("FirestoreClient","Using default OfflineComponentProvider"),await jg(e,new wg)),e.offlineComponents}async function Mg(e){return e.onlineComponents||(La("FirestoreClient","Using default OnlineComponentProvider"),await Cg(e,new Og)),e.onlineComponents}function Rg(e){return Ag(e).then((e=>e.persistence))}function Ng(e){return Ag(e).then((e=>e.localStore))}function Lg(e){return Mg(e).then((e=>e.remoteStore))}function Fg(e){return Mg(e).then((e=>e.syncEngine))}async function Bg(e){const t=await Mg(e),n=t.eventManager;return n.onListen=qp.bind(null,t.syncEngine),n.onUnlisten=Xp.bind(null,t.syncEngine),n}function Vg(e,t,n={}){const i=new Ga;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,i,r){const o=new Tg({next:o=>{t.enqueueAndForget((()=>Cp(e,a)));const s=o.docs.has(n);!s&&o.fromCache?r.reject(new Ya($a.UNAVAILABLE,"Failed to get document because the client is offline.")):s&&o.fromCache&&i&&"server"===i.source?r.reject(new Ya($a.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):r.resolve(o)},error:e=>r.reject(e)}),a=new Np(tu(n.path),o,{includeMetadataChanges:!0,Du:!0});return jp(e,a)}(await Bg(e),e.asyncQueue,t,n,i))),i.promise}function Ug(e,t,n={}){const i=new Ga;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,i,r){const o=new Tg({next:n=>{t.enqueueAndForget((()=>Cp(e,a))),n.fromCache&&"server"===i.source?r.reject(new Ya($a.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):r.resolve(n)},error:e=>r.reject(e)}),a=new Np(n,o,{includeMetadataChanges:!0,Du:!0});return jp(e,a)}(await Bg(e),e.asyncQueue,t,n,i))),i.promise}function Hg(e,t,n,i){const r=function(e,t){let n;return n="string"==typeof e?(new TextEncoder).encode(e):e,function(e,t){return new Sg(e,t)}(function(e,t){if(e instanceof Uint8Array)return kg(e,t);if(e instanceof ArrayBuffer)return kg(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(n),t)}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */(n,Hf(t));e.asyncQueue.enqueueAndForget((async()=>{!function(e,t,n){const i=za(e);(async function(e,t,n){try{const i=await t.getMetadata();if(await function(e,t){const n=za(e),i=Sc(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(e=>n.Ds.getBundleMetadata(e,t.id))).then((e=>!!e&&e.createTime.compareTo(i)>=0))}(e.localStore,i))return await t.close(),n._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(i)),Promise.resolve(new Set);n._updateProgress(Vp(i));const r=new Bp(i,e.localStore,t.wt);let o=await t.fc();for(;o;){const e=await r.Nu(o);e&&n._updateProgress(e),o=await t.fc()}const a=await r.complete();return await lg(e,a.Mu,void 0),await function(e,t){const n=za(e);return n.persistence.runTransaction("Save bundle","readwrite",(e=>n.Ds.saveBundleMetadata(e,t)))}(e.localStore,i),n._completeWith(a.progress),Promise.resolve(a.Ou)}catch(e){return Ba("SyncEngine",`Loading bundle failed with ${e}`),n._failWith(e),Promise.resolve(new Set)}}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */)(i,t,n).then((e=>{i.sharedClientState.notifyBundleLoaded(e)}))}(await Fg(e),r,i)}))}const zg=new Map;
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function $g(e,t,n){if(!n)throw new Ya($a.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function Yg(e,t,n,i){if(!0===t&&!0===i)throw new Ya($a.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function Gg(e){if(!ds.isDocumentKey(e))throw new Ya($a.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function qg(e){if(ds.isDocumentKey(e))throw new Ya($a.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function Wg(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return"function"==typeof e?"a function":Ua()}function Xg(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Ya($a.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Wg(e);throw new Ya($a.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}function Kg(e,t){if(t<=0)throw new Ya($a.INVALID_ARGUMENT,`Function ${e}() requires a positive number, but it was: ${t}.`)}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class Qg{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Ya($a.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Ya($a.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,Yg("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class Jg{constructor(e,t,n){this._authCredentials=t,this._appCheckCredentials=n,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Qg({}),this._settingsFrozen=!1,e instanceof il?this._databaseId=e:(this._app=e,this._databaseId=function(e){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Ya($a.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new il(e.options.projectId)}(e))}get app(){if(!this._app)throw new Ya($a.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Ya($a.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Qg(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Wa;switch(e.type){case"gapi":const t=e.client;return Ha(!("object"!=typeof t||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty)),new Ja(t,e.sessionIndex||"0",e.iamToken||null);case"provider":return e.client;default:throw new Ya($a.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=zg.get(e);t&&(La("ComponentProvider","Removing Datastore"),zg.delete(e),t.terminate())}(this),Promise.resolve()}}function Zg(e,t,n,i={}){var r;const o=(e=Xg(e,Jg))._getSettings();if("firestore.googleapis.com"!==o.host&&o.host!==t&&Ba("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},o),{host:`${t}:${n}`,ssl:!1})),i.mockUserToken){let t,n;if("string"==typeof i.mockUserToken)t=i.mockUserToken,n=Aa.MOCK_USER;else{t=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",i=e.iat||0,r=e.sub||e.user_id;if(!r)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:i,exp:i+3600,auth_time:i,sub:r,user_id:r,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Xe(JSON.stringify({alg:"none",type:"JWT"})),Xe(JSON.stringify(o)),""].join(".")}(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);const o=i.mockUserToken.sub||i.mockUserToken.user_id;if(!o)throw new Ya($a.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new Aa(o)}e._authCredentials=new Xa(new qa(t,n))}}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class em{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new nm(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new em(this.firestore,e,this._key)}}class tm{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new tm(this.firestore,e,this._query)}}class nm extends tm{constructor(e,t,n){super(e,t,tu(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new em(this.firestore,null,new ds(e))}withConverter(e){return new nm(this.firestore,e,this._path)}}function im(e,t,...n){if(e=bt(e),$g("collection","path",t),e instanceof Jg){const i=us.fromString(t,...n);return qg(i),new nm(e,null,i)}{if(!(e instanceof em||e instanceof nm))throw new Ya($a.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=e._path.child(us.fromString(t,...n));return qg(i),new nm(e.firestore,null,i)}}function rm(e,t,...n){if(e=bt(e),1===arguments.length&&(t=ns.I()),$g("doc","path",t),e instanceof Jg){const i=us.fromString(t,...n);return Gg(i),new em(e,null,new ds(i))}{if(!(e instanceof em||e instanceof nm))throw new Ya($a.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=e._path.child(us.fromString(t,...n));return Gg(i),new em(e.firestore,e instanceof nm?e.converter:null,new ds(i))}}function om(e,t){return e=bt(e),t=bt(t),(e instanceof em||e instanceof nm)&&(t instanceof em||t instanceof nm)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function am(e,t){return e=bt(e),t=bt(t),e instanceof tm&&t instanceof tm&&e.firestore===t.firestore&&lu(e._query,t._query)&&e.converter===t.converter
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */}class sm{constructor(){this.Oc=Promise.resolve(),this.Mc=[],this.Fc=!1,this.$c=[],this.Bc=null,this.Lc=!1,this.Uc=!1,this.qc=[],this.So=new zf(this,"async_queue_retry"),this.Kc=()=>{const e=Uf();e&&La("AsyncQueue","Visibility state changed to "+e.visibilityState),this.So.Eo()};const e=Uf();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Kc)}get isShuttingDown(){return this.Fc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Gc(),this.Qc(e)}enterRestrictedMode(e){if(!this.Fc){this.Fc=!0,this.Uc=e||!1;const t=Uf();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Kc)}}enqueue(e){if(this.Gc(),this.Fc)return new Promise((()=>{}));const t=new Ga;return this.Qc((()=>this.Fc&&this.Uc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Mc.push(e),this.jc())))}async jc(){if(0!==this.Mc.length){try{await this.Mc[0](),this.Mc.shift(),this.So.reset()}catch(e){if(!Ds(e))throw e;La("AsyncQueue","Operation failed with retryable error: "+e)}this.Mc.length>0&&this.So.Io((()=>this.jc()))}}Qc(e){const t=this.Oc.then((()=>(this.Lc=!0,e().catch((e=>{this.Bc=e,this.Lc=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */(e);throw Fa("INTERNAL UNHANDLED ERROR: ",t),e})).then((e=>(this.Lc=!1,e))))));return this.Oc=t,t}enqueueAfterDelay(e,t,n){this.Gc(),this.qc.indexOf(e)>-1&&(t=0);const i=Op.createAndSchedule(this,e,t,n,(e=>this.Wc(e)));return this.$c.push(i),i}Gc(){this.Bc&&Ua()}verifyOperationInProgress(){}async zc(){let e;do{e=this.Oc,await e}while(e!==this.Oc)}Hc(e){for(const t of this.$c)if(t.timerId===e)return!0;return!1}Jc(e){return this.zc().then((()=>{this.$c.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this.$c)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.zc()}))}Yc(e){this.qc.push(e)}Wc(e){const t=this.$c.indexOf(e);this.$c.splice(t,1)}}function lm(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const e of["next","error","complete"])if(e in n&&"function"==typeof n[e])return!0;return!1}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */(e)}class um{constructor(){this._progressObserver={},this._taskCompletionResolver=new Ga,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,n){this._progressObserver={next:e,error:t,complete:n}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class cm extends Jg{constructor(e,t,n){super(e,t,n),this.type="firestore",this._queue=new sm,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||dm(this),this._firestoreClient.terminate()}}function hm(e){return e._firestoreClient||dm(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function dm(e){var t;const n=e._freezeSettings(),i=function(e,t,n,i){return new nl(e,t,n,i.host,i.ssl,i.experimentalForceLongPolling,i.experimentalAutoDetectLongPolling,i.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new Dg(e._authCredentials,e._appCheckCredentials,e._queue,i)}function fm(e,t,n){const i=new Ga;return e.asyncQueue.enqueue((async()=>{try{await jg(e,n),await Cg(e,t),i.resolve()}catch(e){const t=e;if(!function(e){return"FirebaseError"===e.name?e.code===$a.FAILED_PRECONDITION||e.code===$a.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||(22===e.code||20===e.code||11===e.code)}(t))throw t;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+t),i.reject(t)}})).then((()=>i.promise))}function pm(e){return function(e){const t=new Ga;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t){const n=za(e);rp(n.remoteStore)||La("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const e=await function(e){const t=za(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(e=>t.mutationQueue.getHighestUnacknowledgedBatchId(e)))}(n.localStore);if(-1===e)return void t.resolve();const i=n.uc.get(e)||[];i.push(t),n.uc.set(e,i)}catch(e){const n=kp(e,"Initialization of waitForPendingWrites() operation failed");t.reject(n)}}(await Fg(e),t))),t.promise}(hm(e=Xg(e,cm)))}function gm(e){return function(e){return e.asyncQueue.enqueue((async()=>{const t=await Rg(e),n=await Lg(e);return t.setNetworkEnabled(!0),function(e){const t=za(e);return t.lu.delete(0),Kf(t)}(n)}))}(hm(e=Xg(e,cm)))}function mm(e){return function(e){return e.asyncQueue.enqueue((async()=>{const t=await Rg(e),n=await Lg(e);return t.setNetworkEnabled(!1),async function(e){const t=za(e);t.lu.add(0),await Qf(t),t._u.set("Offline")}(n)}))}(hm(e=Xg(e,cm)))}function bm(e,t){return function(e,t){return e.asyncQueue.enqueue((async()=>function(e,t){const n=za(e);return n.persistence.runTransaction("Get named query","readonly",(e=>n.Ds.getNamedQuery(e,t)))}(await Ng(e),t)))}(hm(e=Xg(e,cm)),t).then((t=>t?new tm(e,null,t.query):null))}function ym(e){if(e._initialized||e._terminated)throw new Ya($a.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class vm{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Ya($a.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new hs(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class _m{constructor(e){this._byteString=e}static fromBase64String(e){try{return new _m(Ws.fromBase64String(e))}catch(e){throw new Ya($a.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new _m(Ws.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class wm{constructor(e){this._methodName=e}}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class xm{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ya($a.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ya($a.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return is(this._lat,e._lat)||is(this._long,e._long)}}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */const Pm=/^__.*__$/;class Om{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new Uu(e,this.data,this.fieldMask,t,this.fieldTransforms):new Vu(e,this.data,t,this.fieldTransforms)}}class km{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Uu(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Tm(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ua()}}class Sm{constructor(e,t,n,i,r,o){this.settings=e,this.databaseId=t,this.wt=n,this.ignoreUndefinedProperties=i,void 0===r&&this.Xc(),this.fieldTransforms=r||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Zc(){return this.settings.Zc}ta(e){return new Sm(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.wt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ea(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.ta({path:n,na:!1});return i.sa(e),i}ia(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.ta({path:n,na:!1});return i.Xc(),i}ra(e){return this.ta({path:void 0,na:!0})}oa(e){return qm(e,this.settings.methodName,this.settings.ua||!1,this.path,this.settings.ca)}contains(e){return void 0!==this.fieldMask.find((t=>e.isPrefixOf(t)))||void 0!==this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))}Xc(){if(this.path)for(let e=0;e<this.path.length;e++)this.sa(this.path.get(e))}sa(e){if(0===e.length)throw this.oa("Document fields must not be empty");if(Tm(this.Zc)&&Pm.test(e))throw this.oa('Document fields cannot begin and end with "__"')}}class Im{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.wt=n||Hf(e)}aa(e,t,n,i=!1){return new Sm({Zc:e,methodName:t,ca:n,path:hs.emptyPath(),na:!1,ua:i},this.databaseId,this.wt,this.ignoreUndefinedProperties)}}function Em(e){const t=e._freezeSettings(),n=Hf(e._databaseId);return new Im(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Dm(e,t,n,i,r,o={}){const a=e.aa(o.merge||o.mergeFields?2:0,t,n,r);zm("Data must be an object, but it was:",a,i);const s=Um(i,a);let l,u;if(o.merge)l=new qs(a.fieldMask),u=a.fieldTransforms;else if(o.mergeFields){const e=[];for(const i of o.mergeFields){const r=$m(t,i,n);if(!a.contains(r))throw new Ya($a.INVALID_ARGUMENT,`Field '${r}' is specified in your field mask but missing from your input data.`);Wm(e,r)||e.push(r)}l=new qs(e),u=a.fieldTransforms.filter((e=>l.covers(e.field)))}else l=null,u=a.fieldTransforms;return new Om(new Il(s),l,u)}class jm extends wm{_toFieldTransform(e){if(2!==e.Zc)throw 1===e.Zc?e.oa(`${this._methodName}() can only appear at the top level of your update data`):e.oa(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof jm}}function Cm(e,t,n){return new Sm({Zc:3,ca:t.settings.ca,methodName:e._methodName,na:n},t.databaseId,t.wt,t.ignoreUndefinedProperties)}class Am extends wm{_toFieldTransform(e){return new Du(e.path,new xu)}isEqual(e){return e instanceof Am}}class Mm extends wm{constructor(e,t){super(e),this.ha=t}_toFieldTransform(e){const t=Cm(this,e,!0),n=this.ha.map((e=>Vm(e,t))),i=new Pu(n);return new Du(e.path,i)}isEqual(e){return this===e}}class Rm extends wm{constructor(e,t){super(e),this.ha=t}_toFieldTransform(e){const t=Cm(this,e,!0),n=this.ha.map((e=>Vm(e,t))),i=new ku(n);return new Du(e.path,i)}isEqual(e){return this===e}}class Nm extends wm{constructor(e,t){super(e),this.la=t}_toFieldTransform(e){const t=new Su(e.wt,bu(e.wt,this.la));return new Du(e.path,t)}isEqual(e){return this===e}}function Lm(e,t,n,i){const r=e.aa(1,t,n);zm("Data must be an object, but it was:",r,i);const o=[],a=Il.empty();Bs(i,((e,i)=>{const s=Gm(t,e,n);i=bt(i);const l=r.ia(s);if(i instanceof jm)o.push(s);else{const e=Vm(i,l);null!=e&&(o.push(s),a.set(s,e))}}));const s=new qs(o);return new km(a,s,r.fieldTransforms)}function Fm(e,t,n,i,r,o){const a=e.aa(1,t,n),s=[$m(t,i,n)],l=[r];if(o.length%2!=0)throw new Ya($a.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let e=0;e<o.length;e+=2)s.push($m(t,o[e])),l.push(o[e+1]);const u=[],c=Il.empty();for(let e=s.length-1;e>=0;--e)if(!Wm(u,s[e])){const t=s[e];let n=l[e];n=bt(n);const i=a.ia(t);if(n instanceof jm)u.push(t);else{const e=Vm(n,i);null!=e&&(u.push(t),c.set(t,e))}}const h=new qs(u);return new km(c,h,a.fieldTransforms)}function Bm(e,t,n,i=!1){return Vm(n,e.aa(i?4:3,t))}function Vm(e,t){if(Hm(e=bt(e)))return zm("Unsupported field value:",t,e),Um(e,t);if(e instanceof wm)return function(e,t){if(!Tm(t.Zc))throw t.oa(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t.oa(`${e._methodName}() is not currently supported inside arrays`);const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.na&&4!==t.Zc)throw t.oa("Nested arrays are not supported");return function(e,t){const n=[];let i=0;for(const r of e){let e=Vm(r,t.ra(i));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),i++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=bt(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return bu(t.wt,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=as.fromDate(e);return{timestampValue:Oc(t.wt,n)}}if(e instanceof as){const n=new as(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Oc(t.wt,n)}}if(e instanceof xm)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof _m)return{bytesValue:kc(t.wt,e._byteString)};if(e instanceof em){const n=t.databaseId,i=e.firestore._databaseId;if(!i.isEqual(n))throw t.oa(`Document reference is for database ${i.projectId}/${i.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:Ic(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.oa(`Unsupported field value: ${Wg(e)}`)}(e,t)}function Um(e,t){const n={};return Vs(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Bs(e,((e,i)=>{const r=Vm(i,t.ea(e));null!=r&&(n[e]=r)})),{mapValue:{fields:n}}}function Hm(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof as||e instanceof xm||e instanceof _m||e instanceof em||e instanceof wm)}function zm(e,t,n){if(!Hm(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const i=Wg(n);throw"an object"===i?t.oa(e+" a custom object"):t.oa(e+" "+i)}}function $m(e,t,n){if((t=bt(t))instanceof vm)return t._internalPath;if("string"==typeof t)return Gm(e,t);throw qm("Field path arguments must be of type string or ",e,!1,void 0,n)}const Ym=new RegExp("[~\\*/\\[\\]]");function Gm(e,t,n){if(t.search(Ym)>=0)throw qm(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new vm(...t.split("."))._internalPath}catch(i){throw qm(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function qm(e,t,n,i,r){const o=i&&!i.isEmpty(),a=void 0!==r;let s=`Function ${t}() called with invalid data`;n&&(s+=" (via `toFirestore()`)"),s+=". ";let l="";return(o||a)&&(l+=" (found",o&&(l+=` in field ${i}`),a&&(l+=` in document ${r}`),l+=")"),new Ya($a.INVALID_ARGUMENT,s+e+l)}function Wm(e,t){return e.some((e=>e.isEqual(t)))}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class Xm{constructor(e,t,n,i,r){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=i,this._converter=r}get id(){return this._key.path.lastSegment()}get ref(){return new em(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Km(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Qm("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Km extends Xm{data(){return super.data()}}function Qm(e,t){return"string"==typeof t?Gm(e,t):t instanceof vm?t._internalPath:t._delegate._internalPath}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class Jm{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Zm extends Xm{constructor(e,t,n,i,r,o){super(e,t,n,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=r}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new eb(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const n=this._document.data.field(Qm("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class eb extends Zm{data(e={}){return super.data(e)}}class tb{constructor(e,t,n,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Jm(i.hasPendingWrites,i.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new eb(this._firestore,this._userDataWriter,n.key,n,new Jm(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ya($a.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((n=>({type:"added",doc:new eb(e._firestore,e._userDataWriter,n.doc.key,n.doc,new Jm(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter),oldIndex:-1,newIndex:t++})))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||3!==e.type)).map((t=>{const i=new eb(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Jm(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let r=-1,o=-1;return 0!==t.type&&(r=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),o=n.indexOf(t.doc.key)),{type:nb(t.type),doc:i,oldIndex:r,newIndex:o}}))}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function nb(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ua()}}function ib(e,t){return e instanceof Zm&&t instanceof Zm?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof tb&&t instanceof tb&&e._firestore===t._firestore&&am(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function rb(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Ya($a.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ob{}function ab(e,...t){for(const n of t)e=n._apply(e);return e}class sb extends ob{constructor(e,t,n){super(),this.fa=e,this.da=t,this._a=n,this.type="where"}_apply(e){const t=Em(e.firestore),n=function(e,t,n,i,r,o,a){let s;if(r.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new Ya($a.INVALID_ARGUMENT,`Invalid Query. You can't perform '${o}' queries on documentId().`);if("in"===o||"not-in"===o){mb(a,o);const t=[];for(const n of a)t.push(gb(i,e,n));s={arrayValue:{values:t}}}else s=gb(i,e,a)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||mb(a,o),s=Bm(n,"where",a,"in"===o||"not-in"===o);const l=Bl.create(r,o,s);return function(e,t){if(t.ht()){const n=iu(e);if(null!==n&&!n.isEqual(t.field))throw new Ya($a.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${n.toString()}' and '${t.field.toString()}'`);const i=nu(e);null!==i&&bb(e,t.field,i)}const n=function(e,t){for(const n of e.filters)if(t.indexOf(n.op)>=0)return n.op;return null}(e,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new Ya($a.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new Ya($a.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}(e,l),l}(e._query,0,t,e.firestore._databaseId,this.fa,this.da,this._a);return new tm(e.firestore,e.converter,function(e,t){const n=e.filters.concat([t]);return new Zl(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}(e._query,n))}}function lb(e,t,n){const i=t,r=Qm("where",e);return new sb(r,i,n)}class ub extends ob{constructor(e,t){super(),this.fa=e,this.wa=t,this.type="orderBy"}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new Ya($a.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Ya($a.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const i=new Xl(t,n);return function(e,t){if(null===nu(e)){const n=iu(e);null!==n&&bb(e,n,t.field)}}(e,i),i}(e._query,this.fa,this.wa);return new tm(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new Zl(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}function cb(e,t="asc"){const n=t,i=Qm("orderBy",e);return new ub(i,n)}class hb extends ob{constructor(e,t,n){super(),this.type=e,this.ma=t,this.ga=n}_apply(e){return new tm(e.firestore,e.converter,su(e._query,this.ma,this.ga))}}class db extends ob{constructor(e,t,n){super(),this.type=e,this.ya=t,this.pa=n}_apply(e){const t=pb(e,this.type,this.ya,this.pa);return new tm(e.firestore,e.converter,function(e,t){return new Zl(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}class fb extends ob{constructor(e,t,n){super(),this.type=e,this.ya=t,this.pa=n}_apply(e){const t=pb(e,this.type,this.ya,this.pa);return new tm(e.firestore,e.converter,function(e,t){return new Zl(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}function pb(e,t,n,i){if(n[0]=bt(n[0]),n[0]instanceof Xm)return function(e,t,n,i,r){if(!i)throw new Ya($a.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${n}().`);const o=[];for(const n of ou(e))if(n.field.isKeyField())o.push(ml(t,i.key));else{const e=i.data.field(n.field);if(Zs(e))throw new Ya($a.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+n.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===e){const e=n.field.canonicalString();throw new Ya($a.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${e}' (used as the orderBy) does not exist.`)}o.push(e)}return new Wl(o,r)}(e._query,e.firestore._databaseId,t,n[0]._document,i);{const r=Em(e.firestore);return function(e,t,n,i,r,o){const a=e.explicitOrderBy;if(r.length>a.length)throw new Ya($a.INVALID_ARGUMENT,`Too many arguments provided to ${i}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const s=[];for(let o=0;o<r.length;o++){const l=r[o];if(a[o].field.isKeyField()){if("string"!=typeof l)throw new Ya($a.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${i}(), but got a ${typeof l}`);if(!ru(e)&&-1!==l.indexOf("/"))throw new Ya($a.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${i}() must be a plain document ID, but '${l}' contains a slash.`);const n=e.path.child(us.fromString(l));if(!ds.isDocumentKey(n))throw new Ya($a.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${i}() must result in a valid document path, but '${n}' is not because it contains an odd number of segments.`);const r=new ds(n);s.push(ml(t,r))}else{const e=Bm(n,i,l);s.push(e)}}return new Wl(s,o)}(e._query,e.firestore._databaseId,r,t,n,i)}}function gb(e,t,n){if("string"==typeof(n=bt(n))){if(""===n)throw new Ya($a.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ru(t)&&-1!==n.indexOf("/"))throw new Ya($a.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=t.path.child(us.fromString(n));if(!ds.isDocumentKey(i))throw new Ya($a.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return ml(e,new ds(i))}if(n instanceof em)return ml(e,n._key);throw new Ya($a.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Wg(n)}.`)}function mb(e,t){if(!Array.isArray(e)||0===e.length)throw new Ya($a.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`);if(e.length>10)throw new Ya($a.INVALID_ARGUMENT,`Invalid Query. '${t.toString()}' filters support a maximum of 10 elements in the value array.`)}function bb(e,t,n){if(!n.isEqual(t))throw new Ya($a.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${t.toString()}' and so you must also use '${t.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}
/**
     * @license
     * Copyright 2022 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */const yb={maxAttempts:5};
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class vb{convertValue(e,t="none"){switch(ul(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Qs(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Js(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Ua()}}convertObject(e,t){const n={};return Bs(e.fields,((e,i)=>{n[e]=this.convertValue(i,t)})),n}convertGeoPoint(e){return new xm(Qs(e.latitude),Qs(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=el(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(tl(e));default:return null}}convertTimestamp(e){const t=Ks(e);return new as(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=us.fromString(e);Ha(Qc(n));const i=new il(n.get(1),n.get(3)),r=new ds(n.popFirst(5));return i.isEqual(t)||Fa(`Document ${r} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),r}}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function _b(e,t,n){let i;return i=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,i}class wb extends vb{constructor(e){super(),this.firestore=e}convertBytes(e){return new _m(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new em(this.firestore,null,t)}}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class xb{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Em(e)}set(e,t,n){this._verifyNotCommitted();const i=Pb(e,this._firestore),r=_b(i.converter,t,n),o=Dm(this._dataReader,"WriteBatch.set",i._key,r,null!==i.converter,n);return this._mutations.push(o.toMutation(i._key,Cu.none())),this}update(e,t,n,...i){this._verifyNotCommitted();const r=Pb(e,this._firestore);let o;return o="string"==typeof(t=bt(t))||t instanceof vm?Fm(this._dataReader,"WriteBatch.update",r._key,t,n,i):Lm(this._dataReader,"WriteBatch.update",r._key,t),this._mutations.push(o.toMutation(r._key,Cu.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Pb(e,this._firestore);return this._mutations=this._mutations.concat(new Yu(t._key,Cu.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ya($a.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Pb(e,t){if((e=bt(e)).firestore!==t)throw new Ya($a.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class Ob extends vb{constructor(e){super(),this.firestore=e}convertBytes(e){return new _m(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new em(this.firestore,null,t)}}function kb(e){e=Xg(e,em);const t=Xg(e.firestore,cm),n=hm(t),i=new Ob(t);return function(e,t){const n=new Ga;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){try{const i=await function(e,t){const n=za(e);return n.persistence.runTransaction("read document","readonly",(e=>n.localDocuments.getDocument(e,t)))}(e,t);i.isFoundDocument()?n.resolve(i):i.isNoDocument()?n.resolve(null):n.reject(new Ya($a.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(e){const i=kp(e,`Failed to get document '${t} from cache`);n.reject(i)}}(await Ng(e),t,n))),n.promise}(n,e._key).then((n=>new Zm(t,i,e._key,n,new Jm(null!==n&&n.hasLocalMutations,!0),e.converter)))}function Tb(e){e=Xg(e,tm);const t=Xg(e.firestore,cm),n=hm(t),i=new Ob(t);return rb(e._query),Ug(n,e._query).then((n=>new tb(t,i,e,n)))}function Sb(e){e=Xg(e,tm);const t=Xg(e.firestore,cm),n=hm(t),i=new Ob(t);return function(e,t){const n=new Ga;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){try{const i=await _f(e,t,!0),r=new zp(t,i.ji),o=r.Ku(i.documents),a=r.applyChanges(o,!1);n.resolve(a.snapshot)}catch(e){const i=kp(e,`Failed to execute query '${t} against cache`);n.reject(i)}}(await Ng(e),t,n))),n.promise}(n,e._query).then((n=>new tb(t,i,e,n)))}function Ib(e,t,n){e=Xg(e,em);const i=Xg(e.firestore,cm),r=_b(e.converter,t,n);return Cb(i,[Dm(Em(i),"setDoc",e._key,r,null!==e.converter,n).toMutation(e._key,Cu.none())])}function Eb(e,t,n,...i){e=Xg(e,em);const r=Xg(e.firestore,cm),o=Em(r);let a;return a="string"==typeof(t=bt(t))||t instanceof vm?Fm(o,"updateDoc",e._key,t,n,i):Lm(o,"updateDoc",e._key,t),Cb(r,[a.toMutation(e._key,Cu.exists(!0))])}function Db(e,...t){var n,i,r;e=bt(e);let o={includeMetadataChanges:!1},a=0;"object"!=typeof t[a]||lm(t[a])||(o=t[a],a++);const s={includeMetadataChanges:o.includeMetadataChanges};if(lm(t[a])){const e=t[a];t[a]=null===(n=e.next)||void 0===n?void 0:n.bind(e),t[a+1]=null===(i=e.error)||void 0===i?void 0:i.bind(e),t[a+2]=null===(r=e.complete)||void 0===r?void 0:r.bind(e)}let l,u,c;if(e instanceof em)u=Xg(e.firestore,cm),c=tu(e._key.path),l={next:n=>{t[a]&&t[a](Ab(u,e,n))},error:t[a+1],complete:t[a+2]};else{const n=Xg(e,tm);u=Xg(n.firestore,cm),c=n._query;const i=new Ob(u);l={next:e=>{t[a]&&t[a](new tb(u,i,n,e))},error:t[a+1],complete:t[a+2]},rb(e._query)}return function(e,t,n,i){const r=new Tg(i),o=new Np(t,r,n);return e.asyncQueue.enqueueAndForget((async()=>jp(await Bg(e),o))),()=>{r.Tc(),e.asyncQueue.enqueueAndForget((async()=>Cp(await Bg(e),o)))}}(hm(u),c,s,l)}function jb(e,t){return function(e,t){const n=new Tg(t);return e.asyncQueue.enqueueAndForget((async()=>function(e,t){za(e).Tu.add(t),t.next()}(await Bg(e),n))),()=>{n.Tc(),e.asyncQueue.enqueueAndForget((async()=>function(e,t){za(e).Tu.delete(t)}(await Bg(e),n)))}}(hm(e=Xg(e,cm)),lm(t)?t:{next:t})}function Cb(e,t){return function(e,t){const n=new Ga;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){const i=_g(e);try{const e=await function(e,t){const n=za(e),i=as.now(),r=t.reduce(((e,t)=>e.add(t.key)),uc());let o,a;return n.persistence.runTransaction("Locally write mutations","readwrite",(e=>{let s=ec(),l=uc();return n.Ui.getEntries(e,r).next((e=>{s=e,s.forEach(((e,t)=>{t.isValidDocument()||(l=l.add(e))}))})).next((()=>n.localDocuments.getOverlayedDocuments(e,s))).next((r=>{o=r;const a=[];for(const e of t){const t=Fu(e,o.get(e.key).overlayedDocument);null!=t&&a.push(new Uu(e.key,t,El(t.value.mapValue),Cu.exists(!0)))}return n.mutationQueue.addMutationBatch(e,i,a,t)})).next((t=>{a=t;const i=t.applyToLocalDocumentSet(o,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,i)}))})).then((()=>({batchId:a.batchId,changes:ic(o)})))}(i.localStore,t);i.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let i=e.oc[e.currentUser.toKey()];i||(i=new Us(is)),i=i.insert(t,n),e.oc[e.currentUser.toKey()]=i}(i,e.batchId,n),await lg(i,e.changes),await hp(i.remoteStore)}catch(e){const t=kp(e,"Failed to persist write");n.reject(t)}}(await Fg(e),t,n))),n.promise}(hm(e),t)}function Ab(e,t,n){const i=n.docs.get(t._key),r=new Ob(e);return new Zm(e,r,t._key,i,new Jm(n.hasPendingWrites,n.fromCache),t.converter)}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class Mb extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Em(e)}get(e){const t=Pb(e,this._firestore),n=new wb(this._firestore);return this._transaction.lookup([t._key]).then((e=>{if(!e||1!==e.length)return Ua();const i=e[0];if(i.isFoundDocument())return new Xm(this._firestore,n,i.key,i,t.converter);if(i.isNoDocument())return new Xm(this._firestore,n,t._key,null,t.converter);throw Ua()}))}set(e,t,n){const i=Pb(e,this._firestore),r=_b(i.converter,t,n),o=Dm(this._dataReader,"Transaction.set",i._key,r,null!==i.converter,n);return this._transaction.set(i._key,o),this}update(e,t,n,...i){const r=Pb(e,this._firestore);let o;return o="string"==typeof(t=bt(t))||t instanceof vm?Fm(this._dataReader,"Transaction.update",r._key,t,n,i):Lm(this._dataReader,"Transaction.update",r._key,t),this._transaction.update(r._key,o),this}delete(e){const t=Pb(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Pb(e,this._firestore),n=new Ob(this._firestore);return super.get(e).then((e=>new Zm(this._firestore,n,t._key,e._document,new Jm(!1,!1),t.converter)))}}function Rb(e,t,n){e=Xg(e,cm);const i=Object.assign(Object.assign({},yb),n);return function(e){if(e.maxAttempts<1)throw new Ya($a.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function(e,t,n){const i=new Ga;return e.asyncQueue.enqueueAndForget((async()=>{const r=await function(e){return Mg(e).then((e=>e.datastore))}(e);new Eg(e.asyncQueue,r,n,t,i).run()})),i.promise}(hm(e),(n=>t(new Mb(e,n))),i)}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */!function(e,t=!0){Ma="9.9.0",tn(new yt("firestore",((e,{options:n})=>{const i=e.getProvider("app").getImmediate(),r=new cm(i,new Ka(e.getProvider("auth-internal")),new es(e.getProvider("app-check-internal")));return n=Object.assign({useFetchStreams:t},n),r._setSettings(n),r}),"PUBLIC")),un(Ca,"3.4.12",e),un(Ca,"3.4.12","esm2017")}();
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
class Nb{constructor(e,t){this._delegate=e,this.firebase=t,Zt(e,new yt("app-compat",(()=>this),"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise((e=>{this._delegate.checkDestroyed(),e()})).then((()=>(this.firebase.INTERNAL.removeApp(this.name),ln(this._delegate))))}_getService(e,t="[DEFAULT]"){var n;this._delegate.checkDestroyed();const i=this._delegate.container.getProvider(e);return i.isInitialized()||"EXPLICIT"!==(null===(n=i.getComponent())||void 0===n?void 0:n.instantiationMode)||i.initialize(),i.getImmediate({identifier:t})}_removeServiceInstance(e,t="[DEFAULT]"){this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){Zt(this._delegate,e)}_addOrOverwriteComponent(e){en(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */const Lb=new at("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."});const Fb=
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
function e(){const t=
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
function(e){const t={},n={__esModule:!0,initializeApp:function(i,r={}){const o=sn(i,r);if(lt(t,o.name))return t[o.name];const a=new e(o,n);return t[o.name]=a,a},app:i,registerVersion:un,setLogLevel:hn,onLog:cn,apps:null,SDK_VERSION:an,INTERNAL:{registerComponent:function(t){const r=t.name,o=r.replace("-compat","");if(tn(t)&&"PUBLIC"===t.type){const a=(e=i())=>{if("function"!=typeof e[o])throw Lb.create("invalid-app-argument",{appName:r});return e[o]()};void 0!==t.serviceProps&&Ke(a,t.serviceProps),n[o]=a,e.prototype[o]=function(...e){return this._getService.bind(this,r).apply(this,t.multipleInstances?e:[])}}return"PUBLIC"===t.type?n[o]:null},removeApp:function(e){delete t[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:Pn}};function i(e){if(!lt(t,e=e||Xt))throw Lb.create("no-app",{appName:e});return t[e]}return n.default=n,Object.defineProperty(n,"apps",{get:function(){return Object.keys(t).map((e=>t[e]))}}),i.App=e,n}(Nb);return t.INTERNAL=Object.assign(Object.assign({},t.INTERNAL),{createFirebaseNamespace:e,extendNamespace:function(e){Ke(t,e)},createSubscribe:pt,ErrorFactory:at,deepExtend:Ke}),t}(),Bb=new It("@firebase/app-compat");
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
if("object"==typeof self&&self.self===self&&void 0!==self.firebase){Bb.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const e=self.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&Bb.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Vb=Fb;!
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
function(e){un("@firebase/app-compat","0.1.29",e)}();
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
Vb.registerVersion("firebase","9.9.0","app-compat");var Ub=function(e,t){return Ub=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},Ub(e,t)};function Hb(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}Ub(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function zb(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}function $b(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(e){o(e)}}function s(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))}function Yb(e,t){var n,i,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,i=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){a.label=o[1];break}if(6===o[0]&&a.label<r[1]){a.label=r[1],r=o;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(o);break}r[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function Gb(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function qb(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,r,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(i=o.next()).done;)a.push(i.value)}catch(e){r={error:e}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return a}function Wb(e,t,n){if(n||2===arguments.length)for(var i,r=0,o=t.length;r<o;r++)!i&&r in t||(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))}const Xb="facebook.com",Kb="github.com",Qb="google.com",Jb="password",Zb="twitter.com",ey="EMAIL_SIGNIN",ty="PASSWORD_RESET",ny="RECOVER_EMAIL",iy="REVERT_SECOND_FACTOR_ADDITION",ry="VERIFY_AND_CHANGE_EMAIL",oy="VERIFY_EMAIL";function ay(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const sy=
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},ly=ay,uy=new at("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),cy=new It("@firebase/auth");function hy(e,...t){cy.logLevel<=Pt.ERROR&&cy.error(`Auth (9.9.0): ${e}`,...t)}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function dy(e,...t){throw my(e,...t)}function fy(e,...t){return my(e,...t)}function py(e,t,n){const i=Object.assign(Object.assign({},ly()),{[t]:n});return new at("auth","Firebase",i).create(t,{appName:e.name})}function gy(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&dy(e,"argument-error"),py(e,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function my(e,...t){if("string"!=typeof e){const n=t[0],i=[...t.slice(1)];return i[0]&&(i[0].appName=e.name),e._errorFactory.create(n,...i)}return uy.create(e,...t)}function by(e,t,...n){if(!e)throw my(t,...n)}function yy(e){const t="INTERNAL ASSERTION FAILED: "+e;throw hy(t),new Error(t)}function vy(e,t){e||yy(t)}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */const _y=new Map;function wy(e){vy(e instanceof Function,"Expected a class definition");let t=_y.get(e);return t?(vy(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,_y.set(e,t),t)}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
function xy(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Py(){return"http:"===Oy()||"https:"===Oy()}function Oy(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
class ky{constructor(e,t){this.shortDelay=e,this.longDelay=t,vy(t>e,"Short delay should be less than long delay!"),this.isMobile=Ze()||nt()}get(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Py()||tt()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Ty(e,t){vy(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class Sy{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void yy("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void yy("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void yy("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */const Iy={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Ey=new ky(3e4,6e4);
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Dy(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function jy(e,t,n,i,r={}){return Cy(e,r,(async()=>{let r={},o={};i&&("GET"===t?o=i:r={body:JSON.stringify(i)});const a=ht(Object.assign({key:e.config.apiKey},o)).slice(1),s=await e._getAdditionalHeaders();return s["Content-Type"]="application/json",e.languageCode&&(s["X-Firebase-Locale"]=e.languageCode),Sy.fetch()(My(e,e.config.apiHost,n,a),Object.assign({method:t,headers:s,referrerPolicy:"no-referrer"},r))}))}async function Cy(e,t,n){e._canInitEmulator=!1;const i=Object.assign(Object.assign({},Iy),t);try{const t=new Ry(e),r=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const o=await r.json();if("needConfirmation"in o)throw Ny(e,"account-exists-with-different-credential",o);if(r.ok&&!("errorMessage"in o))return o;{const t=r.ok?o.errorMessage:o.error.message,[n,a]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw Ny(e,"credential-already-in-use",o);if("EMAIL_EXISTS"===n)throw Ny(e,"email-already-in-use",o);if("USER_DISABLED"===n)throw Ny(e,"user-disabled",o);const s=i[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(a)throw py(e,s,a);dy(e,s)}}catch(t){if(t instanceof ot)throw t;dy(e,"network-request-failed")}}async function Ay(e,t,n,i,r={}){const o=await jy(e,t,n,i,r);return"mfaPendingCredential"in o&&dy(e,"multi-factor-auth-required",{_serverResponse:o}),o}function My(e,t,n,i){const r=`${t}${n}?${i}`;return e.config.emulator?Ty(e.config,r):`${e.config.apiScheme}://${r}`}class Ry{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise(((e,t)=>{this.timer=setTimeout((()=>t(fy(this.auth,"network-request-failed"))),Ey.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function Ny(e,t,n){const i={appName:e.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=fy(e,t,i);return r.customData._tokenResponse=n,r}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
function Ly(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(e){}}function Fy(e){return 1e3*Number(e)}function By(e){var t;const[n,i,r]=e.split(".");if(void 0===n||void 0===i||void 0===r)return hy("JWT malformed, contained fewer than 3 sections"),null;try{const e=function(e){try{return We.decodeString(e,!0)}catch(e){console.error("base64Decode failed: ",e)}return null}(i);return e?JSON.parse(e):(hy("Failed to decode base64 JWT payload"),null)}catch(e){return hy("Caught error parsing JWT payload as JSON",null===(t=e)||void 0===t?void 0:t.toString()),null}}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
async function Vy(e,t,n=!1){if(n)return t;try{return await t}catch(t){throw t instanceof ot&&function({code:e}){return"auth/user-disabled"===e||"auth/user-token-expired"===e}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */(t)&&e.auth.currentUser===e&&await e.auth.signOut(),t}}class Uy{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((async()=>{await this.iteration()}),t)}async iteration(){var e;try{await this.user.getIdToken(!0)}catch(t){return void("auth/network-request-failed"===(null===(e=t)||void 0===e?void 0:e.code)&&this.schedule(!0))}this.schedule()}}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class Hy{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ly(this.lastLoginAt),this.creationTime=Ly(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */async function zy(e){var t;const n=e.auth,i=await e.getIdToken(),r=await Vy(e,async function(e,t){return jy(e,"POST","/v1/accounts:lookup",t)}(n,{idToken:i}));by(null==r?void 0:r.users.length,n,"internal-error");const o=r.users[0];e._notifyReloadListener(o);const a=(null===(t=o.providerUserInfo)||void 0===t?void 0:t.length)?o.providerUserInfo.map((e=>{var{providerId:t}=e,n=zb(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})):[];const s=(l=e.providerData,u=a,[...l.filter((e=>!u.some((t=>t.providerId===e.providerId)))),...u]);var l,u;const c=e.isAnonymous,h=!(e.email&&o.passwordHash||(null==s?void 0:s.length)),d=!!c&&h,f={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:s,metadata:new Hy(o.createdAt,o.lastLoginAt),isAnonymous:d};Object.assign(e,f)}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
class $y{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){by(e.idToken,"internal-error"),by(void 0!==e.idToken,"internal-error"),by(void 0!==e.refreshToken,"internal-error");const t="expiresIn"in e&&void 0!==e.expiresIn?Number(e.expiresIn):function(e){const t=By(e);return by(t,"internal-error"),by(void 0!==t.exp,"internal-error"),by(void 0!==t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}async getToken(e,t=!1){return by(!this.accessToken||this.refreshToken,e,"user-token-expired"),t||!this.accessToken||this.isExpired?this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null:this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:i,expiresIn:r}=await
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
async function(e,t){const n=await Cy(e,{},(async()=>{const n=ht({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:i,apiKey:r}=e.config,o=My(e,i,"/v1/token",`key=${r}`),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",Sy.fetch()(o,{method:"POST",headers:a,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,i,Number(r))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:i,expirationTime:r}=t,o=new $y;return n&&(by("string"==typeof n,"internal-error",{appName:e}),o.refreshToken=n),i&&(by("string"==typeof i,"internal-error",{appName:e}),o.accessToken=i),r&&(by("number"==typeof r,"internal-error",{appName:e}),o.expirationTime=r),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new $y,this.toJSON())}_performRefresh(){return yy("not implemented")}}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Yy(e,t){by("string"==typeof e||void 0===e,"internal-error",{appName:t})}class Gy{constructor(e){var{uid:t,auth:n,stsTokenManager:i}=e,r=zb(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Uy(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new Hy(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const t=await Vy(this,this.stsTokenManager.getToken(this.auth,e));return by(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e,t=!1){const n=bt(e),i=await n.getIdToken(t),r=By(i);by(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const o="object"==typeof r.firebase?r.firebase:void 0,a=null==o?void 0:o.sign_in_provider;return{claims:r,token:i,authTime:Ly(Fy(r.auth_time)),issuedAtTime:Ly(Fy(r.iat)),expirationTime:Ly(Fy(r.exp)),signInProvider:a||null,signInSecondFactor:(null==o?void 0:o.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=bt(e);await zy(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(by(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((e=>Object.assign({},e))),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){return new Gy(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(e){by(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await zy(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await Vy(this,async function(e,t){return jy(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((e=>Object.assign({},e))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,i,r,o,a,s,l,u;const c=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(i=t.email)&&void 0!==i?i:void 0,d=null!==(r=t.phoneNumber)&&void 0!==r?r:void 0,f=null!==(o=t.photoURL)&&void 0!==o?o:void 0,p=null!==(a=t.tenantId)&&void 0!==a?a:void 0,g=null!==(s=t._redirectEventId)&&void 0!==s?s:void 0,m=null!==(l=t.createdAt)&&void 0!==l?l:void 0,b=null!==(u=t.lastLoginAt)&&void 0!==u?u:void 0,{uid:y,emailVerified:v,isAnonymous:_,providerData:w,stsTokenManager:x}=t;by(y&&x,e,"internal-error");const P=$y.fromJSON(this.name,x);by("string"==typeof y,e,"internal-error"),Yy(c,e.name),Yy(h,e.name),by("boolean"==typeof v,e,"internal-error"),by("boolean"==typeof _,e,"internal-error"),Yy(d,e.name),Yy(f,e.name),Yy(p,e.name),Yy(g,e.name),Yy(m,e.name),Yy(b,e.name);const O=new Gy({uid:y,auth:e,email:h,emailVerified:v,displayName:c,isAnonymous:_,photoURL:f,phoneNumber:d,tenantId:p,stsTokenManager:P,createdAt:m,lastLoginAt:b});return w&&Array.isArray(w)&&(O.providerData=w.map((e=>Object.assign({},e)))),g&&(O._redirectEventId=g),O}static async _fromIdTokenResponse(e,t,n=!1){const i=new $y;i.updateFromServerResponse(t);const r=new Gy({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:n});return await zy(r),r}}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class qy{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}qy.type="NONE";const Wy=qy;
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Xy(e,t,n){return`firebase:${e}:${t}:${n}`}class Ky{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:i,name:r}=this.auth;this.fullUserKey=Xy(this.userKey,i.apiKey,r),this.fullPersistenceKey=Xy("persistence",i.apiKey,r),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Gy._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,n="authUser"){if(!t.length)return new Ky(wy(Wy),e,n);const i=(await Promise.all(t.map((async e=>{if(await e._isAvailable())return e})))).filter((e=>e));let r=i[0]||wy(Wy);const o=Xy(n,e.config.apiKey,e.name);let a=null;for(const n of t)try{const t=await n._get(o);if(t){const i=Gy._fromJSON(e,t);n!==r&&(a=i),r=n;break}}catch(e){}const s=i.filter((e=>e._shouldAllowMigration));return r._shouldAllowMigration&&s.length?(r=s[0],a&&await r._set(o,a.toJSON()),await Promise.all(t.map((async e=>{if(e!==r)try{await e._remove(o)}catch(e){}}))),new Ky(r,e,n)):new Ky(r,e,n)}}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Qy(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(tv(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Jy(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(iv(t))return"Blackberry";if(rv(t))return"Webos";if(Zy(t))return"Safari";if((t.includes("chrome/")||ev(t))&&!t.includes("edge/"))return"Chrome";if(nv(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null==n?void 0:n.length))return n[1]}return"Other"}function Jy(e=Je()){return/firefox\//i.test(e)}function Zy(e=Je()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function ev(e=Je()){return/crios\//i.test(e)}function tv(e=Je()){return/iemobile/i.test(e)}function nv(e=Je()){return/android/i.test(e)}function iv(e=Je()){return/blackberry/i.test(e)}function rv(e=Je()){return/webos/i.test(e)}function ov(e=Je()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function av(e=Je()){return ov(e)||nv(e)||rv(e)||iv(e)||/windows phone/i.test(e)||tv(e)}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
function sv(e,t=[]){let n;switch(e){case"Browser":n=Qy(Je());break;case"Worker":n=`${Qy(Je())}-${e}`;break;default:n=e}return`${n}/JsCore/9.9.0/${t.length?t.join(","):"FirebaseCore-web"}`}
/**
     * @license
     * Copyright 2022 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class lv{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise(((n,i)=>{try{n(e(t))}catch(e){i(e)}}));n.onAbort=t,this.queue.push(n);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){var t;if(this.auth.currentUser===e)return;const n=[];try{for(const t of this.queue)await t(e),t.onAbort&&n.push(t.onAbort)}catch(e){n.reverse();for(const e of n)try{e()}catch(e){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===(t=e)||void 0===t?void 0:t.message})}}}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class uv{constructor(e,t,n){this.app=e,this.heartbeatServiceProvider=t,this.config=n,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new hv(this),this.idTokenSubscription=new hv(this),this.beforeStateQueue=new lv(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=uy,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=n.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=wy(t)),this._initializationPromise=this.queue((async()=>{var n,i;if(!this._deleted&&(this.persistenceManager=await Ky.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(e){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(i=this.currentUser)||void 0===i?void 0:i.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUser(e){var t;const n=await this.assertedPersistence.getCurrentUser();let i=n,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,o=null==i?void 0:i._redirectEventId,a=await this.tryRedirectSignIn(e);n&&n!==o||!(null==a?void 0:a.user)||(i=a.user,r=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(i)}catch(e){i=n,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(e)))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return by(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(e){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){var t;try{await zy(e)}catch(e){if("auth/network-request-failed"!==(null===(t=e)||void 0===t?void 0:t.code))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const t=e?bt(e):null;return t&&by(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&by(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue((async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue((async()=>{await this.assertedPersistence.setPersistence(wy(e))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new at("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&wy(e)||this._popupRedirectResolver;by(t,this,"argument-error"),this.redirectPersistenceManager=await Ky.create(this,[wy(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(e)))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,i){if(this._deleted)return()=>{};const r="function"==typeof t?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return by(o,this,"internal-error"),o.then((()=>r(this.currentUser))),"function"==typeof t?e.addObserver(t,n,i):e.addObserver(t)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&(this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh()),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return by(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=sv(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());return n&&(t["X-Firebase-Client"]=n),t}}function cv(e){return bt(e)}class hv{constructor(e){this.auth=e,this.observer=null,this.addObserver=pt((e=>this.observer=e))}get next(){return by(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function dv(e,t,n){const i=cv(e);by(i._canInitEmulator,i,"emulator-config-failed"),by(/^https?:\/\//.test(t),i,"invalid-emulator-scheme");const r=!!(null==n?void 0:n.disableWarnings),o=fv(t),{host:a,port:s}=function(e){const t=fv(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const e=r[1];return{host:e,port:pv(i.substr(e.length+1))}}{const[e,t]=i.split(":");return{host:e,port:pv(t)}}}(t),l=null===s?"":`:${s}`;i.config.emulator={url:`${o}//${a}${l}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:a,port:s,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:r})}),r||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */()}function fv(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function pv(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class gv{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return yy("not implemented")}_getIdTokenResponse(e){return yy("not implemented")}_linkToIdToken(e,t){return yy("not implemented")}_getReauthenticationResolver(e){return yy("not implemented")}}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */async function mv(e,t){return jy(e,"POST","/v1/accounts:resetPassword",Dy(e,t))}async function bv(e,t){return jy(e,"POST","/v1/accounts:update",t)}async function yv(e,t){return jy(e,"POST","/v1/accounts:sendOobCode",Dy(e,t))}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
class vv extends gv{constructor(e,t,n,i=null){super("password",n),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new vv(e,t,"password")}static _fromEmailAndCode(e,t,n=null){return new vv(e,t,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e;if((null==t?void 0:t.email)&&(null==t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
return async function(e,t){return Ay(e,"POST","/v1/accounts:signInWithPassword",Dy(e,t))}(e,{returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
return async function(e,t){return Ay(e,"POST","/v1/accounts:signInWithEmailLink",Dy(e,t))}(e,{email:this._email,oobCode:this._password});default:dy(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return bv(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return async function(e,t){return Ay(e,"POST","/v1/accounts:signInWithEmailLink",Dy(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:dy(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */async function _v(e,t){return Ay(e,"POST","/v1/accounts:signInWithIdp",Dy(e,t))}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class wv extends gv{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new wv(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):dy("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e,{providerId:n,signInMethod:i}=t,r=zb(t,["providerId","signInMethod"]);if(!n||!i)return null;const o=new wv(n,i);return o.idToken=r.idToken||void 0,o.accessToken=r.accessToken||void 0,o.secret=r.secret,o.nonce=r.nonce,o.pendingToken=r.pendingToken||null,o}_getIdTokenResponse(e){return _v(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,_v(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,_v(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=ht(t)}return e}}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */const xv={USER_NOT_FOUND:"user-not-found"};
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
class Pv extends gv{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new Pv({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new Pv({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return Ay(e,"POST","/v1/accounts:signInWithPhoneNumber",Dy(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await Ay(e,"POST","/v1/accounts:signInWithPhoneNumber",Dy(e,t));if(n.temporaryProof)throw Ny(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return Ay(e,"POST","/v1/accounts:signInWithPhoneNumber",Dy(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),xv)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:i}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:i}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"==typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:i,temporaryProof:r}=e;return n||t||i||r?new Pv({verificationId:t,verificationCode:n,phoneNumber:i,temporaryProof:r}):null}}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class Ov{constructor(e){var t,n,i,r,o,a;const s=dt(ft(e)),l=null!==(t=s.apiKey)&&void 0!==t?t:null,u=null!==(n=s.oobCode)&&void 0!==n?n:null,c=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=s.mode)&&void 0!==i?i:null);by(l&&u&&c,"argument-error"),this.apiKey=l,this.operation=c,this.code=u,this.continueUrl=null!==(r=s.continueUrl)&&void 0!==r?r:null,this.languageCode=null!==(o=s.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(a=s.tenantId)&&void 0!==a?a:null}static parseLink(e){const t=function(e){const t=dt(ft(e)).link,n=t?dt(ft(t)).deep_link_id:null,i=dt(ft(e)).deep_link_id;return(i?dt(ft(i)).link:null)||i||n||t||e}(e);try{return new Ov(t)}catch(e){return null}}}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class kv{constructor(){this.providerId=kv.PROVIDER_ID}static credential(e,t){return vv._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=Ov.parseLink(t);return by(n,"argument-error"),vv._fromEmailAndCode(e,n.code,n.tenantId)}}kv.PROVIDER_ID="password",kv.EMAIL_PASSWORD_SIGN_IN_METHOD="password",kv.EMAIL_LINK_SIGN_IN_METHOD="emailLink";
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
class Tv{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class Sv extends Tv{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Iv extends Sv{static credentialFromJSON(e){const t="string"==typeof e?JSON.parse(e):e;return by("providerId"in t&&"signInMethod"in t,"argument-error"),wv._fromParams(t)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return by(e.idToken||e.accessToken,"argument-error"),wv._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return Iv.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return Iv.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n,oauthTokenSecret:i,pendingToken:r,nonce:o,providerId:a}=e;if(!(n||i||t||r))return null;if(!a)return null;try{return new Iv(a)._credential({idToken:t,accessToken:n,nonce:o,pendingToken:r})}catch(e){return null}}}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class Ev extends Sv{constructor(){super("facebook.com")}static credential(e){return wv._fromParams({providerId:Ev.PROVIDER_ID,signInMethod:Ev.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ev.credentialFromTaggedObject(e)}static credentialFromError(e){return Ev.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return Ev.credential(e.oauthAccessToken)}catch(e){return null}}}Ev.FACEBOOK_SIGN_IN_METHOD="facebook.com",Ev.PROVIDER_ID="facebook.com";
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
class Dv extends Sv{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return wv._fromParams({providerId:Dv.PROVIDER_ID,signInMethod:Dv.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Dv.credentialFromTaggedObject(e)}static credentialFromError(e){return Dv.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n}=e;if(!t&&!n)return null;try{return Dv.credential(t,n)}catch(e){return null}}}Dv.GOOGLE_SIGN_IN_METHOD="google.com",Dv.PROVIDER_ID="google.com";
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
class jv extends Sv{constructor(){super("github.com")}static credential(e){return wv._fromParams({providerId:jv.PROVIDER_ID,signInMethod:jv.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return jv.credentialFromTaggedObject(e)}static credentialFromError(e){return jv.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return jv.credential(e.oauthAccessToken)}catch(e){return null}}}jv.GITHUB_SIGN_IN_METHOD="github.com",jv.PROVIDER_ID="github.com";class Cv extends gv{constructor(e,t){super(e,e),this.pendingToken=t}_getIdTokenResponse(e){return _v(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,_v(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,_v(e,t)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e,{providerId:n,signInMethod:i,pendingToken:r}=t;return n&&i&&r&&n===i?new Cv(n,r):null}static _create(e,t){return new Cv(e,t)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class Av extends Tv{constructor(e){by(e.startsWith("saml."),"argument-error"),super(e)}static credentialFromResult(e){return Av.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return Av.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const t=Cv.fromJSON(e);return by(t,"argument-error"),t}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:t,providerId:n}=e;if(!t||!n)return null;try{return Cv._create(n,t)}catch(e){return null}}}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class Mv extends Sv{constructor(){super("twitter.com")}static credential(e,t){return wv._fromParams({providerId:Mv.PROVIDER_ID,signInMethod:Mv.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Mv.credentialFromTaggedObject(e)}static credentialFromError(e){return Mv.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:n}=e;if(!t||!n)return null;try{return Mv.credential(t,n)}catch(e){return null}}}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
async function Rv(e,t){return Ay(e,"POST","/v1/accounts:signUp",Dy(e,t))}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */Mv.TWITTER_SIGN_IN_METHOD="twitter.com",Mv.PROVIDER_ID="twitter.com";class Nv{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n,i=!1){const r=await Gy._fromIdTokenResponse(e,n,i),o=Lv(n);return new Nv({user:r,providerId:o,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const i=Lv(n);return new Nv({user:e,providerId:i,_tokenResponse:n,operationType:t})}}function Lv(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
class Fv extends ot{constructor(e,t,n,i){var r;super(t.code,t.message),this.operationType=n,this.user=i,Object.setPrototypeOf(this,Fv.prototype),this.customData={appName:e.name,tenantId:null!==(r=e.tenantId)&&void 0!==r?r:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,i){return new Fv(e,t,n,i)}}function Bv(e,t,n,i){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((n=>{if("auth/multi-factor-auth-required"===n.code)throw Fv._fromErrorAndOperation(e,n,t,i);throw n}))}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Vv(e){return new Set(e.map((({providerId:e})=>e)).filter((e=>!!e)))}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */async function Uv(e,t){const n=bt(e);await zv(!0,n,t);const{providerUserInfo:i}=await async function(e,t){return jy(e,"POST","/v1/accounts:update",t)}(n.auth,{idToken:await n.getIdToken(),deleteProvider:[t]}),r=Vv(i||[]);return n.providerData=n.providerData.filter((e=>r.has(e.providerId))),r.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function Hv(e,t,n=!1){const i=await Vy(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Nv._forOperation(e,"link",i)}async function zv(e,t,n){await zy(t);const i=!1===e?"provider-already-linked":"no-such-provider";by(Vv(t.providerData).has(n)===e,t.auth,i)}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */async function $v(e,t,n=!1){var i;const{auth:r}=e,o="reauthenticate";try{const i=await Vy(e,Bv(r,o,t,e),n);by(i.idToken,r,"internal-error");const a=By(i.idToken);by(a,r,"internal-error");const{sub:s}=a;return by(e.uid===s,r,"user-mismatch"),Nv._forOperation(e,o,i)}catch(e){throw"auth/user-not-found"===(null===(i=e)||void 0===i?void 0:i.code)&&dy(r,"user-mismatch"),e}}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */async function Yv(e,t,n=!1){const i="signIn",r=await Bv(e,i,t),o=await Nv._fromIdTokenResponse(e,i,r);return n||await e._updateCurrentUser(o.user),o}async function Gv(e,t){return Yv(cv(e),t)}async function qv(e,t){const n=bt(e);return await zv(!1,n,t.providerId),Hv(n,t)}async function Wv(e,t){return $v(bt(e),t)}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
async function Xv(e,t){const n=cv(e),i=await async function(e,t){return Ay(e,"POST","/v1/accounts:signInWithCustomToken",Dy(e,t))}(n,{token:t,returnSecureToken:!0}),r=await Nv._fromIdTokenResponse(n,"signIn",i);return await n._updateCurrentUser(r.user),r}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class Kv{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?Qv._fromServerResponse(e,t):dy(e,"internal-error")}}class Qv extends Kv{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new Qv(t)}}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Jv(e,t,n){var i;by((null===(i=n.url)||void 0===i?void 0:i.length)>0,e,"invalid-continue-uri"),by(void 0===n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(by(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(by(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */async function Zv(e,t,n){const i=bt(e),r={requestType:"PASSWORD_RESET",email:t};n&&Jv(i,r,n),await async function(e,t){return yv(e,t)}(i,r)}async function e_(e,t){await async function(e,t){return jy(e,"POST","/v1/accounts:update",Dy(e,t))}(bt(e),{oobCode:t})}async function t_(e,t){const n=bt(e),i=await mv(n,{oobCode:t}),r=i.requestType;switch(by(r,n,"internal-error"),r){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":by(i.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":by(i.mfaInfo,n,"internal-error");default:by(i.email,n,"internal-error")}let o=null;return i.mfaInfo&&(o=Kv._fromServerResponse(cv(n),i.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.newEmail:i.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.email:i.newEmail)||null,multiFactorInfo:o},operation:r}}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
async function n_(e,t,n){const i=bt(e),r={requestType:"EMAIL_SIGNIN",email:t};by(n.handleCodeInApp,i,"argument-error"),n&&Jv(i,r,n),await async function(e,t){return yv(e,t)}(i,r)}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
async function i_(e,t){const n={identifier:t,continueUri:Py()?xy():"http://localhost"},{signinMethods:i}=await
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
async function(e,t){return jy(e,"POST","/v1/accounts:createAuthUri",Dy(e,t))}(bt(e),n);return i||[]}async function r_(e,t){const n=bt(e),i={requestType:"VERIFY_EMAIL",idToken:await e.getIdToken()};t&&Jv(n.auth,i,t);const{email:r}=await async function(e,t){return yv(e,t)}(n.auth,i);r!==e.email&&await e.reload()}async function o_(e,t,n){const i=bt(e),r={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await e.getIdToken(),newEmail:t};n&&Jv(i.auth,r,n);const{email:o}=await async function(e,t){return yv(e,t)}(i.auth,r);o!==e.email&&await e.reload()}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
async function a_(e,{displayName:t,photoURL:n}){if(void 0===t&&void 0===n)return;const i=bt(e),r={idToken:await i.getIdToken(),displayName:t,photoUrl:n,returnSecureToken:!0},o=await Vy(i,async function(e,t){return jy(e,"POST","/v1/accounts:update",t)}(i.auth,r));i.displayName=o.displayName||null,i.photoURL=o.photoUrl||null;const a=i.providerData.find((({providerId:e})=>"password"===e));a&&(a.displayName=i.displayName,a.photoURL=i.photoURL),await i._updateTokensIfNecessary(o)}async function s_(e,t,n){const{auth:i}=e,r={idToken:await e.getIdToken(),returnSecureToken:!0};t&&(r.email=t),n&&(r.password=n);const o=await Vy(e,bv(i,r));await e._updateTokensIfNecessary(o,!0)}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class l_{constructor(e,t,n={}){this.isNewUser=e,this.providerId=t,this.profile=n}}class u_ extends l_{constructor(e,t,n,i){super(e,t,n),this.username=i}}class c_ extends l_{constructor(e,t){super(e,"facebook.com",t)}}class h_ extends u_{constructor(e,t){super(e,"github.com",t,"string"==typeof(null==t?void 0:t.login)?null==t?void 0:t.login:null)}}class d_ extends l_{constructor(e,t){super(e,"google.com",t)}}class f_ extends u_{constructor(e,t,n){super(e,"twitter.com",t,n)}}function p_(e){const{user:t,_tokenResponse:n}=e;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;const{providerId:i}=e,r=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},o=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!i&&(null==e?void 0:e.idToken)){const i=null===(n=null===(t=By(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(i)return new l_(o,"anonymous"!==i&&"custom"!==i?i:null)}if(!i)return null;switch(i){case"facebook.com":return new c_(o,r);case"github.com":return new h_(o,r);case"google.com":return new d_(o,r);case"twitter.com":return new f_(o,r,e.screenName||null);case"custom":case"anonymous":return new l_(o,null);default:return new l_(o,i,r)}}(n)}class g_{constructor(e,t){this.type=e,this.credential=t}static _fromIdtoken(e){return new g_("enroll",e)}static _fromMfaPendingCredential(e){return new g_("signin",e)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var t,n;if(null==e?void 0:e.multiFactorSession){if(null===(t=e.multiFactorSession)||void 0===t?void 0:t.pendingCredential)return g_._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(null===(n=e.multiFactorSession)||void 0===n?void 0:n.idToken)return g_._fromIdtoken(e.multiFactorSession.idToken)}return null}}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class m_{constructor(e,t,n){this.session=e,this.hints=t,this.signInResolver=n}static _fromError(e,t){const n=cv(e),i=t.customData._serverResponse,r=(i.mfaInfo||[]).map((e=>Kv._fromServerResponse(n,e)));by(i.mfaPendingCredential,n,"internal-error");const o=g_._fromMfaPendingCredential(i.mfaPendingCredential);return new m_(o,r,(async e=>{const r=await e._process(n,o);delete i.mfaInfo,delete i.mfaPendingCredential;const a=Object.assign(Object.assign({},i),{idToken:r.idToken,refreshToken:r.refreshToken});switch(t.operationType){case"signIn":const e=await Nv._fromIdTokenResponse(n,t.operationType,a);return await n._updateCurrentUser(e.user),e;case"reauthenticate":return by(t.user,n,"internal-error"),Nv._forOperation(t.user,t.operationType,a);default:dy(n,"internal-error")}}))}async resolveSignIn(e){const t=e;return this.signInResolver(t)}}class b_{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload((t=>{t.mfaInfo&&(this.enrolledFactors=t.mfaInfo.map((t=>Kv._fromServerResponse(e.auth,t))))}))}static _fromUser(e){return new b_(e)}async getSession(){return g_._fromIdtoken(await this.user.getIdToken())}async enroll(e,t){const n=e,i=await this.getSession(),r=await Vy(this.user,n._process(this.user.auth,i,t));return await this.user._updateTokensIfNecessary(r),this.user.reload()}async unenroll(e){var t;const n="string"==typeof e?e:e.uid,i=await this.user.getIdToken(),r=await Vy(this.user,function(e,t){return jy(e,"POST","/v2/accounts/mfaEnrollment:withdraw",Dy(e,t))}(this.user.auth,{idToken:i,mfaEnrollmentId:n}));this.enrolledFactors=this.enrolledFactors.filter((({uid:e})=>e!==n)),await this.user._updateTokensIfNecessary(r);try{await this.user.reload()}catch(e){if("auth/user-token-expired"!==(null===(t=e)||void 0===t?void 0:t.code))throw e}}}const y_=new WeakMap;const v_="__sak";
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class __{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(v_,"1"),this.storage.removeItem(v_),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class w_ extends __{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const e=Je();return Zy(e)||ov(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),this.fallbackToPolling=av(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),i=this.localCache[t];n!==i&&e(t,i,n)}}onStorageEvent(e,t=!1){if(!e.key)return void this.forAllChangedKeys(((e,t,n)=>{this.notifyListeners(e,n)}));const n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const i=this.storage.getItem(n);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}const i=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},r=this.storage.getItem(n);it()&&10===document.documentMode&&r!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,10):i()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const e of Array.from(n))e(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}w_.type="LOCAL";const x_=w_;
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class P_ extends __{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(e,t){}_removeListener(e,t){}}P_.type="SESSION";const O_=P_;
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
class k_{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find((t=>t.isListeningto(e)));if(t)return t;const n=new k_(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:i,data:r}=t.data,o=this.handlersMap[i];if(!(null==o?void 0:o.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:i});const a=Array.from(o).map((async e=>e(t.origin,r))),s=await function(e){return Promise.all(e.map((async e=>{try{return{fulfilled:!0,value:await e}}catch(e){return{fulfilled:!1,reason:e}}})))}(a);t.ports[0].postMessage({status:"done",eventId:n,eventType:i,response:s})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
function T_(e="",t=10){let n="";for(let e=0;e<t;e++)n+=Math.floor(10*Math.random());return e+n}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */k_.receivers=[];class S_{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,n=50){const i="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let r,o;return new Promise(((a,s)=>{const l=T_("",20);i.port1.start();const u=setTimeout((()=>{s(new Error("unsupported_event"))}),n);o={messageChannel:i,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(u),r=setTimeout((()=>{s(new Error("timeout"))}),3e3);break;case"done":clearTimeout(r),a(t.data.response);break;default:clearTimeout(u),clearTimeout(r),s(new Error("invalid_response"))}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[i.port2])})).finally((()=>{o&&this.removeMessageHandler(o)}))}}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function I_(){return window}
/**
     * @license
     * Copyright 2020 Google LLC.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
function E_(){return void 0!==I_().WorkerGlobalScope&&"function"==typeof I_().importScripts}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
const D_="firebaseLocalStorageDb",j_="firebaseLocalStorage",C_="fbase_key";class A_{constructor(e){this.request=e}toPromise(){return new Promise(((e,t)=>{this.request.addEventListener("success",(()=>{e(this.request.result)})),this.request.addEventListener("error",(()=>{t(this.request.error)}))}))}}function M_(e,t){return e.transaction([j_],t?"readwrite":"readonly").objectStore(j_)}function R_(){const e=indexedDB.open(D_,1);return new Promise(((t,n)=>{e.addEventListener("error",(()=>{n(e.error)})),e.addEventListener("upgradeneeded",(()=>{const t=e.result;try{t.createObjectStore(j_,{keyPath:C_})}catch(e){n(e)}})),e.addEventListener("success",(async()=>{const n=e.result;n.objectStoreNames.contains(j_)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(D_);return new A_(e).toPromise()}(),t(await R_()))}))}))}async function N_(e,t,n){const i=M_(e,!0).put({[C_]:t,value:n});return new A_(i).toPromise()}function L_(e,t){const n=M_(e,!0).delete(t);return new A_(n).toPromise()}class F_{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await R_()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(e){if(t++>3)throw e;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return E_()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=k_._getInstance(E_()?self:null),this.receiver._subscribe("keyChanged",(async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)}))),this.receiver._subscribe("ping",(async(e,t)=>["keyChanged"]))}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new S_(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(e){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await R_();return await N_(e,v_,"1"),await L_(e,v_),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite((async()=>(await this._withRetries((n=>N_(n,e,t))),this.localCache[e]=t,this.notifyServiceWorker(e))))}async _get(e){const t=await this._withRetries((t=>async function(e,t){const n=M_(e,!1).get(t),i=await new A_(n).toPromise();return void 0===i?null:i.value}(t,e)));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite((async()=>(await this._withRetries((t=>L_(t,e))),delete this.localCache[e],this.notifyServiceWorker(e))))}async _poll(){const e=await this._withRetries((e=>{const t=M_(e,!1).getAll();return new A_(t).toPromise()}));if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;for(const{fbase_key:i,value:r}of e)n.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(r)&&(this.notifyListeners(i,r),t.push(i));for(const e of Object.keys(this.localCache))this.localCache[e]&&!n.has(e)&&(this.notifyListeners(e,null),t.push(e));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const e of Array.from(n))e(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}F_.type="LOCAL";const B_=F_;
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function V_(e){return new Promise(((t,n)=>{const i=document.createElement("script");i.setAttribute("src",e),i.onload=t,i.onerror=e=>{const t=fy("internal-error");t.customData=e,n(t)},i.type="text/javascript",i.charset="UTF-8",
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(i)}))}function U_(e){return`__${e}${Math.floor(1e6*Math.random())}`}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */const H_=1e12;class z_{constructor(e){this.auth=e,this.counter=H_,this._widgets=new Map}render(e,t){const n=this.counter;return this._widgets.set(n,new $_(e,this.auth.name,t||{})),this.counter++,n}reset(e){var t;const n=e||H_;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}getResponse(e){var t;const n=e||H_;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}async execute(e){var t;const n=e||H_;return null===(t=this._widgets.get(n))||void 0===t||t.execute(),""}}class $_{constructor(e,t,n){this.params=n,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const i="string"==typeof e?document.getElementById(e):e;by(i,"argument-error",{appName:t}),this.container=i,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((()=>{this.responseToken=function(e){const t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let i=0;i<e;i++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */(50);const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch(e){}this.timerId=window.setTimeout((()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch(e){}this.isVisible&&this.execute()}),6e4)}),500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Y_=U_("rcb"),G_=new ky(3e4,6e4);class q_{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(e=I_().grecaptcha)||void 0===e?void 0:e.render)}load(e,t=""){return by(function(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}(t),e,"argument-error"),this.shouldResolveImmediately(t)?Promise.resolve(I_().grecaptcha):new Promise(((n,i)=>{const r=I_().setTimeout((()=>{i(fy(e,"network-request-failed"))}),G_.get());I_()[Y_]=()=>{I_().clearTimeout(r),delete I_()[Y_];const o=I_().grecaptcha;if(!o)return void i(fy(e,"internal-error"));const a=o.render;o.render=(e,t)=>{const n=a(e,t);return this.counter++,n},this.hostLanguage=t,n(o)};V_(`https://www.google.com/recaptcha/api.js??${ht({onload:Y_,render:"explicit",hl:t})}`).catch((()=>{clearTimeout(r),i(fy(e,"internal-error"))}))}))}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var t;return!!(null===(t=I_().grecaptcha)||void 0===t?void 0:t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class W_{async load(e){return new z_(e)}clearedOneInstance(){}}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */const X_="recaptcha",K_={theme:"light",type:"image"};class Q_{constructor(e,t=Object.assign({},K_),n){this.parameters=t,this.type=X_,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=cv(n),this.isInvisible="invisible"===this.parameters.size,by("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const i="string"==typeof e?document.getElementById(e):e;by(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new W_:new q_,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),t=this.getAssertedRecaptcha(),n=t.getResponse(e);return n||new Promise((n=>{const i=e=>{e&&(this.tokenChangeListeners.delete(i),n(e))};this.tokenChangeListeners.add(i),this.isInvisible&&t.execute(e)}))}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((e=>{throw this.renderPromise=null,e}))),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((e=>{this.container.removeChild(e)}))}validateStartingState(){by(!this.parameters.sitekey,this.auth,"argument-error"),by(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),by("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach((e=>e(t))),"function"==typeof e)e(t);else if("string"==typeof e){const n=I_()[e];"function"==typeof n&&n(t)}}}assertNotDestroyed(){by(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const t=document.createElement("div");e.appendChild(t),e=t}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){by(Py()&&!E_(),this.auth,"internal-error"),await function(){let e=null;return new Promise((t=>{"complete"!==document.readyState?(e=()=>t(),window.addEventListener("load",e)):t()})).catch((t=>{throw e&&window.removeEventListener("load",e),t}))}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
async function(e){return(await jy(e,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}(this.auth);by(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return by(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class J_{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=Pv._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}async function Z_(e,t,n){var i;const r=await n.verify();try{let o;if(by("string"==typeof r,e,"argument-error"),by(n.type===X_,e,"argument-error"),o="string"==typeof t?{phoneNumber:t}:t,"session"in o){const t=o.session;if("phoneNumber"in o){by("enroll"===t.type,e,"internal-error");const n=await
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
function(e,t){return jy(e,"POST","/v2/accounts/mfaEnrollment:start",Dy(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:r}});return n.phoneSessionInfo.sessionInfo}{by("signin"===t.type,e,"internal-error");const n=(null===(i=o.multiFactorHint)||void 0===i?void 0:i.uid)||o.multiFactorUid;by(n,e,"missing-multi-factor-info");const a=await function(e,t){return jy(e,"POST","/v2/accounts/mfaSignIn:start",Dy(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:r}});return a.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return jy(e,"POST","/v1/accounts:sendVerificationCode",Dy(e,t))}(e,{phoneNumber:o.phoneNumber,recaptchaToken:r});return t}}finally{n._reset()}}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
class ew{constructor(e){this.providerId=ew.PROVIDER_ID,this.auth=cv(e)}verifyPhoneNumber(e,t){return Z_(this.auth,e,bt(t))}static credential(e,t){return Pv._fromVerification(e,t)}static credentialFromResult(e){const t=e;return ew.credentialFromTaggedObject(t)}static credentialFromError(e){return ew.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:t,temporaryProof:n}=e;return t&&n?Pv._fromTokenResponse(t,n):null}}
/**
     * @license
     * Copyright 2021 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
function tw(e,t){return t?wy(t):(by(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */ew.PROVIDER_ID="phone",ew.PHONE_SIGN_IN_METHOD="phone";class nw extends gv{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return _v(e,this._buildIdpRequest())}_linkToIdToken(e,t){return _v(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return _v(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function iw(e){return Yv(e.auth,new nw(e),e.bypassAuthState)}function rw(e){const{auth:t,user:n}=e;return by(n,t,"internal-error"),$v(n,new nw(e),e.bypassAuthState)}async function ow(e){const{auth:t,user:n}=e;return by(n,t,"internal-error"),Hv(n,new nw(e),e.bypassAuthState)}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class aw{constructor(e,t,n,i,r=!1){this.auth=e,this.resolver=n,this.user=i,this.bypassAuthState=r,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(e){this.reject(e)}}))}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:i,tenantId:r,error:o,type:a}=e;if(o)return void this.reject(o);const s={auth:this.auth,requestUri:t,sessionId:n,tenantId:r||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(s))}catch(e){this.reject(e)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return iw;case"linkViaPopup":case"linkViaRedirect":return ow;case"reauthViaPopup":case"reauthViaRedirect":return rw;default:dy(this.auth,"internal-error")}}resolve(e){vy(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){vy(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */const sw=new ky(2e3,1e4);class lw extends aw{constructor(e,t,n,i,r){super(e,t,i,r),this.provider=n,this.authWindow=null,this.pollId=null,lw.currentPopupAction&&lw.currentPopupAction.cancel(),lw.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return by(e,this.auth,"internal-error"),e}async onExecution(){vy(1===this.filter.length,"Popup operations only handle one event");const e=T_();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((e=>{this.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(e=>{e||this.reject(fy(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(fy(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,lw.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(fy(this.auth,"popup-closed-by-user"))}),2e3):this.pollId=window.setTimeout(e,sw.get())};e()}}lw.currentPopupAction=null;
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
const uw=new Map;class cw extends aw{constructor(e,t,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,n),this.eventId=null}async execute(){let e=uw.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=pw(t),i=fw(e);if(!await i._isAvailable())return!1;const r="true"===await i._get(n);return await i._remove(n),r}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}uw.set(this.auth._key(),e)}return this.bypassAuthState||uw.set(this.auth._key(),(()=>Promise.resolve(null))),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}async function hw(e,t){return fw(e)._set(pw(t),"true")}function dw(e,t){uw.set(e._key(),t)}function fw(e){return wy(e._redirectPersistence)}function pw(e){return Xy("pendingRedirect",e.config.apiKey,e.name)}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function gw(e,t,n){return async function(e,t,n){const i=cv(e);gy(e,t,Tv);const r=tw(i,n);return await hw(r,i),r._openRedirect(i,t,"signInViaRedirect")}(e,t,n)}function mw(e,t,n){return async function(e,t,n){const i=bt(e);gy(i.auth,t,Tv);const r=tw(i.auth,n);await hw(r,i.auth);const o=await vw(i);return r._openRedirect(i.auth,t,"reauthViaRedirect",o)}(e,t,n)}function bw(e,t,n){return async function(e,t,n){const i=bt(e);gy(i.auth,t,Tv);const r=tw(i.auth,n);await zv(!1,i,t.providerId),await hw(r,i.auth);const o=await vw(i);return r._openRedirect(i.auth,t,"linkViaRedirect",o)}(e,t,n)}async function yw(e,t,n=!1){const i=cv(e),r=tw(i,t),o=new cw(i,r,n),a=await o.execute();return a&&!n&&(delete a.user._redirectEventId,await i._persistUserIfCurrent(a.user),await i._setRedirectUser(null,t)),a}async function vw(e){const t=T_(`${e.uid}:::`);return e._redirectEventId=t,await e.auth._setRedirectUser(e),await e.auth._persistUserIfCurrent(e),t}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class _w{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return xw(e);default:return!1}}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!xw(e)){const i=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(fy(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(ww(e))}saveEventToCache(e){this.cachedEventUids.add(ww(e)),this.lastProcessedEventTime=Date.now()}}function ww(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((e=>e)).join("-")}function xw({type:e,error:t}){return"unknown"===e&&"auth/no-auth-event"===(null==t?void 0:t.code)}async function Pw(e,t={}){return jy(e,"GET","/v1/projects",t)}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */const Ow=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,kw=/^https?/;function Tw(e){const t=xy(),{protocol:n,hostname:i}=new URL(t);if(e.startsWith("chrome-extension://")){const r=new URL(e);return""===r.hostname&&""===i?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&r.hostname===i}if(!kw.test(n))return!1;if(Ow.test(e))return i===e;const r=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}
/**
     * @license
     * Copyright 2020 Google LLC.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */const Sw=new ky(3e4,6e4);function Iw(){const e=I_().___jsl;if(null==e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let t=0;t<e.CP.length;t++)e.CP[t]=null}let Ew=null;function Dw(e){return Ew=Ew||function(e){return new Promise(((t,n)=>{var i,r,o;function a(){Iw(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Iw(),n(fy(e,"network-request-failed"))},timeout:Sw.get()})}if(null===(r=null===(i=I_().gapi)||void 0===i?void 0:i.iframes)||void 0===r?void 0:r.Iframe)t(gapi.iframes.getContext());else{if(!(null===(o=I_().gapi)||void 0===o?void 0:o.load)){const t=U_("iframefcb");return I_()[t]=()=>{gapi.load?a():n(fy(e,"network-request-failed"))},V_(`https://apis.google.com/js/api.js?onload=${t}`).catch((e=>n(e)))}a()}})).catch((e=>{throw Ew=null,e}))}(e),Ew}
/**
     * @license
     * Copyright 2020 Google LLC.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */const jw=new ky(5e3,15e3),Cw={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Aw=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Mw(e){const t=e.config;by(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?Ty(t,"emulator/auth/iframe"):`https://${e.config.authDomain}/__/auth/iframe`,i={apiKey:t.apiKey,appName:e.name,v:an},r=Aw.get(e.config.apiHost);r&&(i.eid=r);const o=e._getFrameworks();return o.length&&(i.fw=o.join(",")),`${n}?${ht(i).slice(1)}`}
/**
     * @license
     * Copyright 2020 Google LLC.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
const Rw={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Nw{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function Lw(e,t,n,i=500,r=600){const o=Math.max((window.screen.availHeight-r)/2,0).toString(),a=Math.max((window.screen.availWidth-i)/2,0).toString();let s="";const l=Object.assign(Object.assign({},Rw),{width:i.toString(),height:r.toString(),top:o,left:a}),u=Je().toLowerCase();n&&(s=ev(u)?"_blank":n),Jy(u)&&(t=t||"http://localhost",l.scrollbars="yes");const c=Object.entries(l).reduce(((e,[t,n])=>`${e}${t}=${n},`),"");if(function(e=Je()){var t;return ov(e)&&!!(null===(t=window.navigator)||void 0===t?void 0:t.standalone)}(u)&&"_self"!==s)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}
/**
     * @license
     * Copyright 2021 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */(t||"",s),new Nw(null);const h=window.open(t||"",s,c);by(h,e,"popup-blocked");try{h.focus()}catch(e){}return new Nw(h)}const Fw="__/auth/handler",Bw="emulator/auth/handler";function Vw(e,t,n,i,r,o){by(e.config.authDomain,e,"auth-domain-config-required"),by(e.config.apiKey,e,"invalid-api-key");const a={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:i,v:an,eventId:r};if(t instanceof Tv){t.setDefaultLanguage(e.languageCode),a.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(a.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(o||{}))a[e]=t}if(t instanceof Sv){const e=t.getScopes().filter((e=>""!==e));e.length>0&&(a.scopes=e.join(","))}e.tenantId&&(a.tid=e.tenantId);const s=a;for(const e of Object.keys(s))void 0===s[e]&&delete s[e];return`${function({config:e}){if(!e.emulator)return`https://${e.authDomain}/${Fw}`;return Ty(e,Bw)}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */(e)}?${ht(s).slice(1)}`}const Uw="webStorageSupport";const Hw=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=O_,this._completeRedirectFn=yw,this._overrideRedirectResult=dw}async _openPopup(e,t,n,i){var r;vy(null===(r=this.eventManagers[e._key()])||void 0===r?void 0:r.manager,"_initialize() not called before _openPopup()");return Lw(e,Vw(e,t,n,xy(),i),T_())}async _openRedirect(e,t,n,i){var r;return await this._originValidation(e),r=Vw(e,t,n,xy(),i),I_().location.href=r,new Promise((()=>{}))}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(vy(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch((()=>{delete this.eventManagers[t]})),n}async initAndGetManager(e){const t=await async function(e){const t=await Dw(e),n=I_().gapi;return by(n,e,"internal-error"),t.open({where:document.body,url:Mw(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Cw,dontclear:!0},(t=>new Promise((async(n,i)=>{await t.restyle({setHideOnLeave:!1});const r=fy(e,"network-request-failed"),o=I_().setTimeout((()=>{i(r)}),jw.get());function a(){I_().clearTimeout(o),n(t)}t.ping(a).then(a,(()=>{i(r)}))}))))}(e),n=new _w(e);return t.register("authEvent",(t=>{by(null==t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Uw,{type:Uw},(n=>{var i;const r=null===(i=null==n?void 0:n[0])||void 0===i?void 0:i.webStorageSupport;void 0!==r&&t(!!r),dy(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=async function(e){if(e.config.emulator)return;const{authorizedDomains:t}=await Pw(e);for(const e of t)try{if(Tw(e))return}catch(e){}dy(e,"unauthorized-domain")}(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return av()||Zy()||ov()}};class zw extends class{constructor(e){this.factorId=e}_process(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return yy("unexpected MultiFactorSessionType")}}}{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new zw(e)}_finalizeEnroll(e,t,n){return function(e,t){return jy(e,"POST","/v2/accounts/mfaEnrollment:finalize",Dy(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return function(e,t){return jy(e,"POST","/v2/accounts/mfaSignIn:finalize",Dy(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class $w{constructor(){}static assertion(e){return zw._fromCredential(e)}}$w.FACTOR_ID="phone";var Yw,Gw="@firebase/auth",qw="0.20.5";
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
class Ww{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged((t=>{var n;e((null===(n=t)||void 0===n?void 0:n.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){by(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2021 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
function Xw(){return window}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */Yw="Browser",tn(new yt("auth",((e,{options:t})=>{const n=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),{apiKey:r,authDomain:o}=n.options;return((e,n)=>{by(r&&!r.includes(":"),"invalid-api-key",{appName:e.name}),by(!(null==o?void 0:o.includes(":")),"argument-error",{appName:e.name});const i={apiKey:r,authDomain:o,clientPlatform:Yw,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:sv(Yw)},a=new uv(e,n,i);return function(e,t){const n=(null==t?void 0:t.persistence)||[],i=(Array.isArray(n)?n:[n]).map(wy);(null==t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(i,null==t?void 0:t.popupRedirectResolver)}(a,t),a})(n,i)}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,n)=>{e.getProvider("auth-internal").initialize()}))),tn(new yt("auth-internal",(e=>(e=>new Ww(e))(cv(e.getProvider("auth").getImmediate()))),"PRIVATE").setInstantiationMode("EXPLICIT")),un(Gw,qw,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(Yw)),un(Gw,qw,"esm2017");async function Kw(e,t,n){var i;const{BuildInfo:r}=Xw();vy(t.sessionId,"AuthEvent did not contain a session ID");const o=await async function(e){const t=function(e){if(vy(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(e);const t=new ArrayBuffer(e.length),n=new Uint8Array(t);for(let t=0;t<e.length;t++)n[t]=e.charCodeAt(t);return n}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */(e),n=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(n)).map((e=>e.toString(16).padStart(2,"0"))).join("")}(t.sessionId),a={};return ov()?a.ibi=r.packageName:nv()?a.apn=r.packageName:dy(e,"operation-not-supported-in-this-environment"),r.displayName&&(a.appDisplayName=r.displayName),a.sessionId=o,Vw(e,n,t.type,void 0,null!==(i=t.eventId)&&void 0!==i?i:void 0,a)}function Qw(e){const{cordova:t}=Xw();return new Promise((n=>{t.plugins.browsertab.isAvailable((i=>{let r=null;i?t.plugins.browsertab.openUrl(e):r=t.InAppBrowser.open(e,function(e=Je()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(r)}))}))}class Jw extends _w{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise((e=>{this.resolveInialized=e}))}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInialized(),this.passiveListeners.forEach((t=>t(e))),super.onEvent(e)}async initialized(){await this.initPromise}}async function Zw(e){const t=await nx()._get(ix(e));return t&&await nx()._remove(ix(e)),t}function ex(e,t){var n,i;const r=function(e){const t=rx(e),n=t.link?decodeURIComponent(t.link):void 0,i=rx(n).link,r=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return rx(r).link||r||i||n||e}(t);if(r.includes("/__/auth/callback")){const t=rx(r),o=t.firebaseError?function(e){try{return JSON.parse(e)}catch(e){return null}}(decodeURIComponent(t.firebaseError)):null,a=null===(i=null===(n=null==o?void 0:o.code)||void 0===n?void 0:n.split("auth/"))||void 0===i?void 0:i[1],s=a?fy(a):null;return s?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:s,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:r,postBody:null}}return null}function tx(){const e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<20;n++){const n=Math.floor(Math.random()*t.length);e.push(t.charAt(n))}return e.join("")}function nx(){return wy(x_)}function ix(e){return Xy("authEvent",e.config.apiKey,e.name)}function rx(e){if(!(null==e?void 0:e.includes("?")))return{};const[t,...n]=e.split("?");return dt(n.join("?"))}
/**
     * @license
     * Copyright 2021 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */const ox=class{constructor(){this._redirectPersistence=O_,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=yw,this._overrideRedirectResult=dw}async _initialize(e){const t=e._key();let n=this.eventManagers.get(t);return n||(n=new Jw(e),this.eventManagers.set(t,n),this.attachCallbackListeners(e,n)),n}_openPopup(e){dy(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,t,n,i){!function(e){var t,n,i,r,o,a,s,l,u,c;const h=Xw();by("function"==typeof(null===(t=null==h?void 0:h.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),by(void 0!==(null===(n=null==h?void 0:h.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),by("function"==typeof(null===(o=null===(r=null===(i=null==h?void 0:h.cordova)||void 0===i?void 0:i.plugins)||void 0===r?void 0:r.browsertab)||void 0===o?void 0:o.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),by("function"==typeof(null===(l=null===(s=null===(a=null==h?void 0:h.cordova)||void 0===a?void 0:a.plugins)||void 0===s?void 0:s.browsertab)||void 0===l?void 0:l.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),by("function"==typeof(null===(c=null===(u=null==h?void 0:h.cordova)||void 0===u?void 0:u.InAppBrowser)||void 0===c?void 0:c.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(e);const r=await this._initialize(e);await r.initialized(),r.resetRedirect(),uw.clear(),await this._originValidation(e);const o=function(e,t,n=null){return{type:t,eventId:n,urlResponse:null,sessionId:tx(),postBody:null,tenantId:e.tenantId,error:fy(e,"no-auth-event")}}(e,n,i);await function(e,t){return nx()._set(ix(e),t)}(e,o);const a=await Kw(e,o,t);return async function(e,t,n){const{cordova:i}=Xw();let r=()=>{};try{await new Promise(((o,a)=>{let s=null;function l(){var e;o();const t=null===(e=i.plugins.browsertab)||void 0===e?void 0:e.close;"function"==typeof t&&t(),"function"==typeof(null==n?void 0:n.close)&&n.close()}function u(){s||(s=window.setTimeout((()=>{a(fy(e,"redirect-cancelled-by-user"))}),2e3))}function c(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&u()}t.addPassiveListener(l),document.addEventListener("resume",u,!1),nv()&&document.addEventListener("visibilitychange",c,!1),r=()=>{t.removePassiveListener(l),document.removeEventListener("resume",u,!1),document.removeEventListener("visibilitychange",c,!1),s&&window.clearTimeout(s)}}))}finally{r()}}(e,r,await Qw(a))}_isIframeWebStorageSupported(e,t){throw new Error("Method not implemented.")}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=async function(e){const{BuildInfo:t}=Xw(),n={};ov()?n.iosBundleId=t.packageName:nv()?n.androidPackageName=t.packageName:dy(e,"operation-not-supported-in-this-environment"),await Pw(e,n)}(e)),this.originValidationPromises[t]}attachCallbackListeners(e,t){const{universalLinks:n,handleOpenURL:i,BuildInfo:r}=Xw(),o=setTimeout((async()=>{await Zw(e),t.onEvent(ax())}),500),a=async n=>{clearTimeout(o);const i=await Zw(e);let r=null;i&&(null==n?void 0:n.url)&&(r=ex(i,n.url)),t.onEvent(r||ax())};void 0!==n&&"function"==typeof n.subscribe&&n.subscribe(null,a);const s=i,l=`${r.packageName.toLowerCase()}://`;Xw().handleOpenURL=async e=>{if(e.toLowerCase().startsWith(l)&&a({url:e}),"function"==typeof s)try{s(e)}catch(e){console.error(e)}}}};function ax(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:fy("no-auth-event")}}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function sx(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function lx(e=Je()){return!("file:"!==sx()&&"ionic:"!==sx()&&"capacitor:"!==sx()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function ux(e=Je()){return it()&&11===(null===document||void 0===document?void 0:document.documentMode)||function(e=Je()){return/Edge\/\d+/.test(e)}(e)}function cx(){try{const e=self.localStorage,t=T_();if(e)return e.setItem(t,"1"),e.removeItem(t),!ux()||rt()}catch(e){return hx()&&rt()}return!1}function hx(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function dx(){return("http:"===sx()||"https:"===sx()||tt()||lx())&&!(nt()||et())&&cx()&&!hx()}function fx(){return lx()&&"undefined"!=typeof document}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
const px={LOCAL:"local",NONE:"none",SESSION:"session"},gx=by,mx="persistence";async function bx(e){await e._initializationPromise;const t=yx(),n=Xy(mx,e.config.apiKey,e.name);t&&t.setItem(n,e._getPersistence())}function yx(){var e;try{return(null===(e="undefined"!=typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(e){return null}}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */const vx=by;class _x{constructor(){this.browserResolver=wy(Hw),this.cordovaResolver=wy(ox),this.underlyingResolver=null,this._redirectPersistence=O_,this._completeRedirectFn=yw,this._overrideRedirectResult=dw}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,t,n,i){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,t,n,i)}async _openRedirect(e,t,n,i){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,t,n,i)}_isIframeWebStorageSupported(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return fx()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return vx(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await async function(){return!!fx()&&new Promise((e=>{const t=setTimeout((()=>{e(!1)}),1e3);document.addEventListener("deviceready",(()=>{clearTimeout(t),e(!0)}))}))}();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function wx(e){return e.unwrap()}function xx(e,t){var n,i;const r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===(null===(i=t)||void 0===i?void 0:i.code)){t.resolver=new Tx(e,function(e,t){var n;const i=bt(e),r=t;return by(t.customData.operationType,i,"argument-error"),by(null===(n=r.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,i,"argument-error"),m_._fromError(i,r)}(e,t))}else if(r){const e=Px(t),n=t;e&&(n.credential=e,n.tenantId=r.tenantId||void 0,n.email=r.email||void 0,n.phoneNumber=r.phoneNumber||void 0)}}function Px(e){const{_tokenResponse:t}=e instanceof ot?e.customData:e;if(!t)return null;if(!(e instanceof ot)&&"temporaryProof"in t&&"phoneNumber"in t)return ew.credentialFromResult(e);const n=t.providerId;if(!n||n===Jb)return null;let i;switch(n){case Qb:i=Dv;break;case Xb:i=Ev;break;case Kb:i=jv;break;case Zb:i=Mv;break;default:const{oauthIdToken:e,oauthAccessToken:r,oauthTokenSecret:o,pendingToken:a,nonce:s}=t;return r||o||e||a?a?n.startsWith("saml.")?Cv._create(n,a):wv._fromParams({providerId:n,signInMethod:n,pendingToken:a,idToken:e,accessToken:r}):new Iv(n).credential({idToken:e,accessToken:r,rawNonce:s}):null}return e instanceof ot?i.credentialFromError(e):i.credentialFromResult(e)}function Ox(e,t){return t.catch((t=>{throw t instanceof ot&&xx(e,t),t})).then((e=>{const t=e.operationType,n=e.user;return{operationType:t,credential:(i=e,Px(i)),additionalUserInfo:p_(e),user:Sx.getOrCreate(n)};
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var i}))}async function kx(e,t){const n=await t;return{verificationId:n.verificationId,confirm:t=>Ox(e,n.confirm(t))}}class Tx{constructor(e,t){this.resolver=t,this.auth=e.wrapped()}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return Ox(wx(this.auth),this.resolver.resolveSignIn(e))}}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class Sx{constructor(e){this._delegate=e,this.multiFactor=function(e){const t=bt(e);return y_.has(t)||y_.set(t,b_._fromUser(t)),y_.get(t)}(e)}static getOrCreate(e){return Sx.USER_MAP.has(e)||Sx.USER_MAP.set(e,new Sx(e)),Sx.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return Ox(this.auth,qv(this._delegate,e))}async linkWithPhoneNumber(e,t){return kx(this.auth,async function(e,t,n){const i=bt(e);await zv(!1,i,"phone");const r=await Z_(i.auth,t,bt(n));return new J_(r,(e=>qv(i,e)))}(this._delegate,e,t))}async linkWithPopup(e){return Ox(this.auth,async function(e,t,n){const i=bt(e);gy(i.auth,t,Tv);const r=tw(i.auth,n);return new lw(i.auth,"linkViaPopup",t,r,i).executeNotNull()}(this._delegate,e,_x))}async linkWithRedirect(e){return await bx(cv(this.auth)),bw(this._delegate,e,_x)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return Ox(this.auth,Wv(this._delegate,e))}reauthenticateWithPhoneNumber(e,t){return kx(this.auth,async function(e,t,n){const i=bt(e),r=await Z_(i.auth,t,bt(n));return new J_(r,(e=>Wv(i,e)))}(this._delegate,e,t))}reauthenticateWithPopup(e){return Ox(this.auth,async function(e,t,n){const i=bt(e);gy(i.auth,t,Tv);const r=tw(i.auth,n);return new lw(i.auth,"reauthViaPopup",t,r,i).executeNotNull()}(this._delegate,e,_x))}async reauthenticateWithRedirect(e){return await bx(cv(this.auth)),mw(this._delegate,e,_x)}sendEmailVerification(e){return r_(this._delegate,e)}async unlink(e){return await Uv(this._delegate,e),this}updateEmail(e){return function(e,t){return s_(bt(e),t,null)}(this._delegate,e)}updatePassword(e){return function(e,t){return s_(bt(e),null,t)}(this._delegate,e)}updatePhoneNumber(e){return async function(e,t){await Hv(bt(e),t)}(this._delegate,e)}updateProfile(e){return a_(this._delegate,e)}verifyBeforeUpdateEmail(e,t){return o_(this._delegate,e,t)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Sx.USER_MAP=new WeakMap;
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
const Ix=by;class Ex{constructor(e,t){if(this.app=e,t.isInitialized())return this._delegate=t.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:n}=e.options;Ix(n,"invalid-api-key",{appName:e.name}),Ix(n,"invalid-api-key",{appName:e.name});const i="undefined"!=typeof window?_x:void 0;this._delegate=t.initialize({options:{persistence:jx(n,e.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(sy),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Sx.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,t){dv(this._delegate,e,t)}applyActionCode(e){return e_(this._delegate,e)}checkActionCode(e){return t_(this._delegate,e)}confirmPasswordReset(e,t){return async function(e,t,n){await mv(bt(e),{oobCode:t,newPassword:n})}(this._delegate,e,t)}async createUserWithEmailAndPassword(e,t){return Ox(this._delegate,async function(e,t,n){const i=cv(e),r=await Rv(i,{returnSecureToken:!0,email:t,password:n}),o=await Nv._fromIdTokenResponse(i,"signIn",r);return await i._updateCurrentUser(o.user),o}(this._delegate,e,t))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return i_(this._delegate,e)}isSignInWithEmailLink(e){return function(e,t){const n=Ov.parseLink(t);return"EMAIL_SIGNIN"===(null==n?void 0:n.operation)}(this._delegate,e)}async getRedirectResult(){Ix(dx(),this._delegate,"operation-not-supported-in-this-environment");const e=await async function(e,t){return await cv(e)._initializationPromise,yw(e,t,!1)}(this._delegate,_x);return e?Ox(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){!function(e,t){cv(e)._logFramework(t)}(this._delegate,e)}onAuthStateChanged(e,t,n){const{next:i,error:r,complete:o}=Dx(e,t,n);return this._delegate.onAuthStateChanged(i,r,o)}onIdTokenChanged(e,t,n){const{next:i,error:r,complete:o}=Dx(e,t,n);return this._delegate.onIdTokenChanged(i,r,o)}sendSignInLinkToEmail(e,t){return n_(this._delegate,e,t)}sendPasswordResetEmail(e,t){return Zv(this._delegate,e,t||void 0)}async setPersistence(e){let t;switch(function(e,t){gx(Object.values(px).includes(t),e,"invalid-persistence-type"),nt()?gx(t!==px.SESSION,e,"unsupported-persistence-type"):et()?gx(t===px.NONE,e,"unsupported-persistence-type"):hx()?gx(t===px.NONE||t===px.LOCAL&&rt(),e,"unsupported-persistence-type"):gx(t===px.NONE||cx(),e,"unsupported-persistence-type")}(this._delegate,e),e){case px.SESSION:t=O_;break;case px.LOCAL:t=await wy(B_)._isAvailable()?B_:x_;break;case px.NONE:t=Wy;break;default:return dy("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(t)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return Ox(this._delegate,async function(e){var t;const n=cv(e);if(await n._initializationPromise,null===(t=n.currentUser)||void 0===t?void 0:t.isAnonymous)return new Nv({user:n.currentUser,providerId:null,operationType:"signIn"});const i=await Rv(n,{returnSecureToken:!0}),r=await Nv._fromIdTokenResponse(n,"signIn",i,!0);return await n._updateCurrentUser(r.user),r}(this._delegate))}signInWithCredential(e){return Ox(this._delegate,Gv(this._delegate,e))}signInWithCustomToken(e){return Ox(this._delegate,Xv(this._delegate,e))}signInWithEmailAndPassword(e,t){return Ox(this._delegate,function(e,t,n){return Gv(bt(e),kv.credential(t,n))}(this._delegate,e,t))}signInWithEmailLink(e,t){return Ox(this._delegate,async function(e,t,n){const i=bt(e),r=kv.credentialWithLink(t,n||xy());return by(r._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),Gv(i,r)}(this._delegate,e,t))}signInWithPhoneNumber(e,t){return kx(this._delegate,async function(e,t,n){const i=cv(e),r=await Z_(i,t,bt(n));return new J_(r,(e=>Gv(i,e)))}(this._delegate,e,t))}async signInWithPopup(e){return Ix(dx(),this._delegate,"operation-not-supported-in-this-environment"),Ox(this._delegate,async function(e,t,n){const i=cv(e);gy(e,t,Tv);const r=tw(i,n);return new lw(i,"signInViaPopup",t,r).executeNotNull()}(this._delegate,e,_x))}async signInWithRedirect(e){return Ix(dx(),this._delegate,"operation-not-supported-in-this-environment"),await bx(this._delegate),gw(this._delegate,e,_x)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return async function(e,t){const{data:n}=await t_(bt(e),t);return n.email}(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}function Dx(e,t,n){let i=e;"function"!=typeof e&&({next:i,error:t,complete:n}=e);const r=i;return{next:e=>r(e&&Sx.getOrCreate(e)),error:t,complete:n}}function jx(e,t){const n=function(e,t){const n=yx();if(!n)return[];const i=Xy(mx,e,t);switch(n.getItem(i)){case px.NONE:return[Wy];case px.LOCAL:return[B_,O_];case px.SESSION:return[O_];default:return[]}}(e,t);if("undefined"==typeof self||n.includes(B_)||n.push(B_),"undefined"!=typeof window)for(const e of[x_,O_])n.includes(e)||n.push(e);return n.includes(Wy)||n.push(Wy),n}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */Ex.Persistence=px;class Cx{constructor(){this.providerId="phone",this._delegate=new ew(wx(Vb.auth()))}static credential(e,t){return ew.credential(e,t)}verifyPhoneNumber(e,t){return this._delegate.verifyPhoneNumber(e,t)}unwrap(){return this._delegate}}Cx.PHONE_SIGN_IN_METHOD=ew.PHONE_SIGN_IN_METHOD,Cx.PROVIDER_ID=ew.PROVIDER_ID;
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
const Ax=by;class Mx{constructor(e,t,n=Vb.app()){var i;Ax(null===(i=n.options)||void 0===i?void 0:i.apiKey,"invalid-api-key",{appName:n.name}),this._delegate=new Q_(e,t,n.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */!function(e){e.INTERNAL.registerComponent(new yt("auth-compat",(e=>{const t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new Ex(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:ey,PASSWORD_RESET:ty,RECOVER_EMAIL:ny,REVERT_SECOND_FACTOR_ADDITION:iy,VERIFY_AND_CHANGE_EMAIL:ry,VERIFY_EMAIL:oy}},EmailAuthProvider:kv,FacebookAuthProvider:Ev,GithubAuthProvider:jv,GoogleAuthProvider:Dv,OAuthProvider:Iv,SAMLAuthProvider:Av,PhoneAuthProvider:Cx,PhoneMultiFactorGenerator:$w,RecaptchaVerifier:Mx,TwitterAuthProvider:Mv,Auth:Ex,AuthCredential:gv,Error:ot}).setInstantiationMode("LAZY").setMultipleInstances(!1)),e.registerVersion("@firebase/auth-compat","0.2.18")}(Vb);
/**
     * @license
     * Copyright 2021 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
function Rx(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new Ya("invalid-argument",`Invalid options passed to function ${e}(): You cannot specify both "merge" and "mergeFields".`);return t}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Nx(){if("undefined"==typeof Uint8Array)throw new Ya("unimplemented","Uint8Arrays are not available in this environment.")}function Lx(){if("undefined"==typeof atob)throw new Ya("unimplemented","Blobs are unavailable in Firestore in this environment.")}class Fx{constructor(e){this._delegate=e}static fromBase64String(e){return Lx(),new Fx(_m.fromBase64String(e))}static fromUint8Array(e){return Nx(),new Fx(_m.fromUint8Array(e))}toBase64(){return Lx(),this._delegate.toBase64()}toUint8Array(){return Nx(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Bx(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const e of t)if(e in n&&"function"==typeof n[e])return!0;return!1}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */(e,["next","error","complete"])}class Vx{enableIndexedDbPersistence(e,t){return function(e,t){ym(e=Xg(e,cm));const n=hm(e),i=e._freezeSettings(),r=new Og;return fm(n,r,new xg(r,i.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function(e){ym(e=Xg(e,cm));const t=hm(e),n=e._freezeSettings(),i=new Og;return fm(t,i,new Pg(i,n.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function(e){if(e._initialized&&!e._terminated)throw new Ya($a.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new Ga;return e._queue.enqueueAndForgetEvenWhileRestricted((async()=>{try{await async function(e){if(!Ss.V())return Promise.resolve();const t=e+"main";await Ss.delete(t)}(uf(e._databaseId,e._persistenceKey)),t.resolve()}catch(e){t.reject(e)}})),t.promise}(e._delegate)}}class Ux{constructor(e,t,n){this._delegate=t,this._persistenceProvider=n,this.INTERNAL={delete:()=>this.terminate()},e instanceof il||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();e.merge||t.host===e.host||Ba("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,n={}){Zg(this._delegate,e,t,n)}enableNetwork(){return gm(this._delegate)}disableNetwork(){return mm(this._delegate)}enablePersistence(e){let t=!1,n=!1;return e&&(t=!!e.synchronizeTabs,n=!!e.experimentalForceOwningTab,Yg("synchronizeTabs",t,"experimentalForceOwningTab",n)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return pm(this._delegate)}onSnapshotsInSync(e){return jb(this._delegate,e)}get app(){if(!this._appCompat)throw new Ya("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new tP(this,im(this._delegate,e))}catch(e){throw qx(e,"collection()","Firestore.collection()")}}doc(e){try{return new Gx(this,rm(this._delegate,e))}catch(e){throw qx(e,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Jx(this,function(e,t){if(e=Xg(e,Jg),$g("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Ya($a.INVALID_ARGUMENT,`Invalid collection ID '${t}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new tm(e,null,function(e){return new Zl(us.emptyPath(),e)}(t))}(this._delegate,e))}catch(e){throw qx(e,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return Rb(this._delegate,(t=>e(new zx(this,t))))}batch(){return hm(this._delegate),new $x(new xb(this._delegate,(e=>Cb(this._delegate,e))))}loadBundle(e){return function(e,t){const n=hm(e=Xg(e,cm)),i=new um;return Hg(n,e._databaseId,t,i),i}(this._delegate,e)}namedQuery(e){return bm(this._delegate,e).then((e=>e?new Jx(this,e):null))}}class Hx extends vb{constructor(e){super(),this.firestore=e}convertBytes(e){return new Fx(new _m(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Gx.forKey(t,this.firestore,null)}}class zx{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Hx(e)}get(e){const t=nP(e);return this._delegate.get(t).then((e=>new Kx(this._firestore,new Zm(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,t.converter))))}set(e,t,n){const i=nP(e);return n?(Rx("Transaction.set",n),this._delegate.set(i,t,n)):this._delegate.set(i,t),this}update(e,t,n,...i){const r=nP(e);return 2===arguments.length?this._delegate.update(r,t):this._delegate.update(r,t,n,...i),this}delete(e){const t=nP(e);return this._delegate.delete(t),this}}class $x{constructor(e){this._delegate=e}set(e,t,n){const i=nP(e);return n?(Rx("WriteBatch.set",n),this._delegate.set(i,t,n)):this._delegate.set(i,t),this}update(e,t,n,...i){const r=nP(e);return 2===arguments.length?this._delegate.update(r,t):this._delegate.update(r,t,n,...i),this}delete(e){const t=nP(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Yx{constructor(e,t,n){this._firestore=e,this._userDataWriter=t,this._delegate=n}fromFirestore(e,t){const n=new eb(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Qx(this._firestore,n),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const n=Yx.INSTANCES;let i=n.get(e);i||(i=new WeakMap,n.set(e,i));let r=i.get(t);return r||(r=new Yx(e,new Hx(e),t),i.set(t,r)),r}}Yx.INSTANCES=new WeakMap;class Gx{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Hx(e)}static forPath(e,t,n){if(e.length%2!=0)throw new Ya("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Gx(t,new em(t._delegate,n,new ds(e)))}static forKey(e,t,n){return new Gx(t,new em(t._delegate,n,e))}get id(){return this._delegate.id}get parent(){return new tP(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new tP(this.firestore,im(this._delegate,e))}catch(e){throw qx(e,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=bt(e))instanceof em&&om(this._delegate,e)}set(e,t){t=Rx("DocumentReference.set",t);try{return t?Ib(this._delegate,e,t):Ib(this._delegate,e)}catch(e){throw qx(e,"setDoc()","DocumentReference.set()")}}update(e,t,...n){try{return 1===arguments.length?Eb(this._delegate,e):Eb(this._delegate,e,t,...n)}catch(e){throw qx(e,"updateDoc()","DocumentReference.update()")}}delete(){return function(e){return Cb(Xg(e.firestore,cm),[new Yu(e._key,Cu.none())])}(this._delegate)}onSnapshot(...e){const t=Wx(e),n=Xx(e,(e=>new Kx(this.firestore,new Zm(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter))));return Db(this._delegate,t,n)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?kb(this._delegate):"server"===(null==e?void 0:e.source)?function(e){e=Xg(e,em);const t=Xg(e.firestore,cm);return Vg(hm(t),e._key,{source:"server"}).then((n=>Ab(t,e,n)))}(this._delegate):function(e){e=Xg(e,em);const t=Xg(e.firestore,cm);return Vg(hm(t),e._key).then((n=>Ab(t,e,n)))}(this._delegate),t.then((e=>new Kx(this.firestore,new Zm(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter))))}withConverter(e){return new Gx(this.firestore,e?this._delegate.withConverter(Yx.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function qx(e,t,n){return e.message=e.message.replace(t,n),e}function Wx(e){for(const t of e)if("object"==typeof t&&!Bx(t))return t;return{}}function Xx(e,t){var n,i;let r;return r=Bx(e[0])?e[0]:Bx(e[1])?e[1]:"function"==typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]},{next:e=>{r.next&&r.next(t(e))},error:null===(n=r.error)||void 0===n?void 0:n.bind(r),complete:null===(i=r.complete)||void 0===i?void 0:i.bind(r)}}class Kx{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Gx(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return ib(this._delegate,e._delegate)}}class Qx extends Kx{data(e){const t=this._delegate.data(e);return function(e,t){e||Ua()}(void 0!==t),t}}class Jx{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Hx(e)}where(e,t,n){try{return new Jx(this.firestore,ab(this._delegate,lb(e,t,n)))}catch(e){throw qx(e,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Jx(this.firestore,ab(this._delegate,cb(e,t)))}catch(e){throw qx(e,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Jx(this.firestore,ab(this._delegate,function(e){return Kg("limit",e),new hb("limit",e,"F")}(e)))}catch(e){throw qx(e,"limit()","Query.limit()")}}limitToLast(e){try{return new Jx(this.firestore,ab(this._delegate,function(e){return Kg("limitToLast",e),new hb("limitToLast",e,"L")}(e)))}catch(e){throw qx(e,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Jx(this.firestore,ab(this._delegate,function(...e){return new db("startAt",e,!0)}(...e)))}catch(e){throw qx(e,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Jx(this.firestore,ab(this._delegate,function(...e){return new db("startAfter",e,!1)}(...e)))}catch(e){throw qx(e,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Jx(this.firestore,ab(this._delegate,function(...e){return new fb("endBefore",e,!1)}(...e)))}catch(e){throw qx(e,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Jx(this.firestore,ab(this._delegate,function(...e){return new fb("endAt",e,!0)}(...e)))}catch(e){throw qx(e,"endAt()","Query.endAt()")}}isEqual(e){return am(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?Sb(this._delegate):"server"===(null==e?void 0:e.source)?function(e){e=Xg(e,tm);const t=Xg(e.firestore,cm),n=hm(t),i=new Ob(t);return Ug(n,e._query,{source:"server"}).then((n=>new tb(t,i,e,n)))}(this._delegate):Tb(this._delegate),t.then((e=>new eP(this.firestore,new tb(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot))))}onSnapshot(...e){const t=Wx(e),n=Xx(e,(e=>new eP(this.firestore,new tb(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot))));return Db(this._delegate,t,n)}withConverter(e){return new Jx(this.firestore,e?this._delegate.withConverter(Yx.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class Zx{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Qx(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class eP{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Jx(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map((e=>new Qx(this._firestore,e)))}docChanges(e){return this._delegate.docChanges(e).map((e=>new Zx(this._firestore,e)))}forEach(e,t){this._delegate.forEach((n=>{e.call(t,new Qx(this._firestore,n))}))}isEqual(e){return ib(this._delegate,e._delegate)}}class tP extends Jx{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Gx(this.firestore,e):null}doc(e){try{return new Gx(this.firestore,void 0===e?rm(this._delegate):rm(this._delegate,e))}catch(e){throw qx(e,"doc()","CollectionReference.doc()")}}add(e){return function(e,t){const n=Xg(e.firestore,cm),i=rm(e),r=_b(e.converter,t);return Cb(n,[Dm(Em(e.firestore),"addDoc",i._key,r,null!==e.converter,{}).toMutation(i._key,Cu.exists(!1))]).then((()=>i))}(this._delegate,e).then((e=>new Gx(this.firestore,e)))}isEqual(e){return om(this._delegate,e._delegate)}withConverter(e){return new tP(this.firestore,e?this._delegate.withConverter(Yx.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function nP(e){return Xg(e,em)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class iP{constructor(...e){this._delegate=new vm(...e)}static documentId(){return new iP(hs.keyField().canonicalString())}isEqual(e){return(e=bt(e))instanceof vm&&this._delegate._internalPath.isEqual(e._internalPath)}}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */class rP{constructor(e){this._delegate=e}static serverTimestamp(){const e=new Am("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new rP(e)}static delete(){const e=new jm("deleteField");return e._methodName="FieldValue.delete",new rP(e)}static arrayUnion(...e){const t=function(...e){return new Mm("arrayUnion",e)}(...e);return t._methodName="FieldValue.arrayUnion",new rP(t)}static arrayRemove(...e){const t=function(...e){return new Rm("arrayRemove",e)}(...e);return t._methodName="FieldValue.arrayRemove",new rP(t)}static increment(e){const t=function(e){return new Nm("increment",e)}(e);return t._methodName="FieldValue.increment",new rP(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}
/**
     * @license
     * Copyright 2021 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */const oP={Firestore:Ux,GeoPoint:xm,Timestamp:as,Blob:Fx,Transaction:zx,WriteBatch:$x,DocumentReference:Gx,DocumentSnapshot:Kx,Query:Jx,QueryDocumentSnapshot:Qx,QuerySnapshot:eP,CollectionReference:tP,FieldPath:iP,FieldValue:rP,setLogLevel:function(e){!function(e){Ra.setLogLevel(e)}(e)},CACHE_SIZE_UNLIMITED:-1};!
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
function(e){!function(e,t){e.INTERNAL.registerComponent(new yt("firestore-compat",(e=>{const n=e.getProvider("app-compat").getImmediate(),i=e.getProvider("firestore").getImmediate();return t(n,i)}),"PUBLIC").setServiceProps(Object.assign({},oP)))}(e,((e,t)=>new Ux(e,t,new Vx))),e.registerVersion("@firebase/firestore-compat","0.1.21")}(Vb);Vb.initializeApp({apiKey:"AIzaSyBJJ7P4v4R9899S8-ZPhy-dNr_Md2iG6GA",authDomain:"capstone-803db.firebaseapp.com",databaseURL:"https://capstone-803db-default-rtdb.firebaseio.com",projectId:"capstone-803db",storageBucket:"capstone-803db.appspot.com",messagingSenderId:"104089541669",appId:"1:104089541669:web:51ff5ab4a495243cfd33cc"});const aP=Vb.firestore(),sP=Vb.auth(),lP=new Vb.auth.GoogleAuthProvider;lP.setCustomParameters({prompt:"select_account"}),lP.addScope("https://www.googleapis.com/auth/drive");const uP=e=>{for(const[t,n]of Object.entries(e)){if(t.toLowerCase().includes("speed"))return n}return 0},cP=e=>{const t=[];return e.forEach((e=>{const n={type:"FeatureCollection",dataName:e.dataName?e.dataName:pe(),dateTime:e.dateTime?e.dateTime:pe(),dataType:e.dataType?e.dataType:e.features[0].geometry.type,hasFilter:!!e.dataName,features:[]};for(const t of e.features){const e=[t.geometry.coordinates[0],t.geometry.coordinates[1]];let i={};null===t.properties&&(i={Id:t.properties.Id?t.properties.Id:pe(),Item:t.properties.Item?t.properties.Item:"POI",Count:t.properties.Count?t.properties.Count:1,Color:t.properties.Color?t.properties.Color:"Green"}),i=t.properties,i.Speed=uP(i);const r={type:"Feature",geometry:{type:t.geometry.type,coordinates:e},properties:i};n.features.push(r)}t.push(n)})),t},hP=async()=>{let e=null;return await sP.signInWithPopup(lP).then((t=>{e=t.credential.accessToken})).catch((e=>e.message)),e};hP();const dP=[];const fP=function(t,n=e){let i;const r=new Set;function a(e){if(o(t,e)&&(t=e,i)){const e=!dP.length;for(const e of r)e[1](),dP.push(e,t);if(e){for(let e=0;e<dP.length;e+=2)dP[e][0](dP[e+1]);dP.length=0}}}return{set:a,update:function(e){a(e(t))},subscribe:function(o,s=e){const l=[o,s];return r.add(l),1===r.size&&(i=n(a)||e),o(t),()=>{r.delete(l),0===r.size&&(i(),i=null)}}}}(null);function pP(t){let n,i,o,a,s,l,d,m,_,w,x,P,O,k,T,S=t[0].displayName+"",I=t[0].email+"";return{c(){n=f("section"),i=f("div"),o=f("p"),o.textContent="Name:",a=g(),s=f("p"),l=p(S),d=g(),m=f("p"),m.textContent="Email:",_=g(),w=f("p"),x=p(I),P=g(),O=f("button"),O.innerHTML='<i class="fa-solid fa-right-from-bracket"></i> Sign Out',y(o,"class","font-bold my-1"),y(m,"class","font-bold my-1"),y(O,"class","card-btn card-btn-red my-1"),y(i,"class","p-4"),y(n,"class","card h-fit scale-in-center")},m(e,h){c(e,n,h),u(n,i),u(i,o),u(i,a),u(i,s),u(s,l),u(i,d),u(i,m),u(i,_),u(i,w),u(w,x),u(i,P),u(i,O),k||(T=b(O,"click",(function(){r(t[1])&&t[1].apply(this,arguments)})),k=!0)},p(e,[n]){t=e,1&n&&S!==(S=t[0].displayName+"")&&v(l,S),1&n&&I!==(I=t[0].email+"")&&v(x,I)},i:e,o:e,d(e){e&&h(n),k=!1,T()}}}function gP(e,t,n){let{user:i}=t,{signOut:r}=t;return e.$$set=e=>{"user"in e&&n(0,i=e.user),"signOut"in e&&n(1,r=e.signOut)},[i,r]}class mP extends X{constructor(e){super(),W(this,e,gP,pP,o,{user:0,signOut:1})}}var bP,yP=function(e,t){return function(){for(var n=new Array(arguments.length),i=0;i<n.length;i++)n[i]=arguments[i];return e.apply(t,n)}},vP=Object.prototype.toString,_P=(bP=Object.create(null),function(e){var t=vP.call(e);return bP[t]||(bP[t]=t.slice(8,-1).toLowerCase())});function wP(e){return e=e.toLowerCase(),function(t){return _P(t)===e}}function xP(e){return Array.isArray(e)}function PP(e){return void 0===e}var OP=wP("ArrayBuffer");function kP(e){return null!==e&&"object"==typeof e}function TP(e){if("object"!==_P(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}var SP=wP("Date"),IP=wP("File"),EP=wP("Blob"),DP=wP("FileList");function jP(e){return"[object Function]"===vP.call(e)}var CP=wP("URLSearchParams");function AP(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),xP(e))for(var n=0,i=e.length;n<i;n++)t.call(null,e[n],n,e);else for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.call(null,e[r],r,e)}var MP,RP=(MP="undefined"!=typeof Uint8Array&&Object.getPrototypeOf(Uint8Array),function(e){return MP&&e instanceof MP}),NP={isArray:xP,isArrayBuffer:OP,isBuffer:function(e){return null!==e&&!PP(e)&&null!==e.constructor&&!PP(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){var t="[object FormData]";return e&&("function"==typeof FormData&&e instanceof FormData||vP.call(e)===t||jP(e.toString)&&e.toString()===t)},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&OP(e.buffer)},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:kP,isPlainObject:TP,isUndefined:PP,isDate:SP,isFile:IP,isBlob:EP,isFunction:jP,isStream:function(e){return kP(e)&&jP(e.pipe)},isURLSearchParams:CP,isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)},forEach:AP,merge:function e(){var t={};function n(n,i){TP(t[i])&&TP(n)?t[i]=e(t[i],n):TP(n)?t[i]=e({},n):xP(n)?t[i]=n.slice():t[i]=n}for(var i=0,r=arguments.length;i<r;i++)AP(arguments[i],n);return t},extend:function(e,t,n){return AP(t,(function(t,i){e[i]=n&&"function"==typeof t?yP(t,n):t})),e},trim:function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e},inherits:function(e,t,n,i){e.prototype=Object.create(t.prototype,i),e.prototype.constructor=e,n&&Object.assign(e.prototype,n)},toFlatObject:function(e,t,n){var i,r,o,a={};t=t||{};do{for(r=(i=Object.getOwnPropertyNames(e)).length;r-- >0;)a[o=i[r]]||(t[o]=e[o],a[o]=!0);e=Object.getPrototypeOf(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:_P,kindOfTest:wP,endsWith:function(e,t,n){e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;var i=e.indexOf(t,n);return-1!==i&&i===n},toArray:function(e){if(!e)return null;var t=e.length;if(PP(t))return null;for(var n=new Array(t);t-- >0;)n[t]=e[t];return n},isTypedArray:RP,isFileList:DP};function LP(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var FP=function(e,t,n){if(!t)return e;var i;if(n)i=n(t);else if(NP.isURLSearchParams(t))i=t.toString();else{var r=[];NP.forEach(t,(function(e,t){null!=e&&(NP.isArray(e)?t+="[]":e=[e],NP.forEach(e,(function(e){NP.isDate(e)?e=e.toISOString():NP.isObject(e)&&(e=JSON.stringify(e)),r.push(LP(t)+"="+LP(e))})))})),i=r.join("&")}if(i){var o=e.indexOf("#");-1!==o&&(e=e.slice(0,o)),e+=(-1===e.indexOf("?")?"?":"&")+i}return e};function BP(){this.handlers=[]}BP.prototype.use=function(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1},BP.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},BP.prototype.forEach=function(e){NP.forEach(this.handlers,(function(t){null!==t&&e(t)}))};var VP=BP,UP=function(e,t){NP.forEach(e,(function(n,i){i!==t&&i.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[i])}))};function HP(e,t,n,i,r){Error.call(this),this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),i&&(this.request=i),r&&(this.response=r)}NP.inherits(HP,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var zP=HP.prototype,$P={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED"].forEach((function(e){$P[e]={value:e}})),Object.defineProperties(HP,$P),Object.defineProperty(zP,"isAxiosError",{value:!0}),HP.from=function(e,t,n,i,r,o){var a=Object.create(zP);return NP.toFlatObject(e,a,(function(e){return e!==Error.prototype})),HP.call(a,e.message,t,n,i,r),a.name=e.name,o&&Object.assign(a,o),a};var YP=HP,GP={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1};var qP=function(e,t){t=t||new FormData;var n=[];function i(e){return null===e?"":NP.isDate(e)?e.toISOString():NP.isArrayBuffer(e)||NP.isTypedArray(e)?"function"==typeof Blob?new Blob([e]):Buffer.from(e):e}return function e(r,o){if(NP.isPlainObject(r)||NP.isArray(r)){if(-1!==n.indexOf(r))throw Error("Circular reference detected in "+o);n.push(r),NP.forEach(r,(function(n,r){if(!NP.isUndefined(n)){var a,s=o?o+"."+r:r;if(n&&!o&&"object"==typeof n)if(NP.endsWith(r,"{}"))n=JSON.stringify(n);else if(NP.endsWith(r,"[]")&&(a=NP.toArray(n)))return void a.forEach((function(e){!NP.isUndefined(e)&&t.append(s,i(e))}));e(n,s)}})),n.pop()}else t.append(o,i(r))}(e),t},WP=NP.isStandardBrowserEnv()?{write:function(e,t,n,i,r,o){var a=[];a.push(e+"="+encodeURIComponent(t)),NP.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),NP.isString(i)&&a.push("path="+i),NP.isString(r)&&a.push("domain="+r),!0===o&&a.push("secure"),document.cookie=a.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}},XP=function(e,t){return e&&!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)?function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t},KP=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],QP=NP.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function i(e){var i=e;return t&&(n.setAttribute("href",i),i=n.href),n.setAttribute("href",i),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=i(window.location.href),function(t){var n=NP.isString(t)?i(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0};function JP(e){YP.call(this,null==e?"canceled":e,YP.ERR_CANCELED),this.name="CanceledError"}NP.inherits(JP,YP,{__CANCEL__:!0});var ZP=JP,eO=function(e){return new Promise((function(t,n){var i,r=e.data,o=e.headers,a=e.responseType;function s(){e.cancelToken&&e.cancelToken.unsubscribe(i),e.signal&&e.signal.removeEventListener("abort",i)}NP.isFormData(r)&&NP.isStandardBrowserEnv()&&delete o["Content-Type"];var l=new XMLHttpRequest;if(e.auth){var u=e.auth.username||"",c=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";o.Authorization="Basic "+btoa(u+":"+c)}var h=XP(e.baseURL,e.url);function d(){if(l){var i,r,o,u,c,h="getAllResponseHeaders"in l?(i=l.getAllResponseHeaders(),c={},i?(NP.forEach(i.split("\n"),(function(e){if(u=e.indexOf(":"),r=NP.trim(e.substr(0,u)).toLowerCase(),o=NP.trim(e.substr(u+1)),r){if(c[r]&&KP.indexOf(r)>=0)return;c[r]="set-cookie"===r?(c[r]?c[r]:[]).concat([o]):c[r]?c[r]+", "+o:o}})),c):c):null;!function(e,t,n){var i=n.config.validateStatus;n.status&&i&&!i(n.status)?t(new YP("Request failed with status code "+n.status,[YP.ERR_BAD_REQUEST,YP.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}((function(e){t(e),s()}),(function(e){n(e),s()}),{data:a&&"text"!==a&&"json"!==a?l.response:l.responseText,status:l.status,statusText:l.statusText,headers:h,config:e,request:l}),l=null}}if(l.open(e.method.toUpperCase(),FP(h,e.params,e.paramsSerializer),!0),l.timeout=e.timeout,"onloadend"in l?l.onloadend=d:l.onreadystatechange=function(){l&&4===l.readyState&&(0!==l.status||l.responseURL&&0===l.responseURL.indexOf("file:"))&&setTimeout(d)},l.onabort=function(){l&&(n(new YP("Request aborted",YP.ECONNABORTED,e,l)),l=null)},l.onerror=function(){n(new YP("Network Error",YP.ERR_NETWORK,e,l,l)),l=null},l.ontimeout=function(){var t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",i=e.transitional||GP;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(new YP(t,i.clarifyTimeoutError?YP.ETIMEDOUT:YP.ECONNABORTED,e,l)),l=null},NP.isStandardBrowserEnv()){var f=(e.withCredentials||QP(h))&&e.xsrfCookieName?WP.read(e.xsrfCookieName):void 0;f&&(o[e.xsrfHeaderName]=f)}"setRequestHeader"in l&&NP.forEach(o,(function(e,t){void 0===r&&"content-type"===t.toLowerCase()?delete o[t]:l.setRequestHeader(t,e)})),NP.isUndefined(e.withCredentials)||(l.withCredentials=!!e.withCredentials),a&&"json"!==a&&(l.responseType=e.responseType),"function"==typeof e.onDownloadProgress&&l.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&l.upload&&l.upload.addEventListener("progress",e.onUploadProgress),(e.cancelToken||e.signal)&&(i=function(e){l&&(n(!e||e&&e.type?new ZP:e),l.abort(),l=null)},e.cancelToken&&e.cancelToken.subscribe(i),e.signal&&(e.signal.aborted?i():e.signal.addEventListener("abort",i))),r||(r=null);var p,g=(p=/^([-+\w]{1,25})(:?\/\/|:)/.exec(h))&&p[1]||"";g&&-1===["http","https","file"].indexOf(g)?n(new YP("Unsupported protocol "+g+":",YP.ERR_BAD_REQUEST,e)):l.send(r)}))},tO={"Content-Type":"application/x-www-form-urlencoded"};function nO(e,t){!NP.isUndefined(e)&&NP.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var iO,rO={transitional:GP,adapter:(("undefined"!=typeof XMLHttpRequest||"undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process))&&(iO=eO),iO),transformRequest:[function(e,t){if(UP(t,"Accept"),UP(t,"Content-Type"),NP.isFormData(e)||NP.isArrayBuffer(e)||NP.isBuffer(e)||NP.isStream(e)||NP.isFile(e)||NP.isBlob(e))return e;if(NP.isArrayBufferView(e))return e.buffer;if(NP.isURLSearchParams(e))return nO(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString();var n,i=NP.isObject(e),r=t&&t["Content-Type"];if((n=NP.isFileList(e))||i&&"multipart/form-data"===r){var o=this.env&&this.env.FormData;return qP(n?{"files[]":e}:e,o&&new o)}return i||"application/json"===r?(nO(t,"application/json"),function(e,t,n){if(NP.isString(e))try{return(t||JSON.parse)(e),NP.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){var t=this.transitional||rO.transitional,n=t&&t.silentJSONParsing,i=t&&t.forcedJSONParsing,r=!n&&"json"===this.responseType;if(r||i&&NP.isString(e)&&e.length)try{return JSON.parse(e)}catch(e){if(r){if("SyntaxError"===e.name)throw YP.from(e,YP.ERR_BAD_RESPONSE,this,null,this.response);throw e}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:null},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};NP.forEach(["delete","get","head"],(function(e){rO.headers[e]={}})),NP.forEach(["post","put","patch"],(function(e){rO.headers[e]=NP.merge(tO)}));var oO=rO,aO=function(e,t,n){var i=this||oO;return NP.forEach(n,(function(n){e=n.call(i,e,t)})),e},sO=function(e){return!(!e||!e.__CANCEL__)};function lO(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new ZP}var uO=function(e){return lO(e),e.headers=e.headers||{},e.data=aO.call(e,e.data,e.headers,e.transformRequest),e.headers=NP.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),NP.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||oO.adapter)(e).then((function(t){return lO(e),t.data=aO.call(e,t.data,t.headers,e.transformResponse),t}),(function(t){return sO(t)||(lO(e),t&&t.response&&(t.response.data=aO.call(e,t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))},cO=function(e,t){t=t||{};var n={};function i(e,t){return NP.isPlainObject(e)&&NP.isPlainObject(t)?NP.merge(e,t):NP.isPlainObject(t)?NP.merge({},t):NP.isArray(t)?t.slice():t}function r(n){return NP.isUndefined(t[n])?NP.isUndefined(e[n])?void 0:i(void 0,e[n]):i(e[n],t[n])}function o(e){if(!NP.isUndefined(t[e]))return i(void 0,t[e])}function a(n){return NP.isUndefined(t[n])?NP.isUndefined(e[n])?void 0:i(void 0,e[n]):i(void 0,t[n])}function s(n){return n in t?i(e[n],t[n]):n in e?i(void 0,e[n]):void 0}var l={url:o,method:o,data:o,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:s};return NP.forEach(Object.keys(e).concat(Object.keys(t)),(function(e){var t=l[e]||r,i=t(e);NP.isUndefined(i)&&t!==s||(n[e]=i)})),n},hO="0.27.2",dO=hO,fO={};["object","boolean","number","function","string","symbol"].forEach((function(e,t){fO[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));var pO={};fO.transitional=function(e,t,n){function i(e,t){return"[Axios v"+dO+"] Transitional option '"+e+"'"+t+(n?". "+n:"")}return function(n,r,o){if(!1===e)throw new YP(i(r," has been removed"+(t?" in "+t:"")),YP.ERR_DEPRECATED);return t&&!pO[r]&&(pO[r]=!0,console.warn(i(r," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,r,o)}};var gO={assertOptions:function(e,t,n){if("object"!=typeof e)throw new YP("options must be an object",YP.ERR_BAD_OPTION_VALUE);for(var i=Object.keys(e),r=i.length;r-- >0;){var o=i[r],a=t[o];if(a){var s=e[o],l=void 0===s||a(s,o,e);if(!0!==l)throw new YP("option "+o+" must be "+l,YP.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new YP("Unknown option "+o,YP.ERR_BAD_OPTION)}},validators:fO},mO=gO.validators;function bO(e){this.defaults=e,this.interceptors={request:new VP,response:new VP}}bO.prototype.request=function(e,t){"string"==typeof e?(t=t||{}).url=e:t=e||{},(t=cO(this.defaults,t)).method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var n=t.transitional;void 0!==n&&gO.assertOptions(n,{silentJSONParsing:mO.transitional(mO.boolean),forcedJSONParsing:mO.transitional(mO.boolean),clarifyTimeoutError:mO.transitional(mO.boolean)},!1);var i=[],r=!0;this.interceptors.request.forEach((function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(r=r&&e.synchronous,i.unshift(e.fulfilled,e.rejected))}));var o,a=[];if(this.interceptors.response.forEach((function(e){a.push(e.fulfilled,e.rejected)})),!r){var s=[uO,void 0];for(Array.prototype.unshift.apply(s,i),s=s.concat(a),o=Promise.resolve(t);s.length;)o=o.then(s.shift(),s.shift());return o}for(var l=t;i.length;){var u=i.shift(),c=i.shift();try{l=u(l)}catch(e){c(e);break}}try{o=uO(l)}catch(e){return Promise.reject(e)}for(;a.length;)o=o.then(a.shift(),a.shift());return o},bO.prototype.getUri=function(e){e=cO(this.defaults,e);var t=XP(e.baseURL,e.url);return FP(t,e.params,e.paramsSerializer)},NP.forEach(["delete","get","head","options"],(function(e){bO.prototype[e]=function(t,n){return this.request(cO(n||{},{method:e,url:t,data:(n||{}).data}))}})),NP.forEach(["post","put","patch"],(function(e){function t(t){return function(n,i,r){return this.request(cO(r||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:i}))}}bO.prototype[e]=t(),bO.prototype[e+"Form"]=t(!0)}));var yO=bO;function vO(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var n=this;this.promise.then((function(e){if(n._listeners){var t,i=n._listeners.length;for(t=0;t<i;t++)n._listeners[t](e);n._listeners=null}})),this.promise.then=function(e){var t,i=new Promise((function(e){n.subscribe(e),t=e})).then(e);return i.cancel=function(){n.unsubscribe(t)},i},e((function(e){n.reason||(n.reason=new ZP(e),t(n.reason))}))}vO.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},vO.prototype.subscribe=function(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]},vO.prototype.unsubscribe=function(e){if(this._listeners){var t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}},vO.source=function(){var e;return{token:new vO((function(t){e=t})),cancel:e}};var _O=vO;var wO=function e(t){var n=new yO(t),i=yP(yO.prototype.request,n);return NP.extend(i,yO.prototype,n),NP.extend(i,n),i.create=function(n){return e(cO(t,n))},i}(oO);wO.Axios=yO,wO.CanceledError=ZP,wO.CancelToken=_O,wO.isCancel=sO,wO.VERSION=hO,wO.toFormData=qP,wO.AxiosError=YP,wO.Cancel=wO.CanceledError,wO.all=function(e){return Promise.all(e)},wO.spread=function(e){return function(t){return e.apply(null,t)}},wO.isAxiosError=function(e){return NP.isObject(e)&&!0===e.isAxiosError};var xO=wO,PO=wO;xO.default=PO;var OO=xO;function kO(t){let n,i,r,o;return{c(){n=f("div"),i=f("h1"),r=p(t[0]),y(i,"class","text-4xl "),y(n,"class",o=`${t[1]} ${t[2]}  py-5 text-center text-white sticky top-0 ${t[3]}`)},m(e,t){c(e,n,t),u(n,i),u(i,r)},p(e,[t]){1&t&&v(r,e[0]),14&t&&o!==(o=`${e[1]} ${e[2]}  py-5 text-center text-white sticky top-0 ${e[3]}`)&&y(n,"class",o)},i:e,o:e,d(e){e&&h(n)}}}function TO(e,t,n){let{title:i=""}=t,{color:r=""}=t,{rounded:o=""}=t,{zHeight:a=""}=t;return e.$$set=e=>{"title"in e&&n(0,i=e.title),"color"in e&&n(1,r=e.color),"rounded"in e&&n(2,o=e.rounded),"zHeight"in e&&n(3,a=e.zHeight)},[i,r,o,a]}class SO extends X{constructor(e){super(),W(this,e,TO,kO,o,{title:0,color:1,rounded:2,zHeight:3})}}function IO(t){let n,i,r,o,a,s,l,d;return{c(){n=f("section"),i=f("div"),r=f("p"),r.textContent="Attention",o=g(),a=f("p"),s=p(t[0]),l=g(),d=f("hr"),y(r,"class","font-bold"),y(a,"class","text-sm mt-2"),y(i,"class","py-8 px-5"),y(n,"class","bg-smoke")},m(e,t){c(e,n,t),u(n,i),u(i,r),u(i,o),u(i,a),u(a,s),u(n,l),u(n,d)},p(e,[t]){1&t&&v(s,e[0])},i:e,o:e,d(e){e&&h(n)}}}function EO(e,t,n){let{message:i=""}=t;return e.$$set=e=>{"message"in e&&n(0,i=e.message)},[i]}class DO extends X{constructor(e){super(),W(this,e,EO,IO,o,{message:0})}}function jO(e,t,n){const i=e.slice();return i[3]=t[n],i}function CO(e){let t,n,i,r,o,a,s,l,d,m=e[3].title+"";function _(){return e[2](e[3])}return{c(){t=f("button"),n=f("i"),r=g(),o=p(m),a=g(),y(n,"class",i="fa-solid "+e[3].icon),y(t,"class",s=` navbar-btn ${e[0]==e[3].id?"navbar-btn-blue":""} `)},m(e,i){c(e,t,i),u(t,n),u(t,r),u(t,o),u(t,a),l||(d=b(t,"click",_),l=!0)},p(r,a){e=r,2&a&&i!==(i="fa-solid "+e[3].icon)&&y(n,"class",i),2&a&&m!==(m=e[3].title+"")&&v(o,m),3&a&&s!==(s=` navbar-btn ${e[0]==e[3].id?"navbar-btn-blue":""} `)&&y(t,"class",s)},d(e){e&&h(t),l=!1,d()}}}function AO(t){let n,i,r=t[1],o=[];for(let e=0;e<r.length;e+=1)o[e]=CO(jO(t,r,e));return{c(){n=f("section"),i=f("div");for(let e=0;e<o.length;e+=1)o[e].c();y(i,"class","flex flex-row "),y(n,"class","shadow-xl")},m(e,t){c(e,n,t),u(n,i);for(let e=0;e<o.length;e+=1)o[e].m(i,null)},p(e,[t]){if(3&t){let n;for(r=e[1],n=0;n<r.length;n+=1){const a=jO(e,r,n);o[n]?o[n].p(a,t):(o[n]=CO(a),o[n].c(),o[n].m(i,null))}for(;n<o.length;n+=1)o[n].d(1);o.length=r.length}},i:e,o:e,d(e){e&&h(n),d(o,e)}}}function MO(e,t,n){let{selectedMenu:i}=t,{menuComponents:r}=t;return e.$$set=e=>{"selectedMenu"in e&&n(0,i=e.selectedMenu),"menuComponents"in e&&n(1,r=e.menuComponents)},[i,r,e=>n(0,i=e.id)]}class RO extends X{constructor(e){super(),W(this,e,MO,AO,o,{selectedMenu:0,menuComponents:1})}}const NO=async e=>{try{const t=await(async e=>{try{return await OO.get("https://www.googleapis.com/drive/v3/files?q=mimeType='application/vnd.google-apps.folder'",{headers:{Authorization:`Bearer ${e}`}})}catch(e){return e.response?e.response.status:e.request?e.request:e.message}})(e);if(200===t.status){const n=se(t.data.files,"name","Dashcam")[0],i=await(async(e,t)=>{try{const n=`https://www.googleapis.com/drive/v3/files?q='${t}'+in+parents&trashed=false&fields=files(*)`;return await OO.get(n,{headers:{Authorization:`Bearer ${e}`}})}catch(e){return e.response?e.response.status:e.request?e.request:e.message}})(e,n.id);return i}return t}catch(e){return e}},LO=(e,t=2)=>{if(!+e)return"0 Bytes";const n=t<0?0:t,i=Math.floor(Math.log(e)/Math.log(1024));return`${parseFloat((e/1024**i).toFixed(n))} ${["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][i]}`};function FO(e){let t,n,i,r;return{c(){t=f("a"),n=f("img"),l(n.src,i=e[0].thumbnailLink)||y(n,"src",i),y(n,"onerror","https://i.picsum.photos/id/870/200/300.jpg?blur=2&grayscale&hmac=ujRymp644uYVjdKJM7kyLDSsrqNSMVRPnGU99cKl6Vs"),y(n,"alt","Dashcam"),y(n,"class","h-64 w-auto object-cover rounded-lg"),y(n,"width","500"),y(n,"height","600"),y(t,"href",r=e[0].webViewLink),y(t,"target","_blank"),y(t,"class","text-white text-xl borderRounded")},m(e,i){c(e,t,i),u(t,n)},p(e,o){1&o&&!l(n.src,i=e[0].thumbnailLink)&&y(n,"src",i),1&o&&r!==(r=e[0].webViewLink)&&y(t,"href",r)},d(e){e&&h(t)}}}function BO(t){let n,r,o,a,s,l,d,m,_,w,x,P,O,k,T,S,I,E,D,j,C,A,M,R,N,L,F,B,V,U,H,z,$,Y,G,q,W,X,K,Q,J,Z,ee=t[0].name+"",te=t[0].name+"",ne=t[0].createdTime+"",ie=t[0].owners[0].displayName+"",re=LO(t[0].size)+"",oe=t[0].webViewLink&&t[0].thumbnailLink&&FO(t);return{c(){n=f("section"),r=f("div"),o=f("p"),a=p(ee),s=g(),l=f("div"),oe&&oe.c(),d=g(),m=f("div"),_=f("p"),_.textContent="videoFile Name:",w=g(),x=f("p"),P=p(te),O=g(),k=f("p"),k.textContent="Created Time:",T=g(),S=f("p"),I=p(ne),E=g(),D=f("p"),D.textContent="Owner:",j=g(),C=f("p"),A=p(ie),M=g(),R=f("p"),R.textContent="videoFile Size:",N=g(),L=f("p"),F=p(re),B=g(),V=f("div"),U=f("a"),H=f("i"),z=p("\r\n\t\t\t\tWatch"),Y=g(),G=f("button"),G.innerHTML='<i class="fa-solid fa-share"></i>\n\t\t\t\tAdd to Map',q=g(),W=f("hr"),X=g(),K=f("div"),Q=f("button"),Q.innerHTML='<i class="fa-solid fa-trash"></i>\n\t\t\t\tDelete',y(r,"class","bg-dark rounded-lg py-5 text-center text-white sticky top-0 "),y(_,"class","font-bold my-1"),y(x,"class","truncate"),y(k,"class","font-bold my-1"),y(D,"class","font-bold my-1"),y(R,"class","font-bold my-1"),y(m,"class","my-4"),y(H,"class","fa-solid fa-eye"),y(U,"a",""),y(U,"href",$=t[0].webViewLink),y(U,"target","_blank"),y(U,"class","card-btn card-btn-blue my-1 mr-1"),y(G,"class","card-btn card-btn-blue my-1"),y(V,"class","flex"),y(W,"class","solid my-4"),y(Q,"class","card-btn card-btn-red-outline my-1"),y(K,"class","flex"),y(l,"class","p-4"),y(n,"class","card h-fit")},m(e,i){c(e,n,i),u(n,r),u(r,o),u(o,a),u(n,s),u(n,l),oe&&oe.m(l,null),u(l,d),u(l,m),u(m,_),u(m,w),u(m,x),u(x,P),u(m,O),u(m,k),u(m,T),u(m,S),u(S,I),u(m,E),u(m,D),u(m,j),u(m,C),u(C,A),u(m,M),u(m,R),u(m,N),u(m,L),u(L,F),u(l,B),u(l,V),u(V,U),u(U,H),u(U,z),u(V,Y),u(V,G),u(l,q),u(l,W),u(l,X),u(l,K),u(K,Q),J||(Z=[b(G,"click",t[4]),b(Q,"click",t[5])],J=!0)},p(e,[t]){1&t&&ee!==(ee=e[0].name+"")&&v(a,ee),e[0].webViewLink&&e[0].thumbnailLink?oe?oe.p(e,t):(oe=FO(e),oe.c(),oe.m(l,d)):oe&&(oe.d(1),oe=null),1&t&&te!==(te=e[0].name+"")&&v(P,te),1&t&&ne!==(ne=e[0].createdTime+"")&&v(I,ne),1&t&&ie!==(ie=e[0].owners[0].displayName+"")&&v(A,ie),1&t&&re!==(re=LO(e[0].size)+"")&&v(F,re),1&t&&$!==($=e[0].webViewLink)&&y(U,"href",$)},i:e,o:e,d(e){e&&h(n),oe&&oe.d(),J=!1,i(Z)}}}function VO(e,t,n){let{videoFile:i}=t,{deleteDriveFile:r}=t,{startMachineLearning:o}=t,{fetchGPSDataForFile:a}=t;return e.$$set=e=>{"videoFile"in e&&n(0,i=e.videoFile),"deleteDriveFile"in e&&n(1,r=e.deleteDriveFile),"startMachineLearning"in e&&n(3,o=e.startMachineLearning),"fetchGPSDataForFile"in e&&n(2,a=e.fetchGPSDataForFile)},[i,r,a,o,()=>a(i),()=>r(i)]}class UO extends X{constructor(e){super(),W(this,e,VO,BO,o,{videoFile:0,deleteDriveFile:1,startMachineLearning:3,fetchGPSDataForFile:2})}}function HO(e,t,n){const i=e.slice();return i[2]=t[n],i}function zO(e){let t,n,i,r,o,a,s,l,d,m=e[2].title+"";function _(){return e[1](e[2])}return{c(){t=f("button"),n=f("i"),r=g(),o=p(m),a=g(),y(n,"class",i=e[2].icon+""),y(t,"class",s=` navbar-btn ${0==e[2].id?"navbar-btn-blue":""} `)},m(e,i){c(e,t,i),u(t,n),u(t,r),u(t,o),u(t,a),l||(d=b(t,"click",_),l=!0)},p(r,a){e=r,1&a&&i!==(i=e[2].icon+"")&&y(n,"class",i),1&a&&m!==(m=e[2].title+"")&&v(o,m),1&a&&s!==(s=` navbar-btn ${0==e[2].id?"navbar-btn-blue":""} `)&&y(t,"class",s)},d(e){e&&h(t),l=!1,d()}}}function $O(t){let n,i,r=t[0],o=[];for(let e=0;e<r.length;e+=1)o[e]=zO(HO(t,r,e));return{c(){n=f("section"),i=f("div");for(let e=0;e<o.length;e+=1)o[e].c();y(i,"class","flex flex-row "),y(n,"class","shadow-xl")},m(e,t){c(e,n,t),u(n,i);for(let e=0;e<o.length;e+=1)o[e].m(i,null)},p(e,[t]){if(1&t){let n;for(r=e[0],n=0;n<r.length;n+=1){const a=HO(e,r,n);o[n]?o[n].p(a,t):(o[n]=zO(a),o[n].c(),o[n].m(i,null))}for(;n<o.length;n+=1)o[n].d(1);o.length=r.length}},i:e,o:e,d(e){e&&h(n),d(o,e)}}}function YO(e,t,n){let{functionComponents:i}=t;return e.$$set=e=>{"functionComponents"in e&&n(0,i=e.functionComponents)},[i,e=>e.function()]}class GO extends X{constructor(e){super(),W(this,e,YO,$O,o,{functionComponents:0})}}const qO=e=>e.sort(((e,t)=>t.createdTime-e.createdTime));function WO(e,t,n){const i=e.slice();return i[18]=t[n],i[19]=t,i[20]=n,i}function XO(e){let t,n,i=e[0],r=[];for(let t=0;t<i.length;t+=1)r[t]=ZO(WO(e,i,t));const o=e=>H(r[e],1,1,(()=>{r[e]=null}));return{c(){for(let e=0;e<r.length;e+=1)r[e].c();t=m()},m(e,i){for(let t=0;t<r.length;t+=1)r[t].m(e,i);c(e,t,i),n=!0},p(e,n){if(27&n){let a;for(i=e[0],a=0;a<i.length;a+=1){const o=WO(e,i,a);r[a]?(r[a].p(o,n),U(r[a],1)):(r[a]=ZO(o),r[a].c(),U(r[a],1),r[a].m(t.parentNode,t))}for(B(),a=i.length;a<r.length;a+=1)o(a);V()}},i(e){if(!n){for(let e=0;e<i.length;e+=1)U(r[e]);n=!0}},o(e){r=r.filter(Boolean);for(let e=0;e<r.length;e+=1)H(r[e]);n=!1},d(e){d(r,e),e&&h(t)}}}function KO(t){let n,i,r;return i=new Ie({props:{title:"Recordings",message:"No Recordings found.",styleColor:"red"}}),{c(){n=f("div"),$(i.$$.fragment),y(n,"class","col-span-1 md:col-span-3")},m(e,t){c(e,n,t),Y(i,n,null),r=!0},p:e,i(e){r||(U(i.$$.fragment,e),r=!0)},o(e){H(i.$$.fragment,e),r=!1},d(e){e&&h(n),G(i)}}}function QO(t){let n,i,r;return i=new Ie({props:{title:"Recordings",message:"Records have not been fetched.",styleColor:"red"}}),{c(){n=f("div"),$(i.$$.fragment),y(n,"class","col-span-1 md:col-span-3")},m(e,t){c(e,n,t),Y(i,n,null),r=!0},p:e,i(e){r||(U(i.$$.fragment,e),r=!0)},o(e){H(i.$$.fragment,e),r=!1},d(e){e&&h(n),G(i)}}}function JO(e){let t,n,i,r,o;function a(t){e[10](t,e[18],e[19],e[20])}let s={deleteDriveFile:e[3],startMachineLearning:e[4],fetchGPSDataForFile:e[1]};return void 0!==e[18]&&(s.videoFile=e[18]),n=new UO({props:s}),T.push((()=>z(n,"videoFile",a))),{c(){t=f("div"),$(n.$$.fragment),r=g(),y(t,"class","col-span-1 md:col-span-3")},m(e,i){c(e,t,i),Y(n,t,null),u(t,r),o=!0},p(t,r){e=t;const o={};2&r&&(o.fetchGPSDataForFile=e[1]),!i&&1&r&&(i=!0,o.videoFile=e[18],C((()=>i=!1))),n.$set(o)},i(e){o||(U(n.$$.fragment,e),o=!0)},o(e){H(n.$$.fragment,e),o=!1},d(e){e&&h(t),G(n)}}}function ZO(e){let t,n,i=("MP4"===e[18].fileExtension||"mp4"===e[18].fileExtension)&&JO(e);return{c(){i&&i.c(),t=m()},m(e,r){i&&i.m(e,r),c(e,t,r),n=!0},p(e,n){"MP4"===e[18].fileExtension||"mp4"===e[18].fileExtension?i?(i.p(e,n),1&n&&U(i,1)):(i=JO(e),i.c(),U(i,1),i.m(t.parentNode,t)):i&&(B(),H(i,1,1,(()=>{i=null})),V())},i(e){n||(U(i),n=!0)},o(e){H(i),n=!1},d(e){i&&i.d(e),e&&h(t)}}}function ek(e){let t,n,i,r,o,a,s,l,u,d,p;function m(t){e[9](t)}t=new SO({props:{title:"Recordings",color:"bg-dark",zHeight:"z-10"}}),i=new DO({props:{message:"Load, view, and sort all Google Drive Recordings. Use Pagination to sort between videos."}});let b={};void 0!==e[2]&&(b.functionComponents=e[2]),o=new GO({props:b}),T.push((()=>z(o,"functionComponents",m)));const v=[QO,KO,XO],_=[];function w(e,t){return null===e[0]?0:e[0].length<=0?1:2}return u=w(e),d=_[u]=v[u](e),{c(){$(t.$$.fragment),n=g(),$(i.$$.fragment),r=g(),$(o.$$.fragment),s=g(),l=f("section"),d.c(),y(l,"class","grid grid-cols-1 md:grid-cols-12 gap-4 my-4 px-4 h-fit divide-x-1 ")},m(e,a){Y(t,e,a),c(e,n,a),Y(i,e,a),c(e,r,a),Y(o,e,a),c(e,s,a),c(e,l,a),_[u].m(l,null),p=!0},p(e,[t]){const n={};!a&&4&t&&(a=!0,n.functionComponents=e[2],C((()=>a=!1))),o.$set(n);let i=u;u=w(e),u===i?_[u].p(e,t):(B(),H(_[i],1,1,(()=>{_[i]=null})),V(),d=_[u],d?d.p(e,t):(d=_[u]=v[u](e),d.c()),U(d,1),d.m(l,null))},i(e){p||(U(t.$$.fragment,e),U(i.$$.fragment,e),U(o.$$.fragment,e),U(d),p=!0)},o(e){H(t.$$.fragment,e),H(i.$$.fragment,e),H(o.$$.fragment,e),H(d),p=!1},d(e){G(t,e),e&&h(n),G(i,e),e&&h(r),G(o,e),e&&h(s),e&&h(l),_[u].d()}}}function tk(e,t,n){let{user:i}=t,{files:r}=t,{verifyAccessToken:o}=t,{accessTokenValue:a}=t,{selectedVideoFile:s}=t,{fetchGPSDataForFile:l}=t;const u=()=>{r.length>0&&sessionStorage.getItem("Files")!==JSON.stringify(r)&&sessionStorage.setItem("Files",JSON.stringify(r))};let c=[{id:0,title:"Fetch Google Drive Data",icon:"fa-brands fa-google-drive",function:async()=>{await o();const e=await NO(a);200===e.status?(e.data.files.length>=1?alert("Found Dashcam Files"):alert("No Dashcam Files found"),n(0,r=e.data.files),console.log("App.js | files",e.data.files),u()):alert(e.message)}},{id:1,title:"Sort by Size ASC",icon:"fa-solid fa-filter",function:()=>{const e=r.sort(((e,t)=>e.size-t.size));n(0,r=e)}},{id:2,title:"Sort by Size DSC",icon:"fa-solid fa-filter",function:()=>{const e=r.sort(((e,t)=>t.size-e.size));n(0,r=e)}},{id:3,title:"Sort by Time ASC",icon:"fa-solid fa-filter",function:()=>{const e=r.sort(((e,t)=>e.createdTime-t.createdTime));n(0,r=e)}},{id:4,title:"Sort by Time DSC",icon:"fa-solid fa-filter",function:()=>{const e=qO(r);n(0,r=e)}},{id:5,title:"Reset Video List",icon:"fa-solid fa-clock-rotate-left",function:()=>{const e=qO(r);n(0,r=e)}}];return e.$$set=e=>{"user"in e&&n(6,i=e.user),"files"in e&&n(0,r=e.files),"verifyAccessToken"in e&&n(7,o=e.verifyAccessToken),"accessTokenValue"in e&&n(8,a=e.accessTokenValue),"selectedVideoFile"in e&&n(5,s=e.selectedVideoFile),"fetchGPSDataForFile"in e&&n(1,l=e.fetchGPSDataForFile)},[r,l,c,async e=>{await o();let t=r;const i=le(e,r);i&&(204===l.status?(t=t.filter((e=>e.id!==i.id)),alert("Successfully Deleted Google Drive Coordinates File")):alert("Cannot delete Google Drive Coordinates File"));const l=await(async(e,t)=>{try{const n=`https://www.googleapis.com/drive/v3/files/${t}`;return await OO.delete(n,{headers:{Authorization:`Bearer ${e}`}})}catch(e){return e.response?e.response.status:e.request?e.request:e.message}})(a,e.id);e&&(204===l.status?(t=t.filter((t=>t.id!==e.id)),s.id==e.id&&n(5,s=null),alert("Successfully Deleted Google Drive Video File")):alert("Cannot delete Google Drive Video File")),n(0,r=t),u()},async e=>{const t=le(e,r);if(t){alert("Processing Dashcam Video. This will take some time, please wait");const n=await(async(e,t,n)=>{try{const i={key:1,user_id:`${e.uid}`,video_link:`https://drive.google.com/file/d/${t.id}/view?usp=sharing`,coord_link:`https://drive.google.com/file/d/${n.id}/view?usp=sharing`};return await OO({method:"post",url:"http://127.0.0.1:8000/process",headers:{"Content-Type":"application/json"},data:JSON.stringify(i)})}catch(e){return e.response?e.response.status:e.request?e.request:e.message}})(i,e,t);200===n.status?alert("Succesfully Processed Video"):alert(n.message)}else alert("Coordinates File does not exist")},s,i,o,a,function(e){c=e,n(2,c)},function(e,t,i,o){i[o]=e,n(0,r)}]}class nk extends X{constructor(e){super(),W(this,e,tk,ek,o,{user:6,files:0,verifyAccessToken:7,accessTokenValue:8,selectedVideoFile:5,fetchGPSDataForFile:1})}}function ik(e){let t,n,i;return{c(){t=f("iframe"),y(t,"class","h-96 w-full overflow-hidden rounded-lg"),t.allowFullscreen=!0,y(t,"frameborder","0"),y(t,"height","100%"),y(t,"width","100%"),y(t,"title",n=`${e[0].name}`),l(t.src,i=`${e[0].webViewLink.replace("view","preview")}`)||y(t,"src",i),y(t,"allow","autoplay")},m(e,n){c(e,t,n)},p(e,r){1&r&&n!==(n=`${e[0].name}`)&&y(t,"title",n),1&r&&!l(t.src,i=`${e[0].webViewLink.replace("view","preview")}`)&&y(t,"src",i)},d(e){e&&h(t)}}}function rk(t){let n;return{c(){n=f("div"),n.innerHTML='<p class="font-bold my-1">Video Player:</p> \n\t\t\t<div class="alert alert-red my-1" role="alert">No Video selected.</div>',y(n,"class","p-4")},m(e,t){c(e,n,t)},p:e,d(e){e&&h(n)}}}function ok(t){let n,i;function r(e,t){return null==e[0]?rk:ik}let o=r(t),a=o(t);return{c(){n=f("section"),a.c(),y(n,"class",i="card "+(null==t[0]?"h-fit":"h-96")+" scale-in-center")},m(e,t){c(e,n,t),a.m(n,null)},p(e,[t]){o===(o=r(e))&&a?a.p(e,t):(a.d(1),a=o(e),a&&(a.c(),a.m(n,null))),1&t&&i!==(i="card "+(null==e[0]?"h-fit":"h-96")+" scale-in-center")&&y(n,"class",i)},i:e,o:e,d(e){e&&h(n),a.d()}}}function ak(e,t,n){let{selectedVideoFile:i}=t;return e.$$set=e=>{"selectedVideoFile"in e&&n(0,i=e.selectedVideoFile)},[i]}class sk extends X{constructor(e){super(),W(this,e,ak,ok,o,{selectedVideoFile:0})}}function lk(e,t,n){const i=e.slice();return i[2]=t[n],i[4]=n,i}function uk(e){let t,n,i,r,o,a=e[1],s=[];for(let t=0;t<a.length;t+=1)s[t]=hk(lk(e,a,t));return{c(){t=f("div");for(let e=0;e<s.length;e+=1)s[e].c();n=g(),i=f("p"),r=f("i"),o=p(" 100+"),y(r,"class","dot"),y(r,"style",`--color:${e[1][e[1].length-1]}`),y(i,"class","list-item my-2"),y(t,"class","overflow-auto h-full")},m(e,a){c(e,t,a);for(let e=0;e<s.length;e+=1)s[e].m(t,null);u(t,n),u(t,i),u(i,r),u(i,o)},p(e,i){if(2&i){let r;for(a=e[1],r=0;r<a.length;r+=1){const o=lk(e,a,r);s[r]?s[r].p(o,i):(s[r]=hk(o),s[r].c(),s[r].m(t,n))}for(;r<s.length;r+=1)s[r].d(1);s.length=a.length}},d(e){e&&h(t),d(s,e)}}}function ck(t){let n;return{c(){n=f("div"),n.textContent="No GPS Data Selected.",y(n,"class","alert alert-red my-1"),y(n,"role","alert")},m(e,t){c(e,n,t)},p:e,d(e){e&&h(n)}}}function hk(t){let n,i,r,o,a,s,l,d=10*t[4]+"",m=10*(t[4]+1)-1+"";return{c(){n=f("p"),i=f("i"),o=g(),a=p(d),s=p(" - "),l=p(m),y(i,"class","dot"),y(i,"style",r=`--color:${t[2]}`),y(n,"class","list-item my-2")},m(e,t){c(e,n,t),u(n,i),u(n,o),u(n,a),u(n,s),u(n,l)},p:e,d(e){e&&h(n)}}}function dk(t){let n,i,r,o;function a(e,t){return null===e[0]?ck:uk}let s=a(t),l=s(t);return{c(){n=f("section"),i=f("div"),r=f("p"),r.textContent="Speed Legend (Km/h):",o=g(),l.c(),y(r,"class","font-bold my-1"),y(i,"class","p-4"),y(n,"class","card h-full scale-in-center")},m(e,t){c(e,n,t),u(n,i),u(i,r),u(i,o),l.m(i,null)},p(e,[t]){s===(s=a(e))&&l?l.p(e,t):(l.d(1),l=s(e),l&&(l.c(),l.m(i,null)))},i:e,o:e,d(e){e&&h(n),l.d()}}}function fk(e,t,n){let{selectedGPSData:i}=t;return e.$$set=e=>{"selectedGPSData"in e&&n(0,i=e.selectedGPSData)},[i,["#fa6e6e","#fa9b45","#fbf01c","#88ed02","#13c600","#00ba73","#00a9d1","#0093ff","#0071ff","#1800ff"]]}class pk extends X{constructor(e){super(),W(this,e,fk,dk,o,{selectedGPSData:0})}}function gk(e){return Number(e)!==e}function mk(e){if(null!=e&&!wk(e)){var t=Number(e);return gk(t)&&_k(e)&&""!=e?mk(e.replace(/[^0-9.\-]+/g,"")):t}return e}function bk(e){if(vk(e))return new Date(e);if(wk(e))return new Date(e);var t=Number(e);return wk(t)?new Date(t):new Date(e)}function yk(e,t){return new Array(t+1).join(e)}function vk(e){return"[object Date]"===function(e){return{}.toString.call(e)}(e)}function _k(e){return"string"==typeof e}function wk(e){return"number"==typeof e&&Number(e)==e}function xk(e){return"object"==typeof e&&null!==e}var Pk="__§§§__",Ok="__§§§§__";function kk(e,t){for(var n=e.length,i=0;i<n;++i)if(e[i]===t)return i;return-1}function Tk(e,t){for(var n=e.length,i=new Array(n),r=0;r<n;++r)i[r]=t(e[r],r);return i}function Sk(e,t){for(var n=e.length,i=0;i<n;++i)t(e[i],i)}function Ik(e,t){for(var n=e.length;n>0;)t(e[--n],n)}function Ek(e,t){for(var n=e.length,i=0;i<n&&t(e[i],i);++i);}function Dk(e,t){for(var n=!1,i=0;;){if(-1===(i=e.indexOf(t,i)))return n;n=!0,e.splice(i,1)}}function jk(e,t){var n=e.indexOf(t);return-1!==n&&(e.splice(n,1),!0)}function Ck(e,t){-1===e.indexOf(t)&&e.push(t)}function Ak(e){for(var t=e.length,n=new Array(t),i=0;i<t;++i)n[i]=e[i];return n}function Mk(e,t,n){e.splice(t,0,n)}function Rk(e,t){e.splice(t,1)}function Nk(e,t){for(var n=e.length,i=0;i<n;++i)if(t(e[i],i))return i;return-1}function Lk(e,t){var n=Nk(e,t);if(-1!==n)return e[n]}function Fk(e,t){for(var n=e.length;n>0;)t(e[--n])||e.splice(n,1)}var Bk=function(){function e(){Object.defineProperty(this,"_disposed",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._disposed=!1}return Object.defineProperty(e.prototype,"isDisposed",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._disposed}}),Object.defineProperty(e.prototype,"dispose",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._disposed||(this._disposed=!0,this._dispose())}}),e}(),Vk=function(){function e(e){Object.defineProperty(this,"_disposed",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_dispose",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._disposed=!1,this._dispose=e}return Object.defineProperty(e.prototype,"isDisposed",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._disposed}}),Object.defineProperty(e.prototype,"dispose",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._disposed||(this._disposed=!0,this._dispose())}}),e}(),Uk=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return Object.defineProperty(t,"_disposers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),t}return Hb(t,e),Object.defineProperty(t.prototype,"_dispose",{enumerable:!1,configurable:!0,writable:!0,value:function(){Sk(this._disposers,(function(e){e.dispose()}))}}),t}(Bk),Hk=function(e){function t(t){var n=e.call(this)||this;return Object.defineProperty(n,"_disposers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),n._disposers=t,n}return Hb(t,e),Object.defineProperty(t.prototype,"_dispose",{enumerable:!1,configurable:!0,writable:!0,value:function(){Sk(this._disposers,(function(e){e.dispose()}))}}),t}(Bk);!function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return Object.defineProperty(t,"_disposer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(t,"_value",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),t}Hb(t,e),Object.defineProperty(t.prototype,"_dispose",{enumerable:!1,configurable:!0,writable:!0,value:function(){null!=this._disposer&&(this._disposer.dispose(),this._disposer=void 0)}}),Object.defineProperty(t.prototype,"get",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._value}}),Object.defineProperty(t.prototype,"set",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){null!=this._disposer&&this._disposer.dispose(),this._disposer=t,this._value=e}}),Object.defineProperty(t.prototype,"reset",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.set(void 0,void 0)}})}(Bk);var zk=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return Object.defineProperty(t,"_counter",{enumerable:!0,configurable:!0,writable:!0,value:0}),t}return Hb(t,e),Object.defineProperty(t.prototype,"increment",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this;return++this._counter,new Vk((function(){--e._counter,0===e._counter&&e.dispose()}))}}),t}(Vk),$k=function(){function e(){Object.defineProperty(this,"_listeners",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_killed",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_disabled",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_iterating",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_enabled",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_disposed",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._listeners=[],this._killed=[],this._disabled={},this._iterating=0,this._enabled=!0,this._disposed=!1}return Object.defineProperty(e.prototype,"isDisposed",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._disposed}}),Object.defineProperty(e.prototype,"dispose",{enumerable:!1,configurable:!0,writable:!0,value:function(){if(!this._disposed){this._disposed=!0;var e=this._listeners;this._iterating=1,this._listeners=null,this._disabled=null;try{Sk(e,(function(e){e.disposer.dispose()}))}finally{this._killed=null,this._iterating=null}}}}),Object.defineProperty(e.prototype,"hasListeners",{enumerable:!1,configurable:!0,writable:!0,value:function(){return 0!==this._listeners.length}}),Object.defineProperty(e.prototype,"hasListenersByType",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return function(e,t){for(var n=e.length,i=0;i<n;++i)if(t(e[i]))return!0;return!1}(this._listeners,(function(t){return(null===t.type||t.type===e)&&!t.killed}))}}),Object.defineProperty(e.prototype,"enable",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._enabled=!0}}),Object.defineProperty(e.prototype,"disable",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._enabled=!1}}),Object.defineProperty(e.prototype,"enableType",{enumerable:!1,configurable:!0,writable:!0,value:function(e){delete this._disabled[e]}}),Object.defineProperty(e.prototype,"disableType",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){void 0===t&&(t=1/0),this._disabled[e]=t}}),Object.defineProperty(e.prototype,"_removeListener",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if(0===this._iterating){var t=this._listeners.indexOf(e);if(-1===t)throw new Error("Invalid state: could not remove listener");this._listeners.splice(t,1)}else this._killed.push(e)}}),Object.defineProperty(e.prototype,"_removeExistingListener",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n,i){if(this._disposed)throw new Error("EventDispatcher is disposed");this._eachListener((function(r){r.once!==e||r.type!==t||void 0!==n&&r.callback!==n||r.context!==i||r.disposer.dispose()}))}}),Object.defineProperty(e.prototype,"isEnabled",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if(this._disposed)throw new Error("EventDispatcher is disposed");return this._enabled&&this._listeners.length>0&&this.hasListenersByType(e)&&void 0===this._disabled[e]}}),Object.defineProperty(e.prototype,"removeType",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if(this._disposed)throw new Error("EventDispatcher is disposed");this._eachListener((function(t){t.type===e&&t.disposer.dispose()}))}}),Object.defineProperty(e.prototype,"has",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n){return-1!==Nk(this._listeners,(function(i){return!0!==i.once&&i.type===e&&(void 0===t||i.callback===t)&&i.context===n}))}}),Object.defineProperty(e.prototype,"_shouldDispatch",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if(this._disposed)throw new Error("EventDispatcher is disposed");var t=this._disabled[e];return wk(t)?(t<=1?delete this._disabled[e]:--this._disabled[e],!1):this._enabled}}),Object.defineProperty(e.prototype,"_eachListener",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this;++this._iterating;try{Sk(this._listeners,e)}finally{--this._iterating,0===this._iterating&&0!==this._killed.length&&(Sk(this._killed,(function(e){t._removeListener(e)})),this._killed.length=0)}}}),Object.defineProperty(e.prototype,"dispatch",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){this._shouldDispatch(e)&&this._eachListener((function(n){n.killed||null!==n.type&&n.type!==e||n.dispatch(e,t)}))}}),Object.defineProperty(e.prototype,"_on",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n,i,r,o){var a=this;if(this._disposed)throw new Error("EventDispatcher is disposed");this._removeExistingListener(e,t,n,i);var s={type:t,callback:n,context:i,shouldClone:r,dispatch:o,killed:!1,once:e,disposer:new Vk((function(){s.killed=!0,a._removeListener(s)}))};return this._listeners.push(s),s}}),Object.defineProperty(e.prototype,"onAll",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n){return void 0===n&&(n=!0),this._on(!1,null,e,t,n,(function(n,i){return e.call(t,i)})).disposer}}),Object.defineProperty(e.prototype,"on",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n,i){return void 0===i&&(i=!0),this._on(!1,e,t,n,i,(function(e,i){return t.call(n,i)})).disposer}}),Object.defineProperty(e.prototype,"once",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n,i){void 0===i&&(i=!0);var r=this._on(!0,e,t,n,i,(function(e,i){r.disposer.dispose(),t.call(n,i)}));return r.disposer}}),Object.defineProperty(e.prototype,"off",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n){this._removeExistingListener(!1,e,t,n)}}),Object.defineProperty(e.prototype,"copyFrom",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this;if(this._disposed)throw new Error("EventDispatcher is disposed");if(e===this)throw new Error("Cannot copyFrom the same TargetedEventDispatcher");var n=[];return Sk(e._listeners,(function(e){!e.killed&&e.shouldClone&&(null===e.type?n.push(t.onAll(e.callback,e.context)):e.once?n.push(t.once(e.type,e.callback,e.context)):n.push(t.on(e.type,e.callback,e.context)))})),new Hk(n)}}),e}();function Yk(e,t){if(!(e>=0&&e<t))throw new Error("Index out of bounds: "+e)}!function(e){function t(t){var n=e.call(this)||this;return Object.defineProperty(n,"target",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),n.target=t,n}Hb(t,e),Object.defineProperty(t.prototype,"copyFrom",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this;if(this._disposed)throw new Error("EventDispatcher is disposed");if(e===this)throw new Error("Cannot copyFrom the same TargetedEventDispatcher");var n=[];return Sk(e._listeners,(function(i){i.context!==e.target&&!i.killed&&i.shouldClone&&(null===i.type?n.push(t.onAll(i.callback,i.context)):i.once?n.push(t.once(i.type,i.callback,i.context)):n.push(t.on(i.type,i.callback,i.context)))})),new Hk(n)}})}($k);var Gk=function(){function e(e){void 0===e&&(e=[]),Object.defineProperty(this,"_values",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"events",{enumerable:!0,configurable:!0,writable:!0,value:new $k}),this._values=e}return Object.defineProperty(e.prototype,"values",{get:function(){return this._values},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"contains",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return-1!==this._values.indexOf(e)}}),Object.defineProperty(e.prototype,"removeValue",{enumerable:!1,configurable:!0,writable:!0,value:function(e){for(var t=0,n=this._values.length;t<n;)this._values[t]===e?(this.removeIndex(t),--n):++t}}),Object.defineProperty(e.prototype,"indexOf",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return kk(this._values,e)}}),Object.defineProperty(e.prototype,"length",{get:function(){return this._values.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasIndex",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return e>=0&&e<this._values.length}}),Object.defineProperty(e.prototype,"getIndex",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this._values[e]}}),Object.defineProperty(e.prototype,"_onPush",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.events.isEnabled("push")&&this.events.dispatch("push",{type:"push",target:this,newValue:e})}}),Object.defineProperty(e.prototype,"_onInsertIndex",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){this.events.isEnabled("insertIndex")&&this.events.dispatch("insertIndex",{type:"insertIndex",target:this,index:e,newValue:t})}}),Object.defineProperty(e.prototype,"_onSetIndex",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n){this.events.isEnabled("setIndex")&&this.events.dispatch("setIndex",{type:"setIndex",target:this,index:e,oldValue:t,newValue:n})}}),Object.defineProperty(e.prototype,"_onRemoveIndex",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){this.events.isEnabled("removeIndex")&&this.events.dispatch("removeIndex",{type:"removeIndex",target:this,index:e,oldValue:t})}}),Object.defineProperty(e.prototype,"_onMoveIndex",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n){this.events.isEnabled("moveIndex")&&this.events.dispatch("moveIndex",{type:"moveIndex",target:this,oldIndex:e,newIndex:t,value:n})}}),Object.defineProperty(e.prototype,"_onClear",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.events.isEnabled("clear")&&this.events.dispatch("clear",{type:"clear",target:this,oldValues:e})}}),Object.defineProperty(e.prototype,"setIndex",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){Yk(e,this._values.length);var n=this._values[e];return n!==t&&(this._values[e]=t,this._onSetIndex(e,n,t)),n}}),Object.defineProperty(e.prototype,"insertIndex",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return Yk(e,this._values.length+1),Mk(this._values,e,t),this._onInsertIndex(e,t),t}}),Object.defineProperty(e.prototype,"swap",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var n=this._values.length;if(Yk(e,n),Yk(t,n),e!==t){var i=this._values[e],r=this._values[t];this._values[e]=r,this._onSetIndex(e,i,r),this._values[t]=i,this._onSetIndex(t,r,i)}}}),Object.defineProperty(e.prototype,"removeIndex",{enumerable:!1,configurable:!0,writable:!0,value:function(e){Yk(e,this._values.length);var t=this._values[e];return Rk(this._values,e),this._onRemoveIndex(e,t),t}}),Object.defineProperty(e.prototype,"moveValue",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var n=this.indexOf(e);if(-1!==n)if(Rk(this._values,n),null==t){var i=this._values.length;this._values.push(e),this._onMoveIndex(n,i,e)}else Mk(this._values,t,e),this._onMoveIndex(n,t,e);else null==t?(this._values.push(e),this._onPush(e)):(Mk(this._values,t,e),this._onInsertIndex(t,e));return e}}),Object.defineProperty(e.prototype,"push",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this._values.push(e),this._onPush(e),e}}),Object.defineProperty(e.prototype,"unshift",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this.insertIndex(0,e),e}}),Object.defineProperty(e.prototype,"pushAll",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this;Sk(e,(function(e){t.push(e)}))}}),Object.defineProperty(e.prototype,"copyFrom",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.pushAll(e._values)}}),Object.defineProperty(e.prototype,"pop",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._values.length-1<0?void 0:this.removeIndex(this._values.length-1)}}),Object.defineProperty(e.prototype,"shift",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._values.length?this.removeIndex(0):void 0}}),Object.defineProperty(e.prototype,"setAll",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this,n=this._values;this._values=[],this._onClear(n),Sk(e,(function(e){t._values.push(e),t._onPush(e)}))}}),Object.defineProperty(e.prototype,"clear",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.setAll([])}}),Object.defineProperty(e.prototype,Symbol.iterator,{enumerable:!1,configurable:!0,writable:!0,value:function(){var e,t;return Yb(this,(function(n){switch(n.label){case 0:e=this._values.length,t=0,n.label=1;case 1:return t<e?[4,this._values[t]]:[3,4];case 2:n.sent(),n.label=3;case 3:return++t,[3,1];case 4:return[2]}}))}}),Object.defineProperty(e.prototype,"each",{enumerable:!1,configurable:!0,writable:!0,value:function(e){Sk(this._values,e)}}),Object.defineProperty(e.prototype,"eachReverse",{enumerable:!1,configurable:!0,writable:!0,value:function(e){Ik(this._values,e)}}),e}(),qk=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return Object.defineProperty(t,"autoDispose",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(t,"_disposed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),t}return Hb(t,e),Object.defineProperty(t.prototype,"_onSetIndex",{enumerable:!1,configurable:!0,writable:!0,value:function(t,n,i){this.autoDispose&&n.dispose(),e.prototype._onSetIndex.call(this,t,n,i)}}),Object.defineProperty(t.prototype,"_onRemoveIndex",{enumerable:!1,configurable:!0,writable:!0,value:function(t,n){this.autoDispose&&n.dispose(),e.prototype._onRemoveIndex.call(this,t,n)}}),Object.defineProperty(t.prototype,"_onClear",{enumerable:!1,configurable:!0,writable:!0,value:function(t){this.autoDispose&&Sk(t,(function(e){e.dispose()})),e.prototype._onClear.call(this,t)}}),Object.defineProperty(t.prototype,"isDisposed",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._disposed}}),Object.defineProperty(t.prototype,"dispose",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._disposed||(this._disposed=!0,this.autoDispose&&Sk(this._values,(function(e){e.dispose()})))}}),t}(Gk),Wk=function(e){function t(t,n){var i=e.call(this)||this;return Object.defineProperty(i,"template",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"make",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),i.template=t,i.make=n,i}return Hb(t,e),t}(qk),Xk=function(e){function t(t){var n=e.call(this)||this;return Object.defineProperty(n,"_disposed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(n,"_container",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(n,"_events",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),n._container=t,n._events=n.events.onAll((function(e){if("clear"===e.type)Sk(e.oldValues,(function(e){n._onRemoved(e)}));else if("push"===e.type)n._onInserted(e.newValue);else if("setIndex"===e.type)n._onRemoved(e.oldValue),n._onInserted(e.newValue,e.index);else if("insertIndex"===e.type)n._onInserted(e.newValue,e.index);else if("removeIndex"===e.type)n._onRemoved(e.oldValue);else{if("moveIndex"!==e.type)throw new Error("Unknown IListEvent type");n._onRemoved(e.value),n._onInserted(e.value,e.newIndex)}})),n}return Hb(t,e),Object.defineProperty(t.prototype,"_onInserted",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){e._setParent(this._container,!0);var n=this._container._childrenDisplay;void 0===t?n.addChild(e._display):n.addChildAt(e._display,t)}}),Object.defineProperty(t.prototype,"_onRemoved",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this._container._childrenDisplay.removeChild(e._display),this._container.markDirtyBounds(),this._container.markDirty()}}),Object.defineProperty(t.prototype,"isDisposed",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._disposed}}),Object.defineProperty(t.prototype,"dispose",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._disposed||(this._disposed=!0,this._events.dispose(),Sk(this.values,(function(e){e.dispose()})))}}),t}(Gk),Kk=function(){function e(e){Object.defineProperty(this,"_value",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._value=e}return Object.defineProperty(e.prototype,"value",{get:function(){return this._value/100},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"percent",{get:function(){return this._value},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"toString",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._value+"%"}}),Object.defineProperty(e.prototype,"interpolate",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return e+this.value*(t-e)}}),Object.defineProperty(e,"normalize",{enumerable:!1,configurable:!0,writable:!0,value:function(t,n,i){return t instanceof e?t:new e(n===i?0:100*Math.min(Math.max(1/(i-n)*(t-n),0),1))}}),e}();function Qk(e){return new Kk(e)}Qk(0);var Jk,Zk=Qk(100),eT=Qk(50);function tT(e){return Object.keys(e)}function nT(e){return Object.assign({},e)}function iT(e,t){tT(e).forEach((function(n){t(n,e[n])}))}function rT(e,t){return{}.hasOwnProperty.call(e,t)}function oT(e,t,n,i){return e.addEventListener(t,n,i||!1),new Vk((function(){e.removeEventListener(t,n,i||!1)}))}function aT(e){switch(e){case"touchevents":return window.hasOwnProperty("TouchEvent");case"pointerevents":return window.hasOwnProperty("PointerEvent");case"mouseevents":return window.hasOwnProperty("MouseEvent");case"wheelevents":return window.hasOwnProperty("WheelEvent");case"keyboardevents":return window.hasOwnProperty("KeyboardEvent")}return!1}function sT(e){return e.pointerId||0}function lT(e){if(aT("pointerevents"))return e;if(aT("touchevents"))switch(e){case"pointerover":case"pointerdown":return"touchstart";case"pointerout":case"pointerup":return"touchend";case"pointermove":return"touchmove";case"click":return"click";case"dblclick":return"dblclick"}else if(aT("mouseevents"))switch(e){case"pointerover":return"mouseover";case"pointerout":return"mouseout";case"pointerdown":return"mousedown";case"pointermove":return"mousemove";case"pointerup":return"mouseup";case"click":return"click";case"dblclick":return"dblclick"}return e}function uT(e){if("undefined"!=typeof Touch&&e instanceof Touch)return!0;if("undefined"!=typeof PointerEvent&&e instanceof PointerEvent&&null!=e.pointerType)switch(e.pointerType){case"touch":case"pen":case 2:return!0;case"mouse":case 4:return!1;default:return!(e instanceof MouseEvent)}else if(null!=e.type&&e.type.match(/^mouse/))return!1;return!0}function cT(e,t,n){e.style[t]=n}function hT(e,t){return e.target&&function(e,t){for(var n=t;;){if(e===n)return!0;if(null===n.parentNode){if(null==n.host)return!1;n=n.host}else n=n.parentNode}}(t.root.dom,e.target)}function dT(e,t){e.style.pointerEvents=t?"":"none"}function fT(){return/apple/i.test(navigator.vendor)&&"ontouchend"in document?1:void 0}function pT(e,t){return wk(e)?e:null!=e&&wk(e.value)&&wk(t)?t*e.value:0}function gT(e,t,n){return void 0===t&&(t=0),void 0===n&&(n="0"),"string"!=typeof e&&(e=e.toString()),t>e.length?Array(t-e.length+1).join(n)+e:e}function mT(e){return function(e){return e.replace(/^[\s]*/,"")}(function(e){return e.replace(/[\s]*$/,"")}(e))}function bT(e){return e.replace(/\/(date|number|duration)$/i,"")}function yT(e){return e?e.replace(/<[^>]*>/g,""):e}function vT(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}function _T(e,t){var n=new Date(e.getFullYear(),0,0),i=e.getTime()-n.getTime()+60*(n.getTimezoneOffset()-e.getTimezoneOffset())*1e3;return Math.floor(i/864e5)}function wT(e,t){var n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate())),i=n.getUTCDay()||7;n.setUTCDate(n.getUTCDate()+4-i);var r=new Date(Date.UTC(n.getUTCFullYear(),0,1));return Math.ceil(((n.getTime()-r.getTime())/864e5+1)/7)}function xT(e,t){var n=wT(new Date(e.getFullYear(),e.getMonth(),1)),i=wT(e);return 1==i&&(i=53),i-n+1}function PT(e,t){return e>12?e-=12:0===e&&(e=12),null!=t?e+(t-1):e}function OT(e,t,n,i){if(void 0===t&&(t=!1),void 0===n&&(n=!1),void 0===i&&(i=!1),i)return t?"Coordinated Universal Time":"UTC";var r=e.toLocaleString("UTC"),o=e.toLocaleString("UTC",{timeZoneName:t?"long":"short"}).substr(r.length);return!1===n&&(o=o.replace(/ (standard|daylight|summer|winter) /i," ")),o}function kT(e){return e.charAt(0).toUpperCase()+e.slice(1)}function TT(e){var t,n,i,r=e.h,o=e.s,a=e.l;if(0==o)t=n=i=a;else{var s=function(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e},l=a<.5?a*(1+o):a+o-a*o,u=2*a-l;t=s(u,l,r+1/3),n=s(u,l,r),i=s(u,l,r-1/3)}return{r:Math.round(255*t),g:Math.round(255*n),b:Math.round(255*i)}}function ST(e){var t=e.r/255,n=e.g/255,i=e.b/255,r=Math.max(t,n,i),o=Math.min(t,n,i),a=0,s=0,l=(r+o)/2;if(r===o)a=s=0;else{var u=r-o;switch(s=l>.5?u/(2-r-o):u/(r+o),r){case t:a=(n-i)/u+(n<i?6:0);break;case n:a=(i-t)/u+2;break;case i:a=(t-n)/u+4}a/=6}return{h:a,s:s,l:l}}function IT(e,t){var n=t>0?255-e:e;return Math.round(n*t)}function ET(e){return(299*e.r+587*e.g+114*e.b)/1e3>=128}function DT(e,t){return e||(e=[]),Wb(Wb([],qb(e),!1),qb(t),!1).filter((function(e,t,n){return n.indexOf(e)===t}))}function jT(e,t){return!!t&&(e.left==t.left&&(e.right==t.right&&(e.top==t.top&&e.bottom==t.bottom)))}function CT(e){return"#"===e[0]&&(e=e.substr(1)),3==e.length&&(e=e[0].repeat(2)+e[1].repeat(2)+e[2].repeat(2)),parseInt(e,16)}function AT(e){return MT.fromAny(e)}!function(e){function t(t,n,i,r){void 0===r&&(r="");var o=e.call(this)||this;return Object.defineProperty(o,"_root",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(o,"_rule",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),o._root=function(e,t){if(void 0===t&&(t=""),null===e)return null==Jk&&((n=document.createElement("style")).type="text/css",""!=t&&n.setAttribute("nonce",t),document.head.appendChild(n),Jk=n.sheet),Jk;var n;return(n=document.createElement("style")).type="text/css",""!=t&&n.setAttribute("nonce",t),e.appendChild(n),n.sheet}(t,r),o._rule=function(e,t){var n=e.cssRules.length;return e.insertRule(t+"{}",n),e.cssRules[n]}(o._root,n),iT(i,(function(e,t){o.setStyle(e,t)})),o}Hb(t,e),Object.defineProperty(t.prototype,"selector",{get:function(){return this._rule.selectorText},set:function(e){this._rule.selectorText=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_dispose",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=kk(this._root.cssRules,this._rule);if(-1===e)throw new Error("Could not dispose StyleRule");this._root.deleteRule(e)}}),Object.defineProperty(t.prototype,"_setVendorPrefixName",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var n=this._rule.style;n.setProperty("-webkit-"+e,t,""),n.setProperty("-moz-"+e,t,""),n.setProperty("-ms-"+e,t,""),n.setProperty("-o-"+e,t,""),n.setProperty(e,t,"")}}),Object.defineProperty(t.prototype,"setStyle",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){"transition"===e?this._setVendorPrefixName(e,t):this._rule.style.setProperty(e,t,"")}})}(Bk),function(e){function t(t,n,i){void 0===i&&(i="");var r=e.call(this)||this;return Object.defineProperty(r,"_element",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),r._element=function(e,t,n){void 0===n&&(n="");var i=document.createElement("style");return i.type="text/css",""!=n&&i.setAttribute("nonce",n),i.textContent=t,null===e?document.head.appendChild(i):e.appendChild(i),i}(t,n,i),r}Hb(t,e),Object.defineProperty(t.prototype,"_dispose",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._element.parentNode&&this._element.parentNode.removeChild(this._element)}})}(Bk);var MT=function(){function e(e){Object.defineProperty(this,"_hex",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._hex=0|e}return Object.defineProperty(e.prototype,"hex",{get:function(){return this._hex},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"r",{get:function(){return this._hex>>>16},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"g",{get:function(){return this._hex>>8&255},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"b",{get:function(){return 255&this._hex},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"toCSS",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return void 0===e&&(e=1),"rgba("+this.r+", "+this.g+", "+this.b+", "+e+")"}}),Object.defineProperty(e.prototype,"toCSSHex",{enumerable:!1,configurable:!0,writable:!0,value:function(){return"#"+gT(this.r.toString(16),2)+gT(this.g.toString(16),2)+gT(this.b.toString(16),2)}}),Object.defineProperty(e.prototype,"toHSL",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return void 0===e&&(e=1),ST({r:this.r,g:this.g,b:this.b,a:e})}}),Object.defineProperty(e,"fromHSL",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n){var i=TT({h:e,s:t,l:n});return this.fromRGB(i.r,i.g,i.b)}}),Object.defineProperty(e.prototype,"toString",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this.toCSSHex()}}),Object.defineProperty(e,"fromHex",{enumerable:!1,configurable:!0,writable:!0,value:function(t){return new e(t)}}),Object.defineProperty(e,"fromRGB",{enumerable:!1,configurable:!0,writable:!0,value:function(t,n,i){return new e((0|i)+(n<<8)+(t<<16))}}),Object.defineProperty(e,"fromString",{enumerable:!1,configurable:!0,writable:!0,value:function(t){return new e(CT(t))}}),Object.defineProperty(e,"fromCSS",{enumerable:!1,configurable:!0,writable:!0,value:function(t){return new e(function(e){var t=(e=e.replace(/[ ]/g,"")).match(/^rgb\(([0-9]*),([0-9]*),([0-9]*)\)/i);if(t)t.push("1");else if(!(t=e.match(/^rgba\(([0-9]*),([0-9]*),([0-9]*),([.0-9]*)\)/i)))return 0;for(var n="",i=1;i<=3;i++){var r=parseInt(t[i]).toString(16);1==r.length&&(r="0"+r),n+=r}return CT(n)}(t))}}),Object.defineProperty(e,"fromAny",{enumerable:!1,configurable:!0,writable:!0,value:function(t){if(_k(t)){if("#"==t[0])return e.fromString(t);if("rgb"==t.substr(0,3))return e.fromCSS(t)}else{if(wk(t))return e.fromHex(t);if(t instanceof e)return e.fromHex(t.hex)}throw new Error("Unknown color syntax: "+t)}}),Object.defineProperty(e,"alternative",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n){var i=function(e,t,n){void 0===t&&(t={r:255,g:255,b:255}),void 0===n&&(n={r:255,g:255,b:255});var i=t,r=n;return ET(n)&&(i=n,r=t),ET(e)?r:i}({r:e.r,g:e.g,b:e.b},t?{r:t.r,g:t.g,b:t.b}:void 0,n?{r:n.r,g:n.g,b:n.b}:void 0);return this.fromRGB(i.r,i.g,i.b)}}),Object.defineProperty(e,"interpolate",{enumerable:!1,configurable:!0,writable:!0,value:function(t,n,i,r){if(void 0===r&&(r="rgb"),"hsl"==r){var o=n.toHSL(),a=i.toHSL();return e.fromHSL(NT(t,o.h,a.h),NT(t,o.s,a.s),NT(t,o.l,a.l))}return e.fromRGB(NT(t,n.r,i.r),NT(t,n.g,i.g),NT(t,n.b,i.b))}}),Object.defineProperty(e,"lighten",{enumerable:!1,configurable:!0,writable:!0,value:function(t,n){var i=function(e,t){return e?{r:Math.max(0,Math.min(255,e.r+IT(e.r,t))),g:Math.max(0,Math.min(255,e.g+IT(e.g,t))),b:Math.max(0,Math.min(255,e.b+IT(e.b,t))),a:e.a}:e}({r:t.r,g:t.g,b:t.b},n);return e.fromRGB(i.r,i.g,i.b)}}),Object.defineProperty(e,"brighten",{enumerable:!1,configurable:!0,writable:!0,value:function(t,n){var i=function(e,t){if(e){var n=IT(Math.min(Math.max(e.r,e.g,e.b),230),t);return{r:Math.max(0,Math.min(255,Math.round(e.r+n))),g:Math.max(0,Math.min(255,Math.round(e.g+n))),b:Math.max(0,Math.min(255,Math.round(e.b+n))),a:e.a}}return e}({r:t.r,g:t.g,b:t.b},n);return e.fromRGB(i.r,i.g,i.b)}}),Object.defineProperty(e,"saturate",{enumerable:!1,configurable:!0,writable:!0,value:function(t,n){var i=function(e,t){if(void 0===e||1==t)return e;var n=ST(e);return n.s=t,TT(n)}({r:t.r,g:t.g,b:t.b},n);return e.fromRGB(i.r,i.g,i.b)}}),e}();function RT(e){return $b(this,void 0,void 0,(function(){var t;return Yb(this,(function(n){switch(n.label){case 0:return void 0===e?[3,2]:(t=[],iT(e,(function(e,n){t.push(n.waitForStop())})),[4,Promise.all(t)]);case 1:n.sent(),n.label=2;case 2:return[2]}}))}))}function NT(e,t,n){return t+e*(n-t)}function LT(e,t,n){return e>=1?n:t}function FT(e,t,n){return new Kk(NT(e,t.percent,n.percent))}function BT(e,t,n){return MT.interpolate(e,t,n)}var VT=Math.PI,UT=VT/180,HT=180/VT;function zT(e,t,n){if(!wk(t)||t<=0){var i=Math.round(e);return n&&i-e==.5&&i--,i}var r=Math.pow(10,t);return Math.round(e*r)/r}function $T(e,t,n){return Math.min(Math.max(e,t),n)}function YT(e){return Math.sin(UT*e)}function GT(e){return Math.cos(UT*e)}function qT(e,t){return{x:e*GT(t),y:e*YT(t)}}function WT(e){return e}function XT(e){return e*e*e}function KT(e){return function(t){return 1-e(1-t)}}var QT=function(){function e(e,t){Object.defineProperty(this,"_entity",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_settings",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_userSettings",{enumerable:!0,configurable:!0,writable:!0,value:{}}),this._entity=e,this._settings=t}return Object.defineProperty(e.prototype,"get",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var n=this._settings[e];return void 0!==n?n:t}}),Object.defineProperty(e.prototype,"setRaw",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){this._settings[e]=t}}),Object.defineProperty(e.prototype,"set",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){this._userSettings[e]=!0,this.setRaw(e,t)}}),Object.defineProperty(e.prototype,"remove",{enumerable:!1,configurable:!0,writable:!0,value:function(e){delete this._userSettings[e],delete this._settings[e]}}),Object.defineProperty(e.prototype,"setAll",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this;tT(e).forEach((function(n){t.set(n,e[n])}))}}),Object.defineProperty(e.prototype,"_eachSetting",{enumerable:!1,configurable:!0,writable:!0,value:function(e){iT(this._settings,e)}}),Object.defineProperty(e.prototype,"apply",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this,t={stateAnimationEasing:!0,stateAnimationDuration:!0},n=this._entity.states.lookup("default");this._eachSetting((function(i,r){t[i]||(t[i]=!0,e!==n&&(i in n._settings||(n._settings[i]=e._entity.get(i))),e._entity.set(i,r))}))}}),Object.defineProperty(e.prototype,"applyAnimate",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this;null==e&&(e=this._settings.stateAnimationDuration),null==e&&(e=this.get("stateAnimationDuration",this._entity.get("stateAnimationDuration",0)));var n=this._settings.stateAnimationEasing;null==n&&(n=this.get("stateAnimationEasing",this._entity.get("stateAnimationEasing",XT)));var i=this._entity.states.lookup("default"),r={stateAnimationEasing:!0,stateAnimationDuration:!0},o={};return this._eachSetting((function(a,s){if(!r[a]){r[a]=!0,t!=i&&(a in i._settings||(i._settings[a]=t._entity.get(a)));var l=t._entity.animate({key:a,to:s,duration:e,easing:n});l&&(o[a]=l)}})),o}}),e}(),JT=function(){function e(e){Object.defineProperty(this,"_states",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_entity",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._entity=e}return Object.defineProperty(e.prototype,"lookup",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this._states[e]}}),Object.defineProperty(e.prototype,"create",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var n=this._states[e];if(n)return n.setAll(t),n;var i=new QT(this._entity,t);return this._states[e]=i,i}}),Object.defineProperty(e.prototype,"remove",{enumerable:!1,configurable:!0,writable:!0,value:function(e){delete this._states[e]}}),Object.defineProperty(e.prototype,"apply",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this._states[e];t&&t.apply(),this._entity._applyState(e)}}),Object.defineProperty(e.prototype,"applyAnimate",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var n,i=this._states[e];return i&&(n=i.applyAnimate(t)),this._entity._applyStateAnimated(e,t),n}}),e}(),ZT=new function(){Object.defineProperty(this,"licenses",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"entitiesById",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"rootElements",{enumerable:!0,configurable:!0,writable:!0,value:[]})};function eS(e,t){return e===t?0:e<t?-1:1}function tS(e,t,n){for(var i=e.length,r=t.length,o=Math.min(i,r),a=0;a<o;++a){var s=n(e[a],t[a]);if(0!==s)return s}return eS(i,r)}function nS(e,t){return e===t?0:e<t?-1:1}var iS,rS=function(){function e(e){Object.defineProperty(this,"_entity",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_callbacks",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_disabled",{enumerable:!0,configurable:!0,writable:!0,value:{}}),this._entity=e}return Object.defineProperty(e.prototype,"add",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var n=this,i=this._callbacks[e];return void 0===i&&(i=this._callbacks[e]=[]),i.push(t),this._entity._markDirtyKey(e),new Vk((function(){jk(i,t)&&n._entity._markDirtyKey(e)}))}}),Object.defineProperty(e.prototype,"remove",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this._callbacks[e];void 0!==t&&(delete this._callbacks[e],0!==t.length&&this._entity._markDirtyKey(e))}}),Object.defineProperty(e.prototype,"enable",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this._disabled[e]&&(delete this._disabled[e],this._entity._markDirtyKey(e))}}),Object.defineProperty(e.prototype,"disable",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this._disabled[e]||(this._disabled[e]=!0,this._entity._markDirtyKey(e))}}),Object.defineProperty(e.prototype,"fold",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){if(!this._disabled[e]){var n=this._callbacks[e];if(void 0!==n)for(var i=0,r=n.length;i<r;++i)t=n[i](t,this._entity,e)}return t}}),e}(),oS=function(){function e(e,t,n,i,r,o){Object.defineProperty(this,"_from",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_to",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_duration",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_easing",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_loops",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_interpolate",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_oldTime",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_time",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_stopped",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_playing",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"events",{enumerable:!0,configurable:!0,writable:!0,value:new $k}),this._from=e,this._to=t,this._duration=n,this._easing=i,this._loops=r,this._interpolate=function(e,t){return"number"==typeof e&&"number"==typeof t?NT:e instanceof Kk&&t instanceof Kk?FT:e instanceof MT&&t instanceof MT?BT:LT}(e,t),this._oldTime=o}return Object.defineProperty(e.prototype,"to",{get:function(){return this._to},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"from",{get:function(){return this._from},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"playing",{get:function(){return this._playing},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"stopped",{get:function(){return this._stopped},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"stop",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._stopped||(this._stopped=!0,this._playing=!1,this.events.isEnabled("stopped")&&this.events.dispatch("stopped",{type:"stopped",target:this}))}}),Object.defineProperty(e.prototype,"pause",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._playing=!1,this._oldTime=null}}),Object.defineProperty(e.prototype,"play",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._stopped||(this._playing=!0)}}),Object.defineProperty(e.prototype,"percentage",{get:function(){return this._time/this._duration},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"waitForStop",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this;return new Promise((function(t,n){if(e._stopped)t();else var i=e.events.on("stopped",(function(){i.dispose(),t()}))}))}}),Object.defineProperty(e.prototype,"_checkEnded",{enumerable:!1,configurable:!0,writable:!0,value:function(){return!(this._loops>1)||(--this._loops,!1)}}),Object.defineProperty(e.prototype,"_run",{enumerable:!1,configurable:!0,writable:!0,value:function(e){null!==this._oldTime&&(this._time+=e-this._oldTime,this._time>this._duration&&(this._time=this._duration)),this._oldTime=e}}),Object.defineProperty(e.prototype,"_reset",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this._oldTime=e,this._time=0}}),Object.defineProperty(e.prototype,"_value",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this._interpolate(this._easing(e),this._from,this._to)}}),e}(),aS=0,sS=function(){function e(e){Object.defineProperty(this,"uid",{enumerable:!0,configurable:!0,writable:!0,value:++aS}),Object.defineProperty(this,"_settings",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_privateSettings",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_settingEvents",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_privateSettingEvents",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_prevSettings",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_prevPrivateSettings",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_animatingSettings",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_animatingPrivateSettings",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_animatingCount",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_disposed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_userProperties",{enumerable:!0,configurable:!0,writable:!0,value:{}}),this._settings=e}return Object.defineProperty(e.prototype,"_checkDirty",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this;tT(this._settings).forEach((function(t){e._userProperties[t]=!0,e._markDirtyKey(t)}))}}),Object.defineProperty(e.prototype,"_runAnimation",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this;if(this.isDisposed())return!0;if(iT(this._animatingSettings,(function(n,i){if(i._stopped)t._stopAnimation(n);else if(i._playing){i._run(e);var r=i.percentage;r>=1?i._checkEnded()?t.set(n,i._value(1)):(i._reset(e),t._set(n,i._value(1))):t._set(n,i._value(r))}})),iT(this._animatingPrivateSettings,(function(n,i){if(i._stopped)t._stopAnimationPrivate(n);else if(i._playing){i._run(e);var r=i.percentage;r>=1?i._checkEnded()?t.setPrivate(n,i._value(1)):(i._reset(e),t._setPrivate(n,i._value(1))):t._setPrivate(n,i._value(r))}})),this._animatingCount<0)throw new Error("Invalid animation count");return 0===this._animatingCount}}),Object.defineProperty(e.prototype,"_markDirtyKey",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.markDirty()}}),Object.defineProperty(e.prototype,"_markDirtyPrivateKey",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.markDirty()}}),Object.defineProperty(e.prototype,"on",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var n=this,i=this._settingEvents[e];return void 0===i&&(i=this._settingEvents[e]=[]),i.push(t),new Vk((function(){jk(i,t),0===i.length&&delete n._settingEvents[e]}))}}),Object.defineProperty(e.prototype,"onPrivate",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var n=this,i=this._privateSettingEvents[e];return void 0===i&&(i=this._privateSettingEvents[e]=[]),i.push(t),new Vk((function(){jk(i,t),0===i.length&&delete n._privateSettingEvents[e]}))}}),Object.defineProperty(e.prototype,"getRaw",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var n=this._settings[e];return void 0!==n?n:t}}),Object.defineProperty(e.prototype,"get",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return this.getRaw(e,t)}}),Object.defineProperty(e.prototype,"_sendKeyEvent",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var n=this,i=this._settingEvents[e];void 0!==i&&Sk(i,(function(i){i(t,n,e)}))}}),Object.defineProperty(e.prototype,"_sendPrivateKeyEvent",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var n=this,i=this._privateSettingEvents[e];void 0!==i&&Sk(i,(function(i){i(t,n,e)}))}}),Object.defineProperty(e.prototype,"_setRaw",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n){this._prevSettings[e]=t,this._sendKeyEvent(e,n)}}),Object.defineProperty(e.prototype,"setRaw",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var n=this._settings[e];this._settings[e]=t,n!==t&&this._setRaw(e,n,t)}}),Object.defineProperty(e.prototype,"_set",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var n=this._settings[e];this._settings[e]=t,n!==t&&(this._setRaw(e,n,t),this._markDirtyKey(e))}}),Object.defineProperty(e.prototype,"_stopAnimation",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this._animatingSettings[e];t&&(delete this._animatingSettings[e],--this._animatingCount,t.stop())}}),Object.defineProperty(e.prototype,"set",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return this._set(e,t),this._stopAnimation(e),t}}),Object.defineProperty(e.prototype,"remove",{enumerable:!1,configurable:!0,writable:!0,value:function(e){e in this._settings&&(this._prevSettings[e]=this._settings[e],delete this._settings[e],this._sendKeyEvent(e,void 0),this._markDirtyKey(e)),this._stopAnimation(e)}}),Object.defineProperty(e.prototype,"removeAll",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this;Sk(tT(this._settings),(function(t){e.remove(t)}))}}),Object.defineProperty(e.prototype,"getPrivate",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var n=this._privateSettings[e];return void 0!==n?n:t}}),Object.defineProperty(e.prototype,"_setPrivateRaw",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n){this._prevPrivateSettings[e]=t,this._sendPrivateKeyEvent(e,n)}}),Object.defineProperty(e.prototype,"setPrivateRaw",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var n=this._privateSettings[e];this._privateSettings[e]=t,n!==t&&this._setPrivateRaw(e,n,t)}}),Object.defineProperty(e.prototype,"_setPrivate",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var n=this._privateSettings[e];this._privateSettings[e]=t,n!==t&&(this._setPrivateRaw(e,n,t),this._markDirtyPrivateKey(e))}}),Object.defineProperty(e.prototype,"_stopAnimationPrivate",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this._animatingPrivateSettings[e];t&&(t.stop(),delete this._animatingPrivateSettings[e],--this._animatingCount)}}),Object.defineProperty(e.prototype,"setPrivate",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return this._setPrivate(e,t),this._stopAnimationPrivate(e),t}}),Object.defineProperty(e.prototype,"removePrivate",{enumerable:!1,configurable:!0,writable:!0,value:function(e){e in this._privateSettings&&(this._prevPrivateSettings[e]=this._privateSettings[e],delete this._privateSettings[e],this._markDirtyPrivateKey(e)),this._stopAnimationPrivate(e)}}),Object.defineProperty(e.prototype,"setAll",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this;iT(e,(function(e,n){t.set(e,n)}))}}),Object.defineProperty(e.prototype,"animate",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=e.key,n=e.to,i=e.duration||0,r=e.loops||1,o=void 0===e.from?this.get(t):e.from,a=void 0===e.easing?WT:e.easing;if(0===i)this.set(t,n);else{if(void 0!==o&&o!==n){++this._animatingCount,this.set(t,o);var s=this._animatingSettings[t]=new oS(o,n,i,a,r,this._animationTime());return this._startAnimation(),s}this.set(t,n)}var l=new oS(o,n,i,a,r,null);return l.stop(),l}}),Object.defineProperty(e.prototype,"animatePrivate",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=e.key,n=e.to,i=e.duration||0,r=e.loops||1,o=void 0===e.from?this.getPrivate(t):e.from,a=void 0===e.easing?WT:e.easing;if(0===i)this.setPrivate(t,n);else{if(void 0!==o&&o!==n){++this._animatingCount,this.setPrivate(t,o);var s=this._animatingPrivateSettings[t]=new oS(o,n,i,a,r,this._animationTime());return this._startAnimation(),s}this.setPrivate(t,n)}var l=new oS(o,n,i,a,r,null);return l.stop(),l}}),Object.defineProperty(e.prototype,"_dispose",{enumerable:!1,configurable:!0,writable:!0,value:function(){}}),Object.defineProperty(e.prototype,"isDisposed",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._disposed}}),Object.defineProperty(e.prototype,"dispose",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._disposed||(this._disposed=!0,this._dispose())}}),e}(),lS=function(e){function t(t,n,i,r){void 0===r&&(r=[]);var o=e.call(this,n)||this;if(Object.defineProperty(o,"_root",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(o,"_user_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(o,"states",{enumerable:!0,configurable:!0,writable:!0,value:new JT(o)}),Object.defineProperty(o,"adapters",{enumerable:!0,configurable:!0,writable:!0,value:new rS(o)}),Object.defineProperty(o,"events",{enumerable:!0,configurable:!0,writable:!0,value:o._createEvents()}),Object.defineProperty(o,"_userPrivateProperties",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(o,"_dirty",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(o,"_dirtyPrivate",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(o,"_template",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(o,"_templates",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(o,"_internalTemplates",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(o,"_defaultThemes",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(o,"_templateDisposers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(o,"_disposers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(o,"_runSetup",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(o,"_disposerProperties",{enumerable:!0,configurable:!0,writable:!0,value:{}}),!i)throw new Error("You cannot use `new Class()`, instead use `Class.new()`");return o._root=t,o._internalTemplates=r,o}return Hb(t,e),Object.defineProperty(t,"new",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n){var i=new this(e,t,!0);return i._template=n,i._afterNew(),i}}),Object.defineProperty(t,"_new",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n){void 0===n&&(n=[]);var i=new this(e,t,!0,n);return i._afterNew(),i}}),Object.defineProperty(t.prototype,"_afterNew",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this;this._checkDirty();var t=!1,n=this._template;n&&(t=!0,n._setObjectTemplate(this)),Sk(this._internalTemplates,(function(n){t=!0,n._setObjectTemplate(e)})),t&&this._applyTemplates(!1),this.states.create("default",{}),this._setDefaults()}}),Object.defineProperty(t.prototype,"_afterNewApplyThemes",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this;this._checkDirty();var t=this._template;t&&t._setObjectTemplate(this),Sk(this._internalTemplates,(function(t){t._setObjectTemplate(e)})),this.states.create("default",{}),this._setDefaults(),this._applyThemes()}}),Object.defineProperty(t.prototype,"_createEvents",{enumerable:!1,configurable:!0,writable:!0,value:function(){return new $k}}),Object.defineProperty(t.prototype,"classNames",{get:function(){return this.constructor.classNames},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"className",{get:function(){return this.constructor.className},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_setDefaults",{enumerable:!1,configurable:!0,writable:!0,value:function(){}}),Object.defineProperty(t.prototype,"_setDefault",{enumerable:!1,configurable:!0,writable:!0,value:function(t,n){t in this._settings||e.prototype.set.call(this,t,n)}}),Object.defineProperty(t.prototype,"_setRawDefault",{enumerable:!1,configurable:!0,writable:!0,value:function(t,n){t in this._settings||e.prototype.setRaw.call(this,t,n)}}),Object.defineProperty(t.prototype,"_clearDirty",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this;tT(this._dirty).forEach((function(t){e._dirty[t]=!1})),tT(this._dirtyPrivate).forEach((function(t){e._dirtyPrivate[t]=!1}))}}),Object.defineProperty(t.prototype,"isDirty",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return!!this._dirty[e]}}),Object.defineProperty(t.prototype,"isPrivateDirty",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return!!this._dirtyPrivate[e]}}),Object.defineProperty(t.prototype,"_markDirtyKey",{enumerable:!1,configurable:!0,writable:!0,value:function(t){this._dirty[t]=!0,e.prototype._markDirtyKey.call(this,t)}}),Object.defineProperty(t.prototype,"_markDirtyPrivateKey",{enumerable:!1,configurable:!0,writable:!0,value:function(t){this._dirtyPrivate[t]=!0,e.prototype._markDirtyKey.call(this,t)}}),Object.defineProperty(t.prototype,"isType",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return-1!==this.classNames.indexOf(e)}}),Object.defineProperty(t.prototype,"_pushPropertyDisposer",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var n=this._disposerProperties[e];return void 0===n&&(n=this._disposerProperties[e]=[]),n.push(t),t}}),Object.defineProperty(t.prototype,"_disposeProperty",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this._disposerProperties[e];void 0!==t&&(Sk(t,(function(e){e.dispose()})),delete this._disposerProperties[e])}}),Object.defineProperty(t.prototype,"template",{get:function(){return this._template},set:function(e){var t=this._template;t!==e&&(this._template=e,t&&t._removeObjectTemplate(this),e&&e._setObjectTemplate(this),this._applyTemplates())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"markDirty",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._root._addDirtyEntity(this)}}),Object.defineProperty(t.prototype,"_startAnimation",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._root._addAnimation(this)}}),Object.defineProperty(t.prototype,"_animationTime",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._root.animationTime}}),Object.defineProperty(t.prototype,"_applyState",{enumerable:!1,configurable:!0,writable:!0,value:function(e){}}),Object.defineProperty(t.prototype,"_applyStateAnimated",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){}}),Object.defineProperty(t.prototype,"get",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var n=this.adapters.fold(e,this._settings[e]);return void 0!==n?n:t}}),Object.defineProperty(t.prototype,"set",{enumerable:!1,configurable:!0,writable:!0,value:function(t,n){return this._userProperties[t]=!0,e.prototype.set.call(this,t,n)}}),Object.defineProperty(t.prototype,"setRaw",{enumerable:!1,configurable:!0,writable:!0,value:function(t,n){this._userProperties[t]=!0,e.prototype.setRaw.call(this,t,n)}}),Object.defineProperty(t.prototype,"_setSoft",{enumerable:!1,configurable:!0,writable:!0,value:function(t,n){return this._userProperties[t]?n:e.prototype.set.call(this,t,n)}}),Object.defineProperty(t.prototype,"remove",{enumerable:!1,configurable:!0,writable:!0,value:function(e){delete this._userProperties[e],this._removeTemplateProperty(e)}}),Object.defineProperty(t.prototype,"setPrivate",{enumerable:!1,configurable:!0,writable:!0,value:function(t,n){return this._userPrivateProperties[t]=!0,e.prototype.setPrivate.call(this,t,n)}}),Object.defineProperty(t.prototype,"setPrivateRaw",{enumerable:!1,configurable:!0,writable:!0,value:function(t,n){this._userPrivateProperties[t]=!0,e.prototype.setPrivateRaw.call(this,t,n)}}),Object.defineProperty(t.prototype,"removePrivate",{enumerable:!1,configurable:!0,writable:!0,value:function(e){delete this._userPrivateProperties[e],this._removeTemplatePrivateProperty(e)}}),Object.defineProperty(t.prototype,"_setTemplateProperty",{enumerable:!1,configurable:!0,writable:!0,value:function(t,n,i){this._userProperties[n]||t===this._findTemplateByKey(n)&&e.prototype.set.call(this,n,i)}}),Object.defineProperty(t.prototype,"_setTemplatePrivateProperty",{enumerable:!1,configurable:!0,writable:!0,value:function(t,n,i){this._userPrivateProperties[n]||t===this._findTemplateByPrivateKey(n)&&e.prototype.setPrivate.call(this,n,i)}}),Object.defineProperty(t.prototype,"_removeTemplateProperty",{enumerable:!1,configurable:!0,writable:!0,value:function(t){if(!this._userProperties[t]){var n=this._findTemplateByKey(t);n?e.prototype.set.call(this,t,n._settings[t]):e.prototype.remove.call(this,t)}}}),Object.defineProperty(t.prototype,"_removeTemplatePrivateProperty",{enumerable:!1,configurable:!0,writable:!0,value:function(t){if(!this._userPrivateProperties[t]){var n=this._findTemplateByPrivateKey(t);n?e.prototype.setPrivate.call(this,t,n._privateSettings[t]):e.prototype.removePrivate.call(this,t)}}}),Object.defineProperty(t.prototype,"_walkParents",{enumerable:!1,configurable:!0,writable:!0,value:function(e){e(this._root._rootContainer),e(this)}}),Object.defineProperty(t.prototype,"_applyStateByKey",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this.states.create(e,{}),n={};this._eachTemplate((function(i){var r=i.states.lookup(e);r&&r._apply(t,n)})),iT(t._settings,(function(e){n[e]||t._userSettings[e]||t.remove(e)}))}}),Object.defineProperty(t.prototype,"_applyTemplate",{enumerable:!1,configurable:!0,writable:!0,value:function(t,n){var i=this;this._templateDisposers.push(t._apply(this,n)),iT(t._settings,(function(t,r){n.settings[t]||i._userProperties[t]||(n.settings[t]=!0,e.prototype.set.call(i,t,r))})),iT(t._privateSettings,(function(t,r){n.privateSettings[t]||i._userPrivateProperties[t]||(n.privateSettings[t]=!0,e.prototype.setPrivate.call(i,t,r))})),this._runSetup&&t.setup&&(this._runSetup=!1,t.setup(this))}}),Object.defineProperty(t.prototype,"_findStaticTemplate",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if(this._template&&e(this._template))return this._template}}),Object.defineProperty(t.prototype,"_eachTemplate",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this._findStaticTemplate((function(t){return e(t),!1})),Ik(this._internalTemplates,e),Sk(this._templates,e)}}),Object.defineProperty(t.prototype,"_applyTemplates",{enumerable:!1,configurable:!0,writable:!0,value:function(t){var n=this;void 0===t&&(t=!0),t&&this._disposeTemplates();var i={settings:{},privateSettings:{},states:{}};this._eachTemplate((function(e){n._applyTemplate(e,i)})),t&&(iT(this._settings,(function(t){n._userProperties[t]||i.settings[t]||e.prototype.remove.call(n,t)})),iT(this._privateSettings,(function(t){n._userPrivateProperties[t]||i.privateSettings[t]||e.prototype.removePrivate.call(n,t)})))}}),Object.defineProperty(t.prototype,"_findTemplate",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this._findStaticTemplate(e);if(void 0===t){var n=function(e,t){var n=function(e,t){for(var n=e.length;n>0;)if(t(e[--n],n))return n;return-1}(e,t);if(-1!==n)return e[n]}(this._internalTemplates,e);return void 0===n?Lk(this._templates,e):n}return t}}),Object.defineProperty(t.prototype,"_findTemplateByKey",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this._findTemplate((function(t){return e in t._settings}))}}),Object.defineProperty(t.prototype,"_findTemplateByPrivateKey",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this._findTemplate((function(t){return e in t._privateSettings}))}}),Object.defineProperty(t.prototype,"_disposeTemplates",{enumerable:!1,configurable:!0,writable:!0,value:function(){Sk(this._templateDisposers,(function(e){e.dispose()})),this._templateDisposers.length=0}}),Object.defineProperty(t.prototype,"_removeTemplates",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this;Sk(this._templates,(function(t){t._removeObjectTemplate(e)})),this._templates.length=0}}),Object.defineProperty(t.prototype,"_applyThemes",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this,t=!1,n=[],i=[],r=new Set,o=this.get("themeTagsSelf");return o&&Sk(o,(function(e){r.add(e)})),this._walkParents((function(o){o===e._root._rootContainer&&(t=!0),o._defaultThemes.length>0&&n.push(o._defaultThemes);var a=o.get("themes");a&&i.push(a);var s=o.get("themeTags");s&&Sk(s,(function(e){r.add(e)}))})),i=n.concat(i),this._removeTemplates(),t&&Ik(this.classNames,(function(t){var n=[];Sk(i,(function(e){Sk(e,(function(e){var i=e._lookupRules(t);i&&Ik(i,(function(e){if(e.tags.every((function(e){return r.has(e)}))){var t=function(e,t){for(var n=0,i=e.length,r=!1;n<i;){var o=n+i>>1,a=t(e[o]);a<0?n=o+1:0===a?(r=!0,i=o):i=o}return{found:r,index:n}}(n,(function(t){var n=eS(e.tags.length,t.tags.length);return 0===n?tS(e.tags,t.tags,eS):n}));n.splice(t.index,0,e)}}))}))})),Sk(n,(function(t){e._templates.push(t.template),t.template._setObjectTemplate(e)}))})),this._applyTemplates(),t&&(this._runSetup=!1),t}}),Object.defineProperty(t.prototype,"_changed",{enumerable:!1,configurable:!0,writable:!0,value:function(){}}),Object.defineProperty(t.prototype,"_beforeChanged",{enumerable:!1,configurable:!0,writable:!0,value:function(){if(this.isDirty("id")){var e=this.get("id");if(e){if(ZT.entitiesById[e])throw new Error('An entity with id "'+e+'" already exists.');ZT.entitiesById[e]=this}var t=this._prevSettings.id;t&&delete ZT.entitiesById[t]}}}),Object.defineProperty(t.prototype,"_afterChanged",{enumerable:!1,configurable:!0,writable:!0,value:function(){}}),Object.defineProperty(t.prototype,"addDisposer",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this._disposers.push(e),e}}),Object.defineProperty(t.prototype,"_dispose",{enumerable:!1,configurable:!0,writable:!0,value:function(){var t=this;e.prototype._dispose.call(this);var n=this._template;n&&n._removeObjectTemplate(this),Sk(this._internalTemplates,(function(e){e._removeObjectTemplate(t)})),this._removeTemplates(),this._disposeTemplates(),this.events.dispose(),this._disposers.forEach((function(e){e.dispose()})),iT(this._disposerProperties,(function(e,t){Sk(t,(function(e){e.dispose()}))}));var i=this.get("id");i&&delete ZT.entitiesById[i]}}),Object.defineProperty(t.prototype,"setTimeout",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var n=this,i=setTimeout((function(){n.removeDispose(r),e()}),t),r=new Vk((function(){clearTimeout(i)}));return this._disposers.push(r),r}}),Object.defineProperty(t.prototype,"removeDispose",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if(!this.isDisposed()){var t=kk(this._disposers,e);t>-1&&this._disposers.splice(t,1)}e.dispose()}}),Object.defineProperty(t.prototype,"hasTag",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return-1!==kk(this.get("themeTags",[]),e)}}),Object.defineProperty(t.prototype,"addTag",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if(!this.hasTag(e)){var t=this.get("themeTags",[]);t.push(e),this.set("themeTags",t)}}}),Object.defineProperty(t.prototype,"removeTag",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if(this.hasTag(e)){var t=this.get("themeTags",[]);Dk(t,e),this.set("themeTags",t)}}}),Object.defineProperty(t.prototype,"_t",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){for(var n,i=[],r=2;r<arguments.length;r++)i[r-2]=arguments[r];return(n=this._root.language).translate.apply(n,Wb([e,t],qb(i),!1))}}),Object.defineProperty(t.prototype,"root",{get:function(){return this._root},enumerable:!1,configurable:!0}),Object.defineProperty(t,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Entity"}),Object.defineProperty(t,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:["Entity"]}),t}(sS),uS=function(){function e(e,t,n){Object.defineProperty(this,"_settings",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_template",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._name=e,this._template=t,this._settings=n}return Object.defineProperty(e.prototype,"get",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var n=this._settings[e];return void 0!==n?n:t}}),Object.defineProperty(e.prototype,"set",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){this._settings[e]=t,this._template._stateChanged(this._name)}}),Object.defineProperty(e.prototype,"remove",{enumerable:!1,configurable:!0,writable:!0,value:function(e){delete this._settings[e],this._template._stateChanged(this._name)}}),Object.defineProperty(e.prototype,"setAll",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this;tT(e).forEach((function(n){t._settings[n]=e[n]})),this._template._stateChanged(this._name)}}),Object.defineProperty(e.prototype,"_apply",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){iT(this._settings,(function(n,i){t[n]||e._userSettings[n]||(t[n]=!0,e.setRaw(n,i))}))}}),e}(),cS=function(){function e(e){Object.defineProperty(this,"_template",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_states",{enumerable:!0,configurable:!0,writable:!0,value:{}}),this._template=e}return Object.defineProperty(e.prototype,"lookup",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this._states[e]}}),Object.defineProperty(e.prototype,"create",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var n=this._states[e];if(n)return n.setAll(t),n;var i=new uS(e,this._template,t);return this._states[e]=i,this._template._stateChanged(e),i}}),Object.defineProperty(e.prototype,"remove",{enumerable:!1,configurable:!0,writable:!0,value:function(e){delete this._states[e],this._template._stateChanged(e)}}),Object.defineProperty(e.prototype,"_apply",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){iT(this._states,(function(n,i){var r=t.states[n];null==r&&(r=t.states[n]={});var o=e.states.create(n,{});i._apply(o,r)}))}}),e}(),hS=function(){function e(){Object.defineProperty(this,"_callbacks",{enumerable:!0,configurable:!0,writable:!0,value:{}})}return Object.defineProperty(e.prototype,"add",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var n=this,i=this._callbacks[e];return void 0===i&&(i=this._callbacks[e]=[]),i.push(t),new Vk((function(){jk(i,t),0===i.length&&delete n._callbacks[e]}))}}),Object.defineProperty(e.prototype,"remove",{enumerable:!1,configurable:!0,writable:!0,value:function(e){void 0!==this._callbacks[e]&&delete this._callbacks[e]}}),Object.defineProperty(e.prototype,"_apply",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=[];return iT(this._callbacks,(function(n,i){Sk(i,(function(i){t.push(e.adapters.add(n,i))}))})),new Hk(t)}}),e}(),dS=function(){function e(e,t){if(Object.defineProperty(this,"_settings",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_privateSettings",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_settingEvents",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_privateSettingEvents",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_entities",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"states",{enumerable:!0,configurable:!0,writable:!0,value:new cS(this)}),Object.defineProperty(this,"adapters",{enumerable:!0,configurable:!0,writable:!0,value:new hS}),Object.defineProperty(this,"events",{enumerable:!0,configurable:!0,writable:!0,value:new $k}),Object.defineProperty(this,"setup",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),!t)throw new Error("You cannot use `new Class()`, instead use `Class.new()`");this._settings=e}return Object.defineProperty(e,"new",{enumerable:!1,configurable:!0,writable:!0,value:function(t){return new e(t,!0)}}),Object.defineProperty(e.prototype,"get",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var n=this._settings[e];return void 0!==n?n:t}}),Object.defineProperty(e.prototype,"setRaw",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){this._settings[e]=t}}),Object.defineProperty(e.prototype,"set",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var n=this;this._settings[e]!==t&&(this.setRaw(e,t),this._entities.forEach((function(i){i._setTemplateProperty(n,e,t)})))}}),Object.defineProperty(e.prototype,"remove",{enumerable:!1,configurable:!0,writable:!0,value:function(e){e in this._settings&&(delete this._settings[e],this._entities.forEach((function(t){t._removeTemplateProperty(e)})))}}),Object.defineProperty(e.prototype,"removeAll",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this;iT(this._settings,(function(t,n){e.remove(t)}))}}),Object.defineProperty(e.prototype,"getPrivate",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var n=this._privateSettings[e];return void 0!==n?n:t}}),Object.defineProperty(e.prototype,"setPrivateRaw",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return this._privateSettings[e]=t,t}}),Object.defineProperty(e.prototype,"setPrivate",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var n=this;return this._privateSettings[e]!==t&&(this.setPrivateRaw(e,t),this._entities.forEach((function(i){i._setTemplatePrivateProperty(n,e,t)}))),t}}),Object.defineProperty(e.prototype,"removePrivate",{enumerable:!1,configurable:!0,writable:!0,value:function(e){e in this._privateSettings&&(delete this._privateSettings[e],this._entities.forEach((function(t){t._removeTemplatePrivateProperty(e)})))}}),Object.defineProperty(e.prototype,"setAll",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this;iT(e,(function(e,n){t.set(e,n)}))}}),Object.defineProperty(e.prototype,"on",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var n=this,i=this._settingEvents[e];return void 0===i&&(i=this._settingEvents[e]=[]),i.push(t),new Vk((function(){jk(i,t),0===i.length&&delete n._settingEvents[e]}))}}),Object.defineProperty(e.prototype,"onPrivate",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var n=this,i=this._privateSettingEvents[e];return void 0===i&&(i=this._privateSettingEvents[e]=[]),i.push(t),new Vk((function(){jk(i,t),0===i.length&&delete n._privateSettingEvents[e]}))}}),Object.defineProperty(e.prototype,"_apply",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var n=[];return iT(this._settingEvents,(function(t,i){Sk(i,(function(i){n.push(e.on(t,i))}))})),iT(this._privateSettingEvents,(function(t,i){Sk(i,(function(i){n.push(e.onPrivate(t,i))}))})),this.states._apply(e,t),n.push(this.adapters._apply(e)),n.push(e.events.copyFrom(this.events)),new Hk(n)}}),Object.defineProperty(e.prototype,"_setObjectTemplate",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this._entities.push(e)}}),Object.defineProperty(e.prototype,"_removeObjectTemplate",{enumerable:!1,configurable:!0,writable:!0,value:function(e){Dk(this._entities,e)}}),Object.defineProperty(e.prototype,"_stateChanged",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this._entities.forEach((function(t){t._applyStateByKey(e)}))}}),e}(),fS=function(e){function t(t){var n=e.call(this)||this;return Object.defineProperty(n,"_sprite",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(n,"_rendererDisposers",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(n,"_dispatchParents",{enumerable:!0,configurable:!0,writable:!0,value:!0}),n._sprite=t,n}return Hb(t,e),Object.defineProperty(t.prototype,"_makePointerEvent",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return{type:e,originalEvent:t.event,point:t.point,simulated:t.simulated,native:t.native,target:this._sprite}}}),Object.defineProperty(t.prototype,"_onRenderer",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var n=this;this._sprite.set("interactive",!0),this._sprite._display.interactive=!0;var i=this._rendererDisposers[e];if(void 0===i){var r=this._sprite._display.on(e,(function(e){t.call(n,e)}));i=this._rendererDisposers[e]=new zk((function(){delete n._rendererDisposers[e],r.dispose()}))}return i.increment()}}),Object.defineProperty(t.prototype,"_on",{enumerable:!1,configurable:!0,writable:!0,value:function(n,i,r,o,a,s){var l=e.prototype._on.call(this,n,i,r,o,a,s),u=t.RENDERER_EVENTS[i];return void 0!==u&&(l.disposer=new Hk([l.disposer,this._onRenderer(i,u)])),l}}),Object.defineProperty(t.prototype,"stopParentDispatch",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._dispatchParents=!1}}),Object.defineProperty(t.prototype,"dispatchParents",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var n=this._dispatchParents;this._dispatchParents=!0;try{this.dispatch(e,t),this._dispatchParents&&this._sprite.parent&&this._sprite.parent.events.dispatchParents(e,t)}finally{this._dispatchParents=n}}}),Object.defineProperty(t,"RENDERER_EVENTS",{enumerable:!0,configurable:!0,writable:!0,value:{click:function(e){this.isEnabled("click")&&!this._sprite.isDragging()&&this._sprite._hasDown()&&!this._sprite._hasMoved(this._makePointerEvent("click",e))&&this.dispatch("click",this._makePointerEvent("click",e))},rightclick:function(e){this.isEnabled("rightclick")&&this.dispatch("rightclick",this._makePointerEvent("rightclick",e))},middleclick:function(e){this.isEnabled("middleclick")&&this.dispatch("middleclick",this._makePointerEvent("middleclick",e))},dblclick:function(e){this.dispatchParents("dblclick",this._makePointerEvent("dblclick",e))},pointerover:function(e){this.isEnabled("pointerover")&&this.dispatch("pointerover",this._makePointerEvent("pointerover",e))},pointerout:function(e){this.isEnabled("pointerout")&&this.dispatch("pointerout",this._makePointerEvent("pointerout",e))},pointerdown:function(e){this.dispatchParents("pointerdown",this._makePointerEvent("pointerdown",e))},pointerup:function(e){this.isEnabled("pointerup")&&this.dispatch("pointerup",this._makePointerEvent("pointerup",e))},globalpointerup:function(e){this.isEnabled("globalpointerup")&&this.dispatch("globalpointerup",this._makePointerEvent("globalpointerup",e))},globalpointermove:function(e){this.isEnabled("globalpointermove")&&this.dispatch("globalpointermove",this._makePointerEvent("globalpointermove",e))},wheel:function(e){this.dispatchParents("wheel",{type:"wheel",target:this._sprite,originalEvent:e.event,point:e.point})}}}),t}($k),pS=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return Object.defineProperty(t,"_adjustedLocalBounds",{enumerable:!0,configurable:!0,writable:!0,value:{left:0,right:0,top:0,bottom:0}}),Object.defineProperty(t,"_localBounds",{enumerable:!0,configurable:!0,writable:!0,value:{left:0,right:0,top:0,bottom:0}}),Object.defineProperty(t,"_parent",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(t,"_dataItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(t,"_templateField",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(t,"_sizeDirty",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(t,"_isDragging",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(t,"_dragEvent",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(t,"_dragPoint",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(t,"_isHidden",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(t,"_isShowing",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(t,"_isHiding",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(t,"_isDown",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(t,"_downPoint",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(t,"_downPoints",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(t,"_toggleDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(t,"_dragDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(t,"_tooltipDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(t,"_hoverDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(t,"_focusDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(t,"_tooltipMoveDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(t,"_tooltipPointerDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(t,"_statesHandled",{enumerable:!0,configurable:!0,writable:!0,value:!1}),t}return Hb(t,e),Object.defineProperty(t.prototype,"_afterNew",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.setPrivateRaw("visible",!0),e.prototype._afterNew.call(this)}}),Object.defineProperty(t.prototype,"_markDirtyKey",{enumerable:!1,configurable:!0,writable:!0,value:function(t){e.prototype._markDirtyKey.call(this,t),"x"!=t&&"y"!=t&&"dx"!=t&&"dy"!=t||(this.markDirtyBounds(),this._addPercentagePositionChildren(),this.markDirtyPosition())}}),Object.defineProperty(t.prototype,"_markDirtyPrivateKey",{enumerable:!1,configurable:!0,writable:!0,value:function(t){e.prototype._markDirtyPrivateKey.call(this,t),"x"!=t&&"y"!=t||this.markDirtyPosition()}}),Object.defineProperty(t.prototype,"_removeTemplateField",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._templateField&&this._templateField._removeObjectTemplate(this)}}),Object.defineProperty(t.prototype,"_createEvents",{enumerable:!1,configurable:!0,writable:!0,value:function(){return new fS(this)}}),Object.defineProperty(t.prototype,"_processTemplateField",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e,t=this.get("templateField");if(t){var n=this.dataItem;if(n){var i=n.dataContext;i&&((e=i[t])instanceof dS||!e||(e=dS.new(e)))}}this._templateField!==e&&(this._removeTemplateField(),this._templateField=e,e&&e._setObjectTemplate(this),this._applyTemplates())}}),Object.defineProperty(t.prototype,"_setDataItem",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this._dataItem;this._dataItem=e,this._processTemplateField();var n="dataitemchanged";this.events.isEnabled(n)&&this.events.dispatch(n,{type:n,target:this,oldDataItem:t,newDataItem:e})}}),Object.defineProperty(t.prototype,"dataItem",{get:function(){if(this._dataItem)return this._dataItem;for(var e=this._parent;e;){if(e._dataItem)return e._dataItem;e=e._parent}},set:function(e){this._setDataItem(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_addPercentageSizeChildren",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this.parent;e&&(this.get("width")instanceof Kk||this.get("height")instanceof Kk?Ck(e._percentageSizeChildren,this):jk(e._percentageSizeChildren,this))}}),Object.defineProperty(t.prototype,"_addPercentagePositionChildren",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this.parent;e&&(this.get("x")instanceof Kk||this.get("y")instanceof Kk?Ck(e._percentagePositionChildren,this):jk(e._percentagePositionChildren,this))}}),Object.defineProperty(t.prototype,"markDirtyPosition",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._root._addDirtyPosition(this)}}),Object.defineProperty(t.prototype,"updatePivotPoint",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this._localBounds;if(e){var t=this.get("centerX");null!=t&&(this._display.pivot.x=e.left+pT(t,e.right-e.left));var n=this.get("centerY");null!=n&&(this._display.pivot.y=e.top+pT(n,e.bottom-e.top))}}}),Object.defineProperty(t.prototype,"_beforeChanged",{enumerable:!1,configurable:!0,writable:!0,value:function(){var t=this;if(e.prototype._beforeChanged.call(this),this._handleStates(),this.isDirty("tooltip")){var n=this._prevSettings.tooltip;n&&n.dispose()}if(this.isDirty("layer")&&(this._display.setLayer(this.get("layer")),this.markDirtyLayer()),this.isDirty("tooltipPosition")){var i=this._tooltipMoveDp;i&&(i.dispose(),this._tooltipMoveDp=void 0);var r=this._tooltipPointerDp;r&&(r.dispose(),this._tooltipPointerDp=void 0),"pointer"==this.get("tooltipPosition")&&(this._tooltipPointerDp=new Hk([this.events.on("pointerover",(function(){t._tooltipMoveDp=t.events.on("globalpointermove",(function(e){t.showTooltip(e.point)}))})),this.events.on("pointerout",(function(){var e=t._tooltipMoveDp;e&&(e.dispose(),t._tooltipMoveDp=void 0)}))]))}}}),Object.defineProperty(t.prototype,"_handleStates",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._statesHandled||(this.isDirty("active")&&(this.get("active")?(this.states.applyAnimate("active"),this.set("ariaChecked",!0)):(this.isHidden()||this.states.applyAnimate("default"),this.set("ariaChecked",!1)),this.markDirtyAccessibility()),this.isDirty("disabled")&&(this.get("disabled")?(this.states.applyAnimate("disabled"),this.set("ariaChecked",!1)):(this.isHidden()||this.states.applyAnimate("default"),this.set("ariaChecked",!0)),this.markDirtyAccessibility()),this._statesHandled=!0)}}),Object.defineProperty(t.prototype,"_changed",{enumerable:!1,configurable:!0,writable:!0,value:function(){var t=this;e.prototype._changed.call(this);var n=this._display,i=this.events;if(this.isDirty("draggable")){var r=this.get("draggable");r?(this.set("interactive",!0),this._dragDp=new Hk([i.on("pointerdown",(function(e){t.dragStart(e)})),i.on("globalpointermove",(function(e){t.dragMove(e)})),i.on("globalpointerup",(function(e){t.dragStop(e)}))])):this._dragDp&&(this._dragDp.dispose(),this._dragDp=void 0),n.cancelTouch=!!r}this.isDirty("tooltipText")&&(this.get("tooltipText")?this._tooltipDp=new Hk([i.on("pointerover",(function(){t.showTooltip()})),i.on("pointerout",(function(){"always"!=t.get("showTooltipOn")&&t.hideTooltip()}))]):this._tooltipDp&&(this._tooltipDp.dispose(),this._tooltipDp=void 0));if(this.isDirty("toggleKey")){var o=this.get("toggleKey");o&&"none"!=o?this._toggleDp=i.on("click",(function(){t._isDragging||t.set(o,!t.get(o))})):this._toggleDp&&(this._toggleDp.dispose(),this._toggleDp=void 0)}if(this.isDirty("opacity")&&(n.alpha=Math.max(0,this.get("opacity",1))),this.isDirty("rotation")&&(this.markDirtyBounds(),n.angle=this.get("rotation",0)),this.isDirty("scale")&&(this.markDirtyBounds(),n.scale=this.get("scale",0)),(this.isDirty("centerX")||this.isDirty("centerY"))&&(this.markDirtyBounds(),this.updatePivotPoint()),(this.isDirty("visible")||this.isPrivateDirty("visible")||this.isDirty("forceHidden"))&&(this.get("visible")&&this.getPrivate("visible")&&!this.get("forceHidden")?n.visible=!0:(n.visible=!1,this.hideTooltip()),this.markDirtyBounds(),this.get("focusable")&&this.markDirtyAccessibility()),this.isDirty("width")||this.isDirty("height")){this.markDirtyBounds(),this._addPercentageSizeChildren();var a=this.parent;a&&(this.isDirty("width")&&this.get("width")instanceof Kk||this.isDirty("height")&&this.get("height")instanceof Kk)&&(a.markDirty(),a._prevWidth=0),this._sizeDirty=!0}if((this.isDirty("maxWidth")||this.isDirty("maxHeight")||this.isPrivateDirty("width")||this.isPrivateDirty("height")||this.isDirty("minWidth")||this.isDirty("minHeight")||this.isPrivateDirty("maxWidth")||this.isPrivateDirty("maxHeight"))&&(this.markDirtyBounds(),this._sizeDirty=!0),this._sizeDirty&&this._updateSize(),this.isDirty("wheelable")){var s=this.get("wheelable");s&&this.set("interactive",!0),n.wheelable=!!s}if((this.isDirty("tabindexOrder")||this.isDirty("focusableGroup"))&&(this.get("focusable")?this._root._registerTabindexOrder(this):this._root._unregisterTabindexOrder(this)),this.isDirty("filter")&&(n.filter=this.get("filter")),this.isDirty("cursorOverStyle")&&(n.cursorOverStyle=this.get("cursorOverStyle")),this.isDirty("hoverOnFocus")&&(this.get("hoverOnFocus")?this._focusDp=new Hk([i.on("focus",(function(){t.showTooltip()})),i.on("blur",(function(){t.hideTooltip()}))]):this._focusDp&&(this._focusDp.dispose(),this._focusDp=void 0)),this.isDirty("focusable")&&(this.get("focusable")?this._root._registerTabindexOrder(this):this._root._unregisterTabindexOrder(this),this.markDirtyAccessibility()),(this.isDirty("role")||this.isDirty("ariaLive")||this.isDirty("ariaChecked")||this.isDirty("ariaHidden")||this.isDirty("ariaOrientation")||this.isDirty("ariaValueNow")||this.isDirty("ariaValueMin")||this.isDirty("ariaValueMax")||this.isDirty("ariaValueText")||this.isDirty("ariaLabel")||this.isDirty("ariaControls"))&&this.markDirtyAccessibility(),this.isDirty("exportable")&&(n.exportable=this.get("exportable")),this.isDirty("interactive")){var l=this.events;this.get("interactive")?this._hoverDp=new Hk([l.on("click",(function(e){uT(e.originalEvent)&&(t.getPrivate("touchHovering")||t.setTimeout((function(){t._handleOver(),t.get("tooltipText")&&t.showTooltip(),t.setPrivateRaw("touchHovering",!0),t.events.dispatch("pointerover",{type:"pointerover",target:e.target,originalEvent:e.originalEvent,point:e.point,simulated:e.simulated})}),10))})),l.on("globalpointerup",(function(e){uT(e.originalEvent)&&(t.getPrivate("touchHovering")&&(t._handleOut(),t.get("tooltipText")&&t.hideTooltip()),t.setPrivateRaw("touchHovering",!1),t.events.dispatch("pointerout",{type:"pointerout",target:e.target,originalEvent:e.originalEvent,point:e.point,simulated:e.simulated})),t._isDown&&t._handleUp(e)})),l.on("pointerover",(function(){t._handleOver()})),l.on("pointerout",(function(){t._handleOut()})),l.on("pointerdown",(function(e){t._handleDown(e)}))]):(this._display.interactive=!1,this._hoverDp&&(this._hoverDp.dispose(),this._hoverDp=void 0))}this.isDirty("forceInactive")&&(this._display.inactive=this.get("forceInactive",!1)),"always"==this.get("showTooltipOn")&&this._display.visible&&this.showTooltip()}}),Object.defineProperty(t.prototype,"dragStart",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this._dragEvent=e,this.events.stopParentDispatch()}}),Object.defineProperty(t.prototype,"dragStop",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if(this._dragEvent=void 0,this._dragPoint=void 0,this.events.stopParentDispatch(),this._isDragging){this._isDragging=!1;var t="dragstop";this.events.isEnabled(t)&&this.events.dispatch(t,{type:t,target:this,originalEvent:e.originalEvent,point:e.point,simulated:e.simulated})}}}),Object.defineProperty(t.prototype,"_handleOver",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.isHidden()||(this.get("active")&&this.states.lookup("hoverActive")?this.states.applyAnimate("hoverActive"):this.get("disabled")&&this.states.lookup("hoverDisabled")?this.states.applyAnimate("hoverDisabled"):this.states.applyAnimate("hover"))}}),Object.defineProperty(t.prototype,"_handleOut",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.isHidden()||(this.get("active")&&this.states.lookup("active")?this.states.applyAnimate("active"):this.get("disabled")&&this.states.lookup("disabled")?this.states.applyAnimate("disabled"):(this.states.lookup("hover")||this.states.lookup("hoverActive"))&&this.states.applyAnimate("default"))}}),Object.defineProperty(t.prototype,"_handleUp",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if(!this.isHidden()){this.get("active")&&this.states.lookup("active")?this.states.applyAnimate("active"):this.get("disabled")&&this.states.lookup("disabled")?this.states.applyAnimate("disabled"):this.states.lookup("down")&&(this.isHover()?this.states.applyAnimate("hover"):this.states.applyAnimate("default")),this._downPoint=void 0;var t=sT(e.originalEvent);delete this._downPoints[t],0==tT(this._downPoints).length&&(this._isDown=!1)}}}),Object.defineProperty(t.prototype,"_hasMoved",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=sT(e.originalEvent),n=this._downPoints[t];if(n){var i=Math.abs(n.x-e.point.x),r=Math.abs(n.y-e.point.y);return i>5||r>5}return!1}}),Object.defineProperty(t.prototype,"_hasDown",{enumerable:!1,configurable:!0,writable:!0,value:function(){return tT(this._downPoints).length>0}}),Object.defineProperty(t.prototype,"_handleDown",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this.parent;if(t&&!this.get("draggable")&&t._handleDown(e),this.get("interactive")&&!this.isHidden()){this.states.lookup("down")&&this.states.applyAnimate("down"),this._downPoint={x:e.point.x,y:e.point.y},this._isDown=!0;var n=sT(e.originalEvent);this._downPoints[n]={x:e.point.x,y:e.point.y}}}}),Object.defineProperty(t.prototype,"dragMove",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this._dragEvent;if(t){for(var n=0,i=this.parent;null!=i;)n+=i.get("rotation",0),i=i.parent;var r=e.point.x-t.point.x,o=e.point.y-t.point.y,a=this.events;if(t.simulated&&!this._isDragging){this._isDragging=!0,this._dragEvent=e,this._dragPoint={x:this.x(),y:this.y()};var s="dragstart";a.isEnabled(s)&&a.dispatch(s,{type:s,target:this,originalEvent:e.originalEvent,point:e.point,simulated:e.simulated})}if(this._isDragging){var l=this._dragPoint;this.set("x",l.x+r*GT(n)+o*YT(n)),this.set("y",l.y+o*GT(n)-r*YT(n));s="dragged";a.isEnabled(s)&&a.dispatch(s,{type:s,target:this,originalEvent:e.originalEvent,point:e.point,simulated:e.simulated})}else if(Math.hypot(r,o)>5){this._isDragging=!0,this._dragEvent=e,this._dragPoint={x:this.x(),y:this.y()};s="dragstart";a.isEnabled(s)&&a.dispatch(s,{type:s,target:this,originalEvent:e.originalEvent,point:e.point,simulated:e.simulated})}}}}),Object.defineProperty(t.prototype,"_updateSize",{enumerable:!1,configurable:!0,writable:!0,value:function(){}}),Object.defineProperty(t.prototype,"_getBounds",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._localBounds=this._display.getLocalBounds()}}),Object.defineProperty(t.prototype,"depth",{enumerable:!1,configurable:!0,writable:!0,value:function(){for(var e=this.parent,t=0;;){if(!e)return t;++t,e=e.parent}}}),Object.defineProperty(t.prototype,"markDirtySize",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._sizeDirty=!0,this.markDirty()}}),Object.defineProperty(t.prototype,"markDirtyBounds",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this._display;if(this.get("isMeasured")){this._root._addDirtyBounds(this),e.isMeasured=!0,e.invalidateBounds();var t=this.parent;t&&"absolute"!=this.get("position")&&(null==t.get("width")||null==t.get("height")||t.get("layout"))&&t.markDirtyBounds(),this.get("focusable")&&this.isFocus()&&this.markDirtyAccessibility()}}}),Object.defineProperty(t.prototype,"markDirtyAccessibility",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._root._invalidateAccessibility(this)}}),Object.defineProperty(t.prototype,"markDirtyLayer",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._display.markDirtyLayer(!0)}}),Object.defineProperty(t.prototype,"markDirty",{enumerable:!1,configurable:!0,writable:!0,value:function(){e.prototype.markDirty.call(this),this.markDirtyLayer()}}),Object.defineProperty(t.prototype,"_updateBounds",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e,t=this._adjustedLocalBounds;if(this.get("visible")&&this.getPrivate("visible")&&!this.get("forceHidden")?(this._getBounds(),this._fixMinBounds(this._localBounds),this.updatePivotPoint(),this._adjustedLocalBounds=this._display.getAdjustedBounds(this._localBounds),e=this._adjustedLocalBounds):(e={left:0,right:0,top:0,bottom:0},this._localBounds=e,this._adjustedLocalBounds=e),!t||t.left!==e.left||t.top!==e.top||t.right!==e.right||t.bottom!==e.bottom){var n="boundschanged";this.events.isEnabled(n)&&this.events.dispatch(n,{type:n,target:this}),this.parent&&(this.parent.markDirty(),this.parent.markDirtyBounds())}}}),Object.defineProperty(t.prototype,"_fixMinBounds",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this.get("minWidth"),n=this.get("minHeight");wk(t)&&e.right-e.left<t&&(e.right=e.left+t),wk(n)&&e.bottom-e.top<n&&(e.bottom=e.top+n);var i=this.getPrivate("width"),r=this.getPrivate("height");wk(i)&&(e.right=e.left+i),wk(r)&&(e.bottom=e.top+r)}}),Object.defineProperty(t.prototype,"_removeParent",{enumerable:!1,configurable:!0,writable:!0,value:function(e){e&&(e.children.removeValue(this),jk(e._percentageSizeChildren,this),jk(e._percentagePositionChildren,this))}}),Object.defineProperty(t.prototype,"_clearDirty",{enumerable:!1,configurable:!0,writable:!0,value:function(){e.prototype._clearDirty.call(this),this._sizeDirty=!1,this._statesHandled=!1}}),Object.defineProperty(t.prototype,"hover",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.showTooltip(),this._handleOver()}}),Object.defineProperty(t.prototype,"unhover",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.hideTooltip(),this._handleOut()}}),Object.defineProperty(t.prototype,"showTooltip",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this.getTooltip(),n=this.get("tooltipText");if(n&&t){var i=this.get("tooltipPosition"),r=this.getPrivate("tooltipTarget",this);"fixed"!=i&&e||(this._display._setMatrix(),e=this.toGlobal(r._getTooltipPoint())),t.set("pointTo",e),t.set("tooltipTarget",r),t.get("x")||t.set("x",e.x),t.get("y")||t.set("y",e.y),t.label.set("text",n);var o=this.dataItem;if(o&&t.label._setDataItem(o),"always"==this.get("showTooltipOn")&&(e.x<0||e.x>this._root.width()||e.y<0||e.y>this._root.height()))return void this.hideTooltip();t.label.text.markDirtyText();var a=t.show();return this.setPrivateRaw("showingTooltip",!0),a}}}),Object.defineProperty(t.prototype,"hideTooltip",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this.getTooltip();if(e){var t=e.hide();return this.setPrivateRaw("showingTooltip",!1),t}}}),Object.defineProperty(t.prototype,"_getTooltipPoint",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this._localBounds;if(e){var t=0,n=0;return this.get("isMeasured")?(t=e.left+pT(this.get("tooltipX",0),e.right-e.left),n=e.top+pT(this.get("tooltipY",0),e.bottom-e.top)):(t=pT(this.get("tooltipX",0),this.width()),n=pT(this.get("tooltipY",0),this.height())),{x:t,y:n}}return{x:0,y:0}}}),Object.defineProperty(t.prototype,"getTooltip",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this.get("tooltip");if(e)return e;var t=this.parent;return t?t.getTooltip():void 0}}),Object.defineProperty(t.prototype,"_updatePosition",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this.parent,t=this.get("dx",0),n=this.get("dy",0),i=this.get("x"),r=this.getPrivate("x"),o=0,a=0,s=this.get("position");i instanceof Kk&&(i=e?e.innerWidth()*i.value+e.get("paddingLeft",0):0),wk(i)?o=i+t:null!=r?o=r:e&&"relative"==s&&(o=e.get("paddingLeft",0)+t);var l=this.get("y"),u=this.getPrivate("y");l instanceof Kk&&(l=e?e.innerHeight()*l.value+e.get("paddingTop",0):0),wk(l)?a=l+n:null!=u?a=u:e&&"relative"==s&&(a=e.get("paddingTop",0)+n);var c=this._display;if(c.x!=o||c.y!=a){c.invalidateBounds(),c.x=o,c.y=a;var h="positionchanged";this.events.isEnabled(h)&&this.events.dispatch(h,{type:h,target:this})}this.getPrivate("showingTooltip")&&this.showTooltip()}}),Object.defineProperty(t.prototype,"x",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this.get("x"),t=this.getPrivate("x"),n=this.parent;return n?e instanceof Kk?pT(e,n.innerWidth())+n.get("paddingLeft",0):wk(e)?e:null!=t?t:n.get("paddingLeft",this._display.x):this._display.x}}),Object.defineProperty(t.prototype,"y",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this.getPrivate("y");if(null!=e)return e;var t=this.get("y"),n=this.parent;return n?t instanceof Kk?pT(t,n.innerHeight())+n.get("paddingTop",0):wk(t)?t:null!=e?e:n.get("paddingTop",this._display.y):this._display.y}}),Object.defineProperty(t.prototype,"_dispose",{enumerable:!1,configurable:!0,writable:!0,value:function(){e.prototype._dispose.call(this),this._display.dispose(),this._removeTemplateField(),this._removeParent(this.parent),this._root._removeFocusElement(this);var t=this.get("tooltip");t&&t.dispose(),this.markDirty()}}),Object.defineProperty(t.prototype,"adjustedLocalBounds",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._fixMinBounds(this._adjustedLocalBounds),this._adjustedLocalBounds}}),Object.defineProperty(t.prototype,"localBounds",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._localBounds}}),Object.defineProperty(t.prototype,"bounds",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this._adjustedLocalBounds,t=this.x(),n=this.y();return{left:e.left+t,right:e.right+t,top:e.top+n,bottom:e.bottom+n}}}),Object.defineProperty(t.prototype,"globalBounds",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this.localBounds(),t=this.toGlobal({x:e.left,y:e.top}),n=this.toGlobal({x:e.right,y:e.top}),i=this.toGlobal({x:e.right,y:e.bottom}),r=this.toGlobal({x:e.left,y:e.bottom});return{left:Math.min(t.x,n.x,i.x,r.x),top:Math.min(t.y,n.y,i.y,r.y),right:Math.max(t.x,n.x,i.x,r.x),bottom:Math.max(t.y,n.y,i.y,r.y)}}}),Object.defineProperty(t.prototype,"_onShow",{enumerable:!1,configurable:!0,writable:!0,value:function(e){}}),Object.defineProperty(t.prototype,"_onHide",{enumerable:!1,configurable:!0,writable:!0,value:function(e){}}),Object.defineProperty(t.prototype,"appear",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return $b(this,void 0,void 0,(function(){var n=this;return Yb(this,(function(i){switch(i.label){case 0:return[4,this.hide(0)];case 1:return i.sent(),t?[2,new Promise((function(i,r){n.setTimeout((function(){i(n.show(e))}),t)}))]:[2,this.show(e)]}}))}))}}),Object.defineProperty(t.prototype,"show",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return $b(this,void 0,void 0,(function(){return Yb(this,(function(t){switch(t.label){case 0:return this._isShowing?[3,2]:(this._isHidden=!1,this._isShowing=!0,this._isHiding=!1,this.states.lookup("default").get("visible")&&this.set("visible",!0),this._onShow(e),[4,RT(this.states.applyAnimate("default",e))]);case 1:t.sent(),this._isShowing=!1,t.label=2;case 2:return[2]}}))}))}}),Object.defineProperty(t.prototype,"hide",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return $b(this,void 0,void 0,(function(){return Yb(this,(function(t){switch(t.label){case 0:return this._isHiding||this._isHidden?[3,2]:(this._isHiding=!0,this._isShowing=!1,this.states.lookup("hidden")||this.states.create("hidden",{opacity:0,visible:!1}),this._isHidden=!0,this._onHide(e),[4,RT(this.states.applyAnimate("hidden",e))]);case 1:t.sent(),this._isHiding=!1,t.label=2;case 2:return[2]}}))}))}}),Object.defineProperty(t.prototype,"isHidden",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._isHidden}}),Object.defineProperty(t.prototype,"isShowing",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._isShowing}}),Object.defineProperty(t.prototype,"isHiding",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._isHiding}}),Object.defineProperty(t.prototype,"isHover",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._display.hovering()}}),Object.defineProperty(t.prototype,"isFocus",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._root.focused(this)}}),Object.defineProperty(t.prototype,"isDragging",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._isDragging}}),Object.defineProperty(t.prototype,"isVisible",{enumerable:!1,configurable:!0,writable:!0,value:function(){return!(!this.get("visible")||!this.getPrivate("visible")||this.get("forceHidden"))}}),Object.defineProperty(t.prototype,"isVisibleDeep",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._parent?this._parent.isVisibleDeep()&&this.isVisible():this.isVisible()}}),Object.defineProperty(t.prototype,"width",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this.get("width"),t=this.get("maxWidth",this.getPrivate("maxWidth")),n=this.get("minWidth"),i=this.getPrivate("width"),r=0;if(wk(i))r=i;else if(null==e)this._adjustedLocalBounds&&(r=this._adjustedLocalBounds.right-this._adjustedLocalBounds.left);else if(e instanceof Kk){var o=this.parent;r=o?o.innerWidth()*e.value:this._root.width()*e.value}else wk(e)&&(r=e);return wk(n)&&(r=Math.max(n,r)),wk(t)&&(r=Math.min(t,r)),r}}),Object.defineProperty(t.prototype,"maxWidth",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this.get("maxWidth",this.getPrivate("maxWidth"));if(wk(e))return e;var t=this.get("width");if(wk(t))return t;var n=this.parent;return n?n.innerWidth():this._root.width()}}),Object.defineProperty(t.prototype,"maxHeight",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this.get("maxHeight",this.getPrivate("maxHeight"));if(wk(e))return e;var t=this.get("height");if(wk(t))return t;var n=this.parent;return n?n.innerHeight():this._root.height()}}),Object.defineProperty(t.prototype,"height",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this.get("height"),t=this.get("maxHeight",this.getPrivate("maxHeight")),n=this.get("minHeight"),i=this.getPrivate("height"),r=0;if(wk(i))r=i;else if(null==e)this._adjustedLocalBounds&&(r=this._adjustedLocalBounds.bottom-this._adjustedLocalBounds.top);else if(e instanceof Kk){var o=this.parent;r=o?o.innerHeight()*e.value:this._root.height()*e.value}else wk(e)&&(r=e);return wk(n)&&(r=Math.max(n,r)),wk(t)&&(r=Math.min(t,r)),r}}),Object.defineProperty(t.prototype,"_findStaticTemplate",{enumerable:!1,configurable:!0,writable:!0,value:function(t){return this._templateField&&t(this._templateField)?this._templateField:e.prototype._findStaticTemplate.call(this,t)}}),Object.defineProperty(t.prototype,"_walkParents",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this._parent&&this._walkParent(e)}}),Object.defineProperty(t.prototype,"_walkParent",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this._parent&&this._parent._walkParent(e),e(this)}}),Object.defineProperty(t.prototype,"parent",{get:function(){return this._parent},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_setParent",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){void 0===t&&(t=!1);var n=this._parent;e!==n&&(this.markDirtyBounds(),e.markDirty(),this._parent=e,t&&(this._removeParent(n),e&&(this._addPercentageSizeChildren(),this._addPercentagePositionChildren())),this.markDirtyPosition(),this._applyThemes())}}),Object.defineProperty(t.prototype,"getNumberFormatter",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this.get("numberFormatter",this._root.numberFormatter)}}),Object.defineProperty(t.prototype,"getDateFormatter",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this.get("dateFormatter",this._root.dateFormatter)}}),Object.defineProperty(t.prototype,"getDurationFormatter",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this.get("durationFormatter",this._root.durationFormatter)}}),Object.defineProperty(t.prototype,"toGlobal",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this._display.toGlobal(e)}}),Object.defineProperty(t.prototype,"toLocal",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this._display.toLocal(e)}}),Object.defineProperty(t.prototype,"_getDownPoint",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this._getDownPointId();if(e)return this._downPoints[e]}}),Object.defineProperty(t.prototype,"_getDownPointId",{enumerable:!1,configurable:!0,writable:!0,value:function(){if(this._downPoints)return(e=this._downPoints,t=function(e,t){return e>t?1:e<t?-1:0},tT(e).sort(t))[0];var e,t}}),Object.defineProperty(t.prototype,"toFront",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this.parent;e&&e.children.moveValue(this,e.children.length-1)}}),Object.defineProperty(t.prototype,"toBack",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this.parent;e&&e.children.moveValue(this,0)}}),Object.defineProperty(t,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Sprite"}),Object.defineProperty(t,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:lS.classNames.concat([t.className])}),t}(lS);!function(e){e.ADD="lighter",e.COLOR="color",e.COLOR_BURN="color-burn",e.COLOR_DODGE="color-dodge",e.DARKEN="darken",e.DIFFERENCE="difference",e.DST_OVER="destination-over",e.EXCLUSION="exclusion",e.HARD_LIGHT="hard-light",e.HUE="hue",e.LIGHTEN="lighten",e.LUMINOSITY="luminosity",e.MULTIPLY="multiply",e.NORMAL="source-over",e.OVERLAY="overlay",e.SATURATION="saturation",e.SCREEN="screen",e.SOFT_LIGHT="soft-light",e.SRC_ATOP="source-atop",e.XOR="xor"}(iS||(iS={}));var gS=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return Object.defineProperty(t,"_display",{enumerable:!0,configurable:!0,writable:!0,value:t._root._renderer.makeGraphics()}),Object.defineProperty(t,"_clear",{enumerable:!0,configurable:!0,writable:!0,value:!1}),t}return Hb(t,e),Object.defineProperty(t.prototype,"_beforeChanged",{enumerable:!1,configurable:!0,writable:!0,value:function(){var t,n,i=this;(e.prototype._beforeChanged.call(this),(this.isDirty("draw")||this.isDirty("svgPath"))&&this.markDirtyBounds(),(this.isDirty("fill")||this.isDirty("stroke")||this.isDirty("visible")||this.isDirty("forceHidden")||this.isDirty("fillGradient")||this.isDirty("strokeGradient")||this.isDirty("fillPattern")||this.isDirty("strokePattern")||this.isDirty("fillOpacity")||this.isDirty("strokeOpacity")||this.isDirty("strokeWidth")||this.isDirty("draw")||this.isDirty("blendMode")||this.isDirty("strokeDasharray")||this.isDirty("strokeDashoffset")||this.isDirty("svgPath")||this.isDirty("lineJoin")||this.isDirty("shadowColor")||this.isDirty("shadowBlur")||this.isDirty("shadowOffsetX")||this.isDirty("shadowOffsetY"))&&(this._clear=!0),this.isDirty("fillGradient"))&&((t=this.get("fillGradient"))&&(this._display.isMeasured=!0,(n=t.get("target"))&&(this._disposers.push(n.events.on("boundschanged",(function(){i._markDirtyKey("fill")}))),this._disposers.push(n.events.on("positionchanged",(function(){i._markDirtyKey("fill")}))))));this.isDirty("strokeGradient")&&((t=this.get("strokeGradient"))&&(this._display.isMeasured=!0,(n=t.get("target"))&&(this._disposers.push(n.events.on("boundschanged",(function(){i._markDirtyKey("stroke")}))),this._disposers.push(n.events.on("positionchanged",(function(){i._markDirtyKey("stroke")}))))))}}),Object.defineProperty(t.prototype,"_changed",{enumerable:!1,configurable:!0,writable:!0,value:function(){if(e.prototype._changed.call(this),this._clear){this.markDirtyLayer(),this._display.clear();var t=this.get("strokeDasharray");wk(t)&&(t=t<.5?[0]:[t]),this._display.setLineDash(t);var n=this.get("strokeDashoffset");n&&this._display.setLineDashOffset(n);var i=this.get("blendMode",iS.NORMAL);this._display.blendMode=i;var r=this.get("draw");r&&r(this._display,this);var o=this.get("svgPath");null!=o&&this._display.svgPath(o)}}}),Object.defineProperty(t.prototype,"_afterChanged",{enumerable:!1,configurable:!0,writable:!0,value:function(){if(e.prototype._afterChanged.call(this),this._clear){var t=this.get("fill"),n=this.get("fillGradient"),i=this.get("fillPattern"),r=this.get("fillOpacity"),o=this.get("stroke"),a=this.get("strokeGradient"),s=this.get("strokePattern"),l=this.get("shadowColor"),u=this.get("shadowBlur"),c=this.get("shadowOffsetX"),h=this.get("shadowOffsetY"),d=this.get("shadowOpacity");if(l&&(u||c||h)&&this._display.shadow(l,u,c,h,d),i){var f=!1;!t||i.get("fill")&&!i.get("fillInherited")||(i.set("fill",t),i.set("fillInherited",!0),f=!0),!o||i.get("color")&&!i.get("colorInherited")||(i.set("color",o),i.set("colorInherited",!0),f=!0),f&&i._changed(),(b=i.pattern)&&(this._display.beginFill(b,r),this._display.endFill())}else if(n){if(t)(y=n.get("stops",[])).length&&Sk(y,(function(e){e.color&&!e.colorInherited||!t||(e.color=t,e.colorInherited=!0),(null==e.opacity||e.opacityInherited)&&(e.opacity=r,e.opacityInherited=!0)}));(v=n.getFill(this))&&(this._display.beginFill(v,r),this._display.endFill())}else t&&(this._display.beginFill(t,r),this._display.endFill());if(o||a||s){var p=this.get("strokeOpacity"),g=this.get("strokeWidth",1),m=this.get("lineJoin");if(s){var b;f=!1;!o||s.get("color")&&!s.get("colorInherited")||(s.set("color",o),s.set("colorInherited",!0),f=!0),f&&s._changed(),(b=s.pattern)&&(this._display.lineStyle(g,b,p,m),this._display.endStroke())}else if(a){var y,v;(y=a.get("stops",[])).length&&Sk(y,(function(e){e.color&&!e.colorInherited||!o||(e.color=o,e.colorInherited=!0),(null==e.opacity||e.opacityInherited)&&(e.opacity=p,e.opacityInherited=!0)})),(v=a.getFill(this))&&(this._display.lineStyle(g,v,p,m),this._display.endStroke())}else o&&(this._display.lineStyle(g,o,p,m),this._display.endStroke())}}this._clear=!1}}),Object.defineProperty(t,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Graphics"}),Object.defineProperty(t,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:pS.classNames.concat([t.className])}),t}(pS),mS=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Hb(t,e),Object.defineProperty(t.prototype,"_beforeChanged",{enumerable:!1,configurable:!0,writable:!0,value:function(){e.prototype._beforeChanged.call(this),(this.isDirty("width")||this.isDirty("height")||this.isPrivateDirty("width")||this.isPrivateDirty("height"))&&(this._clear=!0)}}),Object.defineProperty(t.prototype,"_changed",{enumerable:!1,configurable:!0,writable:!0,value:function(){e.prototype._changed.call(this),this._clear&&!this.get("draw")&&this._draw()}}),Object.defineProperty(t.prototype,"_draw",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._display.drawRect(0,0,this.width(),this.height())}}),Object.defineProperty(t.prototype,"_updateSize",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.markDirty(),this._clear=!0}}),Object.defineProperty(t,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Rectangle"}),Object.defineProperty(t,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:gS.classNames.concat([t.className])}),t}(gS);function bS(e,t){e.get("reverseChildren",!1)?e.children.eachReverse(t):e.children.each(t)}var yS=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Hb(t,e),Object.defineProperty(t,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Layout"}),Object.defineProperty(t,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:lS.classNames.concat([t.className])}),t}(lS),vS=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Hb(t,e),Object.defineProperty(t.prototype,"updateContainer",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=e.get("paddingLeft",0),n=e.innerWidth(),i=0;bS(e,(function(e){if(e.isVisible()&&"relative"==e.get("position")){var t=e.get("width");if(t instanceof Kk){i+=t.value;var r=n*t.value,o=e.get("minWidth",-1/0);o>r&&(n-=o,i-=t.value);var a=e.get("maxWidth",e.getPrivate("maxWidth",1/0));r>a&&(n-=a,i-=t.value)}else wk(t)||(t=e.width()),n-=t+e.get("marginLeft",0)+e.get("marginRight",0)}})),n>0&&bS(e,(function(e){if(e.isVisible()&&"relative"==e.get("position")){var t=e.get("width");if(t instanceof Kk){var r=n*t.value/i-e.get("marginLeft",0)-e.get("marginRight",0),o=e.get("minWidth",-1/0),a=e.get("maxWidth",e.getPrivate("maxWidth",1/0));r=Math.min(Math.max(o,r),a),e.setPrivate("width",r)}}}));var r=t;bS(e,(function(e){if("relative"==e.get("position"))if(e.isVisible()){var t=e.adjustedLocalBounds(),n=e.get("marginLeft",0),i=e.get("marginRight",0),o=r+n-t.left;e.setPrivate("x",o),r=o+t.right+i}else e.setPrivate("x",void 0)}))}}),Object.defineProperty(t,"className",{enumerable:!0,configurable:!0,writable:!0,value:"HorizontalLayout"}),Object.defineProperty(t,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:yS.classNames.concat([t.className])}),t}(yS),_S=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Hb(t,e),Object.defineProperty(t.prototype,"updateContainer",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=e.get("paddingTop",0),n=e.innerHeight(),i=0;bS(e,(function(e){if(e.isVisible()&&"relative"==e.get("position")){var t=e.get("height");if(t instanceof Kk){i+=t.value;var r=n*t.value,o=e.get("minHeight",-1/0);o>r&&(n-=o,i-=t.value);var a=e.get("maxHeight",e.getPrivate("maxHeight",1/0));r>a&&(n-=a,i-=t.value)}else wk(t)||(t=e.height()),n-=t+e.get("marginTop",0)+e.get("marginBottom",0)}})),n>0&&bS(e,(function(e){if(e.isVisible()&&"relative"==e.get("position")){var t=e.get("height");if(t instanceof Kk){var r=n*t.value/i-e.get("marginTop",0)-e.get("marginBottom",0),o=e.get("minHeight",-1/0),a=e.get("maxHeight",e.getPrivate("maxHeight",1/0));r=Math.min(Math.max(o,r),a),e.setPrivate("height",r)}}}));var r=t;bS(e,(function(e){if("relative"==e.get("position"))if(e.isVisible()){var t=e.adjustedLocalBounds(),n=e.get("marginTop",0),i=e.get("marginBottom",0),o=r+n-t.top;e.setPrivate("y",o),r=o+t.bottom+i}else e.setPrivate("y",void 0)}))}}),Object.defineProperty(t,"className",{enumerable:!0,configurable:!0,writable:!0,value:"VerticalLayout"}),Object.defineProperty(t,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:yS.classNames.concat([t.className])}),t}(yS),wS=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Hb(t,e),Object.defineProperty(t.prototype,"_afterNew",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._setRawDefault("maxColumns",Number.MAX_VALUE),e.prototype._afterNew.call(this)}}),Object.defineProperty(t.prototype,"updateContainer",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=e.get("paddingLeft",0),n=e.get("paddingRight",0),i=e.get("paddingTop",0),r=e.maxWidth()-t-n,o=r,a=1;bS(e,(function(e){if(e.get("visible")&&e.getPrivate("visible")&&!e.get("forceHidden")&&"absolute"!=e.get("position")){var t=e.width();t<o&&(o=t),t>a&&(a=t)}})),o=$T(o,1,r),a=$T(a,1,r);var s=1;s=this.get("fixedWidthGrid")?r/a:r/o,s=Math.max(1,Math.floor(s)),s=Math.min(this.get("maxColumns",Number.MAX_VALUE),s);var l=this.getColumnWidths(e,s,a,r),u=i,c=0,h=0;s=l.length;var d=t;bS(e,(function(e){if("relative"==e.get("position")&&e.isVisible()){var n=e.get("marginTop",0),i=e.get("marginBottom",0),r=e.adjustedLocalBounds(),o=e.get("marginLeft",0),a=e.get("marginRight",0),f=d+o-r.left,p=u+n-r.top;e.setPrivate("x",f),e.setPrivate("y",p),d+=l[c]+a,h=Math.max(h,e.height()+n+i),++c>=s&&(c=0,d=t,u+=h)}}))}}),Object.defineProperty(t.prototype,"getColumnWidths",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n,i){var r=this,o=0,a=[],s=0;return bS(e,(function(i){var o=i.adjustedLocalBounds();"absolute"!=i.get("position")&&i.isVisible()&&(r.get("fixedWidthGrid")?a[s]=n:a[s]=Math.max(0|a[s],o.right-o.left+i.get("marginLeft",0)+i.get("marginRight",0)),s<e.children.length-1&&++s==t&&(s=0))})),Sk(a,(function(e){o+=e})),o>i?t>2?(t-=1,this.getColumnWidths(e,t,n,i)):[i]:a}}),Object.defineProperty(t,"className",{enumerable:!0,configurable:!0,writable:!0,value:"GridLayout"}),Object.defineProperty(t,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:yS.classNames.concat([t.className])}),t}(yS),xS=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return Object.defineProperty(t,"_display",{enumerable:!0,configurable:!0,writable:!0,value:t._root._renderer.makeContainer()}),Object.defineProperty(t,"_childrenDisplay",{enumerable:!0,configurable:!0,writable:!0,value:t._root._renderer.makeContainer()}),Object.defineProperty(t,"children",{enumerable:!0,configurable:!0,writable:!0,value:new Xk(t)}),Object.defineProperty(t,"_percentageSizeChildren",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(t,"_percentagePositionChildren",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(t,"_prevWidth",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(t,"_prevHeight",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(t,"_contentWidth",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(t,"_contentHeight",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(t,"_contentMask",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),t}return Hb(t,e),Object.defineProperty(t.prototype,"_afterNew",{enumerable:!1,configurable:!0,writable:!0,value:function(){e.prototype._afterNew.call(this),this._display.addChild(this._childrenDisplay)}}),Object.defineProperty(t.prototype,"_dispose",{enumerable:!1,configurable:!0,writable:!0,value:function(){Ik(this.allChildren(),(function(e){e.dispose()})),e.prototype._dispose.call(this)}}),Object.defineProperty(t.prototype,"_changed",{enumerable:!1,configurable:!0,writable:!0,value:function(){if(e.prototype._changed.call(this),this.isDirty("interactiveChildren")&&(this._display.interactiveChildren=this.get("interactiveChildren",!1)),this.isDirty("layout")&&(this._prevWidth=0,this._prevHeight=0,this.markDirtyBounds(),this._prevSettings.layout&&this.children.each((function(e){e.removePrivate("x"),e.removePrivate("y")}))),(this.isDirty("paddingTop")||this.isDirty("paddingBottom")||this.isDirty("paddingLeft")||this.isDirty("paddingRight"))&&this.children.each((function(e){e.markDirtyPosition()})),this.isDirty("maskContent")){var t=this._childrenDisplay,n=this._contentMask;this.get("maskContent")?n||(n=mS.new(this._root,{width:this.width(),height:this.height()}),this._contentMask=n,t.addChildAt(n._display,0),t.mask=n._display):n&&(t.removeChild(n._display),t.mask=null,n.dispose())}}}),Object.defineProperty(t.prototype,"_updateSize",{enumerable:!1,configurable:!0,writable:!0,value:function(){e.prototype._updateSize.call(this),Sk(this._percentageSizeChildren,(function(e){e._updateSize()})),Sk(this._percentagePositionChildren,(function(e){e.markDirtyPosition(),e._updateSize()})),this.updateBackground()}}),Object.defineProperty(t.prototype,"updateBackground",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this.get("background"),t=this._localBounds;if(t&&!this.isHidden()){var n=t.left,i=t.top,r=t.right-n,o=t.bottom-i,a=this.width(),s=this.height();e&&(e.setAll({width:r,height:o,x:n,y:i}),this._display.interactive&&(e._display.interactive=!0));var l=this._contentMask;l&&l.setAll({width:a,height:s});var u=this.get("verticalScrollbar");if(u){u.set("height",s),u.set("x",a-u.width()-u.get("marginRight",0)),u.set("end",u.get("start",0)+s/this._contentHeight);var c=u.get("background");c&&c.setAll({width:u.width(),height:s});var h=!0;this._contentHeight<=s&&(h=!1),u.setPrivate("visible",h)}}}}),Object.defineProperty(t.prototype,"_applyThemes",{enumerable:!1,configurable:!0,writable:!0,value:function(){return!!e.prototype._applyThemes.call(this)&&(this.eachChildren((function(e){e._applyThemes()})),!0)}}),Object.defineProperty(t.prototype,"_applyState",{enumerable:!1,configurable:!0,writable:!0,value:function(t){e.prototype._applyState.call(this,t),this.get("setStateOnChildren")&&this.eachChildren((function(e){e.states.apply(t)}))}}),Object.defineProperty(t.prototype,"_applyStateAnimated",{enumerable:!1,configurable:!0,writable:!0,value:function(t,n){e.prototype._applyStateAnimated.call(this,t,n),this.get("setStateOnChildren")&&this.eachChildren((function(e){e.states.applyAnimate(t,n)}))}}),Object.defineProperty(t.prototype,"innerWidth",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this.width()-this.get("paddingRight",0)-this.get("paddingLeft",0)}}),Object.defineProperty(t.prototype,"innerHeight",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this.height()-this.get("paddingTop",0)-this.get("paddingBottom",0)}}),Object.defineProperty(t.prototype,"_getBounds",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this.get("width"),t=this.get("height"),n=this.getPrivate("width"),i=this.getPrivate("height"),r={left:0,top:0,right:this.width(),bottom:this.height()},o=this.get("layout"),a=!1,s=!1;if((o instanceof vS||o instanceof wS)&&(a=!0),o instanceof _S&&(s=!0),null==e&&null==n||null==t&&null==i||this.get("verticalScrollbar")){var l=Number.MAX_VALUE,u=l,c=-l,h=l,d=-l,f=this.get("paddingLeft",0),p=this.get("paddingTop",0),g=this.get("paddingRight",0),m=this.get("paddingBottom",0);this.children.each((function(e){if("absolute"!=e.get("position")&&e.get("isMeasured")){var t=e.adjustedLocalBounds(),n=e.x(),i=e.y(),r=n+t.left,o=n+t.right,l=i+t.top,f=i+t.bottom;a&&(r-=e.get("marginLeft",0),o+=e.get("marginRight",0)),s&&(l-=e.get("marginTop",0),f+=e.get("marginBottom",0)),r<u&&(u=r),o>c&&(c=o),l<h&&(h=l),f>d&&(d=f)}})),u==l&&(u=0),c==-l&&(c=0),h==l&&(h=0),d==-l&&(d=0),r.left=u-f,r.top=h-p,r.right=c+g,r.bottom=d+m}else;this._contentWidth=r.right-r.left,this._contentHeight=r.bottom-r.top,wk(e)&&(r.left=0,r.right=e),wk(n)&&(r.left=0,r.right=n),wk(t)&&(r.top=0,r.bottom=t),wk(i)&&(r.top=0,r.bottom=i),this._localBounds=r}}),Object.defineProperty(t.prototype,"_updateBounds",{enumerable:!1,configurable:!0,writable:!0,value:function(){var t=this.get("layout");t&&t.updateContainer(this),e.prototype._updateBounds.call(this),this.updateBackground()}}),Object.defineProperty(t.prototype,"markDirty",{enumerable:!1,configurable:!0,writable:!0,value:function(){e.prototype.markDirty.call(this),this._root._addDirtyParent(this)}}),Object.defineProperty(t.prototype,"_prepareChildren",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this.innerWidth(),t=this.innerHeight();if(e!=this._prevWidth||t!=this._prevHeight){var n=this.get("layout"),i=!1,r=!1;n&&((n instanceof vS||n instanceof wS)&&(i=!0),n instanceof _S&&(r=!0)),Sk(this._percentageSizeChildren,(function(n){if(!i){var o=n.get("width");o instanceof Kk&&n.setPrivate("width",o.value*e)}if(!r){var a=n.get("height");a instanceof Kk&&n.setPrivate("height",a.value*t)}})),Sk(this._percentagePositionChildren,(function(e){e.markDirtyPosition(),e.markDirtyBounds()})),this._prevWidth=e,this._prevHeight=t,this._sizeDirty=!0,this.updateBackground()}this._handleStates()}}),Object.defineProperty(t.prototype,"_updateChildren",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this;if(this.isDirty("verticalScrollbar")){var t,n=this.get("verticalScrollbar");if(n)n._setParent(this),n.children.removeValue(n.startGrip),n.children.removeValue(n.endGrip),this.set("maskContent",!0),this.set("paddingRight",n.width()+n.get("marginRight",0)+n.get("marginLeft",0)),(t=this.get("background"))||(t=this.set("background",mS.new(this._root,{themeTags:["background"],fillOpacity:0,fill:this._root.interfaceColors.get("alternativeBackground")}))),this._disposers.push(this.events.on("wheel",(function(t){var i=t.originalEvent;if(hT(i,e)){i.preventDefault();var r=i.deltaY/5e3,o=n.get("start",0),a=n.get("end",1);o+r>0&&a+r<1&&(n.set("start",o+r),n.set("end",a+r))}}))),this._disposers.push(n.events.on("rangechanged",(function(){var t=e._contentHeight,i=e._childrenDisplay,r=e._contentMask;i.y=-n.get("start")*t,i.markDirtyLayer(),r&&(r._display.y=-i.y,i.mask=r._display)}))),this._display.addChild(n._display)}this.isDirty("background")&&((i=this._prevSettings.background)&&this._display.removeChild(i._display),(t=this.get("background"))instanceof pS&&(t.set("isMeasured",!1),t._setParent(this),this._display.addChildAt(t._display,0)));if(this.isDirty("mask")){var i,r=this.get("mask");if((i=this._prevSettings.mask)&&(this._display.removeChild(i._display),i!=r&&i.dispose()),r){var o=r.parent;o&&o.children.removeValue(r),r._setParent(this),this._display.addChildAt(r._display,0),this._childrenDisplay.mask=r._display}}}}),Object.defineProperty(t.prototype,"_processTemplateField",{enumerable:!1,configurable:!0,writable:!0,value:function(){e.prototype._processTemplateField.call(this),this.children.each((function(e){e._processTemplateField()}))}}),Object.defineProperty(t.prototype,"walkChildren",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.children.each((function(n){n instanceof t&&n.walkChildren(e),e(n)}))}}),Object.defineProperty(t.prototype,"eachChildren",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this.get("background");t&&e(t);var n=this.get("verticalScrollbar");n&&e(n);var i=this.get("mask");i&&e(i),this.children.values.forEach((function(t){e(t)}))}}),Object.defineProperty(t.prototype,"allChildren",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=[];return this.eachChildren((function(t){e.push(t)})),e}}),Object.defineProperty(t,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Container"}),Object.defineProperty(t,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:pS.classNames.concat([t.className])}),t}(pS),PS=function(){function e(){}return Object.defineProperty(e,"escape",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return e.replace(/\[\[/g,this.prefix+"1").replace(/([^\/\]]{1})\]\]/g,"$1"+this.prefix+"2").replace(/\]\]/g,this.prefix+"2").replace(/\{\{/g,this.prefix+"3").replace(/\}\}/g,this.prefix+"4").replace(/\'\'/g,this.prefix+"5")}}),Object.defineProperty(e,"unescape",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return e.replace(new RegExp(this.prefix+"1","g"),"[[").replace(new RegExp(this.prefix+"2","g"),"]]").replace(new RegExp(this.prefix+"3","g"),"{{").replace(new RegExp(this.prefix+"4","g"),"}}").replace(new RegExp(this.prefix+"5","g"),"''")}}),Object.defineProperty(e,"cleanUp",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return e.replace(/\[\[/g,"[").replace(/\]\]/g,"]").replace(/\{\{/g,"{").replace(/\}\}/g,"}").replace(/\'\'/g,"'")}}),Object.defineProperty(e,"chunk",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=!1);var i=[];e=this.escape(e);for(var r=t?e.split("'"):[e],o=0;o<r.length;o++){var a=r[o];if(""!==a)if(o%2==0)for(var s=(a=(a=a.replace(/\]\[/g,"]__§§§__[")).replace(/\[\]/g,"[ ]")).split(/[\[\]]+/),l=0;l<s.length;l++){(u=this.cleanUp(this.unescape(s[l])))!==Pk&&(""!==u&&(l%2==0?i.push({type:"value",text:u}):i.push({type:n?"value":"format",text:"["+u+"]"})))}else for(s=a.split(/[\[\]]+/),l=0;l<s.length;l++){var u;""!==(u=this.cleanUp(this.unescape(s[l])))&&(l%2==0?i.push({type:"text",text:u}):this.isImage(u)?i.push({type:"image",text:"["+u+"]"}):i.push({type:"format",text:"["+u+"]"}))}}return i}}),Object.defineProperty(e,"isImage",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return!!e.match(/img[ ]?:/)}}),Object.defineProperty(e,"getTextStyle",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t={};if(""==e||"[ ]"==e)return{};var n=e.match(/('[^']*')|("[^"]*")/gi);if(n)for(var i=0;i<n.length;i++)e=e.replace(n[i],n[i].replace(/['"]*/g,"").replace(/[ ]+/g,"+"));var r=e.match(/([\w\-]*:[\s]?[^;\s\]]*)|(\#[\w]{1,6})|([\w\-]+)|(\/)/gi);if(!r)return{};for(i=0;i<r.length;i++)if(r[i].match(/^(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)$/i))t.fontWeight=r[i];else if(r[i].match(/^(underline|line-through)$/i))t.textDecoration=r[i];else if("/"==r[i]);else if(r[i].match(/:/)){var o=r[i].replace("+"," ").split(/:[ ]*/);t[o[0]]=o[1]}else t.fill=MT.fromString(r[i]);return t}}),Object.defineProperty(e,"prefix",{enumerable:!0,configurable:!0,writable:!0,value:"__amcharts__"}),e}();function OS(e,t){if(null!=t){t=""+t;var n=(t=PS.escape(t)).match(/\{([^}]+)\}/g),i=void 0;if(n)for(i=0;i<n.length;i++){var r=kS(e,n[i].replace(/\{([^}]+)\}/,"$1"));null==r&&(r=""),t=t.split(n[i]).join(r)}t=PS.unescape(t)}else t="";return t}function kS(e,t,n){for(var i,r,o=e.dataItem,a=[],s=/([^.]+)\(([^)]*)\)|([^.]+)/g;null!==(r=s.exec(t));)if(r[3]){a.push({prop:r[3]});var l=e.getDateFormatter().get("dateFields",[]),u=e.getNumberFormatter().get("numericFields",[]),c=e.getDurationFormatter().get("durationFields",[]);-1!==l.indexOf(r[3])?a.push({method:"formatDate",params:[]}):-1!==u.indexOf(r[3])?a.push({method:"formatNumber",params:[]}):-1!==c.indexOf(r[3])&&a.push({method:"formatDuration",params:[]})}else{var h=[];if(""!=mT(r[2]))for(var d=/'([^']*)'|"([^"]*)"|([0-9\-]+)/g,f=void 0;null!==(f=d.exec(r[2]));)h.push(f[1]||f[2]||f[3]);a.push({method:r[1],params:h})}if(o){(null==(i=SS(e,a,o._settings))||xk(i))&&(i=SS(e,a,o));var p=o.dataContext;null==i&&p&&(null==(i=SS(e,a,p))&&(i=SS(e,[{prop:t}],p)),null==i&&p.dataContext&&(i=SS(e,a,p.dataContext))),null==i&&o.component&&o.component.dataItem!==o&&(i=kS(o.component,t))}return null==i&&(i=SS(e,a,e)),null==i&&e.parent&&(i=kS(e.parent,t)),i}function TS(e,t){var n=e.getPrivate("customData");if(xk(n))return n[t]}function SS(e,t,n,i){for(var r=n,o=!1,a=0,s=t.length;a<s;a++){var l=t[a];if(l.prop){if(r instanceof pS)null==(u=r.get(l.prop))&&(u=r.getPrivate(l.prop)),null==u&&(u=r[l.prop]),null==u&&(u=TS(r,l.prop)),r=u;else if(r.get){var u;null==(u=r.get(l.prop))&&(u=r[l.prop]),r=u}else r=r[l.prop];if(null==r)return}else switch(l.method){case"formatNumber":var c=mk(r);null!=c&&(r=e.getNumberFormatter().format(c,i||l.params[0]||void 0),o=!0);break;case"formatDate":var h=bk(r);if(!vk(h)||gk(h.getTime()))return;null!=h&&(r=e.getDateFormatter().format(h,i||l.params[0]||void 0),o=!0);break;case"formatDuration":var d=mk(r);null!=d&&(r=e.getDurationFormatter().format(d,i||l.params[0]||void 0,l.params[1]||void 0),o=!0);break;case"urlEncode":case"encodeURIComponent":r=encodeURIComponent(r);break;default:r[l.method]&&r[l.method].apply(n,l.params)}}if(!o){var f=[{method:"",params:i}];if(null==i)wk(r)?(f[0].method="formatNumber",f[0].params=""):vk(r)&&(f[0].method="formatDate",f[0].params="");else{var p=function(e){if(void 0===e)return"string";var t=(e=(e=(e=e.toLowerCase().replace(/^\[[^\]]*\]/,"")).replace(/\[[^\]]+\]/,"")).trim()).match(/\/(date|number|duration)$/);return t?t[1]:"number"===e?"number":"date"===e?"date":"duration"===e?"duration":e.match(/[#0]/)?"number":e.match(/[ymwdhnsqaxkzgtei]/)?"date":"string"}(i);"number"===p?f[0].method="formatNumber":"date"===p?f[0].method="formatDate":"duration"===p&&(f[0].method="formatDuration")}f[0].method&&(r=SS(e,f,r))}return r}var IS=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return Object.defineProperty(t,"textStyle",{enumerable:!0,configurable:!0,writable:!0,value:t._root._renderer.makeTextStyle()}),Object.defineProperty(t,"_display",{enumerable:!0,configurable:!0,writable:!0,value:t._root._renderer.makeText("",t.textStyle)}),Object.defineProperty(t,"_textStyles",{enumerable:!0,configurable:!0,writable:!0,value:["textAlign","fontFamily","fontSize","fontStyle","fontWeight","fontStyle","fontVariant","textDecoration","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","shadowOpacity","lineHeight","baselineRatio","direction","textBaseline","oversizedBehavior","breakWords","ellipsis","minScale"]}),Object.defineProperty(t,"_originalScale",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),t}return Hb(t,e),Object.defineProperty(t.prototype,"_updateBounds",{enumerable:!1,configurable:!0,writable:!0,value:function(){if(this.get("text"))e.prototype._updateBounds.call(this);else{this._adjustedLocalBounds={left:0,right:0,top:0,bottom:0}}}}),Object.defineProperty(t.prototype,"_changed",{enumerable:!1,configurable:!0,writable:!0,value:function(){var t=this;e.prototype._changed.call(this),this._display.clear();var n=this.textStyle;if(this.isDirty("opacity")){var i=this.get("opacity",1);this._display.alpha=i}if((this.isDirty("text")||this.isDirty("populateText"))&&(this._display.text=this._getText(),this.markDirtyBounds(),"tooltip"==this.get("role")&&this._root.updateTooltip(this)),this.isDirty("width")&&(n.wordWrapWidth=this.width(),this.markDirtyBounds()),this.isDirty("oversizedBehavior")&&(n.oversizedBehavior=this.get("oversizedBehavior","none"),this.markDirtyBounds()),this.isDirty("breakWords")&&(n.breakWords=this.get("breakWords",!1),this.markDirtyBounds()),this.isDirty("ellipsis")&&(n.ellipsis=this.get("ellipsis"),this.markDirtyBounds()),this.isDirty("ignoreFormatting")&&(n.ignoreFormatting=this.get("ignoreFormatting",!1),this.markDirtyBounds()),this.isDirty("minScale")&&(n.minScale=this.get("minScale",0),this.markDirtyBounds()),this.isDirty("fill")){var r=this.get("fill");r&&(n.fill=r)}(this.isDirty("maxWidth")||this.isPrivateDirty("maxWidth"))&&(n.maxWidth=this.get("maxWidth",this.getPrivate("maxWidth")),this.markDirtyBounds()),(this.isDirty("maxHeight")||this.isPrivateDirty("maxHeight"))&&(n.maxHeight=this.get("maxHeight",this.getPrivate("maxHeight")),this.markDirtyBounds()),Sk(this._textStyles,(function(e){t._dirty[e]&&(n[e]=t.get(e),t.markDirtyBounds())})),n.fontSize=this.get("fontSize"),n.fontFamily=this.get("fontFamily"),this._display.style=n,this.isDirty("role")&&"tooltip"==this.get("role")&&this._root.updateTooltip(this)}}),Object.defineProperty(t.prototype,"_getText",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this.get("text","");return this.get("populateText")?OS(this,e):e}}),Object.defineProperty(t.prototype,"markDirtyText",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._display.text=this._getText(),"tooltip"==this.get("role")&&this._root.updateTooltip(this),this.markDirtyBounds(),this.markDirty()}}),Object.defineProperty(t.prototype,"_setDataItem",{enumerable:!1,configurable:!0,writable:!0,value:function(t){e.prototype._setDataItem.call(this,t),this.get("populateText")&&this.markDirtyText()}}),Object.defineProperty(t,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Text"}),Object.defineProperty(t,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:pS.classNames.concat([t.className])}),t}(pS),ES=function(){function e(){var e=this;Object.defineProperty(this,"_observer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_targets",{enumerable:!0,configurable:!0,writable:!0,value:[]}),this._observer=new ResizeObserver((function(t){Sk(t,(function(t){Sk(e._targets,(function(e){e.target===t.target&&e.callback()}))}))}))}return Object.defineProperty(e.prototype,"addTarget",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){this._observer.observe(e,{box:"border-box"}),this._targets.push({target:e,callback:t})}}),Object.defineProperty(e.prototype,"removeTarget",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this._observer.unobserve(e),Fk(this._targets,(function(t){return t.target!==e}))}}),e}(),DS=function(){function e(){Object.defineProperty(this,"_timer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"_targets",{enumerable:!0,configurable:!0,writable:!0,value:[]})}return Object.defineProperty(e.prototype,"addTarget",{enumerable:!1,configurable:!0,writable:!0,value:function(t,n){var i=this;if(null===this._timer){var r=null,o=function(){var t=Date.now();(null===r||t>r+e.delay)&&(r=t,Sk(i._targets,(function(e){var t=e.target.getBoundingClientRect();t.width===e.size.width&&t.height===e.size.height||(e.size=t,e.callback())}))),0===i._targets.length?i._timer=null:i._timer=requestAnimationFrame(o)};this._timer=requestAnimationFrame(o)}this._targets.push({target:t,callback:n,size:{width:0,height:0,left:0,right:0,top:0,bottom:0,x:0,y:0}})}}),Object.defineProperty(e.prototype,"removeTarget",{enumerable:!1,configurable:!0,writable:!0,value:function(e){Fk(this._targets,(function(t){return t.target!==e})),0===this._targets.length&&null!==this._timer&&(cancelAnimationFrame(this._timer),this._timer=null)}}),Object.defineProperty(e,"delay",{enumerable:!0,configurable:!0,writable:!0,value:200}),e}(),jS=null;var CS=function(){function e(e,t){Object.defineProperty(this,"_sensor",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_element",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_disposed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),this._sensor=(null===jS&&(jS="undefined"!=typeof ResizeObserver?new ES:new DS),jS),this._element=e,this._sensor.addTarget(e,t)}return Object.defineProperty(e.prototype,"isDisposed",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._disposed}}),Object.defineProperty(e.prototype,"dispose",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._disposed||(this._disposed=!0,this._sensor.removeTarget(this._element))}}),Object.defineProperty(e.prototype,"sensor",{get:function(){return this._sensor},enumerable:!1,configurable:!0}),e}(),AS=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Hb(t,e),Object.defineProperty(t,"className",{enumerable:!0,configurable:!0,writable:!0,value:"InterfaceColors"}),Object.defineProperty(t,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:lS.classNames.concat([t.className])}),t}(lS),MS=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return Object.defineProperty(t,"_text",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(t,"_textKeys",{enumerable:!0,configurable:!0,writable:!0,value:["text","fill","textAlign","fontFamily","fontSize","fontStyle","fontWeight","fontStyle","fontVariant","textDecoration","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","shadowOpacity","lineHeight","baselineRatio","direction","textBaseline","oversizedBehavior","breakWords","ellipsis","minScale","populateText","role","ignoreFormatting"]}),t}return Hb(t,e),Object.defineProperty(t.prototype,"text",{get:function(){return this._text},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_afterNew",{enumerable:!1,configurable:!0,writable:!0,value:function(){var t=this;e.prototype._afterNew.call(this),this._makeText(),Sk(this._textKeys,(function(e){var n=t.get(e);null!=n&&t._text.set(e,n)}))}}),Object.defineProperty(t.prototype,"_makeText",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._text=this.children.push(IS.new(this._root,{}))}}),Object.defineProperty(t.prototype,"_updateChildren",{enumerable:!1,configurable:!0,writable:!0,value:function(){var t=this;if(e.prototype._updateChildren.call(this),Sk(this._textKeys,(function(e){t._text.set(e,t.get(e))})),(this.isDirty("maxWidth")||this.isPrivateDirty("maxWidth"))&&this._setMaxDimentions(),(this.isDirty("maxHeight")||this.isPrivateDirty("maxHeight"))&&this._setMaxDimentions(),this.isDirty("rotation")&&this._setMaxDimentions(),this.isDirty("textAlign")||this.isDirty("width")){var n=this.get("textAlign"),i=void 0;null!=this.get("width")?i="right"==n?Zk:"center"==n?eT:0:"left"==n||"start"==n?i=this.get("paddingLeft"):"right"!=n&&"end"!=n||(i=-this.get("paddingRight")),this.text.set("x",i)}}}),Object.defineProperty(t.prototype,"_setMaxDimentions",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this.get("rotation"),t=90==e||270==e,n=this.get("maxWidth",this.getPrivate("maxWidth",1/0));wk(n)?this.text.set(t?"maxHeight":"maxWidth",n-this.get("paddingLeft",0)-this.get("paddingRight",0)):this.text.set(t?"maxHeight":"maxWidth",void 0);var i=this.get("maxHeight",this.getPrivate("maxHeight",1/0));wk(i)?this.text.set(t?"maxWidth":"maxHeight",i-this.get("paddingTop",0)-this.get("paddingBottom",0)):this.text.set(t?"maxWidth":"maxHeight",void 0)}}),Object.defineProperty(t.prototype,"_setDataItem",{enumerable:!1,configurable:!0,writable:!0,value:function(t){e.prototype._setDataItem.call(this,t),this._markDirtyKey("text"),this.text.get("populateText")&&this.text.markDirtyText()}}),Object.defineProperty(t.prototype,"getText",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._text._getText()}}),Object.defineProperty(t,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Label"}),Object.defineProperty(t,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:xS.classNames.concat([t.className])}),t}(xS),RS=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Hb(t,e),Object.defineProperty(t.prototype,"_beforeChanged",{enumerable:!1,configurable:!0,writable:!0,value:function(){e.prototype._beforeChanged.call(this),(this.isDirty("pointerBaseWidth")||this.isDirty("cornerRadius")||this.isDirty("pointerLength")||this.isDirty("pointerX")||this.isDirty("pointerY")||this.isDirty("width")||this.isDirty("height"))&&(this._clear=!0)}}),Object.defineProperty(t.prototype,"_changed",{enumerable:!1,configurable:!0,writable:!0,value:function(){if(e.prototype._changed.call(this),this._clear){this.markDirtyBounds();var t=this.width(),n=this.height();if(t>0&&n>0){var i=this.get("cornerRadius",8);i=$T(i,0,Math.min(t/2,n/2));var r=this.get("pointerX",0),o=this.get("pointerY",0),a=this.get("pointerBaseWidth",15)/2,s=(r-0)*(n-0)-(o-0)*(t-0),l=(r-0)*(0-n)-(o-n)*(t-0),u=this._display;if(u.moveTo(i,0),s>0&&l>0){var c=Math.round($T(r,i+a,t-a-i));o=$T(o,-1/0,0),u.lineTo(c-a,0),u.lineTo(r,o),u.lineTo(c+a,0)}if(u.lineTo(t-i,0),u.arcTo(t,0,t,i,i),s>0&&l<0){var h=Math.round($T(o,i+a,n-a-i));r=$T(r,t,1/0),u.lineTo(t,i),u.lineTo(t,h-a),u.lineTo(r,o),u.lineTo(t,h+a)}if(u.lineTo(t,n-i),u.arcTo(t,n,t-i,n,i),s<0&&l<0){c=Math.round($T(r,i+a,t-a-i));o=$T(o,n,1/0),u.lineTo(t-i,n),u.lineTo(c+a,n),u.lineTo(r,o),u.lineTo(c-a,n)}if(u.lineTo(i,n),u.arcTo(0,n,0,n-i,i),s<0&&l>0){h=Math.round($T(o,i+a,n-i-a));r=$T(r,-1/0,0),u.lineTo(0,n-i),u.lineTo(0,h+a),u.lineTo(r,o),u.lineTo(0,h-a)}u.lineTo(0,i),u.arcTo(0,0,i,0,i)}}}}),Object.defineProperty(t,"className",{enumerable:!0,configurable:!0,writable:!0,value:"PointedRectangle"}),Object.defineProperty(t,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:gS.classNames.concat([t.className])}),t}(gS),NS=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return Object.defineProperty(t,"_arrangeDisposer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(t,"_fx",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(t,"_fy",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(t,"_label",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(t,"_fillDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(t,"_strokeDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(t,"_labelDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(t,"_w",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(t,"_h",{enumerable:!0,configurable:!0,writable:!0,value:0}),t}return Hb(t,e),Object.defineProperty(t.prototype,"_afterNew",{enumerable:!1,configurable:!0,writable:!0,value:function(){var t=this;this._settings.themeTags=DT(this._settings.themeTags,["tooltip"]),e.prototype._afterNew.call(this),this.set("background",RS.new(this._root,{themeTags:["tooltip","background"]})),this._label=this.children.push(MS.new(this._root,{})),this._disposers.push(this._label.events.on("boundschanged",(function(){t._updateBackground()}))),this.on("bounds",(function(){t._updateBackground()})),this._updateTextColor(),this._root.tooltipContainer.children.push(this),this.hide(0),this._root._tooltips.push(this)}}),Object.defineProperty(t.prototype,"label",{get:function(){return this._label},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dispose",{enumerable:!1,configurable:!0,writable:!0,value:function(){e.prototype.dispose.call(this),Dk(this._root._tooltips,this)}}),Object.defineProperty(t.prototype,"_updateChildren",{enumerable:!1,configurable:!0,writable:!0,value:function(){e.prototype._updateChildren.call(this),null!=this.get("labelText")&&this.label.set("text",this.get("labelText"))}}),Object.defineProperty(t.prototype,"_changed",{enumerable:!1,configurable:!0,writable:!0,value:function(){e.prototype._changed.call(this),this.isDirty("pointTo")&&this._updateBackground(),this.isDirty("tooltipTarget")&&this.updateBackgroundColor()}}),Object.defineProperty(t.prototype,"_onShow",{enumerable:!1,configurable:!0,writable:!0,value:function(){e.prototype._onShow.call(this),this.updateBackgroundColor()}}),Object.defineProperty(t.prototype,"updateBackgroundColor",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e,t,n=this,i=this.get("tooltipTarget"),r=this.get("background");i&&r&&(e=i.get("fill"),t=i.get("stroke"),null==e&&(e=t),this.get("getFillFromSprite")&&(this._fillDp&&this._fillDp.dispose(),null!=e&&r.set("fill",e),this._fillDp=i.on("fill",(function(e){null!=e&&(r.set("fill",e),n._updateTextColor(e))}))),this.get("getStrokeFromSprite")&&(this._strokeDp&&this._strokeDp.dispose(),null!=e&&r.set("stroke",e),this._strokeDp=i.on("fill",(function(e){null!=e&&r.set("stroke",e)}))),this.get("getLabelFillFromSprite")&&(this._labelDp&&this._labelDp.dispose(),null!=e&&this.label.set("fill",e),this._labelDp=i.on("fill",(function(e){null!=e&&n.label.set("fill",e)})))),this._updateTextColor(e)}}),Object.defineProperty(t.prototype,"_updateTextColor",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.get("autoTextColor")&&(null==e&&(e=this.get("background").get("fill")),null==e&&(e=this._root.interfaceColors.get("background")),e instanceof MT&&this.label.set("fill",MT.alternative(e,this._root.interfaceColors.get("alternativeText"),this._root.interfaceColors.get("text"))))}}),Object.defineProperty(t.prototype,"_setDataItem",{enumerable:!1,configurable:!0,writable:!0,value:function(t){e.prototype._setDataItem.call(this,t),this.label._setDataItem(t)}}),Object.defineProperty(t.prototype,"_updateBackground",{enumerable:!1,configurable:!0,writable:!0,value:function(){e.prototype.updateBackground.call(this);var t=this._root.container;if(t){var n=.5,i=.5,r=this.get("centerX");r instanceof Kk&&(n=r.value);var o=this.get("centerY");o instanceof Kk&&(i=o.value);var a=t.width(),s=t.height(),l=this.get("bounds",{left:0,top:0,right:a,bottom:s});this._updateBounds();var u=this.width(),c=this.height();0===u&&(u=this._w),0===c&&(c=this._h);var h=this.get("pointTo",{x:a/2,y:s/2}),d=h.x,f=h.y,p=this.get("pointerOrientation"),g=this.get("background"),m=0,b=0,y=0;g instanceof RS&&(m=g.get("pointerLength",0),y=b=g.get("strokeWidth",0)/2);var v,_,w=l.right-l.left,x=l.bottom-l.top;"horizontal"==p||"left"==p||"right"==p?(b=0,"horizontal"==p?d>l.left+w/2?(d-=u*(1-n)+m,y*=-1):d+=u*n+m:"left"==p?d+=u*(1-n)+m:(d-=u*n+m,y*=-1)):(y=0,"vertical"==p?f>l.top+c/2+m?f-=c*(1-i)+m:(f+=c*i+m,b*=-1):"down"==p?f-=c*(1-i)+m:(f+=c*i+m,b*=-1)),d=$T(d,l.left+u*n,l.left+w-u*(1-n))+y,f=$T(f,l.top+c*i,l.top+x-c*(1-i))-b,v=h.x-d+u*n+y,_=h.y-f+c*i-b,this._fx=d,this._fy=f;var P=this.get("animationDuration",0);if(P>0&&this.get("visible")&&this.get("opacity")>.1){var O=this.get("animationEasing");this.animate({key:"x",to:d,duration:P,easing:O}),this.animate({key:"y",to:f,duration:P,easing:O})}else this.set("x",d),this.set("y",f);g instanceof RS&&(g.set("pointerX",v),g.set("pointerY",_)),u>0&&(this._w=u),c>0&&(this._h=c)}}}),Object.defineProperty(t,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Tooltip"}),Object.defineProperty(t,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:xS.classNames.concat([t.className])}),t}(xS),LS=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Hb(t,e),Object.defineProperty(t.prototype,"_setDefaults",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._setDefault("negativeBase",0),this._setDefault("numberFormat","#,###.#####"),this._setDefault("smallNumberThreshold",1);var t="_big_number_suffix_",n="_small_number_suffix_",i="_byte_suffix_";this._setDefault("bigNumberPrefixes",[{number:1e3,suffix:this._t(t+"3")},{number:1e6,suffix:this._t(t+"6")},{number:1e9,suffix:this._t(t+"9")},{number:1e12,suffix:this._t(t+"12")},{number:1e15,suffix:this._t(t+"15")},{number:1e18,suffix:this._t(t+"18")},{number:1e21,suffix:this._t(t+"21")},{number:1e24,suffix:this._t(t+"24")}]),this._setDefault("smallNumberPrefixes",[{number:1e-24,suffix:this._t(n+"24")},{number:1e-21,suffix:this._t(n+"21")},{number:1e-18,suffix:this._t(n+"18")},{number:1e-15,suffix:this._t(n+"15")},{number:1e-12,suffix:this._t(n+"12")},{number:1e-9,suffix:this._t(n+"9")},{number:1e-6,suffix:this._t(n+"6")},{number:.001,suffix:this._t(n+"3")}]),this._setDefault("bytePrefixes",[{number:1,suffix:this._t(i+"B")},{number:1024,suffix:this._t(i+"KB")},{number:1048576,suffix:this._t(i+"MB")},{number:1073741824,suffix:this._t(i+"GB")},{number:1099511627776,suffix:this._t(i+"TB")},{number:0x4000000000000,suffix:this._t(i+"PB")}]),e.prototype._setDefaults.call(this)}}),Object.defineProperty(t.prototype,"_beforeChanged",{enumerable:!1,configurable:!0,writable:!0,value:function(){e.prototype._beforeChanged.call(this)}}),Object.defineProperty(t.prototype,"format",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n){var i;(null==t||_k(t)&&"number"===t.toLowerCase())&&(t=this.get("numberFormat",""));var r=Number(e);if(xk(t))try{return this.get("intlLocales")?new Intl.NumberFormat(this.get("intlLocales"),t).format(r):new Intl.NumberFormat(void 0,t).format(r)}catch(e){return"Invalid"}else{t=bT(t);var o=this.parseFormat(t,this._root.language),a=void 0;a=r>this.get("negativeBase")?o.positive:r<this.get("negativeBase")?o.negative:o.zero,null==n||a.mod||((a=nT(a)).decimals.active=0==r?0:n),i=a.template.split(Pk).join(this.applyFormat(r,a))}return i}}),Object.defineProperty(t.prototype,"parseFormat",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var n=this,i=t.translateEmpty("_thousandSeparator"),r=t.translateEmpty("_decimalSeparator"),o={positive:{thousands:{active:-1,passive:-1,interval:-1,separator:i},decimals:{active:-1,passive:-1,separator:r},template:"",source:"",parsed:!1},negative:{thousands:{active:-1,passive:-1,interval:-1,separator:i},decimals:{active:-1,passive:-1,separator:r},template:"",source:"",parsed:!1},zero:{thousands:{active:-1,passive:-1,interval:-1,separator:i},decimals:{active:-1,passive:-1,separator:r},template:"",source:"",parsed:!1}},a=(e=e.replace("||",Ok)).split("|");return o.positive.source=a[0],void 0===a[2]?o.zero=o.positive:o.zero.source=a[2],void 0===a[1]?o.negative=o.positive:o.negative.source=a[1],iT(o,(function(e,t){if(!t.parsed){var i=t.source;"number"===i.toLowerCase()&&(i=n.get("numberFormat","#,###.#####"));for(var r=PS.chunk(i,!0),o=0;o<r.length;o++){var a=r[o];if(a.text=a.text.replace(Ok,"|"),"value"===a.type){var s=a.text.match(/[#0.,]+[ ]?[abesABES%!]?[abesABES‰!]?/);if(s)if(null===s||""===s[0])t.template+=a.text;else{var l=s[0].match(/[abesABES%‰!]{2}|[abesABES%‰]{1}$/);l&&(t.mod=l[0].toLowerCase(),t.modSpacing=!!s[0].match(/[ ]{1}[abesABES%‰!]{1}$/));var u=s[0].split(".");if(""===u[0]);else{t.thousands.active=(u[0].match(/0/g)||[]).length,t.thousands.passive=(u[0].match(/\#/g)||[]).length+t.thousands.active;var c=u[0].split(",");1===c.length||(t.thousands.interval=(c.pop()||"").length,0===t.thousands.interval&&(t.thousands.interval=-1))}void 0===u[1]||(t.decimals.active=(u[1].match(/0/g)||[]).length,t.decimals.passive=(u[1].match(/\#/g)||[]).length+t.decimals.active),t.template+=a.text.split(s[0]).join(Pk)}}else t.template+=a.text}t.parsed=!0}})),o}}),Object.defineProperty(t.prototype,"applyFormat",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var n=e<0;e=Math.abs(e);var i="",r="",o=t.mod?t.mod.split(""):[];if(-1!==o.indexOf("b")){var a=this.applyPrefix(e,this.get("bytePrefixes"),-1!==o.indexOf("!"));e=a[0],i=a[1],r=a[2],t.modSpacing&&(r=" "+r)}else if(-1!==o.indexOf("a")){var s=this.applyPrefix(e,e<this.get("smallNumberThreshold")?this.get("smallNumberPrefixes"):this.get("bigNumberPrefixes"),-1!==o.indexOf("!"));e=s[0],i=s[1],r=s[2],t.modSpacing&&(r=" "+r)}else if(-1!==o.indexOf("%")){var l=Math.min(e.toString().length+2,21);e*=100,e=parseFloat(e.toPrecision(l)),r="%"}else if(-1!==o.indexOf("‰")){l=Math.min(e.toString().length+3,21);e*=1e3,e=parseFloat(e.toPrecision(l)),r="‰"}if(-1!==o.indexOf("e")){var u=void 0;u=t.decimals.passive>=0?e.toExponential(t.decimals.passive).split("e"):e.toExponential().split("e"),e=Number(u[0]),r="e"+u[1],t.modSpacing&&(r=" "+r)}else if(0===t.decimals.passive)e=Math.round(e);else if(t.decimals.passive>0){var c=Math.pow(10,t.decimals.passive);e=Math.round(e*c)/c}var h="",d=function(e){if(gk(e))return"NaN";if(e===1/0)return"Infinity";if(e===-1/0)return"-Infinity";if(0===e&&1/e==-1/0)return"-0";var t=e<0;e=Math.abs(e);var n,i=/^([0-9]+)(?:\.([0-9]+))?(?:e[\+\-]([0-9]+))?$/.exec(""+e),r=i[1],o=i[2]||"";if(void 0===i[3])n=""===o?r:r+"."+o;else{var a,s=+i[3];n=e<1?"0."+yk("0",a=s-1)+r+o:0==(a=s-o.length)?r+o:a<0?r+o.slice(0,a)+"."+o.slice(a):r+o+yk("0",a)}return t?"-"+n:n}(e).split("."),f=d[0];if(f.length<t.thousands.active&&(f=Array(t.thousands.active-f.length+1).join("0")+f),t.thousands.interval>0){for(var p=[],g=f.split("").reverse().join(""),m=0,b=f.length;m<=b;m+=t.thousands.interval){var y=g.substr(m,t.thousands.interval).split("").reverse().join("");""!==y&&p.unshift(y)}f=p.join(t.thousands.separator)}h+=f,1===d.length&&d.push("");var v=d[1];return v.length<t.decimals.active&&(v+=Array(t.decimals.active-v.length+1).join("0")),""!==v&&(h+=t.decimals.separator+v),""===h&&(h="0"),0!==e&&n&&-1===o.indexOf("s")&&(h="-"+h),i&&(h=i+h),r&&(h+=r),h}}),Object.defineProperty(t.prototype,"applyPrefix",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n){void 0===n&&(n=!1);for(var i=e,r="",o="",a=!1,s=1,l=0,u=t.length;l<u;l++)t[l].number<=e&&(0===t[l].number?i=0:(i=e/t[l].number,s=t[l].number),r=t[l].prefix,o=t[l].suffix,a=!0);return!a&&n&&t.length&&0!=e&&(i=e/t[0].number,r=t[0].prefix,o=t[0].suffix,a=!0),a&&(i=parseFloat(i.toPrecision(Math.min(s.toString().length+Math.floor(i).toString().replace(/[^0-9]*/g,"").length,21)))),[i,r,o]}}),Object.defineProperty(t.prototype,"escape",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return e.replace("||",Ok)}}),Object.defineProperty(t.prototype,"unescape",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return e.replace(Ok,"|")}}),t}(lS),FS=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Hb(t,e),Object.defineProperty(t.prototype,"_setDefaults",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._setDefault("capitalize",!0),this._setDefault("dateFormat","yyyy-MM-dd"),e.prototype._setDefaults.call(this)}}),Object.defineProperty(t.prototype,"_beforeChanged",{enumerable:!1,configurable:!0,writable:!0,value:function(){e.prototype._beforeChanged.call(this)}}),Object.defineProperty(t.prototype,"format",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var n;void 0!==t&&""!==t||(t=this.get("dateFormat","yyyy-MM-dd"));var i=e;if(xk(t))try{var r=this.get("intlLocales");return r?new Intl.DateTimeFormat(r,t).format(i):new Intl.DateTimeFormat(void 0,t).format(i)}catch(e){return"Invalid"}var o=this.parseFormat(t),a=this._root.timezone;return a&&!this._root.utc&&(i=a.convertLocal(i)),wk(i.getTime())?(n=this.applyFormat(i,o),this.get("capitalize")&&(n=n.replace(/^.{1}/,n.substr(0,1).toUpperCase())),n):"Invalid date"}}),Object.defineProperty(t.prototype,"applyFormat",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var n,i,r,o,a,s,l,u,c=t.template,h=e.getTimezoneOffset(),d=e.getTime();this._root.utc?(n=e.getUTCFullYear(),i=e.getUTCMonth(),r=e.getUTCDay(),o=e.getUTCDate(),a=e.getUTCHours(),s=e.getUTCMinutes(),l=e.getUTCSeconds(),u=e.getUTCMilliseconds()):(n=e.getFullYear(),i=e.getMonth(),r=e.getDay(),o=e.getDate(),a=e.getHours(),s=e.getMinutes(),l=e.getSeconds(),u=e.getMilliseconds());for(var f=0,p=t.parts.length;f<p;f++){var g="";switch(t.parts[f]){case"G":g=this._t(n<0?"_era_bc":"_era_ad");break;case"yyyy":g=Math.abs(n).toString(),n<0&&(g+=this._t("_era_bc"));break;case"yyy":case"yy":case"y":g=Math.abs(n).toString().substr(-t.parts[f].length),n<0&&(g+=this._t("_era_bc"));break;case"YYYY":case"YYY":case"YY":case"Y":var m=n;1==wT(e)&&r>4&&m--,g="YYYY"==t.parts[f]?Math.abs(m).toString():Math.abs(m).toString().substr(-t.parts[f].length),m<0&&(g+=this._t("_era_bc"));break;case"u":case"F":case"g":break;case"q":g=""+Math.ceil((e.getMonth()+1)/3);break;case"MMMMM":g=this._t(this._getMonth(i)).substr(0,1);break;case"MMMM":g=this._t(this._getMonth(i));break;case"MMM":g=this._t(this._getShortMonth(i));break;case"MM":g=gT(i+1,2,"0");break;case"M":g=(i+1).toString();break;case"ww":g=gT(wT(e,this._root.utc),2,"0");break;case"w":g=wT(e,this._root.utc).toString();break;case"W":g=xT(e,this._root.utc).toString();break;case"dd":g=gT(o,2,"0");break;case"d":g=o.toString();break;case"DD":case"DDD":g=gT(_T(e,this._root.utc).toString(),t.parts[f].length,"0");break;case"D":g=_T(e,this._root.utc).toString();break;case"t":g=this._root.language.translateFunc("_dateOrd").call(this,o);break;case"E":g=(r||7).toString();break;case"EE":g=gT((r||7).toString(),2,"0");break;case"EEE":case"eee":case"EEEE":case"eeee":g=this._t(this._getShortWeekday(r));break;case"EEEEE":case"eeeee":g=this._t(this._getShortWeekday(r)).substr(0,1);break;case"e":case"ee":g=(r-(this._root.locale.firstDayOfWeek||1)+1).toString(),"ee"==t.parts[f]&&(g=gT(g,2,"0"));break;case"a":g=a>=12?this._t("PM"):this._t("AM");break;case"aa":g=a>=12?this._t("P.M."):this._t("A.M.");break;case"aaa":g=a>=12?this._t("P"):this._t("A");break;case"h":g=PT(a).toString();break;case"hh":g=gT(PT(a),2,"0");break;case"H":g=a.toString();break;case"HH":g=gT(a,2,"0");break;case"K":g=PT(a,0).toString();break;case"KK":g=gT(PT(a,0),2,"0");break;case"k":g=(a+1).toString();break;case"kk":g=gT(a+1,2,"0");break;case"m":g=s.toString();break;case"mm":g=gT(s,2,"0");break;case"s":g=l.toString();break;case"ss":g=gT(l,2,"0");break;case"S":case"SS":case"SSS":g=Math.round(u/1e3*Math.pow(10,t.parts[f].length)).toString();break;case"x":g=d.toString();break;case"n":case"nn":case"nnn":g=gT(u,t.parts[f].length,"0");break;case"z":g=OT(e,!1,!1,this._root.utc);break;case"zz":g=OT(e,!0,!1,this._root.utc);break;case"zzz":g=OT(e,!1,!0,this._root.utc);break;case"zzzz":g=OT(e,!0,!0,this._root.utc);break;case"Z":case"ZZ":var b=Math.abs(h)/60,y=Math.floor(b),v=60*b-60*y;this._root.utc&&(y=0,v=0),"Z"==t.parts[f]?(g="GMT",g+=h>0?"-":"+",g+=gT(y,2)+":"+gT(v,2)):(g=h>0?"-":"+",g+=gT(y,2)+gT(v,2));break;case"i":g=e.toISOString();break;case"I":g=e.toUTCString()}c=c.replace(Pk,g)}return c}}),Object.defineProperty(t.prototype,"parseFormat",{enumerable:!1,configurable:!0,writable:!0,value:function(e){for(var t={template:"",parts:[]},n=PS.chunk(e,!0),i=0;i<n.length;i++){var r=n[i];if("value"===r.type){if(r.text.match(/^date$/i)){var o=this.get("dateFormat","yyyy-MM-dd");_k(o)||(o="yyyy-MM-dd"),r.text=o}var a=r.text.match(/G|yyyy|yyy|yy|y|YYYY|YYY|YY|Y|u|q|MMMMM|MMMM|MMM|MM|M|ww|w|W|dd|d|DDD|DD|D|F|g|EEEEE|EEEE|EEE|EE|E|eeeee|eeee|eee|ee|e|aaa|aa|a|hh|h|HH|H|KK|K|kk|k|mm|m|ss|s|SSS|SS|S|A|zzzz|zzz|zz|z|ZZ|Z|t|x|nnn|nn|n|i|I/g);if(a)for(var s=0;s<a.length;s++)t.parts.push(a[s]),r.text=r.text.replace(a[s],Pk)}t.template+=r.text}return t}}),Object.defineProperty(t.prototype,"_months",{enumerable:!1,configurable:!0,writable:!0,value:function(){return["January","February","March","April","May","June","July","August","September","October","November","December"]}}),Object.defineProperty(t.prototype,"_getMonth",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this._months()[e]}}),Object.defineProperty(t.prototype,"_shortMonths",{enumerable:!1,configurable:!0,writable:!0,value:function(){return["Jan","Feb","Mar","Apr","May(short)","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}}),Object.defineProperty(t.prototype,"_getShortMonth",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this._shortMonths()[e]}}),Object.defineProperty(t.prototype,"_weekdays",{enumerable:!1,configurable:!0,writable:!0,value:function(){return["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]}}),Object.defineProperty(t.prototype,"_getWeekday",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this._weekdays()[e]}}),Object.defineProperty(t.prototype,"_shortWeekdays",{enumerable:!1,configurable:!0,writable:!0,value:function(){return["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]}}),Object.defineProperty(t.prototype,"_getShortWeekday",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this._shortWeekdays()[e]}}),Object.defineProperty(t.prototype,"parse",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){if(e instanceof Date)return e;if(wk(e))return new Date(e);var n;_k(e)||(e=e.toString());var i="";t=(t=bT(t)).substr(0,e.length);for(var r=this.parseFormat(t),o={year:-1,year3:-1,year2:-1,year1:-1,month:-1,monthShort:-1,monthLong:-1,weekdayShort:-1,weekdayLong:-1,day:-1,yearDay:-1,week:-1,hourBase0:-1,hour12Base0:-1,hourBase1:-1,hour12Base1:-1,minute:-1,second:-1,millisecond:-1,millisecondDigits:-1,am:-1,zone:-1,timestamp:-1,iso:-1},a={year:1970,month:0,day:1,hour:0,minute:0,second:0,millisecond:0,timestamp:null,offset:0,utc:this._root.utc},s=0,l=0,u=0;u<r.parts.length;u++){switch(l=u+s+1,r.parts[u]){case"yyyy":case"YYYY":i+="([0-9]{4})",o.year=l;break;case"yyy":case"YYY":i+="([0-9]{3})",o.year3=l;break;case"yy":case"YY":i+="([0-9]{2})",o.year2=l;break;case"y":case"Y":i+="([0-9]{1})",o.year1=l;break;case"MMMM":i+="("+this.getStringList(this._months()).join("|")+")",o.monthLong=l;break;case"MMM":i+="("+this.getStringList(this._shortMonths()).join("|")+")",o.monthShort=l;break;case"MM":case"M":i+="([0-9]{2}|[0-9]{1})",o.month=l;break;case"ww":case"w":i+="([0-9]{2}|[0-9]{1})",o.week=l;break;case"dd":case"d":i+="([0-9]{2}|[0-9]{1})",o.day=l;break;case"DDD":case"DD":case"D":i+="([0-9]{3}|[0-9]{2}|[0-9]{1})",o.yearDay=l;break;case"dddd":i+="("+this.getStringList(this._weekdays()).join("|")+")",o.weekdayLong=l;break;case"ddd":i+="("+this.getStringList(this._shortWeekdays()).join("|")+")",o.weekdayShort=l;break;case"aaa":case"aa":case"a":i+="("+this.getStringList(["AM","PM","A.M.","P.M.","A","P"]).join("|")+")",o.am=l;break;case"hh":case"h":i+="([0-9]{2}|[0-9]{1})",o.hour12Base1=l;break;case"HH":case"H":i+="([0-9]{2}|[0-9]{1})",o.hourBase0=l;break;case"KK":case"K":i+="([0-9]{2}|[0-9]{1})",o.hour12Base0=l;break;case"kk":case"k":i+="([0-9]{2}|[0-9]{1})",o.hourBase1=l;break;case"mm":case"m":i+="([0-9]{2}|[0-9]{1})",o.minute=l;break;case"ss":case"s":i+="([0-9]{2}|[0-9]{1})",o.second=l;break;case"SSS":case"SS":case"S":i+="([0-9]{3}|[0-9]{2}|[0-9]{1})",o.millisecond=l,o.millisecondDigits=r.parts[u].length;break;case"nnn":case"nn":case"n":i+="([0-9]{3}|[0-9]{2}|[0-9]{1})",o.millisecond=l;break;case"x":i+="([0-9]{1,})",o.timestamp=l;break;case"Z":i+="GMT([-+]+[0-9]{2}:[0-9]{2})",o.zone=l;break;case"ZZ":i+="([\\-+]+[0-9]{2}[0-9]{2})",o.zone=l;break;case"i":i+="([0-9]{4})-?([0-9]{2})-?([0-9]{2})T?([0-9]{2}):?([0-9]{2}):?([0-9]{2})\\.?([0-9]{0,3})([zZ]|[+\\-][0-9]{2}:?[0-9]{2}|$)",o.iso=l,s+=7;break;case"G":case"YYYY":case"YYY":case"YY":case"Y":case"MMMMM":case"W":case"EEEEE":case"EEEE":case"EEE":case"EE":case"E":case"eeeee":case"eeee":case"eee":case"ee":case"e":case"zzzz":case"zzz":case"zz":case"z":case"t":s--}i+="[^0-9]*"}var c=new RegExp(i),h=e.match(c);if(h){if(o.year>-1&&(a.year=parseInt(h[o.year])),o.year3>-1){var d=parseInt(h[o.year3]);d+=1e3,a.year=d}if(o.year2>-1){d=parseInt(h[o.year2]);d+=d>50?1e3:2e3,a.year=d}if(o.year1>-1){d=parseInt(h[o.year1]);d=10*Math.floor((new Date).getFullYear()/10)+d,a.year=d}if(o.monthLong>-1&&(a.month=this.resolveMonth(h[o.monthLong])),o.monthShort>-1&&(a.month=this.resolveShortMonth(h[o.monthShort])),o.month>-1&&(a.month=parseInt(h[o.month])-1),o.week>-1&&-1===o.day&&(a.month=0,a.day=function(e,t,n,i){void 0===n&&(n=1),void 0===i&&(i=!1);var r=new Date(t,0,4,0,0,0,0);return i&&r.setUTCFullYear(t),7*e+n-((r.getDay()||7)+3)}(parseInt(h[o.week]),a.year,1,this._root.utc)),o.day>-1&&(a.day=parseInt(h[o.day])),o.yearDay>-1&&(a.month=0,a.day=parseInt(h[o.yearDay])),o.hourBase0>-1&&(a.hour=parseInt(h[o.hourBase0])),o.hourBase1>-1&&(a.hour=parseInt(h[o.hourBase1])-1),o.hour12Base0>-1)11==(d=parseInt(h[o.hour12Base0]))&&(d=0),o.am>-1&&!this.isAm(h[o.am])&&(d+=12),a.hour=d;if(o.hour12Base1>-1)12==(d=parseInt(h[o.hour12Base1]))&&(d=0),o.am>-1&&!this.isAm(h[o.am])&&(d+=12),a.hour=d;if(o.minute>-1&&(a.minute=parseInt(h[o.minute])),o.second>-1&&(a.second=parseInt(h[o.second])),o.millisecond>-1){d=parseInt(h[o.millisecond]);2==o.millisecondDigits?d*=10:1==o.millisecondDigits&&(d*=100),a.millisecond=d}if(o.timestamp>-1){a.timestamp=parseInt(h[o.timestamp]);var f=new Date(a.timestamp);a.year=f.getUTCFullYear(),a.month=f.getUTCMonth(),a.day=f.getUTCDate(),a.hour=f.getUTCHours(),a.minute=f.getUTCMinutes(),a.second=f.getUTCSeconds(),a.millisecond=f.getUTCMilliseconds()}o.zone>-1&&(a.offset=this.resolveTimezoneOffset(new Date(a.year,a.month,a.day),h[o.zone])),o.iso>-1&&(a.year=mk(h[o.iso+0]),a.month=mk(h[o.iso+1])-1,a.day=mk(h[o.iso+2]),a.hour=mk(h[o.iso+3]),a.minute=mk(h[o.iso+4]),a.second=mk(h[o.iso+5]),a.millisecond=mk(h[o.iso+6]),"Z"==h[o.iso+7]||"z"==h[o.iso+7]?a.utc=!0:""!=h[o.iso+7]&&(a.offset=this.resolveTimezoneOffset(new Date(a.year,a.month,a.day),h[o.iso+7]))),n=a.utc?new Date(Date.UTC(a.year,a.month,a.day,a.hour,a.minute,a.second,a.millisecond)):new Date(a.year,a.month,a.day,a.hour,a.minute+a.offset,a.second,a.millisecond)}else n=new Date(e);return n}}),Object.defineProperty(t.prototype,"resolveTimezoneOffset",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){if(t.match(/([+\-]?)([0-9]{2}):?([0-9]{2})/)){var n=t.match(/([+\-]?)([0-9]{2}):?([0-9]{2})/),i=n[1],r=n[2],o=n[3],a=60*parseInt(r)+parseInt(o);return"+"==i&&(a*=-1),a-(e||new Date).getTimezoneOffset()}return 0}}),Object.defineProperty(t.prototype,"resolveMonth",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this._months().indexOf(e);return t>-1||!this._root.language.isDefault()&&(t=this._root.language.translateAll(this._months()).indexOf(e))>-1?t:0}}),Object.defineProperty(t.prototype,"resolveShortMonth",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this._shortMonths().indexOf(e);return t>-1||(t=this._months().indexOf(e))>-1||this._root.language&&!this._root.language.isDefault()&&(t=this._root.language.translateAll(this._shortMonths()).indexOf(e))>-1?t:0}}),Object.defineProperty(t.prototype,"isAm",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this.getStringList(["AM","A.M.","A"]).indexOf(e.toUpperCase())>-1}}),Object.defineProperty(t.prototype,"getStringList",{enumerable:!1,configurable:!0,writable:!0,value:function(e){for(var t=[],n=0;n<e.length;n++)this._root.language?t.push(vT(this._t(e[n]))):t.push(vT(e[n]));return t}}),t}(lS),BS=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return Object.defineProperty(t,"_unitAliases",{enumerable:!0,configurable:!0,writable:!0,value:{Y:"y",D:"d",H:"h",K:"h",k:"h",n:"S"}}),t}return Hb(t,e),Object.defineProperty(t.prototype,"_setDefaults",{enumerable:!1,configurable:!0,writable:!0,value:function(){var t="_duration_millisecond",n="_duration_second",i="_duration_minute",r="_duration_hour",o="_duration_day",a="_duration_week",s="_duration_month",l="_minute",u="_hour",c="_day",h="_week",d="_week",f="_year";this._setDefault("negativeBase",0),this._setDefault("baseUnit","second"),this._setDefault("durationFormats",{millisecond:{millisecond:this._t(t),second:this._t(t+"_second"),minute:this._t(t+l),hour:this._t(t+u),day:this._t(t+c),week:this._t(t+h),month:this._t(t+d),year:this._t(t+f)},second:{second:this._t(n),minute:this._t(n+l),hour:this._t(n+u),day:this._t(n+c),week:this._t(n+h),month:this._t(n+d),year:this._t(n+f)},minute:{minute:this._t(i),hour:this._t(i+u),day:this._t(i+c),week:this._t(i+h),month:this._t(i+d),year:this._t(i+f)},hour:{hour:this._t(r),day:this._t(r+c),week:this._t(r+h),month:this._t(r+d),year:this._t(r+f)},day:{day:this._t(o),week:this._t(o+h),month:this._t(o+d),year:this._t(o+f)},week:{week:this._t(a),month:this._t(a+d),year:this._t(a+f)},month:{month:this._t(s),year:this._t(s+f)},year:{year:this._t("_duration_year")}}),e.prototype._setDefaults.call(this)}}),Object.defineProperty(t.prototype,"_beforeChanged",{enumerable:!1,configurable:!0,writable:!0,value:function(){e.prototype._beforeChanged.call(this)}}),Object.defineProperty(t.prototype,"format",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n){var i=n||this.get("baseUnit");void 0!==t&&""!==t||(t=null!=this.get("durationFormat")?this.get("durationFormat"):this.getFormat(mk(e),void 0,i)),t=bT(t);var r,o=this.parseFormat(t,i),a=Number(e);r=a>this.get("negativeBase")?o.positive:a<this.get("negativeBase")?o.negative:o.zero;var s=this.applyFormat(a,r);return""!==r.color&&(s="["+r.color+"]"+s+"[/]"),s}}),Object.defineProperty(t.prototype,"parseFormat",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var n=this,i=t||this.get("baseUnit"),r={positive:{color:"",template:"",parts:[],source:"",baseUnit:i,parsed:!1,absolute:!1},negative:{color:"",template:"",parts:[],source:"",baseUnit:i,parsed:!1,absolute:!1},zero:{color:"",template:"",parts:[],source:"",baseUnit:i,parsed:!1,absolute:!1}},o=(e=e.replace("||",Ok)).split("|");return r.positive.source=o[0],void 0===o[2]?r.zero=r.positive:r.zero.source=o[2],void 0===o[1]?r.negative=r.positive:r.negative.source=o[1],iT(r,(function(e,t){if(!t.parsed){var i,r=t.source;(i=t.source.match(/^\[([^\]]*)\]/))&&i.length&&""!==i[0]&&(r=t.source.substr(i[0].length),t.color=i[1]);for(var o=PS.chunk(r,!0),a=0;a<o.length;a++){var s=o[a];if(s.text=s.text.replace(Ok,"|"),"value"===s.type){s.text.match(/[yYMdDwhHKkmsSn]+a/)&&(t.absolute=!0,s.text=s.text.replace(/([yYMdDwhHKkmsSn]+)a/,"$1"));var l=s.text.match(/y+|Y+|M+|d+|D+|w+|h+|H+|K+|k+|m+|s+|S+|n+/g);if(l)for(var u=0;u<l.length;u++)null==l[u]&&(l[u]=n._unitAliases[l[u]]),t.parts.push(l[u]),s.text=s.text.replace(l[u],Pk)}t.template+=s.text}t.parsed=!0}})),r}}),Object.defineProperty(t.prototype,"applyFormat",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var n=!t.absolute&&e<this.get("negativeBase");e=Math.abs(e);for(var i=this.toTimeStamp(e,t.baseUnit),r=t.template,o=0,a=t.parts.length;o<a;o++){var s=t.parts[o],l=this._toTimeUnit(s.substr(0,1)),u=s.length,c=Math.floor(i/this._getUnitValue(l));r=r.replace(Pk,gT(c,u,"0")),i-=c*this._getUnitValue(l)}return n&&(r="-"+r),r}}),Object.defineProperty(t.prototype,"toTimeStamp",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return e*this._getUnitValue(t)}}),Object.defineProperty(t.prototype,"_toTimeUnit",{enumerable:!1,configurable:!0,writable:!0,value:function(e){switch(e){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year"}}}),Object.defineProperty(t.prototype,"getFormat",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n){if(null!=this.get("durationFormat"))return this.get("durationFormat");if(n||(n=this.get("baseUnit")),null!=t&&e!=t){e=Math.abs(e),t=Math.abs(t);var i=this.getValueUnit(Math.max(e,t),n);return this.get("durationFormats")[n][i]}var r=this.getValueUnit(e,n);return this.get("durationFormats")[n][r]}}),Object.defineProperty(t.prototype,"getValueUnit",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var n;t||(t=this.get("baseUnit"));var i=this.getMilliseconds(e,t);return function(e,t){for(var n in e)if(rT(e,n)&&!t(n,e[n]))break}(this._getUnitValues(),(function(e,r){if(e==t||n){if(i/r<=1)return n||(n=e),!1;n=e}return!0})),n}}),Object.defineProperty(t.prototype,"getMilliseconds",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return t||(t=this.get("baseUnit")),e*this._getUnitValue(t)}}),Object.defineProperty(t.prototype,"_getUnitValue",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this._getUnitValues()[e]}}),Object.defineProperty(t.prototype,"_getUnitValues",{enumerable:!1,configurable:!0,writable:!0,value:function(){return{millisecond:1,second:1e3,minute:6e4,hour:36e5,day:864e5,week:6048e5,month:2592e6,year:31536e6}}}),t}(lS),VS={firstDayOfWeek:1,_decimalSeparator:".",_thousandSeparator:",",_big_number_suffix_3:"k",_big_number_suffix_6:"M",_big_number_suffix_9:"G",_big_number_suffix_12:"T",_big_number_suffix_15:"P",_big_number_suffix_18:"E",_big_number_suffix_21:"Z",_big_number_suffix_24:"Y",_small_number_suffix_3:"m",_small_number_suffix_6:"μ",_small_number_suffix_9:"n",_small_number_suffix_12:"p",_small_number_suffix_15:"f",_small_number_suffix_18:"a",_small_number_suffix_21:"z",_small_number_suffix_24:"y",_byte_suffix_B:"B",_byte_suffix_KB:"KB",_byte_suffix_MB:"MB",_byte_suffix_GB:"GB",_byte_suffix_TB:"TB",_byte_suffix_PB:"PB",_date:"yyyy-MM-dd",_date_millisecond:"mm:ss SSS",_date_millisecond_full:"HH:mm:ss SSS",_date_second:"HH:mm:ss",_date_second_full:"HH:mm:ss",_date_minute:"HH:mm",_date_minute_full:"HH:mm - MMM dd, yyyy",_date_hour:"HH:mm",_date_hour_full:"HH:mm - MMM dd, yyyy",_date_day:"MMM dd",_date_day_full:"MMM dd, yyyy",_date_week:"ww",_date_week_full:"MMM dd, yyyy",_date_month:"MMM",_date_month_full:"MMM, yyyy",_date_year:"yyyy",_duration_millisecond:"SSS",_duration_millisecond_second:"ss.SSS",_duration_millisecond_minute:"mm:ss SSS",_duration_millisecond_hour:"hh:mm:ss SSS",_duration_millisecond_day:"d'd' mm:ss SSS",_duration_millisecond_week:"d'd' mm:ss SSS",_duration_millisecond_month:"M'm' dd'd' mm:ss SSS",_duration_millisecond_year:"y'y' MM'm' dd'd' mm:ss SSS",_duration_second:"ss",_duration_second_minute:"mm:ss",_duration_second_hour:"hh:mm:ss",_duration_second_day:"d'd' hh:mm:ss",_duration_second_week:"d'd' hh:mm:ss",_duration_second_month:"M'm' dd'd' hh:mm:ss",_duration_second_year:"y'y' MM'm' dd'd' hh:mm:ss",_duration_minute:"mm",_duration_minute_hour:"hh:mm",_duration_minute_day:"d'd' hh:mm",_duration_minute_week:"d'd' hh:mm",_duration_minute_month:"M'm' dd'd' hh:mm",_duration_minute_year:"y'y' MM'm' dd'd' hh:mm",_duration_hour:"hh'h'",_duration_hour_day:"d'd' hh'h'",_duration_hour_week:"d'd' hh'h'",_duration_hour_month:"M'm' dd'd' hh'h'",_duration_hour_year:"y'y' MM'm' dd'd' hh'h'",_duration_day:"d'd'",_duration_day_week:"d'd'",_duration_day_month:"M'm' dd'd'",_duration_day_year:"y'y' MM'm' dd'd'",_duration_week:"w'w'",_duration_week_month:"w'w'",_duration_week_year:"w'w'",_duration_month:"M'm'",_duration_month_year:"y'y' MM'm'",_duration_year:"y'y'",_era_ad:"AD",_era_bc:"BC",A:"",P:"",AM:"",PM:"","A.M.":"","P.M.":"",January:"",February:"",March:"",April:"",May:"",June:"",July:"",August:"",September:"",October:"",November:"",December:"",Jan:"",Feb:"",Mar:"",Apr:"","May(short)":"May",Jun:"",Jul:"",Aug:"",Sep:"",Oct:"",Nov:"",Dec:"",Sunday:"",Monday:"",Tuesday:"",Wednesday:"",Thursday:"",Friday:"",Saturday:"",Sun:"",Mon:"",Tue:"",Wed:"",Thu:"",Fri:"",Sat:"",_dateOrd:function(e){var t="th";if(e<11||e>13)switch(e%10){case 1:t="st";break;case 2:t="nd";break;case 3:t="rd"}return t},"Zoom Out":"",Play:"",Stop:"",Legend:"","Press ENTER to toggle":"",Loading:"",Home:"",Chart:"","Serial chart":"","X/Y chart":"","Pie chart":"","Gauge chart":"","Radar chart":"","Sankey diagram":"","Flow diagram":"","Chord diagram":"","TreeMap chart":"","Force directed tree":"","Sliced chart":"",Series:"","Candlestick Series":"","OHLC Series":"","Column Series":"","Line Series":"","Pie Slice Series":"","Funnel Series":"","Pyramid Series":"","X/Y Series":"",Map:"","Press ENTER to zoom in":"","Press ENTER to zoom out":"","Use arrow keys to zoom in and out":"","Use plus and minus keys on your keyboard to zoom in and out":"",Export:"",Image:"",Data:"",Print:"","Press ENTER or use arrow keys to navigate":"","Press ENTER to open":"","Press ENTER to print.":"","Press ENTER to export as %1.":"","(Press ESC to close this message)":"","Image Export Complete":"","Export operation took longer than expected. Something might have gone wrong.":"","Saved from":"",PNG:"",JPG:"",GIF:"",SVG:"",PDF:"",JSON:"",CSV:"",XLSX:"",HTML:"","Use TAB to select grip buttons or left and right arrows to change selection":"","Use left and right arrows to move selection":"","Use left and right arrows to move left selection":"","Use left and right arrows to move right selection":"","Use TAB select grip buttons or up and down arrows to change selection":"","Use up and down arrows to move selection":"","Use up and down arrows to move lower selection":"","Use up and down arrows to move upper selection":"","From %1 to %2":"","From %1":"","To %1":"","No parser available for file: %1":"","Error parsing file: %1":"","Unable to load file: %1":"","Invalid date":"",Close:"",Minimize:""},US=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Hb(t,e),Object.defineProperty(t.prototype,"_setDefaults",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.setPrivate("defaultLocale",VS),e.prototype._setDefaults.call(this)}}),Object.defineProperty(t.prototype,"translate",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];t||(t=this._root.locale||this.getPrivate("defaultLocale"));var r=e,o=t[e];if(null===o)r="";else if(null!=o)o&&(r=o);else if(t!==this.getPrivate("defaultLocale"))return this.translate.apply(this,Wb([e,this.getPrivate("defaultLocale")],qb(n),!1));if(n.length)for(var a=n.length,s=0;s<a;++s)r=r.split("%"+(s+1)).join(n[s]);return r}}),Object.defineProperty(t.prototype,"translateAny",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];return this.translate.apply(this,Wb([e,t],qb(n),!1))}}),Object.defineProperty(t.prototype,"setTranslationAny",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n){(n||this._root.locale)[e]=t}}),Object.defineProperty(t.prototype,"translateEmpty",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];var r=this.translate.apply(this,Wb([e,t],qb(n),!1));return r==e?"":r}}),Object.defineProperty(t.prototype,"translateFunc",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return this._root.locale[e]?this._root.locale[e]:t!==this.getPrivate("defaultLocale")?this.translateFunc(e,this.getPrivate("defaultLocale")):function(){return""}}}),Object.defineProperty(t.prototype,"translateAll",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var n=this;return this.isDefault()?e:Tk(e,(function(e){return n.translate(e,t)}))}}),Object.defineProperty(t.prototype,"isDefault",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this.getPrivate("defaultLocale")===this._root.locale}}),t}(lS),HS=function(){function e(e,t){if(Object.defineProperty(this,"_root",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_rules",{enumerable:!0,configurable:!0,writable:!0,value:{}}),this._root=e,!t)throw new Error("You cannot use `new Class()`, instead use `Class.new()`")}return Object.defineProperty(e,"new",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=new this(e,!0);return t.setupDefaultRules(),t}}),Object.defineProperty(e.prototype,"setupDefaultRules",{enumerable:!1,configurable:!0,writable:!0,value:function(){}}),Object.defineProperty(e.prototype,"_lookupRules",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this._rules[e]}}),Object.defineProperty(e.prototype,"ruleRaw",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){void 0===t&&(t=[]);var n=this._rules[e];n||(n=this._rules[e]=[]),t.sort(eS);var i=function(e,t){for(var n=0,i=e.length,r=!1;n<i;){var o=n+i>>1,a=t(e[o]);a<0?n=o+1:0===a?(r=!0,n=o+1):i=o}return{found:r,index:r?n-1:n}}(n,(function(e){var n=eS(e.tags.length,t.length);return 0===n?tS(e.tags,t,eS):n})),r=i.index;if(i.found)return n[r].template;var o=dS.new({});return n.splice(r,0,{tags:t,template:o}),o}}),Object.defineProperty(e.prototype,"rule",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return void 0===t&&(t=[]),this.ruleRaw(e,t)}}),e}();function zS(e,t,n,i){e.set(t,n.get(i)),n.on(i,(function(n){e.set(t,n)}))}var $S=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Hb(t,e),Object.defineProperty(t.prototype,"setupDefaultRules",{enumerable:!1,configurable:!0,writable:!0,value:function(){e.prototype.setupDefaultRules.call(this);var t,n=this._root.language,i=this._root.interfaceColors,r=this._root.horizontalLayout,o=this._root.verticalLayout,a=this.rule.bind(this);a("InterfaceColors").setAll({stroke:MT.fromHex(15066597),fill:MT.fromHex(15987699),primaryButton:MT.fromHex(6788316),primaryButtonHover:MT.fromHex(6779356),primaryButtonDown:MT.fromHex(6872182),primaryButtonActive:MT.fromHex(6872182),primaryButtonText:MT.fromHex(16777215),primaryButtonStroke:MT.fromHex(16777215),secondaryButton:MT.fromHex(14277081),secondaryButtonHover:MT.fromHex(10724259),secondaryButtonDown:MT.fromHex(9276813),secondaryButtonActive:MT.fromHex(15132390),secondaryButtonText:MT.fromHex(0),secondaryButtonStroke:MT.fromHex(16777215),grid:MT.fromHex(0),background:MT.fromHex(16777215),alternativeBackground:MT.fromHex(0),text:MT.fromHex(0),alternativeText:MT.fromHex(16777215),disabled:MT.fromHex(11382189),positive:MT.fromHex(5288704),negative:MT.fromHex(11730944)}),(t=a("ColorSet")).setAll({passOptions:{hue:.05,saturation:0,lightness:0},colors:[MT.fromHex(6797276)],step:1,reuse:!1,startIndex:0}),t.setPrivate("currentStep",0),t.setPrivate("currentPass",0),a("Entity").setAll({stateAnimationDuration:0,stateAnimationEasing:KT(XT)}),a("Component").setAll({interpolationDuration:0,interpolationEasing:KT(XT)}),a("Sprite").setAll({visible:!0,scale:1,opacity:1,rotation:0,position:"relative",tooltipX:eT,tooltipY:eT,tooltipPosition:"fixed",isMeasured:!0}),a("Sprite").states.create("default",{visible:!0,opacity:1}),a("Container").setAll({interactiveChildren:!0,setStateOnChildren:!1}),a("Graphics").setAll({strokeWidth:1}),a("Chart").setAll({width:Zk,height:Zk,interactiveChildren:!1}),a("Sprite",["horizontal","center"]).setAll({centerX:eT,x:eT}),a("Sprite",["vertical","center"]).setAll({centerY:eT,y:eT}),a("Container",["horizontal","layout"]).setAll({layout:r}),a("Container",["vertical","layout"]).setAll({layout:o}),a("Pattern").setAll({repetition:"repeat",width:50,height:50,rotation:0,fillOpacity:1}),a("LinePattern").setAll({gap:6,colorOpacity:1,width:49,height:49}),a("RectanglePattern").setAll({gap:6,checkered:!1,centered:!0,maxWidth:5,maxHeight:5,width:48,height:48,strokeWidth:0}),a("CirclePattern").setAll({gap:5,checkered:!1,centered:!1,radius:3,strokeWidth:0,width:45,height:45}),a("LinearGradient").setAll({rotation:90}),a("Legend").setAll({fillField:"fill",strokeField:"stroke",nameField:"name",layout:wS.new(this._root,{}),layer:30,clickTarget:"itemContainer"}),a("Container",["legend","item","itemcontainer"]).setAll({paddingLeft:5,paddingRight:5,paddingBottom:5,paddingTop:5,layout:r,setStateOnChildren:!0,interactiveChildren:!1,ariaChecked:!0,focusable:!0,ariaLabel:n.translate("Press ENTER to toggle")}),(t=a("Rectangle",["legend","item","background"])).setAll({fillOpacity:0}),zS(t,"fill",i,"background"),a("Container",["legend","marker"]).setAll({setStateOnChildren:!0,centerY:eT,paddingLeft:0,paddingRight:0,paddingBottom:0,paddingTop:0,width:18,height:18}),a("RoundedRectangle",["legend","marker","rectangle"]).setAll({width:Zk,height:Zk,cornerRadiusBL:3,cornerRadiusTL:3,cornerRadiusBR:3,cornerRadiusTR:3}),zS(t=a("RoundedRectangle",["legend","marker","rectangle"]).states.create("disabled",{}),"fill",i,"disabled"),zS(t,"stroke",i,"disabled"),a("Label",["legend","label"]).setAll({centerY:eT,marginLeft:5,paddingRight:0,paddingLeft:0,paddingTop:0,paddingBottom:0,populateText:!0}),zS(t=a("Label",["legend","label"]).states.create("disabled",{}),"fill",i,"disabled"),a("Label",["legend","value","label"]).setAll({centerY:eT,marginLeft:5,paddingRight:0,paddingLeft:0,paddingTop:0,paddingBottom:0,width:50,centerX:Zk,populateText:!0}),zS(t=a("Label",["legend","value","label"]).states.create("disabled",{}),"fill",i,"disabled"),a("HeatLegend").setAll({stepCount:1}),a("RoundedRectangle",["heatlegend","marker"]).setAll({cornerRadiusTR:0,cornerRadiusBR:0,cornerRadiusTL:0,cornerRadiusBL:0}),a("RoundedRectangle",["vertical","heatlegend","marker"]).setAll({height:Zk,width:15}),a("RoundedRectangle",["horizontal","heatlegend","marker"]).setAll({width:Zk,height:15}),a("HeatLegend",["vertical"]).setAll({height:Zk}),a("HeatLegend",["horizontal"]).setAll({width:Zk}),a("Label",["heatlegend","start"]).setAll({paddingLeft:5,paddingRight:5,paddingTop:5,paddingBottom:5}),a("Label",["heatlegend","end"]).setAll({paddingLeft:5,paddingRight:5,paddingTop:5,paddingBottom:5}),(t=a("Label")).setAll({paddingTop:8,paddingBottom:8,paddingLeft:10,paddingRight:10,fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',fontSize:"1em",populateText:!1}),zS(t,"fill",i,"text"),a("RadialLabel").setAll({textType:"regular",centerY:eT,centerX:eT,inside:!1,radius:0,baseRadius:Zk,orientation:"auto",textAlign:"center"}),a("RoundedRectangle").setAll({cornerRadiusTL:8,cornerRadiusBL:8,cornerRadiusTR:8,cornerRadiusBR:8}),a("PointedRectangle").setAll({pointerBaseWidth:15,pointerLength:10,cornerRadius:8}),a("Slice").setAll({shiftRadius:0,dRadius:0,dInnerRadius:0}),(t=a("Tick")).setAll({strokeOpacity:.15,isMeasured:!1,length:5,position:"absolute"}),zS(t,"stroke",i,"grid"),a("Bullet").setAll({locationX:.5,locationY:.5}),a("Tooltip").setAll({position:"absolute",getFillFromSprite:!0,getStrokeFromSprite:!1,autoTextColor:!0,paddingTop:9,paddingBottom:8,paddingLeft:10,paddingRight:10,marginBottom:5,pointerOrientation:"vertical",centerX:eT,centerY:eT,animationEasing:KT(XT),exportable:!1}),(t=a("PointedRectangle",["tooltip","background"])).setAll({strokeOpacity:.9,cornerRadius:4,pointerLength:4,pointerBaseWidth:8,fillOpacity:.9,stroke:MT.fromHex(16777215)}),(t=a("Label",["tooltip"])).setAll({role:"tooltip",populateText:!0,paddingRight:0,paddingTop:0,paddingLeft:0,paddingBottom:0}),zS(t,"fill",i,"alternativeText"),a("Button").setAll({paddingTop:8,paddingBottom:8,paddingLeft:10,paddingRight:10,interactive:!0,layout:r,interactiveChildren:!1,setStateOnChildren:!0,focusable:!0}),a("Button").states.create("hover",{}),a("Button").states.create("down",{stateAnimationDuration:0}),a("Button").states.create("active",{}),zS(t=a("RoundedRectangle",["button","background"]),"fill",i,"primaryButton"),zS(t,"stroke",i,"primaryButtonStroke"),zS(t=a("RoundedRectangle",["button","background"]).states.create("hover",{}),"fill",i,"primaryButtonHover"),zS(t=a("RoundedRectangle",["button","background"]).states.create("down",{stateAnimationDuration:0}),"fill",i,"primaryButtonDown"),zS(t=a("RoundedRectangle",["button","background"]).states.create("active",{}),"fill",i,"primaryButtonActive"),zS(t=a("Graphics",["button","icon"]),"stroke",i,"primaryButtonText"),zS(t=a("Label",["button"]),"fill",i,"primaryButtonText"),a("Button",["zoom"]).setAll({paddingTop:18,paddingBottom:18,paddingLeft:12,paddingRight:12,centerX:46,centerY:-10,y:0,x:Zk,role:"button",ariaLabel:n.translate("Zoom Out"),layer:30}),(t=a("RoundedRectangle",["background","button","zoom"])).setAll({cornerRadiusBL:40,cornerRadiusBR:40,cornerRadiusTL:40,cornerRadiusTR:40}),zS(t,"fill",i,"primaryButton"),zS(t=a("RoundedRectangle",["background","button","zoom"]).states.create("hover",{}),"fill",i,"primaryButtonHover"),zS(t=a("RoundedRectangle",["background","button","zoom"]).states.create("down",{stateAnimationDuration:0}),"fill",i,"primaryButtonDown"),(t=a("Graphics",["icon","button","zoom"])).setAll({strokeOpacity:.7,draw:function(e){e.moveTo(0,0),e.lineTo(12,0)}}),zS(t,"stroke",i,"primaryButtonText"),a("Button",["resize"]).setAll({paddingTop:9,paddingBottom:9,paddingLeft:13,paddingRight:13,draggable:!0,centerX:eT,centerY:eT,position:"absolute",role:"slider",ariaValueMin:"0",ariaValueMax:"100",ariaLabel:n.translate("Use up and down arrows to move selection")}),(t=a("RoundedRectangle",["background","resize","button"])).setAll({cornerRadiusBL:40,cornerRadiusBR:40,cornerRadiusTL:40,cornerRadiusTR:40}),zS(t,"fill",i,"secondaryButton"),zS(t,"stroke",i,"secondaryButtonStroke"),zS(t=a("RoundedRectangle",["background","resize","button"]).states.create("hover",{}),"fill",i,"secondaryButtonHover"),zS(t=a("RoundedRectangle",["background","resize","button"]).states.create("down",{stateAnimationDuration:0}),"fill",i,"secondaryButtonDown"),(t=a("Graphics",["resize","button","icon"])).setAll({strokeOpacity:.7,draw:function(e){e.moveTo(0,0),e.lineTo(0,12),e.moveTo(4,0),e.lineTo(4,12)}}),zS(t,"stroke",i,"secondaryButtonText"),a("Button",["resize","vertical"]).setAll({rotation:90,cursorOverStyle:"ns-resize"}),a("Button",["resize","horizontal"]).setAll({cursorOverStyle:"ew-resize"}),a("Button",["play"]).setAll({paddingTop:13,paddingBottom:13,paddingLeft:14,paddingRight:14,ariaLabel:n.translate("Play"),toggleKey:"active"}),(t=a("RoundedRectangle",["play","background"])).setAll({strokeOpacity:.5,cornerRadiusBL:100,cornerRadiusBR:100,cornerRadiusTL:100,cornerRadiusTR:100}),zS(t,"fill",i,"primaryButton"),(t=a("Graphics",["play","icon"])).setAll({stateAnimationDuration:0,dx:1,draw:function(e){e.moveTo(0,-5),e.lineTo(8,0),e.lineTo(0,5),e.lineTo(0,-5)}}),zS(t,"fill",i,"primaryButtonText"),a("Graphics",["play","icon"]).states.create("default",{stateAnimationDuration:0}),a("Graphics",["play","icon"]).states.create("active",{stateAnimationDuration:0,draw:function(e){e.moveTo(-4,-5),e.lineTo(-1,-5),e.lineTo(-1,5),e.lineTo(-4,5),e.lineTo(-4,-5),e.moveTo(4,-5),e.lineTo(1,-5),e.lineTo(1,5),e.lineTo(4,5),e.lineTo(4,-5)}}),a("Button",["switch"]).setAll({paddingTop:4,paddingBottom:4,paddingLeft:4,paddingRight:4,ariaLabel:n.translate("Press ENTER to toggle"),toggleKey:"active",width:40,height:24,layout:null}),(t=a("RoundedRectangle",["switch","background"])).setAll({strokeOpacity:.5,cornerRadiusBL:100,cornerRadiusBR:100,cornerRadiusTL:100,cornerRadiusTR:100}),zS(t,"fill",i,"primaryButton"),(t=a("Circle",["switch","icon"])).setAll({radius:8,centerY:0,centerX:0,dx:0}),zS(t,"fill",i,"primaryButtonText"),a("Graphics",["switch","icon"]).states.create("active",{dx:16}),a("Scrollbar").setAll({start:0,end:1,layer:30,animationEasing:KT(XT)}),a("Scrollbar",["vertical"]).setAll({marginRight:13,marginLeft:13,minWidth:12,height:Zk}),a("Scrollbar",["horizontal"]).setAll({marginTop:13,marginBottom:13,minHeight:12,width:Zk}),this.rule("Button",["scrollbar"]).setAll({exportable:!1}),(t=a("RoundedRectangle",["scrollbar","main","background"])).setAll({cornerRadiusTL:8,cornerRadiusBL:8,cornerRadiusTR:8,cornerRadiusBR:8,fillOpacity:.8}),zS(t,"fill",i,"fill"),(t=a("RoundedRectangle",["scrollbar","thumb"])).setAll({role:"slider",ariaLive:"polite",position:"absolute",draggable:!0}),zS(t,"fill",i,"secondaryButton"),zS(t=a("RoundedRectangle",["scrollbar","thumb"]).states.create("hover",{}),"fill",i,"secondaryButtonHover"),zS(t=a("RoundedRectangle",["scrollbar","thumb"]).states.create("down",{stateAnimationDuration:0}),"fill",i,"secondaryButtonDown"),a("RoundedRectangle",["scrollbar","thumb","vertical"]).setAll({x:eT,width:Zk,centerX:eT,ariaLabel:n.translate("Use up and down arrows to move selection")}),a("RoundedRectangle",["scrollbar","thumb","horizontal"]).setAll({y:eT,centerY:eT,height:Zk,ariaLabel:n.translate("Use left and right arrows to move selection")}),(t=a("PointedRectangle",["axis","tooltip","background"])).setAll({cornerRadius:0}),zS(t,"fill",i,"alternativeBackground"),a("Label",["axis","tooltip"]).setAll({role:void 0}),a("Label",["axis","tooltip","y"]).setAll({textAlign:"right"}),a("Label",["axis","tooltip","y","opposite"]).setAll({textAlign:"left"}),a("Label",["axis","tooltip","x"]).setAll({textAlign:"center"}),a("Tooltip",["categoryaxis"]).setAll({labelText:"{category}"}),a("Star").setAll({spikes:5,innerRadius:5,radius:10}),a("Tooltip",["stock"]).setAll({paddingTop:6,paddingBottom:5,paddingLeft:7,paddingRight:7}),a("PointedRectangle",["tooltip","stock","axis"]).setAll({pointerLength:0,pointerBaseWidth:0,cornerRadius:3}),a("Label",["tooltip","stock"]).setAll({fontSize:"0.8em"})}}),t}(HS),YS=function(){function e(e,t,n,i,r,o){void 0===e&&(e=1),void 0===t&&(t=0),void 0===n&&(n=0),void 0===i&&(i=1),void 0===r&&(r=0),void 0===o&&(o=0),Object.defineProperty(this,"a",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"b",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"c",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"d",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tx",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"ty",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.a=e,this.b=t,this.c=n,this.d=i,this.tx=r,this.ty=o}return Object.defineProperty(e.prototype,"setTransform",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n,i,r,o){void 0===o&&(o=1),this.a=Math.cos(r)*o,this.b=Math.sin(r)*o,this.c=-Math.sin(r)*o,this.d=Math.cos(r)*o,this.tx=e-(n*this.a+i*this.c),this.ty=t-(n*this.b+i*this.d)}}),Object.defineProperty(e.prototype,"apply",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return{x:this.a*e.x+this.c*e.y+this.tx,y:this.b*e.x+this.d*e.y+this.ty}}}),Object.defineProperty(e.prototype,"applyInverse",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=1/(this.a*this.d+this.c*-this.b);return{x:this.d*t*e.x+-this.c*t*e.y+(this.ty*this.c-this.tx*this.d)*t,y:this.a*t*e.y+-this.b*t*e.x+(-this.ty*this.a+this.tx*this.b)*t}}}),Object.defineProperty(e.prototype,"append",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this.a,n=this.b,i=this.c,r=this.d;this.a=e.a*t+e.b*i,this.b=e.a*n+e.b*r,this.c=e.c*t+e.d*i,this.d=e.c*n+e.d*r,this.tx=e.tx*t+e.ty*i+this.tx,this.ty=e.tx*n+e.ty*r+this.ty}}),Object.defineProperty(e.prototype,"prepend",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this.tx;if(1!==e.a||0!==e.b||0!==e.c||1!==e.d){var n=this.a,i=this.c;this.a=n*e.a+this.b*e.c,this.b=n*e.b+this.b*e.d,this.c=i*e.a+this.d*e.c,this.d=i*e.b+this.d*e.d}this.tx=t*e.a+this.ty*e.c+e.tx,this.ty=t*e.b+this.ty*e.d+e.ty}}),Object.defineProperty(e.prototype,"copyFrom",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.tx=e.tx,this.ty=e.ty}}),e}(),GS=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0);}catch(e){r=!0,o=e}finally{try{!i&&s.return&&s.return()}finally{if(r)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},qS=2*Math.PI,WS=function(e,t,n,i,r,o,a){var s=e.x,l=e.y;return{x:i*(s*=t)-r*(l*=n)+o,y:r*s+i*l+a}},XS=function(e,t){var n=1.5707963267948966===t?.551915024494:-1.5707963267948966===t?-.551915024494:4/3*Math.tan(t/4),i=Math.cos(e),r=Math.sin(e),o=Math.cos(e+t),a=Math.sin(e+t);return[{x:i-r*n,y:r+i*n},{x:o+a*n,y:a-o*n},{x:o,y:a}]},KS=function(e,t,n,i){var r=e*n+t*i;return r>1&&(r=1),r<-1&&(r=-1),(e*i-t*n<0?-1:1)*Math.acos(r)},QS=function(e){var t=e.px,n=e.py,i=e.cx,r=e.cy,o=e.rx,a=e.ry,s=e.xAxisRotation,l=void 0===s?0:s,u=e.largeArcFlag,c=void 0===u?0:u,h=e.sweepFlag,d=void 0===h?0:h,f=[];if(0===o||0===a)return[];var p=Math.sin(l*qS/360),g=Math.cos(l*qS/360),m=g*(t-i)/2+p*(n-r)/2,b=-p*(t-i)/2+g*(n-r)/2;if(0===m&&0===b)return[];o=Math.abs(o),a=Math.abs(a);var y=Math.pow(m,2)/Math.pow(o,2)+Math.pow(b,2)/Math.pow(a,2);y>1&&(o*=Math.sqrt(y),a*=Math.sqrt(y));var v=function(e,t,n,i,r,o,a,s,l,u,c,h){var d=Math.pow(r,2),f=Math.pow(o,2),p=Math.pow(c,2),g=Math.pow(h,2),m=d*f-d*g-f*p;m<0&&(m=0),m/=d*g+f*p;var b=(m=Math.sqrt(m)*(a===s?-1:1))*r/o*h,y=m*-o/r*c,v=u*b-l*y+(e+n)/2,_=l*b+u*y+(t+i)/2,w=(c-b)/r,x=(h-y)/o,P=(-c-b)/r,O=(-h-y)/o,k=KS(1,0,w,x),T=KS(w,x,P,O);return 0===s&&T>0&&(T-=qS),1===s&&T<0&&(T+=qS),[v,_,k,T]}(t,n,i,r,o,a,c,d,p,g,m,b),_=GS(v,4),w=_[0],x=_[1],P=_[2],O=_[3],k=Math.abs(O)/(qS/4);Math.abs(1-k)<1e-7&&(k=1);var T=Math.max(Math.ceil(k),1);O/=T;for(var S=0;S<T;S++)f.push(XS(P,O)),P+=O;return f.map((function(e){var t=WS(e[0],o,a,g,p,w,x),n=t.x,i=t.y,r=WS(e[1],o,a,g,p,w,x),s=r.x,l=r.y,u=WS(e[2],o,a,g,p,w,x);return{x1:n,y1:i,x2:s,y2:l,x:u.x,y:u.y}}))};function JS(e,t,n){if(t!==n)throw new Error("Required "+n+" arguments for "+e+" but got "+t)}function ZS(e,t,n){if(t<n)throw new Error("Required at least "+n+" arguments for "+e+" but got "+t)}function eI(e,t,n){if(ZS(e,t,n),t%n!=0)throw new Error("Arguments for "+e+" must be in pairs of "+n)}function tI(e){if(0===e||1===e)return e;throw new Error("Flag must be 0 or 1")}function nI(e,t){for(;(!e.interactive||t(e))&&e._parent;)e=e._parent}function iI(e,t,n){return oT(e,lT(t),(function(e){var t=e.touches;t?(0==t.length&&(t=e.changedTouches),n(Ak(t))):n([e])}))}function rI(e){var t=document.createElement("canvas");t.width=1,t.height=1;var n=t.getContext("2d");n.drawImage(e,0,0,1,1);try{return n.getImageData(0,0,1,1),!1}catch(t){return console.warn('Image "'+e.src+'" is loaded from different host and is not covered by CORS policy. For more information about the implications read here: https://www.amcharts.com/docs/v5/concepts/cors'),!0}}function oI(e){e.width=0,e.height=0,e.style.width="0px",e.style.height="0px"}var aI=function(){function e(){Object.defineProperty(this,"_x",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_y",{enumerable:!0,configurable:!0,writable:!0,value:0})}return Object.defineProperty(e.prototype,"x",{get:function(){return this._x},set:function(e){this._x=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._y},set:function(e){this._y=e},enumerable:!1,configurable:!0}),e}(),sI=function(e){function t(t){var n=e.call(this)||this;return Object.defineProperty(n,"_layer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(n,"mask",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(n,"visible",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(n,"exportable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(n,"interactive",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(n,"inactive",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(n,"wheelable",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(n,"cancelTouch",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(n,"isMeasured",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(n,"buttonMode",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(n,"alpha",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(n,"compoundAlpha",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(n,"angle",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(n,"scale",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(n,"x",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(n,"y",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(n,"pivot",{enumerable:!0,configurable:!0,writable:!0,value:new aI}),Object.defineProperty(n,"filter",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(n,"cursorOverStyle",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(n,"_replacedCursorStyle",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(n,"_localMatrix",{enumerable:!0,configurable:!0,writable:!0,value:new YS}),Object.defineProperty(n,"_matrix",{enumerable:!0,configurable:!0,writable:!0,value:new YS}),Object.defineProperty(n,"_uMatrix",{enumerable:!0,configurable:!0,writable:!0,value:new YS}),Object.defineProperty(n,"_renderer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(n,"_parent",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(n,"_localBounds",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(n,"_bounds",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(n,"_colorId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),n._renderer=t,n}return Hb(t,e),Object.defineProperty(t.prototype,"_dispose",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._renderer._removeObject(this)}}),Object.defineProperty(t.prototype,"getCanvas",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this.getLayer().view}}),Object.defineProperty(t.prototype,"getLayer",{enumerable:!1,configurable:!0,writable:!0,value:function(){for(var e=this;;){if(e._layer)return e._layer;if(!e._parent)return this._renderer.defaultLayer;e=e._parent}}}),Object.defineProperty(t.prototype,"setLayer",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){void 0===t&&(t=!0),null==e?this._layer=void 0:(this._layer=this._renderer.getLayer(e,t),this._layer.visible=t,this._parent&&this._parent.registerChildLayer(this._layer))}}),Object.defineProperty(t.prototype,"markDirtyLayer",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.getLayer().dirty=!0}}),Object.defineProperty(t.prototype,"clear",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.invalidateBounds()}}),Object.defineProperty(t.prototype,"invalidateBounds",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._localBounds=void 0}}),Object.defineProperty(t.prototype,"_addBounds",{enumerable:!1,configurable:!0,writable:!0,value:function(e){}}),Object.defineProperty(t.prototype,"_getColorId",{enumerable:!1,configurable:!0,writable:!0,value:function(){return void 0===this._colorId&&(this._colorId=this._renderer.paintId(this)),this._colorId}}),Object.defineProperty(t.prototype,"_isInteractive",{enumerable:!1,configurable:!0,writable:!0,value:function(){return 0==this.inactive&&(this.interactive||this._renderer._forceInteractive>0)}}),Object.defineProperty(t.prototype,"_isInteractiveMask",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._isInteractive()}}),Object.defineProperty(t.prototype,"contains",{enumerable:!1,configurable:!0,writable:!0,value:function(e){for(;;){if(e===this)return!0;if(!e._parent)return!1;e=e._parent}}}),Object.defineProperty(t.prototype,"toGlobal",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this._matrix.apply(e)}}),Object.defineProperty(t.prototype,"toLocal",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this._matrix.applyInverse(e)}}),Object.defineProperty(t.prototype,"getLocalMatrix",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._uMatrix.setTransform(0,0,this.pivot.x,this.pivot.y,this.angle*Math.PI/180,this.scale),this._uMatrix}}),Object.defineProperty(t.prototype,"getLocalBounds",{enumerable:!1,configurable:!0,writable:!0,value:function(){if(!this._localBounds){var e=1e7;this._localBounds={left:e,top:e,right:-e,bottom:-e},this._addBounds(this._localBounds)}return this._localBounds}}),Object.defineProperty(t.prototype,"getAdjustedBounds",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this._setMatrix();var t=this.getLocalMatrix(),n=t.apply({x:e.left,y:e.top}),i=t.apply({x:e.right,y:e.top}),r=t.apply({x:e.right,y:e.bottom}),o=t.apply({x:e.left,y:e.bottom});return{left:Math.min(n.x,i.x,r.x,o.x),top:Math.min(n.y,i.y,r.y,o.y),right:Math.max(n.x,i.x,r.x,o.x),bottom:Math.max(n.y,i.y,r.y,o.y)}}}),Object.defineProperty(t.prototype,"on",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n){return this.interactive?this._renderer._addEvent(this,e,t,n):new Vk((function(){}))}}),Object.defineProperty(t.prototype,"_setMatrix",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._localMatrix.setTransform(this.x,this.y,this.pivot.x,this.pivot.y,this.angle*Math.PI/180,this.scale),this._matrix.copyFrom(this._localMatrix),this._parent&&this._matrix.prepend(this._parent._matrix)}}),Object.defineProperty(t.prototype,"_transform",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var n=this._matrix;e.setTransform(n.a*t,n.b*t,n.c*t,n.d*t,n.tx*t,n.ty*t)}}),Object.defineProperty(t.prototype,"render",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this;if(this.visible&&(!1!==this.exportable||!this._renderer._omitTainted)){this._setMatrix();var n=this._renderer.resolution,i=this._renderer.layers,r=this._renderer._ghostContext,o=this.mask;o&&o._setMatrix(),Sk(i,(function(e){if(e){var i=e.context;i.save(),o&&(o._transform(i,e.scale||n),o._runPath(i),i.clip()),i.globalAlpha=t.compoundAlpha*t.alpha,t._transform(i,e.scale||n),t.filter&&(i.filter=t.filter)}})),r.save(),o&&this._isInteractiveMask()&&(o._transform(r,n),o._runPath(r),r.clip()),this._transform(r,n),this._render(e),r.restore(),Sk(i,(function(e){e&&e.context.restore()}))}}}),Object.defineProperty(t.prototype,"_render",{enumerable:!1,configurable:!0,writable:!0,value:function(e){!1===this.exportable&&((this._layer||e).tainted=!0)}}),Object.defineProperty(t.prototype,"hovering",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._renderer._hovering.has(this)}}),Object.defineProperty(t.prototype,"dragging",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this;return this._renderer._dragging.some((function(t){return t.value===e}))}}),Object.defineProperty(t.prototype,"dispose",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.getLayer().dirty=!0}}),Object.defineProperty(t.prototype,"shouldCancelTouch",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this._renderer;return!(e.tapToActivate&&!e._touchActive)&&(!!this.cancelTouch||!!this._parent&&this._parent.shouldCancelTouch())}}),t}(Bk),lI=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return Object.defineProperty(t,"interactiveChildren",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(t,"_childLayers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(t,"_children",{enumerable:!0,configurable:!0,writable:!0,value:[]}),t}return Hb(t,e),Object.defineProperty(t.prototype,"_isInteractiveMask",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this.interactiveChildren||e.prototype._isInteractiveMask.call(this)}}),Object.defineProperty(t.prototype,"addChild",{enumerable:!1,configurable:!0,writable:!0,value:function(e){e._parent=this,this._children.push(e),e._layer&&this.registerChildLayer(e._layer)}}),Object.defineProperty(t.prototype,"addChildAt",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){e._parent=this,this._children.splice(t,0,e),e._layer&&this.registerChildLayer(e._layer)}}),Object.defineProperty(t.prototype,"removeChild",{enumerable:!1,configurable:!0,writable:!0,value:function(e){e._parent=void 0,jk(this._children,e)}}),Object.defineProperty(t.prototype,"_render",{enumerable:!1,configurable:!0,writable:!0,value:function(t){var n=this;e.prototype._render.call(this,t);var i=this._renderer;this.interactive&&this.interactiveChildren&&++i._forceInteractive;var r=this._layer||t;Sk(this._children,(function(e){e.compoundAlpha=n.compoundAlpha*n.alpha,e.render(r)})),this.interactive&&this.interactiveChildren&&--i._forceInteractive}}),Object.defineProperty(t.prototype,"registerChildLayer",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this._childLayers||(this._childLayers=[]),Ck(this._childLayers,e),this._parent&&this._parent.registerChildLayer(e)}}),Object.defineProperty(t.prototype,"markDirtyLayer",{enumerable:!1,configurable:!0,writable:!0,value:function(t){void 0===t&&(t=!1),e.prototype.markDirtyLayer.call(this),t&&this._childLayers&&Sk(this._childLayers,(function(e){return e.dirty=!0}))}}),Object.defineProperty(t.prototype,"dispose",{enumerable:!1,configurable:!0,writable:!0,value:function(){e.prototype.dispose.call(this),this._childLayers&&Sk(this._childLayers,(function(e){e.dirty=!0}))}}),t}(sI);function uI(e,t){e.left=Math.min(e.left,t.x),e.top=Math.min(e.top,t.y),e.right=Math.max(e.right,t.x),e.bottom=Math.max(e.bottom,t.y)}var cI=function(){function e(){}return Object.defineProperty(e.prototype,"colorize",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){}}),Object.defineProperty(e.prototype,"path",{enumerable:!1,configurable:!0,writable:!0,value:function(e){}}),Object.defineProperty(e.prototype,"addBounds",{enumerable:!1,configurable:!0,writable:!0,value:function(e){}}),e}(),hI=function(e){function t(t){var n=e.call(this)||this;return Object.defineProperty(n,"color",{enumerable:!0,configurable:!0,writable:!0,value:t}),n}return Hb(t,e),Object.defineProperty(t.prototype,"colorize",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){e.fillStyle=void 0!==t?t:this.color}}),t}(cI),dI=function(e){function t(t){var n=e.call(this)||this;return Object.defineProperty(n,"clearShadow",{enumerable:!0,configurable:!0,writable:!0,value:t}),n}return Hb(t,e),Object.defineProperty(t.prototype,"colorize",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){e.fill(),this.clearShadow&&(e.shadowColor="",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0)}}),t}(cI),fI=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Hb(t,e),Object.defineProperty(t.prototype,"colorize",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){e.stroke()}}),t}(cI),pI=function(e){function t(t,n,i){var r=e.call(this)||this;return Object.defineProperty(r,"width",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(r,"color",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(r,"lineJoin",{enumerable:!0,configurable:!0,writable:!0,value:i}),r}return Hb(t,e),Object.defineProperty(t.prototype,"colorize",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){e.strokeStyle=void 0!==t?t:this.color,e.lineWidth=this.width,this.lineJoin&&(e.lineJoin=this.lineJoin)}}),t}(cI),gI=function(e){function t(t){var n=e.call(this)||this;return Object.defineProperty(n,"dash",{enumerable:!0,configurable:!0,writable:!0,value:t}),n}return Hb(t,e),Object.defineProperty(t.prototype,"colorize",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){e.setLineDash(this.dash)}}),t}(cI),mI=function(e){function t(t){var n=e.call(this)||this;return Object.defineProperty(n,"dashOffset",{enumerable:!0,configurable:!0,writable:!0,value:t}),n}return Hb(t,e),Object.defineProperty(t.prototype,"colorize",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){e.lineDashOffset=this.dashOffset}}),t}(cI),bI=function(e){function t(t,n,i,r){var o=e.call(this)||this;return Object.defineProperty(o,"x",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(o,"y",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(o,"width",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(o,"height",{enumerable:!0,configurable:!0,writable:!0,value:r}),o}return Hb(t,e),Object.defineProperty(t.prototype,"path",{enumerable:!1,configurable:!0,writable:!0,value:function(e){e.rect(this.x,this.y,this.width,this.height)}}),Object.defineProperty(t.prototype,"addBounds",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this.x,n=this.y,i=t+this.width,r=n+this.height;uI(e,{x:t,y:n}),uI(e,{x:i,y:n}),uI(e,{x:t,y:r}),uI(e,{x:i,y:r})}}),t}(cI),yI=function(e){function t(t,n,i){var r=e.call(this)||this;return Object.defineProperty(r,"x",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(r,"y",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(r,"radius",{enumerable:!0,configurable:!0,writable:!0,value:i}),r}return Hb(t,e),Object.defineProperty(t.prototype,"path",{enumerable:!1,configurable:!0,writable:!0,value:function(e){e.moveTo(this.x+this.radius,this.y),e.arc(this.x,this.y,this.radius,0,2*Math.PI)}}),Object.defineProperty(t.prototype,"addBounds",{enumerable:!1,configurable:!0,writable:!0,value:function(e){uI(e,{x:this.x-this.radius,y:this.y-this.radius}),uI(e,{x:this.x+this.radius,y:this.y+this.radius})}}),t}(cI),vI=function(e){function t(t,n,i,r){var o=e.call(this)||this;return Object.defineProperty(o,"x",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(o,"y",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(o,"radiusX",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(o,"radiusY",{enumerable:!0,configurable:!0,writable:!0,value:r}),o}return Hb(t,e),Object.defineProperty(t.prototype,"path",{enumerable:!1,configurable:!0,writable:!0,value:function(e){e.ellipse(0,0,this.radiusX,this.radiusY,0,0,2*Math.PI)}}),Object.defineProperty(t.prototype,"addBounds",{enumerable:!1,configurable:!0,writable:!0,value:function(e){uI(e,{x:this.x-this.radiusX,y:this.y-this.radiusY}),uI(e,{x:this.x+this.radiusX,y:this.y+this.radiusY})}}),t}(cI),_I=function(e){function t(t,n,i,r,o,a){var s=e.call(this)||this;return Object.defineProperty(s,"cx",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(s,"cy",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(s,"radius",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(s,"startAngle",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(s,"endAngle",{enumerable:!0,configurable:!0,writable:!0,value:o}),Object.defineProperty(s,"anticlockwise",{enumerable:!0,configurable:!0,writable:!0,value:a}),s}return Hb(t,e),Object.defineProperty(t.prototype,"path",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.radius>0&&e.arc(this.cx,this.cy,this.radius,this.startAngle,this.endAngle,this.anticlockwise)}}),Object.defineProperty(t.prototype,"addBounds",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=function(e,t,n,i,r){var o=Number.MAX_VALUE,a=Number.MAX_VALUE,s=-Number.MAX_VALUE,l=-Number.MAX_VALUE,u=[];u.push(qT(r,n)),u.push(qT(r,i));for(var c=Math.min(90*Math.floor(n/90),90*Math.floor(i/90)),h=Math.max(90*Math.ceil(n/90),90*Math.ceil(i/90)),d=c;d<=h;d+=90)d>=n&&d<=i&&u.push(qT(r,d));for(var f=0;f<u.length;f++){var p=u[f];p.x<o&&(o=p.x),p.y<a&&(a=p.y),p.x>s&&(s=p.x),p.y>l&&(l=p.y)}return{left:e+o,top:t+a,right:e+s,bottom:t+l}}(this.cx,this.cy,this.startAngle*HT,this.endAngle*HT,this.radius);uI(e,{x:t.left,y:t.top}),uI(e,{x:t.right,y:t.bottom})}}),t}(cI),wI=function(e){function t(t,n,i,r,o){var a=e.call(this)||this;return Object.defineProperty(a,"x1",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(a,"y1",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(a,"x2",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(a,"y2",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(a,"radius",{enumerable:!0,configurable:!0,writable:!0,value:o}),a}return Hb(t,e),Object.defineProperty(t.prototype,"path",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.radius>0&&e.arcTo(this.x1,this.y1,this.x2,this.y2,this.radius)}}),Object.defineProperty(t.prototype,"addBounds",{enumerable:!1,configurable:!0,writable:!0,value:function(e){}}),t}(cI),xI=function(e){function t(t,n){var i=e.call(this)||this;return Object.defineProperty(i,"x",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(i,"y",{enumerable:!0,configurable:!0,writable:!0,value:n}),i}return Hb(t,e),Object.defineProperty(t.prototype,"path",{enumerable:!1,configurable:!0,writable:!0,value:function(e){e.lineTo(this.x,this.y)}}),Object.defineProperty(t.prototype,"addBounds",{enumerable:!1,configurable:!0,writable:!0,value:function(e){uI(e,{x:this.x,y:this.y})}}),t}(cI),PI=function(e){function t(t,n){var i=e.call(this)||this;return Object.defineProperty(i,"x",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(i,"y",{enumerable:!0,configurable:!0,writable:!0,value:n}),i}return Hb(t,e),Object.defineProperty(t.prototype,"path",{enumerable:!1,configurable:!0,writable:!0,value:function(e){e.moveTo(this.x,this.y)}}),Object.defineProperty(t.prototype,"addBounds",{enumerable:!1,configurable:!0,writable:!0,value:function(e){uI(e,{x:this.x,y:this.y})}}),t}(cI),OI=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Hb(t,e),Object.defineProperty(t.prototype,"path",{enumerable:!1,configurable:!0,writable:!0,value:function(e){e.closePath()}}),t}(cI),kI=function(e){function t(t,n,i,r,o,a){var s=e.call(this)||this;return Object.defineProperty(s,"cpX",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(s,"cpY",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(s,"cpX2",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(s,"cpY2",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(s,"toX",{enumerable:!0,configurable:!0,writable:!0,value:o}),Object.defineProperty(s,"toY",{enumerable:!0,configurable:!0,writable:!0,value:a}),s}return Hb(t,e),Object.defineProperty(t.prototype,"path",{enumerable:!1,configurable:!0,writable:!0,value:function(e){e.bezierCurveTo(this.cpX,this.cpY,this.cpX2,this.cpY2,this.toX,this.toY)}}),Object.defineProperty(t.prototype,"addBounds",{enumerable:!1,configurable:!0,writable:!0,value:function(e){uI(e,{x:this.cpX,y:this.cpY}),uI(e,{x:this.cpX2,y:this.cpY2}),uI(e,{x:this.toX,y:this.toY})}}),t}(cI),TI=function(e){function t(t,n,i,r){var o=e.call(this)||this;return Object.defineProperty(o,"cpX",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(o,"cpY",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(o,"toX",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(o,"toY",{enumerable:!0,configurable:!0,writable:!0,value:r}),o}return Hb(t,e),Object.defineProperty(t.prototype,"path",{enumerable:!1,configurable:!0,writable:!0,value:function(e){e.quadraticCurveTo(this.cpX,this.cpY,this.toX,this.toY)}}),Object.defineProperty(t.prototype,"addBounds",{enumerable:!1,configurable:!0,writable:!0,value:function(e){uI(e,{x:this.cpX,y:this.cpY}),uI(e,{x:this.toX,y:this.toY})}}),t}(cI),SI=function(e){function t(t,n,i,r,o){var a=e.call(this)||this;return Object.defineProperty(a,"color",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(a,"blur",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(a,"offsetX",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(a,"offsetY",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(a,"opacity",{enumerable:!0,configurable:!0,writable:!0,value:o}),a}return Hb(t,e),Object.defineProperty(t.prototype,"colorize",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){this.opacity&&(e.fillStyle=this.color),e.shadowColor=this.color,e.shadowBlur=this.blur,e.shadowOffsetX=this.offsetX,e.shadowOffsetY=this.offsetY}}),t}(cI),II=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return Object.defineProperty(t,"_operations",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(t,"blendMode",{enumerable:!0,configurable:!0,writable:!0,value:iS.NORMAL}),Object.defineProperty(t,"_hasShadows",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(t,"_fillAlpha",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(t,"_strokeAlpha",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),t}return Hb(t,e),Object.defineProperty(t.prototype,"clear",{enumerable:!1,configurable:!0,writable:!0,value:function(){e.prototype.clear.call(this),this._operations.length=0}}),Object.defineProperty(t.prototype,"_pushOp",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this._operations.push(e)}}),Object.defineProperty(t.prototype,"beginFill",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){void 0===t&&(t=1),this._fillAlpha=t,e?e instanceof MT?this._pushOp(new hI(e.toCSS(t))):(this.isMeasured=!0,this._pushOp(new hI(e))):this._pushOp(new hI("rgba(0, 0, 0, "+t+")"))}}),Object.defineProperty(t.prototype,"endFill",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._pushOp(new dI(this._hasShadows))}}),Object.defineProperty(t.prototype,"endStroke",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._pushOp(new fI)}}),Object.defineProperty(t.prototype,"lineStyle",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n,i){void 0===e&&(e=0),void 0===n&&(n=1),this._strokeAlpha=n,t?t instanceof MT?this._pushOp(new pI(e,t.toCSS(n),i)):this._pushOp(new pI(e,t,i)):this._pushOp(new pI(e,"rgba(0, 0, 0, "+n+")",i))}}),Object.defineProperty(t.prototype,"setLineDash",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this._pushOp(new gI(e||[]))}}),Object.defineProperty(t.prototype,"setLineDashOffset",{enumerable:!1,configurable:!0,writable:!0,value:function(e){void 0===e&&(e=0),this._pushOp(new mI(e))}}),Object.defineProperty(t.prototype,"drawRect",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n,i){this._pushOp(new bI(e,t,n,i))}}),Object.defineProperty(t.prototype,"drawCircle",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n){this._pushOp(new yI(e,t,n))}}),Object.defineProperty(t.prototype,"drawEllipse",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n,i){this._pushOp(new vI(e,t,n,i))}}),Object.defineProperty(t.prototype,"arc",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n,i,r,o){void 0===o&&(o=!1),this._pushOp(new _I(e,t,n,i,r,o))}}),Object.defineProperty(t.prototype,"arcTo",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n,i,r){this._pushOp(new wI(e,t,n,i,r))}}),Object.defineProperty(t.prototype,"lineTo",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){this._pushOp(new xI(e,t))}}),Object.defineProperty(t.prototype,"moveTo",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){this._pushOp(new PI(e,t))}}),Object.defineProperty(t.prototype,"bezierCurveTo",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n,i,r,o){this._pushOp(new kI(e,t,n,i,r,o))}}),Object.defineProperty(t.prototype,"quadraticCurveTo",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n,i){this._pushOp(new TI(e,t,n,i))}}),Object.defineProperty(t.prototype,"closePath",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._pushOp(new OI)}}),Object.defineProperty(t.prototype,"shadow",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n,i,r){void 0===t&&(t=0),void 0===n&&(n=0),void 0===i&&(i=0),this._hasShadows=!0,this._pushOp(new SI(r?e.toCSS(r):e.toCSS(this._fillAlpha||this._strokeAlpha),t,n,i))}}),Object.defineProperty(t.prototype,"svgPath",{enumerable:!1,configurable:!0,writable:!0,value:function(e){for(var t,n=this,i=0,r=0,o=null,a=null,s=null,l=null,u=/([MmZzLlHhVvCcSsQqTtAa])([^MmZzLlHhVvCcSsQqTtAa]*)/g,c=/[\u0009\u0020\u000A\u000C\u000D]*([\+\-]?[0-9]*\.?[0-9]+(?:[eE][\+\-]?[0-9]+)?)[\u0009\u0020\u000A\u000C\u000D]*,?/g;null!==(t=u.exec(e));){for(var h=t[1],d=t[2],f=[];null!==(t=c.exec(d));)f.push(+t[1]);switch("S"!==h&&"s"!==h&&"C"!==h&&"c"!==h&&(o=null,a=null),"Q"!==h&&"q"!==h&&"T"!==h&&"t"!==h&&(s=null,l=null),h){case"M":eI(h,f.length,2),i=f[0],r=f[1],this.moveTo(i,r);for(var p=2;p<f.length;p+=2)i=f[p],r=f[p+1],this.lineTo(i,r);break;case"m":eI(h,f.length,2),i+=f[0],r+=f[1],this.moveTo(i,r);for(p=2;p<f.length;p+=2)i+=f[p],r+=f[p+1],this.lineTo(i,r);break;case"L":eI(h,f.length,2);for(p=0;p<f.length;p+=2)i=f[p],r=f[p+1],this.lineTo(i,r);break;case"l":eI(h,f.length,2);for(p=0;p<f.length;p+=2)i+=f[p],r+=f[p+1],this.lineTo(i,r);break;case"H":ZS(h,f.length,1);for(p=0;p<f.length;++p)i=f[p],this.lineTo(i,r);break;case"h":ZS(h,f.length,1);for(p=0;p<f.length;++p)i+=f[p],this.lineTo(i,r);break;case"V":ZS(h,f.length,1);for(p=0;p<f.length;++p)r=f[p],this.lineTo(i,r);break;case"v":ZS(h,f.length,1);for(p=0;p<f.length;++p)r+=f[p],this.lineTo(i,r);break;case"C":eI(h,f.length,6);for(p=0;p<f.length;p+=6){var g=f[p],m=f[p+1];o=f[p+2],a=f[p+3],i=f[p+4],r=f[p+5],this.bezierCurveTo(g,m,o,a,i,r)}break;case"c":eI(h,f.length,6);for(p=0;p<f.length;p+=6){g=f[p]+i,m=f[p+1]+r;o=f[p+2]+i,a=f[p+3]+r,i+=f[p+4],r+=f[p+5],this.bezierCurveTo(g,m,o,a,i,r)}break;case"S":eI(h,f.length,4),null!==o&&null!==a||(o=i,a=r);for(p=0;p<f.length;p+=4){g=2*i-o,m=2*r-a;o=f[p],a=f[p+1],i=f[p+2],r=f[p+3],this.bezierCurveTo(g,m,o,a,i,r)}break;case"s":eI(h,f.length,4),null!==o&&null!==a||(o=i,a=r);for(p=0;p<f.length;p+=4){g=2*i-o,m=2*r-a;o=f[p]+i,a=f[p+1]+r,i+=f[p+2],r+=f[p+3],this.bezierCurveTo(g,m,o,a,i,r)}break;case"Q":eI(h,f.length,4);for(p=0;p<f.length;p+=4)s=f[p],l=f[p+1],i=f[p+2],r=f[p+3],this.quadraticCurveTo(s,l,i,r);break;case"q":eI(h,f.length,4);for(p=0;p<f.length;p+=4)s=f[p]+i,l=f[p+1]+r,i+=f[p+2],r+=f[p+3],this.quadraticCurveTo(s,l,i,r);break;case"T":eI(h,f.length,2),null!==s&&null!==l||(s=i,l=r);for(p=0;p<f.length;p+=2)s=2*i-s,l=2*r-l,i=f[p],r=f[p+1],this.quadraticCurveTo(s,l,i,r);break;case"t":eI(h,f.length,2),null!==s&&null!==l||(s=i,l=r);for(p=0;p<f.length;p+=2)s=2*i-s,l=2*r-l,i+=f[p],r+=f[p+1],this.quadraticCurveTo(s,l,i,r);break;case"A":case"a":var b="a"===h;eI(h,f.length,7);for(p=0;p<f.length;p+=7){var y=f[p+5],v=f[p+6];b&&(y+=i,v+=r),Sk(QS({px:i,py:r,rx:f[p],ry:f[p+1],xAxisRotation:f[p+2],largeArcFlag:tI(f[p+3]),sweepFlag:tI(f[p+4]),cx:y,cy:v}),(function(e){n.bezierCurveTo(e.x1,e.y1,e.x2,e.y2,e.x,e.y),i=e.x,r=e.y}))}break;case"Z":case"z":JS(h,f.length,0),this.closePath()}}}}),Object.defineProperty(t.prototype,"_runPath",{enumerable:!1,configurable:!0,writable:!0,value:function(e){e.beginPath(),Sk(this._operations,(function(t){t.path(e)}))}}),Object.defineProperty(t.prototype,"_render",{enumerable:!1,configurable:!0,writable:!0,value:function(t){e.prototype._render.call(this,t);var n=this._layer||t,i=n.dirty,r=this._isInteractive();if(i||r){var o,a=n.context,s=this._renderer._ghostContext;i&&(a.globalCompositeOperation=this.blendMode,a.beginPath()),r&&(s.beginPath(),o=this._getColorId()),Sk(this._operations,(function(e){i&&(e.path(a),e.colorize(a,void 0)),r&&(e.path(s),e.colorize(s,o))}))}}}),Object.defineProperty(t.prototype,"renderDetached",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if(this.visible){this._setMatrix(),e.save();var t=this.mask;t&&(t._setMatrix(),t._transform(e,1),t._runPath(e),e.clip()),e.globalAlpha=this.compoundAlpha*this.alpha,this._transform(e,1),this.filter&&(e.filter=this.filter),e.globalCompositeOperation=this.blendMode,e.beginPath(),Sk(this._operations,(function(t){t.path(e),t.colorize(e,void 0)})),e.restore()}}}),Object.defineProperty(t.prototype,"_addBounds",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.visible&&this.isMeasured&&Sk(this._operations,(function(t){t.addBounds(e)}))}}),t}(sI),EI=function(e){function t(t,n,i){var r=e.call(this,t)||this;return Object.defineProperty(r,"text",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(r,"style",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(r,"resolution",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(r,"_textInfo",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(r,"_textVisible",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(r,"_originalScale",{enumerable:!0,configurable:!0,writable:!0,value:1}),r.text=n,r.style=i,r}return Hb(t,e),Object.defineProperty(t.prototype,"invalidateBounds",{enumerable:!1,configurable:!0,writable:!0,value:function(){e.prototype.invalidateBounds.call(this),this._textInfo=void 0}}),Object.defineProperty(t.prototype,"_shared",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.style.textAlign&&(e.textAlign=this.style.textAlign),this.style.direction&&(e.direction=this.style.direction),this.style.textBaseline&&(e.textBaseline=this.style.textBaseline)}}),Object.defineProperty(t.prototype,"_prerender",{enumerable:!1,configurable:!0,writable:!0,value:function(t,n,i){void 0===n&&(n=!1),void 0===i&&(i=!1),e.prototype._render.call(this,t);var r=t.context,o=this._renderer._ghostContext,a=this.style,s=this._getFontStyle(void 0,i);r.font=s,this._isInteractive()&&!n&&(o.font=s),a.fill&&(a.fill instanceof MT?r.fillStyle=a.fill.toCSS():r.fillStyle=a.fill),a.shadowColor&&(t.context.shadowColor=a.shadowColor.toCSS(a.shadowOpacity||1)),a.shadowBlur&&(t.context.shadowBlur=a.shadowBlur),a.shadowOffsetX&&(t.context.shadowOffsetX=a.shadowOffsetX),a.shadowOffsetY&&(t.context.shadowOffsetY=a.shadowOffsetY),this._shared(r),this._isInteractive()&&!n&&(o.fillStyle=this._getColorId(),this._shared(o))}}),Object.defineProperty(t.prototype,"_getFontStyle",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){void 0===t&&(t=!1);var n=this.style,i=[];return e&&e.fontVariant?i.push(e.fontVariant):n.fontVariant&&i.push(n.fontVariant),t||(e&&e.fontWeight?i.push(e.fontWeight):n.fontWeight&&i.push(n.fontWeight)),e&&e.fontStyle?i.push(e.fontStyle):n.fontStyle&&i.push(n.fontStyle),e&&e.fontSize?(wk(e.fontSize)&&(e.fontSize=e.fontSize+"px"),i.push(e.fontSize)):n.fontSize&&(wk(n.fontSize)&&(n.fontSize=n.fontSize+"px"),i.push(n.fontSize)),e&&e.fontFamily?i.push(e.fontFamily):n.fontFamily?i.push(n.fontFamily):i.length&&i.push("Arial"),i.join(" ")}}),Object.defineProperty(t.prototype,"_render",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this,n=this._layer||e;if(this._textInfo||this._measure(n),this._textVisible){var i=this._isInteractive(),r=n.context,o=n.dirty,a=this._renderer._ghostContext;r.save(),a.save(),this._prerender(n),Sk(this._textInfo,(function(e,n){Sk(e.textChunks,(function(n,s){if(n.style&&(r.save(),a.save(),r.font=n.style,t._isInteractive()&&(a.font=n.style)),n.fill&&(r.save(),r.fillStyle=n.fill.toCSS()),o&&r.fillText(n.text,n.offsetX,e.offsetY+n.offsetY),"underline"==n.textDecoration||"line-through"==n.textDecoration){var l=1,u=1,c=n.height,h=n.offsetX;switch(t.style.textAlign){case"right":case"end":h-=n.width;break;case"center":h-=n.width/2}if(n.style)switch(PS.getTextStyle(n.style).fontWeight){case"bolder":case"bold":case"700":case"800":case"900":l=2}c&&(u=c/20);var d=void 0;d="line-through"==n.textDecoration?l+e.offsetY+n.offsetY-n.height/2:l+1.5*u+e.offsetY+n.offsetY,r.save(),r.beginPath(),n.fill?r.strokeStyle=n.fill.toCSS():t.style.fill&&t.style.fill instanceof MT&&(r.strokeStyle=t.style.fill.toCSS()),r.lineWidth=l*u,r.moveTo(h,d),r.lineTo(h+n.width,d),r.stroke(),r.restore()}i&&t.interactive&&a.fillText(n.text,n.offsetX,e.offsetY+n.offsetY),n.fill&&r.restore(),n.style&&(r.restore(),a.restore())}))})),r.restore(),a.restore()}}}),Object.defineProperty(t.prototype,"_addBounds",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if(this.visible&&this.isMeasured){var t=this._measure(this.getLayer());uI(e,{x:t.left,y:t.top}),uI(e,{x:t.right,y:t.bottom})}}}),Object.defineProperty(t.prototype,"_measure",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this,n=e.context,i=this._renderer._ghostContext,r="rtl"==this.style.direction;this._textInfo=[];var o=this.style.oversizedBehavior,a=this.style.maxWidth,s=wk(a)&&"truncate"==o,l=wk(a)&&"wrap"==o;n.save(),i.save(),this._prerender(e,!0,!0);var u,c="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789 ",h=this.text.toString().replace(/\r/g,"").split(/\n/),d=!0,f=0,p=0,g=0;Sk(h,(function(e,r){var o;o=""==e?[{type:"value",text:""}]:PS.chunk(e,!1,t.style.ignoreFormatting);for(var h=function(){var e,r={offsetY:g,ascent:0,width:0,height:0,left:0,right:0,textChunks:[]},h=t._measureText(c,n),m=h.actualBoundingBoxAscent+h.actualBoundingBoxDescent;r.height=m,r.ascent=h.actualBoundingBoxAscent;var b,y,v,_=t.style.textDecoration,w=!1,x=!0,P=[];Ek(o,(function(h,f){if("format"==h.type)if("[/]"==h.text)d||(n.restore(),i.restore(),d=!0),b=void 0,u=void 0,y=void 0,_=t.style.textDecoration,v=void 0,e=h.text;else{d||(n.restore(),i.restore());var p=PS.getTextStyle(h.text),g=t._getFontStyle(p);n.save(),i.save(),n.font=g,u=g,e=h.text,p.textDecoration&&(_=p.textDecoration),p.fill&&(b=p.fill),p.width&&(y=mk(p.width)),p.verticalAlign&&(v=p.verticalAlign),d=!1;var m=t._measureText(c,n),O=m.actualBoundingBoxAscent+m.actualBoundingBoxDescent;O>r.height&&(r.height=O),m.actualBoundingBoxAscent>r.ascent&&(r.ascent=m.actualBoundingBoxAscent)}else if("value"==h.type&&!w){var k=t._measureText(h.text,n),T=k.actualBoundingBoxLeft+k.actualBoundingBoxRight;if(s){var S=x||t.style.breakWords||!1,I=t.style.ellipsis||"",E=t._measureText(I,n),D=E.actualBoundingBoxLeft+E.actualBoundingBoxRight;if(r.width+T>a){var j=a-r.width-D;h.text=t._truncateText(n,h.text,j,S),h.text+=I,w=!0}}else if(l&&r.width+T>a){j=a-r.width;var C=t._truncateText(n,h.text,j,!1,x);if(""==C)return t._textVisible=!0,!1;P=o.slice(f+1),mT(C)!=mT(h.text)&&(P.unshift({type:"value",text:h.text.substr(C.length)}),e&&P.unshift({type:"format",text:e})),h.text=mT(C),o=[],w=!0}var A=1,M=1;if(u&&y&&y>T){var R=T/y;switch(t.style.textAlign){case"right":case"end":A=R;break;case"center":A=R,M=R;break;default:M=R}T=y}var N=k.actualBoundingBoxAscent+k.actualBoundingBoxDescent;N>r.height&&(r.height=N),k.actualBoundingBoxAscent>r.ascent&&(r.ascent=k.actualBoundingBoxAscent),r.width+=T,r.left+=k.actualBoundingBoxLeft/A,r.right+=k.actualBoundingBoxRight/M,r.textChunks.push({style:u,fill:b,text:h.text,width:T,height:N,left:k.actualBoundingBoxLeft,right:k.actualBoundingBoxRight,ascent:k.actualBoundingBoxAscent,offsetX:0,offsetY:0,textDecoration:_,verticalAlign:v}),x=!1}return!0})),t.style.lineHeight instanceof Kk?(r.height*=t.style.lineHeight.value,r.ascent*=t.style.lineHeight.value):(r.height*=t.style.lineHeight||1.2,r.ascent*=t.style.lineHeight||1.2),f<r.left&&(f=r.left),p<r.right&&(p=r.right),t._textInfo.push(r),g+=r.height,o=P||[]};o.length>0;)h()})),d||(n.restore(),i.restore()),Sk(this._textInfo,(function(e,n){var i=0;Sk(e.textChunks,(function(n){if(n.offsetX=i+n.left-e.left,n.offsetY+=e.height-e.height*(t.style.baselineRatio||.19),i+=n.width,n.verticalAlign)switch(n.verticalAlign){case"super":n.offsetY-=e.height/2-n.height/2;break;case"sub":n.offsetY+=n.height/2}}))}));var m={left:r?-p:-f,top:0,right:r?f:p,bottom:g};if("none"!==o){var b=this._fitRatio(m);if(b<1)if("fit"==o)wk(this.style.minScale)&&b<this.style.minScale?this._textVisible=!1:(this._originalScale&&1!=this._originalScale||(this._originalScale=this.scale),this.scale=b,this._textVisible=!0);else if("hide"==o)this._textVisible=!1;else{switch(this.style.textAlign){case"right":case"end":m.left=-a,m.right=0;break;case"center":m.left=-a/2,m.right=a/2;break;default:m.left=0,m.right=a}this.scale=this._originalScale||1,this._originalScale=void 0,this._textVisible=!0}else this.scale=this._originalScale||1,this._originalScale=void 0,this._textVisible=!0}return n.restore(),i.restore(),m}}),Object.defineProperty(t.prototype,"_fitRatio",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this.style.maxWidth,n=this.style.maxHeight;if(!wk(t)&&!wk(n))return 1;var i=e.right-e.left,r=e.bottom-e.top;return Math.min(t/i||1,n/r||1)}}),Object.defineProperty(t.prototype,"_truncateText",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n,i,r){var o;void 0===i&&(i=!1),void 0===r&&(r=!0);do{if(i)t=t.slice(0,-1);else{var a=t.replace(/[^,;:!?\\\/\s]+[,;:!?\\\/\s]*$/g,"");""==a&&r?i=!0:t=a}var s=this._measureText(t,e);o=s.actualBoundingBoxLeft+s.actualBoundingBoxRight}while(o>n&&""!=t);return t}}),Object.defineProperty(t.prototype,"_measureText",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var n=t.measureText(e),i={};if(null==n.actualBoundingBoxAscent){var r=document.createElement("div");r.innerText=e,r.style.visibility="hidden",r.style.position="absolute",r.style.top="-1000000px;",r.style.fontFamily=this.style.fontFamily||"",r.style.fontSize=this.style.fontSize+"",document.body.appendChild(r);var o=r.getBoundingClientRect();document.body.removeChild(r);var a=o.height,s=n.width;i={actualBoundingBoxAscent:a,actualBoundingBoxDescent:0,actualBoundingBoxLeft:0,actualBoundingBoxRight:s,fontBoundingBoxAscent:a,fontBoundingBoxDescent:0,width:s}}else i={actualBoundingBoxAscent:n.actualBoundingBoxAscent,actualBoundingBoxDescent:n.actualBoundingBoxDescent,actualBoundingBoxLeft:n.actualBoundingBoxLeft,actualBoundingBoxRight:n.actualBoundingBoxRight,fontBoundingBoxAscent:n.actualBoundingBoxAscent,fontBoundingBoxDescent:n.actualBoundingBoxDescent,width:n.width};var l=n.width;switch(this.style.textAlign){case"right":case"end":i.actualBoundingBoxLeft=l,i.actualBoundingBoxRight=0;break;case"center":i.actualBoundingBoxLeft=l/2,i.actualBoundingBoxRight=l/2;break;default:i.actualBoundingBoxLeft=0,i.actualBoundingBoxRight=l}return i}}),t}(sI),DI=function(){Object.defineProperty(this,"fill",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"textAlign",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fontFamily",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fontWeight",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fontVariant",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"textDecoration",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shadowColor",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shadowBlur",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shadowOffsetX",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shadowOffsetY",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shadowOpacity",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"lineHeight",{enumerable:!0,configurable:!0,writable:!0,value:Qk(120)}),Object.defineProperty(this,"baselineRatio",{enumerable:!0,configurable:!0,writable:!0,value:.19}),Object.defineProperty(this,"direction",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"textBaseline",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"oversizedBehavior",{enumerable:!0,configurable:!0,writable:!0,value:"none"}),Object.defineProperty(this,"breakWords",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ellipsis",{enumerable:!0,configurable:!0,writable:!0,value:"…"}),Object.defineProperty(this,"maxWidth",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxHeight",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"minScale",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"ignoreFormatting",{enumerable:!0,configurable:!0,writable:!0,value:!1})},jI=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return Object.defineProperty(t,"textType",{enumerable:!0,configurable:!0,writable:!0,value:"circular"}),Object.defineProperty(t,"radius",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(t,"startAngle",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(t,"inside",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(t,"orientation",{enumerable:!0,configurable:!0,writable:!0,value:"auto"}),Object.defineProperty(t,"kerning",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(t,"_textReversed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),t}return Hb(t,e),Object.defineProperty(t.prototype,"_render",{enumerable:!1,configurable:!0,writable:!0,value:function(t){if("circular"===this.textType)this._renderCircular(t);else e.prototype._render.call(this,t)}}),Object.defineProperty(t.prototype,"_renderCircular",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this._layer||e;this._prerender(t);var n=this._isInteractive(),i=t.context,r=t.dirty,o=this._renderer._ghostContext;i.save(),n&&o.save();var a,s=this.radius||0,l=this.startAngle||0,u=0,c=this.orientation,h="auto"==c?"auto":"inward"==c,d=this.inside,f=this.style.textAlign||"left",p=this.kerning||0,g="left"==f?1:-1,m=!this._textReversed;if(this._textInfo||this._measure(t),"auto"==h){var b=0,y=0;Sk(this._textInfo,(function(e,t){var n=l+e.width/(s-e.height)/2*-g;n>b&&(b=n)})),a=y="left"==f?(b+u/2)*HT:"right"==f?(b-u/2)*HT:l*HT,(a%=360)<0&&(a+=360),h=(y=a)>=270||y<=90}1==h&&m&&(this._textInfo.reverse(),this._textReversed=!0),Sk(this._textInfo,(function(e,t){var a=e.height;d||(s+=a),(-1==g&&h||1==g&&!h)&&m&&e.textChunks.reverse();var c=l;u=0,"center"==f&&(c+=e.width/(s-a)/2*-g,u=c-l),c+=Math.PI*(h?0:1),i.save(),n&&o.save(),i.rotate(c),n&&o.rotate(c);var b=0;Sk(e.textChunks,(function(e,t){var l=e.text,u=e.width;b=u/2/(s-a)*g,i.rotate(b),n&&o.rotate(b),e.style&&(i.save(),o.save(),i.font=e.style,n&&(o.font=e.style)),e.fill&&(i.save(),i.fillStyle=e.fill.toCSS()),i.textBaseline="middle",i.textAlign="center",n&&(o.textBaseline="middle",o.textAlign="center"),r&&i.fillText(l,0,(h?1:-1)*(0-s+a/2)),n&&o.fillText(l,0,(h?1:-1)*(0-s+a/2)),e.fill&&i.restore(),e.style&&(i.restore(),o.restore()),b=(u/2+p)/(s-a)*g,i.rotate(b),n&&o.rotate(b)})),i.restore(),n&&o.restore(),d&&(s-=a)})),i.restore(),n&&o.restore()}}),Object.defineProperty(t.prototype,"_measure",{enumerable:!1,configurable:!0,writable:!0,value:function(t){return"circular"===this.textType?this._measureCircular(t):e.prototype._measure.call(this,t)}}),Object.defineProperty(t.prototype,"_measureCircular",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this,n=e.context,i=this._renderer._ghostContext,r="rtl"==this.style.direction;this._textInfo=[],this._textReversed=!1,n.save(),i.save(),this._prerender(e,!0);var o=this.text.toString().replace(/\r/g,"").split(/\n/),a=!0,s=0;return Sk(o,(function(e,o){var l,u,c,h=PS.chunk(e,!1,t.style.ignoreFormatting),d={offsetY:s,ascent:0,width:0,height:0,left:0,right:0,textChunks:[]};Sk(h,(function(e,o){if("format"==e.type)if("[/]"==e.text)a||(n.restore(),i.restore(),a=!0),u=void 0,l=void 0,c=void 0;else{var s=PS.getTextStyle(e.text),h=t._getFontStyle(s);n.save(),i.save(),n.font=h,l=h,s.fill&&(u=s.fill),s.width&&(c=mk(s.width)),a=!1}else if("value"==e.type){var f=e.text.match(/./gu)||[];r&&f.reverse();for(var p=0;p<f.length;p++){var g=f[p],m=t._measureText(g,n),b=m.width;l&&c&&c>b&&(b=c);var y=m.actualBoundingBoxAscent+m.actualBoundingBoxDescent;if(y>d.height&&(d.height=y),m.actualBoundingBoxAscent>d.ascent&&(d.ascent=m.actualBoundingBoxAscent),d.width+=b,d.left+=m.actualBoundingBoxLeft,d.right+=m.actualBoundingBoxRight,d.textChunks.push({style:l,fill:u,text:g,width:b,height:y+m.actualBoundingBoxDescent,left:m.actualBoundingBoxLeft,right:m.actualBoundingBoxRight,ascent:m.actualBoundingBoxAscent,offsetX:0,offsetY:y,textDecoration:void 0}),r)break}}})),t.style.lineHeight instanceof Kk?d.height*=t.style.lineHeight.value:d.height*=t.style.lineHeight||1.2,t._textInfo.push(d),s+=d.height})),a||(n.restore(),i.restore()),Sk(this._textInfo,(function(e){Sk(e.textChunks,(function(t){t.offsetY+=Math.round((e.height-t.height+(e.ascent-t.ascent))/2)}))})),n.restore(),i.restore(),{left:0,top:0,right:0,bottom:0}}}),t}(EI),CI=function(e){function t(t,n){var i=e.call(this,t)||this;return Object.defineProperty(i,"width",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"height",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"image",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"tainted",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"shadowColor",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"shadowBlur",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"shadowOffsetX",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"shadowOffsetY",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"shadowOpacity",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"_imageMask",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),i.image=n,i}return Hb(t,e),Object.defineProperty(t.prototype,"_dispose",{enumerable:!1,configurable:!0,writable:!0,value:function(){e.prototype._dispose.call(this),this._imageMask&&oI(this._imageMask)}}),Object.defineProperty(t.prototype,"getLocalBounds",{enumerable:!1,configurable:!0,writable:!0,value:function(){if(!this._localBounds){var e=0,t=0;this.width&&(e=this.width),this.height&&(t=this.height),this._localBounds={left:0,top:0,right:e,bottom:t},this._addBounds(this._localBounds)}return this._localBounds}}),Object.defineProperty(t.prototype,"_render",{enumerable:!1,configurable:!0,writable:!0,value:function(t){if(e.prototype._render.call(this,t),this.image){var n=this._layer||t;if(void 0===this.tainted&&(this.tainted=rI(this.image),n.tainted=!0),this.tainted&&this._renderer._omitTainted)return;if(n.dirty){this.shadowColor&&(n.context.shadowColor=this.shadowColor.toCSS(this.shadowOpacity||1)),this.shadowBlur&&(n.context.shadowBlur=this.shadowBlur),this.shadowOffsetX&&(n.context.shadowOffsetX=this.shadowOffsetX),this.shadowOffsetY&&(n.context.shadowOffsetY=this.shadowOffsetY);var i=this.width||this.image.naturalWidth,r=this.height||this.image.naturalHeight;n.context.drawImage(this.image,0,0,i,r)}if(this.interactive&&this._isInteractive()){var o=this._getMask(this.image);this._renderer._ghostContext.drawImage(o,0,0)}}}}),Object.defineProperty(t.prototype,"clear",{enumerable:!1,configurable:!0,writable:!0,value:function(){e.prototype.clear.call(this),this.image=void 0,this._imageMask=void 0}}),Object.defineProperty(t.prototype,"_getMask",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if(void 0===this._imageMask){var t=this.width||e.naturalWidth,n=this.height||e.naturalHeight,i=document.createElement("canvas");i.width=t,i.height=n;var r=i.getContext("2d");r.imageSmoothingEnabled=!1,r.fillStyle=this._getColorId(),r.fillRect(0,0,t,n),rI(e)||(r.globalCompositeOperation="destination-in",r.drawImage(e,0,0,t,n)),this._imageMask=i}return this._imageMask}}),t}(sI),AI=function(e,t,n){Object.defineProperty(this,"event",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"point",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"bbox",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"simulated",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"native",{enumerable:!0,configurable:!0,writable:!0,value:!0}),aT("touchevents")&&e instanceof Touch?this.id=e.identifier:this.id=null},MI=function(e){function t(t){var n=e.call(this)||this;if(Object.defineProperty(n,"view",{enumerable:!0,configurable:!0,writable:!0,value:document.createElement("div")}),Object.defineProperty(n,"_layerDom",{enumerable:!0,configurable:!0,writable:!0,value:document.createElement("div")}),Object.defineProperty(n,"layers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(n,"_dirtyLayers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(n,"defaultLayer",{enumerable:!0,configurable:!0,writable:!0,value:n.getLayer(0)}),Object.defineProperty(n,"_ghostView",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(n,"_ghostContext",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(n,"_patternCanvas",{enumerable:!0,configurable:!0,writable:!0,value:document.createElement("canvas")}),Object.defineProperty(n,"_patternContext",{enumerable:!0,configurable:!0,writable:!0,value:n._patternCanvas.getContext("2d")}),Object.defineProperty(n,"_width",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(n,"_height",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(n,"_clientWidth",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(n,"_clientHeight",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(n,"resolution",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(n,"interactionsEnabled",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(n,"_listeners",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(n,"_events",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(n,"_colorId",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(n,"_colorMap",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(n,"_forceInteractive",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(n,"_omitTainted",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(n,"_hovering",{enumerable:!0,configurable:!0,writable:!0,value:new Set}),Object.defineProperty(n,"_dragging",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(n,"_mousedown",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(n,"_lastPointerMoveEvent",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(n,"tapToActivate",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(n,"tapToActivateTimeout",{enumerable:!0,configurable:!0,writable:!0,value:3e3}),Object.defineProperty(n,"_touchActive",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(n,"_touchActiveTimeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),n.resolution=null==t?window.devicePixelRatio:t,n.view.style.position="absolute",n.view.appendChild(n._layerDom),n._disposers.push(new Vk((function(){iT(n._events,(function(e,t){t.disposer.dispose()})),Sk(n.layers,(function(e){oI(e.view),e.exportableView&&oI(e.exportableView)})),oI(n._ghostView),oI(n._patternCanvas)}))),n._ghostView=document.createElement("canvas"),n._ghostContext=n._ghostView.getContext("2d",{alpha:!1}),n._ghostContext.imageSmoothingEnabled=!1,n._ghostView.style.position="absolute",n._ghostView.style.top="0px",n._ghostView.style.left="0px",n._disposers.push(oT(n._ghostView,"click",(function(e){var t=n.getEvent(e),i=n._getHitTarget(t.point,t.bbox);console.debug(i)}))),n._disposers.push(oT(window,"resize",(function(e){null==t&&(n.resolution=window.devicePixelRatio)}))),aT("touchevents")){var i=function(e){0!==n._dragging.length&&Ek(n._dragging,(function(t){return!t.value.shouldCancelTouch()||(e.preventDefault(),!1)})),n._touchActiveTimeout&&n._delayTouchDeactivate()};n._disposers.push(oT(window,"touchstart",i,{passive:!1})),n._disposers.push(oT(n.view,"touchstart",i,{passive:!1})),n._disposers.push(oT(n.view,"touchmove",(function(){n._touchActiveTimeout&&n._delayTouchDeactivate()}),{passive:!0})),n._disposers.push(oT(window,"click",(function(e){n._touchActive=!1}),{passive:!0})),n._disposers.push(oT(n.view,"click",(function(e){window.setTimeout((function(){n._touchActive=!0,n._delayTouchDeactivate()}),100)}),{passive:!0}))}return aT("wheelevents")&&n._disposers.push(oT(n.view,"wheel",(function(e){var t=!1;n._hovering.forEach((function(e){if(e.wheelable)return t=!0,!1})),t&&e.preventDefault()}),{passive:!1})),n}return Hb(t,e),Object.defineProperty(t.prototype,"_delayTouchDeactivate",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this;this._touchActiveTimeout&&clearTimeout(this._touchActiveTimeout),this.tapToActivateTimeout>0&&(this._touchActiveTimeout=window.setTimeout((function(){e._touchActive=!1}),this.tapToActivateTimeout))}}),Object.defineProperty(t.prototype,"debugGhostView",{get:function(){return!!this._ghostView.parentNode},set:function(e){e?this._ghostView.parentNode||this.view.appendChild(this._ghostView):this._ghostView.parentNode&&this._ghostView.parentNode.removeChild(this._ghostView)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"createLinearGradient",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n,i){return this.defaultLayer.context.createLinearGradient(e,t,n,i)}}),Object.defineProperty(t.prototype,"createRadialGradient",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n,i,r,o){return this.defaultLayer.context.createRadialGradient(e,t,n,i,r,o)}}),Object.defineProperty(t.prototype,"createPattern",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n,i,r){return this._patternCanvas.width=i,this._patternCanvas.height=r,this._patternContext.clearRect(0,0,i,r),t.renderDetached(this._patternContext),e.renderDetached(this._patternContext),this._patternContext.createPattern(this._patternCanvas,n)}}),Object.defineProperty(t.prototype,"makeContainer",{enumerable:!1,configurable:!0,writable:!0,value:function(){return new lI(this)}}),Object.defineProperty(t.prototype,"makeGraphics",{enumerable:!1,configurable:!0,writable:!0,value:function(){return new II(this)}}),Object.defineProperty(t.prototype,"makeText",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return new EI(this,e,t)}}),Object.defineProperty(t.prototype,"makeTextStyle",{enumerable:!1,configurable:!0,writable:!0,value:function(){return new DI}}),Object.defineProperty(t.prototype,"makeRadialText",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return new jI(this,e,t)}}),Object.defineProperty(t.prototype,"makePicture",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return new CI(this,e)}}),Object.defineProperty(t.prototype,"resize",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var n=this;this._clientWidth=e,this._clientHeight=t,this._width=Math.floor(e*this.resolution),this._height=Math.floor(t*this.resolution),Sk(this.layers,(function(i){i&&(i.dirty=!0,null!=i.width?(i.view.width=i.width,i.view.style.width=i.width+"px"):(i.view.width=n._width,i.view.style.width=e+"px"),null!=i.height?(i.view.height=i.height,i.view.style.height=i.height+"px"):(i.view.height=n._height,i.view.style.height=t+"px"))})),this._ghostView.width=this._width,this._ghostView.height=this._height,this._ghostView.style.width=e+"px",this._ghostView.style.height=t+"px",this.view.style.width=e+"px",this.view.style.height=t+"px"}}),Object.defineProperty(t.prototype,"createDetachedLayer",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=document.createElement("canvas"),t=e.getContext("2d"),n={view:e,context:t,order:0,visible:!0,width:void 0,height:void 0,dirty:!0,tainted:!1};return e.style.position="absolute",e.style.top="0px",e.style.left="0px",n}}),Object.defineProperty(t.prototype,"getLayerByOrder",{enumerable:!1,configurable:!0,writable:!0,value:function(e){for(var t=this.layers,n=t.length,i=0;i<n;i++){var r=t[i];if(r.order==e)return r}}}),Object.defineProperty(t.prototype,"getLayer",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){void 0===t&&(t=!0);var n=this.getLayerByOrder(e);if(n)return n;var i=this.createDetachedLayer();i.order=e,i.visible=t,i.visible&&this._width&&(i.view.width=this._width,i.view.style.width=this._clientWidth+"px",i.view.height=this._height,i.view.style.height=this._clientHeight+"px");var r=this.layers;r.push(i),r.sort((function(e,t){return e.order>t.order?1:e.order<t.order?-1:0}));for(var o,a=r.length,s=kk(r,i)+1;s<a;s++)if(r[s].visible){o=r[s];break}return i.visible&&(void 0===o?this._layerDom.appendChild(i.view):this._layerDom.insertBefore(i.view,o.view)),i}}),Object.defineProperty(t.prototype,"render",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this;if(this._dirtyLayers.length=0,Sk(this.layers,(function(e){if(e&&e.dirty&&e.visible){var n=e.context;t._dirtyLayers.push(e),n.save(),n.clearRect(0,0,t._width,t._height)}})),this._ghostContext.save(),this._ghostContext.fillStyle="#000",this._ghostContext.fillRect(0,0,this._width,this._height),e.render(this.defaultLayer),this._ghostContext.restore(),Sk(this.layers,(function(e){if(e){var t=e.context;t.beginPath(),t.moveTo(0,0),t.stroke()}})),Sk(this._dirtyLayers,(function(e){e.context.restore(),e.dirty=!1})),this._hovering.size&&this._lastPointerMoveEvent){var n=this._lastPointerMoveEvent.native;Sk(this._lastPointerMoveEvent.events,(function(e){t._dispatchGlobalMousemove(e,n)}))}}}),Object.defineProperty(t.prototype,"paintId",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=function(e){for(var t=[0,0,0],n=0;n<24;n++)t[n%3]<<=1,t[n%3]|=1&e,e>>=1;return(0|t[2])+(t[1]<<8)+(t[0]<<16)}(++this._colorId),n=MT.fromHex(t).toCSS();return this._colorMap[n]=e,n}}),Object.defineProperty(t.prototype,"_removeObject",{enumerable:!1,configurable:!0,writable:!0,value:function(e){void 0!==e._colorId&&delete this._colorMap[e._colorId]}}),Object.defineProperty(t.prototype,"getEvent",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){void 0===t&&(t=!0);var n=t?this.view.getBoundingClientRect():new DOMRect(0,0,0,0);return new AI(e,e.clientX||e.clientY?{x:e.clientX-(e.clientX?n.left:0),y:e.clientY-(e.clientY?n.top:0)}:{x:0,y:0},n)}}),Object.defineProperty(t.prototype,"_getHitTarget",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){if(!(e.x<0||e.x>t.width||e.y<0||e.y>t.height)){var n=this._ghostContext.getImageData(Math.round(e.x/t.width*this._width),Math.round(e.y/t.height*this._height),1,1);if(0===n.data[0]&&0===n.data[1]&&0===n.data[2])return!1;var i=MT.fromRGB(n.data[0],n.data[1],n.data[2]).toCSS();return this._colorMap[i]}}}),Object.defineProperty(t.prototype,"_withEvents",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var n=this._events[e];if(void 0!==n){n.dispatching=!0;try{t(n)}finally{n.dispatching=!1,n.cleanup&&(n.cleanup=!1,Fk(n.callbacks,(function(e){return!e.disposed})),0===n.callbacks.length&&(n.disposer.dispose(),delete this._events[e]))}}}}),Object.defineProperty(t.prototype,"_dispatchEventAll",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){this.interactionsEnabled&&this._withEvents(e,(function(e){Sk(e.callbacks,(function(e){e.disposed||e.callback.call(e.context,t)}))}))}}),Object.defineProperty(t.prototype,"_dispatchEvent",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n){if(!this.interactionsEnabled)return!1;var i=!1;return this._withEvents(e,(function(e){Sk(e.callbacks,(function(e){e.disposed||e.object!==t||(e.callback.call(e.context,n),i=!0)}))})),i}}),Object.defineProperty(t.prototype,"_dispatchMousedown",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this,n=e.button;if(0==n||2==n||1==n||void 0===n){var i=this.getEvent(e),r=this._getHitTarget(i.point,i.bbox);if(r){var o=i.id,a=!1;nI(r,(function(e){var n={id:o,value:e};if(t._mousedown.push(n),!a&&t._dispatchEvent("pointerdown",e,i)){a=!0;var r=t._dragging.some((function(t){return t.value===e&&t.id===o}));r||t._dragging.push(n)}return!0}))}}}}),Object.defineProperty(t.prototype,"_dispatchGlobalMousemove",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var n=this,i=this.getEvent(e),r=this._getHitTarget(i.point,i.bbox);i.native=t,r?(this._hovering.forEach((function(e){e.contains(r)||(n._hovering.delete(e),e.cursorOverStyle&&cT(document.body,"cursor",e._replacedCursorStyle),n._dispatchEvent("pointerout",e,i))})),i.native&&nI(r,(function(e){var t,r;return n._hovering.has(e)||(n._hovering.add(e),e.cursorOverStyle&&(e._replacedCursorStyle=(t=document.body,r="cursor",t.style[r]),cT(document.body,"cursor",e.cursorOverStyle)),n._dispatchEvent("pointerover",e,i)),!0}))):(this._hovering.forEach((function(e){e.cursorOverStyle&&cT(document.body,"cursor",e._replacedCursorStyle),n._dispatchEvent("pointerout",e,i)})),this._hovering.clear()),this._dispatchEventAll("globalpointermove",i)}}),Object.defineProperty(t.prototype,"_dispatchGlobalMouseup",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var n=this.getEvent(e);n.native=t,this._dispatchEventAll("globalpointerup",n)}}),Object.defineProperty(t.prototype,"_dispatchDragMove",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this;if(0!==this._dragging.length){var n=this.getEvent(e),i=n.id;this._dragging.forEach((function(e){e.id===i&&t._dispatchEvent("pointermove",e.value,n)}))}}}),Object.defineProperty(t.prototype,"_dispatchDragEnd",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t,n=this,i=e.button;if(0==i||void 0===i)t="click";else if(2==i)t="rightclick";else{if(1!=i)return;t="middleclick"}var r=this.getEvent(e),o=r.id;if(0!==this._mousedown.length){var a=this._getHitTarget(r.point,r.bbox);a&&this._mousedown.forEach((function(e){e.id===o&&e.value.contains(a)&&n._dispatchEvent(t,e.value,r)})),this._mousedown.length=0}0!==this._dragging.length&&(this._dragging.forEach((function(e){e.id===o&&n._dispatchEvent("pointerup",e.value,r)})),this._dragging.length=0)}}),Object.defineProperty(t.prototype,"_dispatchDoubleClick",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this,n=this.getEvent(e),i=this._getHitTarget(n.point,n.bbox);i&&nI(i,(function(e){return!t._dispatchEvent("dblclick",e,n)}))}}),Object.defineProperty(t.prototype,"_dispatchWheel",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this,n=this.getEvent(e),i=this._getHitTarget(n.point,n.bbox);i&&nI(i,(function(e){return!t._dispatchEvent("wheel",e,n)}))}}),Object.defineProperty(t.prototype,"_makeSharedEvent",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var n=this;if(void 0===this._listeners[e]){var i=t();this._listeners[e]=new zk((function(){delete n._listeners[e],i.dispose()}))}return this._listeners[e].increment()}}),Object.defineProperty(t.prototype,"_onPointerEvent",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var n=!1,i=null;function r(){i=null,n=!1}return new Hk([new Vk((function(){null!==i&&clearTimeout(i),r()})),oT(this.view,lT(e),(function(e){n=!0,null!==i&&clearTimeout(i),i=window.setTimeout(r,0)})),iI(window,e,(function(e){null!==i&&(clearTimeout(i),i=null),t(e,n),n=!1}))])}}),Object.defineProperty(t.prototype,"_initEvent",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this;switch(e){case"globalpointermove":case"pointerover":case"pointerout":return this._makeSharedEvent("pointermove",(function(){var e=function(e,n){t._lastPointerMoveEvent={events:e,native:n},Sk(e,(function(e){t._dispatchGlobalMousemove(e,n)}))};return new Hk([t._onPointerEvent("pointerdown",e),t._onPointerEvent("pointermove",e)])}));case"globalpointerup":return this._makeSharedEvent("pointerup",(function(){var e=t._onPointerEvent("pointerup",(function(e,n){Sk(e,(function(e){t._dispatchGlobalMouseup(e,n)})),t._lastPointerMoveEvent={events:e,native:n}})),n=t._onPointerEvent("pointercancel",(function(e,n){Sk(e,(function(e){t._dispatchGlobalMouseup(e,n)})),t._lastPointerMoveEvent={events:e,native:n}}));return new Vk((function(){e.dispose(),n.dispose()}))}));case"click":case"rightclick":case"middleclick":case"pointerdown":case"pointermove":case"pointerup":return this._makeSharedEvent("pointerdown",(function(){var e=iI(t.view,"pointerdown",(function(e){Sk(e,(function(e){t._dispatchMousedown(e)}))})),n=t._onPointerEvent("pointermove",(function(e){Sk(e,(function(e){t._dispatchDragMove(e)}))})),i=t._onPointerEvent("pointerup",(function(e){Sk(e,(function(e){t._dispatchDragEnd(e)}))})),r=t._onPointerEvent("pointercancel",(function(e){Sk(e,(function(e){t._dispatchDragEnd(e)}))}));return new Vk((function(){e.dispose(),n.dispose(),i.dispose(),r.dispose()}))}));case"dblclick":return this._makeSharedEvent("dblclick",(function(){return t._onPointerEvent("dblclick",(function(e){Sk(e,(function(e){t._dispatchDoubleClick(e)}))}))}));case"wheel":return this._makeSharedEvent("wheel",(function(){return oT(window,lT("wheel"),(function(e){t._dispatchWheel(e)}),{passive:!1})}))}}}),Object.defineProperty(t.prototype,"_addEvent",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n,i){var r=this,o=this._events[t];void 0===o&&(o=this._events[t]={disposer:this._initEvent(t),callbacks:[],dispatching:!1,cleanup:!1});var a={object:e,context:i,callback:n,disposed:!1};return o.callbacks.push(a),new Vk((function(){a.disposed=!0,o.dispatching?o.cleanup=!0:(jk(o.callbacks,a),0===o.callbacks.length&&(o.disposer.dispose(),delete r._events[t]))}))}}),Object.defineProperty(t.prototype,"getCanvas",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var n=this;this.render(e),t||(t={});var i,r,o=this.resolution;t.minWidth&&t.minWidth>this._width&&((i=t.minWidth/this._width)>o&&(o=i*this.resolution));t.minHeight&&t.minHeight>this._height&&((i=t.minHeight/this._height)>o&&(o=i*this.resolution));t.maxWidth&&t.maxWidth<this._width&&((r=t.maxWidth/this._width)<o&&(o=r*this.resolution));t.maxHeight&&t.maxHeight>this._height&&((r=t.maxHeight/this._height)<o&&(o=r*this.resolution));t.maintainPixelRatio&&(o/=this.resolution);var a=[],s=!1,l=this._width,u=this._height,c=document.createElement("canvas");o!=this.resolution&&(s=!0,l=this._width*o/this.resolution,u=this._height*o/this.resolution),c.width=l,c.height=u,c.style.position="fixed",c.style.top="-10000px",this.view.appendChild(c),a.push(c);var h=c.getContext("2d"),d=0,f=0,p=!1;return Sk(this.layers,(function(e){e&&e.visible&&(e.tainted||s)&&(p=!0,e.exportableView=e.view,e.exportableContext=e.context,e.view=document.createElement("canvas"),n.view.style.position="fixed",n.view.style.top="-10000px",n.view.appendChild(e.view),a.push(e.view),e.view.width=l,e.view.height=u,e.context=e.view.getContext("2d"),e.dirty=!0,e.scale=o)})),p&&(this._omitTainted=!0,this.render(e),this._omitTainted=!1),Sk(this.layers,(function(e){e&&e.visible&&(h.drawImage(e.view,0,0),e.exportableView&&(e.view=e.exportableView,e.exportableView=void 0),e.exportableContext&&(e.context=e.exportableContext,e.exportableContext=void 0),d<e.view.clientWidth&&(d=e.view.clientWidth),f<e.view.clientHeight&&(f=e.view.clientHeight),e.scale=void 0)})),c.style.width=d+"px",c.style.height=f+"px",Sk(a,(function(e){n.view.style.position="",n.view.style.top="",n.view.removeChild(e)})),c}}),t}(Uk);function RI(e,t){null==e?requestAnimationFrame(t):setTimeout((function(){requestAnimationFrame(t)}),1e3/e)}var NI=function(){function e(e,t,n){if(void 0===t&&(t={}),Object.defineProperty(this,"dom",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_inner",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_isDirty",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_isDirtyParents",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_dirty",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_dirtyParents",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_dirtyBounds",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_dirtyPositions",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_ticker",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"_tickers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"events",{enumerable:!0,configurable:!0,writable:!0,value:new $k}),Object.defineProperty(this,"animationTime",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"_animations",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_renderer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_rootContainer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tooltipContainer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_tooltip",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"language",{enumerable:!0,configurable:!0,writable:!0,value:US.new(this,{})}),Object.defineProperty(this,"locale",{enumerable:!0,configurable:!0,writable:!0,value:VS}),Object.defineProperty(this,"utc",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"timezone",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fps",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"numberFormatter",{enumerable:!0,configurable:!0,writable:!0,value:LS.new(this,{})}),Object.defineProperty(this,"dateFormatter",{enumerable:!0,configurable:!0,writable:!0,value:FS.new(this,{})}),Object.defineProperty(this,"durationFormatter",{enumerable:!0,configurable:!0,writable:!0,value:BS.new(this,{})}),Object.defineProperty(this,"tabindex",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_tabindexes",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_focusElementDirty",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_focusElementContainer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_focusedSprite",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_isShift",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_keyboardDragPoint",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_tooltipElementContainer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_readerAlertElement",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_logo",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"nonce",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"interfaceColors",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"verticalLayout",{enumerable:!0,configurable:!0,writable:!0,value:_S.new(this,{})}),Object.defineProperty(this,"horizontalLayout",{enumerable:!0,configurable:!0,writable:!0,value:vS.new(this,{})}),Object.defineProperty(this,"gridLayout",{enumerable:!0,configurable:!0,writable:!0,value:wS.new(this,{})}),Object.defineProperty(this,"autoResize",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"_fontHash",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(this,"_isDisposed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_disposers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_resizeSensorDisposer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_tooltips",{enumerable:!0,configurable:!0,writable:!0,value:[]}),!n)throw new Error("You cannot use `new Class()`, instead use `Class.new()`");var i,r;if(null==t.useSafeResolution&&(t.useSafeResolution=!0),t.useSafeResolution&&(i=fT()),this._renderer=new MI(i),r=e instanceof HTMLElement?e:document.getElementById(e),Sk(ZT.rootElements,(function(e){if(e.dom===r)throw new Error("You cannot have multiple Roots on the same DOM node")})),this.interfaceColors=AS.new(this,{}),null===r)throw new Error("Could not find HTML element with id `"+e+"`");this.dom=r;var o=document.createElement("div");o.style.position="relative",o.style.height="100%",r.appendChild(o),this._inner=o,this._updateComputedStyles(),ZT.rootElements.push(this)}return Object.defineProperty(e,"new",{enumerable:!1,configurable:!0,writable:!0,value:function(t,n){var i=new e(t,n,!0);return i._init(),i}}),Object.defineProperty(e.prototype,"moveDOM",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t;if(t=e instanceof HTMLElement?e:document.getElementById(e)){for(;this.dom.childNodes.length>0;)t.appendChild(this.dom.childNodes[0]);this.dom=t,this._initResizeSensor(),this.resize()}}}),Object.defineProperty(e.prototype,"_handleLogo",{enumerable:!1,configurable:!0,writable:!0,value:function(){if(this._logo){var e=this.dom.offsetWidth,t=this.dom.offsetHeight;e<=150||t<=60?this._logo.hide():this._logo.show()}}}),Object.defineProperty(e.prototype,"_showBranding",{enumerable:!1,configurable:!0,writable:!0,value:function(){if(!this._logo){var e=this.tooltipContainer.children.push(xS.new(this,{interactive:!0,interactiveChildren:!1,position:"absolute",setStateOnChildren:!0,paddingTop:9,paddingRight:9,paddingBottom:9,paddingLeft:9,scale:.6,y:Qk(100),centerY:Zk,tooltipText:"Created using amCharts 5",tooltipX:Zk,cursorOverStyle:"pointer",background:mS.new(this,{fill:AT(4671320),fillOpacity:0,tooltipY:5})})),t=NS.new(this,{pointerOrientation:"horizontal",paddingTop:4,paddingRight:7,paddingBottom:4,paddingLeft:7});t.label.setAll({fontSize:12}),t.get("background").setAll({fill:this.interfaceColors.get("background"),stroke:this.interfaceColors.get("grid"),strokeOpacity:.3}),e.set("tooltip",t),e.events.on("click",(function(){window.open("https://www.amcharts.com/","_blank")})),e.states.create("hover",{}),e.children.push(gS.new(this,{stroke:AT(13421772),strokeWidth:3,svgPath:"M5 25 L13 25h13.6c3.4 0 6 0 10.3-4.3s5.2-12 8.6-12c3.4 0 4.3 8.6 7.7 8.6M83.4 25H79.8c-3.4 0-6 0-10.3-4.3s-5.2-12-8.6-12-4.3 8.6-7.7 8.6"})).states.create("hover",{stroke:AT(3976191)}),e.children.push(gS.new(this,{stroke:AT(8947848),strokeWidth:3,svgPath:"M83.4 25h-31C37 25 39.5 4.4 28.4 4.4S18.9 24.2 4.3 25H0"})).states.create("hover",{stroke:AT(4671320)}),this._logo=e,this._handleLogo()}}}),Object.defineProperty(e.prototype,"_init",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this,t=this._renderer,n=xS.new(this,{visible:!0,width:this.dom.clientWidth,height:this.dom.clientHeight});this._rootContainer=n,this._rootContainer._defaultThemes.push($S.new(this));var i=n.children.push(xS.new(this,{visible:!0,width:Zk,height:Zk}));this.container=i,t.resize(this.dom.clientWidth,this.dom.clientHeight),this._inner.appendChild(t.view),this._initResizeSensor();var r=document.createElement("div");r.setAttribute("role","alert"),r.style.zIndex="-100000",r.style.opacity="0",r.style.position="absolute",r.style.top="0",this._readerAlertElement=r,this._inner.appendChild(this._readerAlertElement);var o=document.createElement("div");o.style.position="absolute",o.style.pointerEvents="none",o.style.top="0px",o.style.left="0px",o.style.overflow="hidden",o.style.width=this.dom.clientWidth+"px",o.style.height=this.dom.clientHeight+"px",o.setAttribute("role","application"),dT(o,!1),this._focusElementContainer=o,this._inner.appendChild(this._focusElementContainer),this._tooltipElementContainer=document.createElement("div"),this._inner.appendChild(this._tooltipElementContainer),aT("keyboardevents")&&(this._disposers.push(oT(window,"keydown",(function(t){16==t.keyCode&&(e._isShift=!0)}))),this._disposers.push(oT(window,"keyup",(function(t){16==t.keyCode&&(e._isShift=!1)}))),this._disposers.push(oT(o,"keydown",(function(n){var i=e._focusedSprite;if(i){27==n.keyCode&&(!function(){if(document.activeElement&&document.activeElement!=document.body)if(document.activeElement.blur)document.activeElement.blur();else{var e=document.createElement("button");e.style.position="fixed",e.style.top="0px",e.style.left="-10000px",document.body.appendChild(e),e.focus(),e.blur(),document.body.removeChild(e)}}(),e._focusedSprite=void 0);var r=0,o=0;switch(n.keyCode){case 13:n.preventDefault();var a=t.getEvent(new MouseEvent("click"));return void i.events.dispatch("click",{type:"click",originalEvent:a.event,point:a.point,simulated:!0,target:i});case 37:r=-6;break;case 39:r=6;break;case 38:o=-6;break;case 40:o=6;break;default:return}if(0!=r||0!=o){if(n.preventDefault(),!i.isDragging()){e._keyboardDragPoint={x:0,y:0};a=t.getEvent(new MouseEvent("mousedown",{clientX:0,clientY:0}));i.events.isEnabled("pointerdown")&&i.events.dispatch("pointerdown",{type:"pointerdown",originalEvent:a.event,point:a.point,simulated:!0,target:i})}var s=e._keyboardDragPoint;s.x+=r,s.y+=o;var l=t.getEvent(new MouseEvent("mousemove",{clientX:s.x,clientY:s.y}),!1);i.events.isEnabled("globalpointermove")&&i.events.dispatch("globalpointermove",{type:"globalpointermove",originalEvent:l.event,point:l.point,simulated:!0,target:i})}}}))),this._disposers.push(oT(o,"keyup",(function(n){if(e._focusedSprite){var i=e._focusedSprite,r=n.keyCode;switch(r){case 37:case 39:case 38:case 40:if(i.isDragging()){var o=e._keyboardDragPoint,a=t.getEvent(new MouseEvent("mouseup",{clientX:o.x,clientY:o.y}));return i.events.isEnabled("globalpointerup")&&i.events.dispatch("globalpointerup",{type:"globalpointerup",originalEvent:a.event,point:a.point,simulated:!0,target:i}),void(e._keyboardDragPoint=void 0)}if(i.get("focusableGroup")){var s=i.get("focusableGroup"),l=e._tabindexes.filter((function(e){return e.get("focusableGroup")==s})),u=l.indexOf(i),c=l.length-1;(u+=39==r||40==r?1:-1)<0?u=c:u>c&&(u=0),function(e){e&&e.focus()}(l[u].getPrivate("focusElement").dom)}}}})))),this._startTicker(),this.setThemes([]),this._addTooltip(),this._hasLicense()||this._showBranding()}}),Object.defineProperty(e.prototype,"_initResizeSensor",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this;this._resizeSensorDisposer&&this._resizeSensorDisposer.dispose(),this._resizeSensorDisposer=new CS(this.dom,(function(){e.autoResize&&e.resize()})),this._disposers.push(this._resizeSensorDisposer)}}),Object.defineProperty(e.prototype,"resize",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this.dom,t=e.clientWidth,n=e.clientHeight;if(t>0&&n>0){var i=this._focusElementContainer;i.style.width=t+"px",i.style.height=n+"px",this._renderer.resize(t,n);var r=this._rootContainer;r.setPrivate("width",t),r.setPrivate("height",n),this._render(),this._handleLogo()}}}),Object.defineProperty(e.prototype,"_render",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._renderer.render(this._rootContainer._display),this._focusElementDirty&&(this._updateCurrentFocus(),this._focusElementDirty=!1)}}),Object.defineProperty(e.prototype,"_runTickers",{enumerable:!1,configurable:!0,writable:!0,value:function(e){Sk(this._tickers,(function(t){t(e)}))}}),Object.defineProperty(e.prototype,"_runAnimations",{enumerable:!1,configurable:!0,writable:!0,value:function(e){Fk(this._animations,(function(t){return!t._runAnimation(e)}))}}),Object.defineProperty(e.prototype,"_runDirties",{enumerable:!1,configurable:!0,writable:!0,value:function(){for(var e=this,t={};this._isDirtyParents;)this._isDirtyParents=!1,tT(this._dirtyParents).forEach((function(n){var i=e._dirtyParents[n];delete e._dirtyParents[n],i.isDisposed()||(t[i.uid]=i,i._prepareChildren())}));tT(t).forEach((function(e){t[e]._updateChildren()}));var n=[];tT(this._dirty).forEach((function(t){var i=e._dirty[t];i.isDisposed()?delete e._dirty[i.uid]:(n.push(i),i._beforeChanged())})),n.forEach((function(t){t._changed(),delete e._dirty[t.uid],t._clearDirty()})),this._isDirty=!1;var i={},r=[];tT(this._dirtyBounds).forEach((function(t){var n=e._dirtyBounds[t];delete e._dirtyBounds[t],n.isDisposed()||(i[n.uid]=n.depth(),r.push(n))})),r.sort((function(e,t){return eS(i[t.uid],i[e.uid])})),r.forEach((function(e){e._updateBounds()}));var o=this._dirtyPositions;tT(o).forEach((function(e){var t=o[e];delete o[e],t.isDisposed()||t._updatePosition()})),n.forEach((function(e){e._afterChanged()}))}}),Object.defineProperty(e.prototype,"_renderFrame",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this.events.isEnabled("framestarted")&&this.events.dispatch("framestarted",{type:"framestarted",target:this,timestamp:e}),this._checkComputedStyles(),this._runTickers(e),this._runAnimations(e),this._runDirties(),this._render(),this.events.isEnabled("frameended")&&this.events.dispatch("frameended",{type:"frameended",target:this,timestamp:e}),0===this._tickers.length&&0===this._animations.length&&!this._isDirty}}),Object.defineProperty(e.prototype,"_runTicker",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.isDisposed()||(this.animationTime=e,this._renderFrame(e)?(this._ticker=null,this.animationTime=null):RI(this.fps,this._ticker))}}),Object.defineProperty(e.prototype,"_runTickerNow",{enumerable:!1,configurable:!0,writable:!0,value:function(){if(!this.isDisposed())for(;;){var e=performance.now();if(this.animationTime=e,this._renderFrame(e)){this.animationTime=null;break}}}}),Object.defineProperty(e.prototype,"_startTicker",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this;null===this._ticker&&(this.animationTime=null,this._ticker=function(t){e._runTicker(t)},RI(this.fps,this._ticker))}}),Object.defineProperty(e.prototype,"_addDirtyEntity",{enumerable:!1,configurable:!0,writable:!0,value:function(e){void 0===this._dirty[e.uid]&&(this._isDirty=!0,this._dirty[e.uid]=e,this._startTicker())}}),Object.defineProperty(e.prototype,"_addDirtyParent",{enumerable:!1,configurable:!0,writable:!0,value:function(e){void 0===this._dirtyParents[e.uid]&&(this._isDirty=!0,this._isDirtyParents=!0,this._dirtyParents[e.uid]=e,this._startTicker())}}),Object.defineProperty(e.prototype,"_addDirtyBounds",{enumerable:!1,configurable:!0,writable:!0,value:function(e){void 0===this._dirtyBounds[e.uid]&&(this._isDirty=!0,this._dirtyBounds[e.uid]=e,this._startTicker())}}),Object.defineProperty(e.prototype,"_addDirtyPosition",{enumerable:!1,configurable:!0,writable:!0,value:function(e){void 0===this._dirtyPositions[e.uid]&&(this._isDirty=!0,this._dirtyPositions[e.uid]=e,this._startTicker())}}),Object.defineProperty(e.prototype,"_addAnimation",{enumerable:!1,configurable:!0,writable:!0,value:function(e){-1===this._animations.indexOf(e)&&(this._animations.push(e),this._startTicker())}}),Object.defineProperty(e.prototype,"_markDirty",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._isDirty=!0}}),Object.defineProperty(e.prototype,"_markDirtyRedraw",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this;this.events.once("frameended",(function(){e._isDirty=!0,e._startTicker()}))}}),Object.defineProperty(e.prototype,"eachFrame",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this;return this._tickers.push(e),this._startTicker(),new Vk((function(){jk(t._tickers,e)}))}}),Object.defineProperty(e.prototype,"width",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this.dom.clientWidth}}),Object.defineProperty(e.prototype,"height",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this.dom.clientHeight}}),Object.defineProperty(e.prototype,"dispose",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._isDisposed||(this._isDisposed=!0,this._rootContainer.dispose(),this._renderer.dispose(),this.horizontalLayout.dispose(),this.verticalLayout.dispose(),this.interfaceColors.dispose(),Sk(this._disposers,(function(e){e.dispose()})),this._inner&&function(e){e.parentNode&&e.parentNode.removeChild(e)}(this._inner),Dk(ZT.rootElements,this))}}),Object.defineProperty(e.prototype,"isDisposed",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._isDisposed}}),Object.defineProperty(e.prototype,"readerAlert",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this._readerAlertElement.innerHTML=yT(e)}}),Object.defineProperty(e.prototype,"setThemes",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this._rootContainer.set("themes",e);var t=this.tooltipContainer;t&&t._applyThemes();var n=this.interfaceColors;n&&n._applyThemes()}}),Object.defineProperty(e.prototype,"_addTooltip",{enumerable:!1,configurable:!0,writable:!0,value:function(){if(!this.tooltipContainer){var e=this._rootContainer.children.push(xS.new(this,{position:"absolute",isMeasured:!1,width:Zk,height:Zk,layer:30}));this.tooltipContainer=e;var t=NS.new(this,{});this.container.set("tooltip",t),t.hide(0),this._tooltip=t}}}),Object.defineProperty(e.prototype,"_registerTabindexOrder",{enumerable:!1,configurable:!0,writable:!0,value:function(e){e.get("focusable")?Ck(this._tabindexes,e):Dk(this._tabindexes,e),this._invalidateTabindexes()}}),Object.defineProperty(e.prototype,"_unregisterTabindexOrder",{enumerable:!1,configurable:!0,writable:!0,value:function(e){Dk(this._tabindexes,e),this._invalidateTabindexes()}}),Object.defineProperty(e.prototype,"_invalidateTabindexes",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this;this._tabindexes.sort((function(e,t){var n=e.get("tabindexOrder",0),i=t.get("tabindexOrder",0);return n==i?0:n>i?1:-1}));var t=[];Sk(this._tabindexes,(function(n,i){n.getPrivate("focusElement")?e._moveFocusElement(i,n):e._makeFocusElement(i,n);var r=n.get("focusableGroup");r&&(-1!==t.indexOf(r)?n.getPrivate("focusElement").dom.setAttribute("tabindex","-1"):t.push(r))}))}}),Object.defineProperty(e.prototype,"_updateCurrentFocus",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._focusedSprite&&(this._decorateFocusElement(this._focusedSprite),this._positionFocusElement(this._focusedSprite))}}),Object.defineProperty(e.prototype,"_decorateFocusElement",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){if(t||(t=e.getPrivate("focusElement").dom),t){e.get("visible")&&"tooltip"!=e.get("role")&&!e.isHidden()?"-1"!=t.getAttribute("tabindex")&&t.setAttribute("tabindex",""+this.tabindex):t.removeAttribute("tabindex");var n=e.get("role");n?t.setAttribute("role",n):t.removeAttribute("role");var i=e.get("ariaLabel");if(i){var r=OS(e,i);t.setAttribute("aria-label",r)}else t.removeAttribute("aria-label");var o=e.get("ariaLive");o?t.setAttribute("aria-live",o):t.removeAttribute("aria-live");var a=e.get("ariaChecked");null!=a?t.setAttribute("aria-checked",a?"true":"false"):t.removeAttribute("aria-checked"),e.get("ariaHidden")?t.setAttribute("aria-hidden","hidden"):t.removeAttribute("aria-hidden");var s=e.get("ariaOrientation");s?t.setAttribute("aria-orientation",s):t.removeAttribute("aria-orientation");var l=e.get("ariaValueNow");l?t.setAttribute("aria-valuenow",l):t.removeAttribute("aria-valuenow");var u=e.get("ariaValueMin");u?t.setAttribute("aria-valuemin",u):t.removeAttribute("aria-valuemin");var c=e.get("ariaValueMax");c?t.setAttribute("aria-valuemax",c):t.removeAttribute("aria-valuemax");var h=e.get("ariaValueText");h?t.setAttribute("aria-valuetext",h):t.removeAttribute("aria-valuetext");var d=e.get("ariaControls");d?t.setAttribute("aria-controls",d):t.removeAttribute("aria-controls")}}}),Object.defineProperty(e.prototype,"_makeFocusElement",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var n=this;if(!t.getPrivate("focusElement")){var i=document.createElement("div");"tooltip"!=t.get("role")&&(i.tabIndex=this.tabindex),i.style.position="absolute",dT(i,!1);var r=[];t.setPrivate("focusElement",{dom:i,disposers:r}),this._decorateFocusElement(t),r.push(oT(i,"focus",(function(t){n._handleFocus(t,e)}))),r.push(oT(i,"blur",(function(t){n._handleBlur(t,e)}))),this._moveFocusElement(e,t)}}}),Object.defineProperty(e.prototype,"_removeFocusElement",{enumerable:!1,configurable:!0,writable:!0,value:function(e){Dk(this._tabindexes,e);var t=e.getPrivate("focusElement");t&&(this._focusElementContainer.removeChild(t.dom),Sk(t.disposers,(function(e){e.dispose()})))}}),Object.defineProperty(e.prototype,"_hideFocusElement",{enumerable:!1,configurable:!0,writable:!0,value:function(e){e.getPrivate("focusElement").dom.style.display="none"}}),Object.defineProperty(e.prototype,"_moveFocusElement",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var n=this._focusElementContainer,i=t.getPrivate("focusElement").dom;if(i!==this._focusElementContainer.children[e]){var r=this._focusElementContainer.children[e+1];r?n.insertBefore(i,r):n.append(i)}}}),Object.defineProperty(e.prototype,"_positionFocusElement",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=e.globalBounds(),n=t.right==t.left?e.width():t.right-t.left,i=t.top==t.bottom?e.height():t.bottom-t.top,r=e.getPrivate("focusElement").dom;r.style.top=t.top-2+"px",r.style.left=t.left-2+"px",r.style.width=n+4+"px",r.style.height=i+4+"px"}}),Object.defineProperty(e.prototype,"_handleFocus",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var n=this._tabindexes[t];n.isVisibleDeep()?(this._positionFocusElement(n),this._focusedSprite=n,n.events.isEnabled("focus")&&n.events.dispatch("focus",{type:"focus",originalEvent:e,target:n})):this._focusNext(e.target,this._isShift?-1:1)}}),Object.defineProperty(e.prototype,"_focusNext",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var n=Array.from(document.querySelectorAll(["a[href]","area[href]","button:not([disabled])","details","input:not([disabled])","iframe:not([disabled])","select:not([disabled])","textarea:not([disabled])",'[contentEditable=""]','[contentEditable="true"]','[contentEditable="TRUE"]','[tabindex]:not([tabindex^="-"])'].join(","))),i=n.indexOf(e)+t;i<0?i=n.length-1:i>=n.length&&(i=0),n[i].focus()}}),Object.defineProperty(e.prototype,"_handleBlur",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var n=this._focusedSprite;n&&n.events.isEnabled("blur")&&n.events.dispatch("blur",{type:"blur",originalEvent:e,target:n}),this._focusedSprite=void 0}}),Object.defineProperty(e.prototype,"updateTooltip",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=yT(e._getText()),n=e.getPrivate("tooltipElement");"tooltip"==e.get("role")&&""!=t?(n||(n=this._makeTooltipElement(e)),n.innerHTML!=t&&(n.innerHTML=t)):n&&(n.remove(),e.removePrivate("tooltipElement"))}}),Object.defineProperty(e.prototype,"_makeTooltipElement",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this._tooltipElementContainer,n=document.createElement("div");return n.style.position="absolute",n.style.opacity="0.0000001",dT(n,!1),this._decorateFocusElement(e,n),t.append(n),e.setPrivate("tooltipElement",n),n}}),Object.defineProperty(e.prototype,"_invalidateAccessibility",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this._focusElementDirty=!0;var t=e.getPrivate("focusElement");e.get("focusable")?t&&(this._decorateFocusElement(e),this._positionFocusElement(e)):t&&this._removeFocusElement(e)}}),Object.defineProperty(e.prototype,"focused",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this._focusedSprite===e}}),Object.defineProperty(e.prototype,"documentPointToRoot",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this.dom.getBoundingClientRect();return{x:e.x-t.left,y:e.y-t.top}}}),Object.defineProperty(e.prototype,"rootPointToDocument",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this.dom.getBoundingClientRect();return{x:e.x+t.left,y:e.y+t.top}}}),Object.defineProperty(e.prototype,"addDisposer",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this._disposers.push(e),e}}),Object.defineProperty(e.prototype,"_updateComputedStyles",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=window.getComputedStyle(this.dom),t="";iT(e,(function(e,n){_k(e)&&e.match(/^font/)&&(t+=n)}));var n=t!=this._fontHash;return n&&(this._fontHash=t),n}}),Object.defineProperty(e.prototype,"_checkComputedStyles",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._updateComputedStyles()&&this._invalidateLabelBounds(this.container)}}),Object.defineProperty(e.prototype,"_invalidateLabelBounds",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this;e instanceof xS?e.children.each((function(e){t._invalidateLabelBounds(e)})):e instanceof IS&&e.markDirtyBounds()}}),Object.defineProperty(e.prototype,"_hasLicense",{enumerable:!1,configurable:!0,writable:!0,value:function(){for(var e=0;e<ZT.licenses.length;e++)if(ZT.licenses[e].match(/^AM5C.{5,}/i))return!0;return!1}}),Object.defineProperty(e.prototype,"_licenseApplied",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._logo&&this._logo.set("forceHidden",!0)}}),Object.defineProperty(e.prototype,"debugGhostView",{get:function(){return this._renderer.debugGhostView},set:function(e){this._renderer.debugGhostView=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tapToActivate",{get:function(){return this._renderer.tapToActivate},set:function(e){this._renderer.tapToActivate=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tapToActivateTimeout",{get:function(){return this._renderer.tapToActivateTimeout},set:function(e){this._renderer.tapToActivateTimeout=e},enumerable:!1,configurable:!0}),e}(),LI=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Hb(t,e),Object.defineProperty(t.prototype,"_beforeChanged",{enumerable:!1,configurable:!0,writable:!0,value:function(){e.prototype._beforeChanged.call(this),(this.isDirty("cornerRadiusTL")||this.isDirty("cornerRadiusTR")||this.isDirty("cornerRadiusBR")||this.isDirty("cornerRadiusBL"))&&(this._clear=!0)}}),Object.defineProperty(t.prototype,"_draw",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this.width(),t=this.height(),n=e,i=t,r=n/Math.abs(e),o=i/Math.abs(t);if(wk(n)&&wk(i)){var a=Math.min(n,i)/2,s=pT(this.get("cornerRadiusTL",8),a),l=pT(this.get("cornerRadiusTR",8),a),u=pT(this.get("cornerRadiusBR",8),a),c=pT(this.get("cornerRadiusBL",8),a),h=Math.min(Math.abs(n/2),Math.abs(i/2));s=$T(s,0,h),l=$T(l,0,h),u=$T(u,0,h),c=$T(c,0,h),this._display.moveTo(s*r,0),this._display.lineTo(n-l*r,0),l>0&&this._display.arcTo(n,0,n,l*o,l),this._display.lineTo(n,i-u*o),u>0&&this._display.arcTo(n,i,n-u*r,i,u),this._display.lineTo(c*r,i),c>0&&this._display.arcTo(0,i,0,i-c*o,c),this._display.lineTo(0,s*o),s>0&&this._display.arcTo(0,0,s*r,0,s)}}}),Object.defineProperty(t,"className",{enumerable:!0,configurable:!0,writable:!0,value:"RoundedRectangle"}),Object.defineProperty(t,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:mS.classNames.concat([t.className])}),t}(mS),FI=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Hb(t,e),Object.defineProperty(t.prototype,"_afterNew",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._settings.themeTags=DT(this._settings.themeTags,["button"]),e.prototype._afterNew.call(this),this._settings.background||this.set("background",LI.new(this._root,{themeTags:DT(this._settings.themeTags,["background"])}))}}),Object.defineProperty(t.prototype,"_prepareChildren",{enumerable:!1,configurable:!0,writable:!0,value:function(){if(e.prototype._prepareChildren.call(this),this.isDirty("icon")){var t=this._prevSettings.icon,n=this.get("icon");n!==t&&(this._disposeProperty("icon"),t&&t.dispose(),n&&this.children.push(n),this._prevSettings.icon=n)}if(this.isDirty("label")){t=this._prevSettings.label;var i=this.get("label");i!==t&&(this._disposeProperty("label"),t&&t.dispose(),i&&this.children.push(i),this._prevSettings.label=i)}}}),Object.defineProperty(t,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Button"}),Object.defineProperty(t,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:xS.classNames.concat([t.className])}),t}(xS),BI=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return Object.defineProperty(t,"processor",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),t}return Hb(t,e),Object.defineProperty(t.prototype,"incrementRef",{enumerable:!1,configurable:!0,writable:!0,value:function(){}}),Object.defineProperty(t.prototype,"decrementRef",{enumerable:!1,configurable:!0,writable:!0,value:function(){}}),Object.defineProperty(t.prototype,"_onPush",{enumerable:!1,configurable:!0,writable:!0,value:function(t){this.processor&&this.processor.processRow(t),e.prototype._onPush.call(this,t)}}),Object.defineProperty(t.prototype,"_onInsertIndex",{enumerable:!1,configurable:!0,writable:!0,value:function(t,n){this.processor&&this.processor.processRow(n),e.prototype._onInsertIndex.call(this,t,n)}}),Object.defineProperty(t.prototype,"_onSetIndex",{enumerable:!1,configurable:!0,writable:!0,value:function(t,n,i){this.processor&&this.processor.processRow(i),e.prototype._onSetIndex.call(this,t,n,i)}}),t}(Gk),VI=function(e){function t(t,n,i){var r=e.call(this,i)||this;return Object.defineProperty(r,"component",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(r,"dataContext",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(r,"bullets",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(r,"open",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(r,"close",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),r.dataContext=n,r.component=t,r._settings.visible=!0,r._checkDirty(),r}return Hb(t,e),Object.defineProperty(t.prototype,"markDirty",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.component.markDirtyValues(this)}}),Object.defineProperty(t.prototype,"_startAnimation",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.component._root._addAnimation(this)}}),Object.defineProperty(t.prototype,"_animationTime",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this.component._root.animationTime}}),Object.defineProperty(t.prototype,"_dispose",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.component&&this.component.disposeDataItem(this),e.prototype._dispose.call(this)}}),Object.defineProperty(t.prototype,"show",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.setRaw("visible",!0),this.component&&this.component.showDataItem(this,e)}}),Object.defineProperty(t.prototype,"hide",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.setRaw("visible",!1),this.component&&this.component.hideDataItem(this,e)}}),Object.defineProperty(t.prototype,"isHidden",{enumerable:!1,configurable:!0,writable:!0,value:function(){return!this.get("visible")}}),t}(sS),UI=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return Object.defineProperty(t,"_data",{enumerable:!0,configurable:!0,writable:!0,value:new BI}),Object.defineProperty(t,"_dataItems",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(t,"_mainDataItems",{enumerable:!0,configurable:!0,writable:!0,value:t._dataItems}),Object.defineProperty(t,"valueFields",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(t,"fields",{enumerable:!0,configurable:!0,writable:!0,value:["id"]}),Object.defineProperty(t,"_valueFields",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(t,"_valueFieldsF",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(t,"_fields",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(t,"_fieldsF",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(t,"_valuesDirty",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(t,"_dataChanged",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(t,"_dataGrouped",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(t,"inited",{enumerable:!0,configurable:!0,writable:!0,value:!1}),t}return Hb(t,e),Object.defineProperty(t.prototype,"data",{get:function(){return this._data},set:function(e){e.incrementRef(),this._data.decrementRef(),this._data=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_dispose",{enumerable:!1,configurable:!0,writable:!0,value:function(){e.prototype._dispose.call(this),this._data.decrementRef()}}),Object.defineProperty(t.prototype,"_onDataClear",{enumerable:!1,configurable:!0,writable:!0,value:function(){}}),Object.defineProperty(t.prototype,"_afterNew",{enumerable:!1,configurable:!0,writable:!0,value:function(){var t=this;e.prototype._afterNew.call(this),this._data.incrementRef(),this._updateFields(),this._disposers.push(this.data.events.onAll((function(e){var n=t._mainDataItems;if(t.markDirtyValues(),t._markDirtyGroup(),t._dataChanged=!0,"clear"===e.type)Sk(n,(function(e){e.dispose()})),n.length=0,t._onDataClear();else if("push"===e.type){var i=new VI(t,e.newValue,t._makeDataItem(e.newValue));n.push(i),t.processDataItem(i)}else if("setIndex"===e.type){var r=n[e.index],o=t._makeDataItem(e.newValue);tT(o).forEach((function(e){r.animate({key:e,to:o[e],duration:t.get("interpolationDuration",0),easing:t.get("interpolationEasing")})})),r.dataContext=e.newValue}else if("insertIndex"===e.type){i=new VI(t,e.newValue,t._makeDataItem(e.newValue));n.splice(e.index,0,i),t.processDataItem(i)}else if("removeIndex"===e.type){(i=n[e.index]).dispose(),n.splice(e.index,1)}else{if("moveIndex"!==e.type)throw new Error("Unknown IStreamEvent type");i=n[e.oldIndex];n.splice(e.oldIndex,1),n.splice(e.newIndex,0,i)}t._afterDataChange()})))}}),Object.defineProperty(t.prototype,"_updateFields",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this;this.valueFields&&(this._valueFields=[],this._valueFieldsF={},Sk(this.valueFields,(function(t){e.get(t+"Field")&&(e._valueFields.push(t),e._valueFieldsF[t]={fieldKey:t+"Field",workingKey:t+"Working"})}))),this.fields&&(this._fields=[],this._fieldsF={},Sk(this.fields,(function(t){e.get(t+"Field")&&(e._fields.push(t),e._fieldsF[t]=t+"Field")})))}}),Object.defineProperty(t.prototype,"dataItems",{get:function(){return this._dataItems},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"processDataItem",{enumerable:!1,configurable:!0,writable:!0,value:function(e){}}),Object.defineProperty(t.prototype,"_makeDataItem",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this,n={};return this._valueFields&&Sk(this._valueFields,(function(i){var r=t.get(t._valueFieldsF[i].fieldKey);n[i]=e[r],n[t._valueFieldsF[i].workingKey]=n[i]})),this._fields&&Sk(this._fields,(function(i){var r=t.get(t._fieldsF[i]);n[i]=e[r]})),n}}),Object.defineProperty(t.prototype,"makeDataItem",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=new VI(this,void 0,e);return this.processDataItem(t),t}}),Object.defineProperty(t.prototype,"pushDataItem",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this.makeDataItem(e);return this._mainDataItems.push(t),t}}),Object.defineProperty(t.prototype,"disposeDataItem",{enumerable:!1,configurable:!0,writable:!0,value:function(e){}}),Object.defineProperty(t.prototype,"showDataItem",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return $b(this,void 0,void 0,(function(){return Yb(this,(function(t){return e.set("visible",!0),[2]}))}))}}),Object.defineProperty(t.prototype,"hideDataItem",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return $b(this,void 0,void 0,(function(){return Yb(this,(function(t){return e.set("visible",!1),[2]}))}))}}),Object.defineProperty(t.prototype,"_clearDirty",{enumerable:!1,configurable:!0,writable:!0,value:function(){e.prototype._clearDirty.call(this),this._valuesDirty=!1}}),Object.defineProperty(t.prototype,"_afterDataChange",{enumerable:!1,configurable:!0,writable:!0,value:function(){}}),Object.defineProperty(t.prototype,"_afterChanged",{enumerable:!1,configurable:!0,writable:!0,value:function(){if(e.prototype._afterChanged.call(this),this._dataChanged){var t="datavalidated";this.events.isEnabled(t)&&this.events.dispatch(t,{type:t,target:this}),this._dataChanged=!1}this.inited=!0}}),Object.defineProperty(t.prototype,"markDirtyValues",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.markDirty(),this._valuesDirty=!0}}),Object.defineProperty(t.prototype,"_markDirtyGroup",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._dataGrouped=!1}}),Object.defineProperty(t.prototype,"markDirtySize",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._sizeDirty=!0,this.markDirty()}}),Object.defineProperty(t,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Component"}),Object.defineProperty(t,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:xS.classNames.concat([t.className])}),t}(xS);function HI(e){return new Promise((function(t,n){setTimeout(t,e)}))}var zI={millisecond:1,second:1e3,minute:6e4,hour:36e5,day:864e5,week:6048e5,month:2629742400,year:31536e6};function $I(e,t){return null==t&&(t=1),zI[e]*t}function YI(e,t,n,i,r,o,a){if(!a||r){var s=0;switch(r||"millisecond"==t||(s=e.getTimezoneOffset(),e.setUTCMinutes(e.getUTCMinutes()-s)),t){case"day":var l=e.getUTCDate();if(n>1){if(o){o=YI(o,"day",1);var u=e.getTime()-o.getTime(),c=Math.floor(u/$I("day")/n),h=$I("day",c*n);e.setTime(o.getTime()+h-s*$I("minute"))}}else e.setUTCDate(l);e.setUTCHours(0,0,0,0);break;case"second":var d=e.getUTCSeconds();n>1&&(d=Math.floor(d/n)*n),e.setUTCSeconds(d,0);break;case"millisecond":if(1==n)return e;var f=e.getUTCMilliseconds();f=Math.floor(f/n)*n,e.setUTCMilliseconds(f);break;case"hour":var p=e.getUTCHours();n>1&&(p=Math.floor(p/n)*n),e.setUTCHours(p,0,0,0);break;case"minute":var g=e.getUTCMinutes();f=e.getUTCMilliseconds(),n>1&&(g=Math.floor(g/n)*n),e.setUTCMinutes(g,0,0);break;case"month":var m=e.getUTCMonth();n>1&&(m=Math.floor(m/n)*n),e.setUTCMonth(m,1),e.setUTCHours(0,0,0,0);break;case"year":var b=e.getUTCFullYear();n>1&&(b=Math.floor(b/n)*n),e.setUTCFullYear(b,0,1),e.setUTCHours(0,0,0,0);break;case"week":var y=e.getUTCDate(),v=e.getUTCDay();wk(i)||(i=1),y=v>=i?y-v+i:y-(7+v)+i,e.setUTCDate(y),e.setUTCHours(0,0,0,0)}if(!r&&"millisecond"!=t&&(e.setUTCMinutes(e.getUTCMinutes()+s),"day"==t||"week"==t||"month"==t||"year"==t)){var _=e.getTimezoneOffset();if(_!=s){var w=_-s;e.setUTCMinutes(e.getUTCMinutes()+w)}}return e}var x=a.offsetUTC(e),P=(s=e.getTimezoneOffset(),a.parseDate(e)),O=(b=P.year,m=P.month,l=P.day,P.hour),k=P.minute,T=P.second,S=P.millisecond,I=P.weekday;switch(t){case"day":if(o){o=YI(o,"day",1);u=e.getTime()-o.getTime(),c=Math.floor(u/$I("day")/n),h=$I("day",c*n);e.setTime(o.getTime()+h-s*$I("minute")),b=(P=a.parseDate(e)).year,m=P.month,l=P.day}O=0,k=0,T=0,S=0;break;case"second":n>1&&(T=Math.floor(T/n)*n),S=0;break;case"millisecond":n>1&&(S=Math.floor(S/n)*n);break;case"hour":n>1&&(O=Math.floor(O/n)*n),k=0,T=0,S=0;break;case"minute":n>1&&(k=Math.floor(k/n)*n),T=0,S=0;break;case"month":n>1&&(m=Math.floor(m/n)*n),l=1,O=0,k=0,T=0,S=0;break;case"year":n>1&&(b=Math.floor(b/n)*n),m=0,l=1,O=0,k=0,T=0,S=0;break;case"week":wk(i)||(i=1),l=I>=i?l-I+i:l-(7+I)+i,O=0,k=0,T=0,S=0}k+=x-s;var E=(e=new Date(b,m,l,O,k,T,S)).getTimezoneOffset();return E!=s&&e.setTime(e.getTime()+6e4*(s-E)),e}var GI=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return Object.defineProperty(t,"_aggregatesCalculated",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(t,"_selectionAggregatesCalculated",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(t,"_dataProcessed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(t,"_psi",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(t,"_pei",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(t,"chart",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(t,"bullets",{enumerable:!0,configurable:!0,writable:!0,value:new Gk}),Object.defineProperty(t,"bulletsContainer",{enumerable:!0,configurable:!0,writable:!0,value:xS.new(t._root,{width:Zk,height:Zk,position:"absolute"})}),t}return Hb(t,e),Object.defineProperty(t.prototype,"_afterNew",{enumerable:!1,configurable:!0,writable:!0,value:function(){var t=this;this.valueFields.push("value"),e.prototype._afterNew.call(this),this.setPrivate("customData",{}),this._disposers.push(this.bullets.events.onAll((function(e){if("clear"===e.type)t._handleBullets(t.dataItems);else if("push"===e.type)t._handleBullets(t.dataItems);else if("setIndex"===e.type)t._handleBullets(t.dataItems);else if("insertIndex"===e.type)t._handleBullets(t.dataItems);else if("removeIndex"===e.type)t._handleBullets(t.dataItems);else{if("moveIndex"!==e.type)throw new Error("Unknown IListEvent type");t._handleBullets(t.dataItems)}})))}}),Object.defineProperty(t.prototype,"_dispose",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.bulletsContainer.dispose(),e.prototype._dispose.call(this)}}),Object.defineProperty(t.prototype,"startIndex",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this.dataItems.length;return Math.min(this.getPrivate("startIndex",0),e)}}),Object.defineProperty(t.prototype,"endIndex",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this.dataItems.length;return Math.min(this.getPrivate("endIndex",e),e)}}),Object.defineProperty(t.prototype,"_handleBullets",{enumerable:!1,configurable:!0,writable:!0,value:function(e){Sk(e,(function(e){var t=e.bullets;t&&(Sk(t,(function(e){e.dispose()})),e.bullets=void 0)})),this.markDirtyValues()}}),Object.defineProperty(t.prototype,"getDataItemById",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return Lk(this.dataItems,(function(t){return t.get("id")==e}))}}),Object.defineProperty(t.prototype,"_makeBullets",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this;this._shouldMakeBullet(e)&&(e.bullets=[],this.bullets.each((function(n){t._makeBullet(e,n)})))}}),Object.defineProperty(t.prototype,"_shouldMakeBullet",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return!0}}),Object.defineProperty(t.prototype,"_makeBullet",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n){var i=t(this._root,this,e);if(i){var r=i.get("sprite");r&&(r._setDataItem(e),r.setRaw("position","absolute"),this.bulletsContainer.children.push(r)),i._index=n,i.series=this,e.bullets.push(i)}return i}}),Object.defineProperty(t.prototype,"_clearDirty",{enumerable:!1,configurable:!0,writable:!0,value:function(){e.prototype._clearDirty.call(this),this._aggregatesCalculated=!1,this._selectionAggregatesCalculated=!1}}),Object.defineProperty(t.prototype,"_prepareChildren",{enumerable:!1,configurable:!0,writable:!0,value:function(){var t=this;e.prototype._prepareChildren.call(this);var n=this.startIndex(),i=this.endIndex();if(this.isPrivateDirty("baseValueSeries")){var r=this.getPrivate("baseValueSeries");r&&this._disposers.push(r.onPrivate("startIndex",(function(){t.markDirtyValues()})))}if(this.get("calculateAggregates")&&(this._valuesDirty&&!this._dataProcessed&&(this._aggregatesCalculated||(this._calculateAggregates(0,this.dataItems.length),this._aggregatesCalculated=!0)),this._psi==n&&this._pei==i||this._selectionAggregatesCalculated||(0===n&&i===this.dataItems.length&&this._aggregatesCalculated||this._calculateAggregates(n,i),this._selectionAggregatesCalculated=!0)),this.isDirty("tooltip")){var o=this.get("tooltip");o&&(o.hide(0),o.set("tooltipTarget",this))}if(this.isDirty("fill")||this.isDirty("stroke")){var a=void 0,s=this.get("legendDataItem");if(s&&(a=s.get("markerRectangle"))&&this.isVisible()){if(this.isDirty("stroke")){var l=this.get("stroke");a.set("stroke",l)}if(this.isDirty("fill")){var u=this.get("fill");a.set("fill",u)}}this.updateLegendMarker(void 0)}if(this.bullets.length>0)for(var c=this.startIndex(),h=this.endIndex(),d=c;d<h;d++){var f=this.dataItems[d];f.bullets||this._makeBullets(f)}}}),Object.defineProperty(t.prototype,"_calculateAggregates",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var n=this,i=this._valueFields;if(!i)throw new Error("No value fields are set for the series.");var r={},o={},a={},s={},l={},u={},c={},h={},d={};Sk(i,(function(e){r[e]=0,o[e]=0,a[e]=0})),Sk(i,(function(i){var f=i+"Change",p=i+"ChangePercent",g=i+"ChangePrevious",m=i+"ChangePreviousPercent",b=i+"ChangeSelection",y=i+"ChangeSelectionPercent",v="valueY";"valueX"!=i&&"openValueX"!=i&&"lowValueX"!=i&&"highValueX"!=i||(v="valueX");for(var _=n.getPrivate("baseValueSeries"),w=e;w<t;w++){var x=n.dataItems[w],P=x.get(i);null!=P&&(a[i]++,r[i]+=P,o[i]+=Math.abs(P),h[i]=r[i]/a[i],(s[i]>P||null==s[i])&&(s[i]=P),(l[i]<P||null==l[i])&&(l[i]=P),c[i]=P,null==u[i]&&(u[i]=P,d[i]=P,_&&(u[v]=_._getBase(v))),0===e&&(x.setRaw(f,P-u[v]),x.setRaw(p,(P-u[v])/u[v]*100)),x.setRaw(g,P-d[v]),x.setRaw(m,(P-d[v])/d[v]*100),x.setRaw(b,P-u[v]),x.setRaw(y,(P-u[v])/u[v]*100),d[i]=P)}})),Sk(i,(function(e){n.setPrivate(e+"AverageSelection",h[e]),n.setPrivate(e+"CountSelection",a[e]),n.setPrivate(e+"SumSelection",r[e]),n.setPrivate(e+"AbsoluteSumSelection",o[e]),n.setPrivate(e+"LowSelection",s[e]),n.setPrivate(e+"HighSelection",l[e]),n.setPrivate(e+"OpenSelection",u[e]),n.setPrivate(e+"CloseSelection",c[e])})),0===e&&t===this.dataItems.length&&Sk(i,(function(e){n.setPrivate(e+"Average",h[e]),n.setPrivate(e+"Count",a[e]),n.setPrivate(e+"Sum",r[e]),n.setPrivate(e+"AbsoluteSum",o[e]),n.setPrivate(e+"Low",s[e]),n.setPrivate(e+"High",l[e]),n.setPrivate(e+"Open",u[e]),n.setPrivate(e+"Close",c[e])}))}}),Object.defineProperty(t.prototype,"_updateChildren",{enumerable:!1,configurable:!0,writable:!0,value:function(){var t=this;(e.prototype._updateChildren.call(this),this._psi=this.startIndex(),this._pei=this.endIndex(),this.isDirty("visible")&&this.bulletsContainer.set("visible",this.get("visible")),this._valuesDirty&&null!=this.get("heatRules"))&&Sk(this.get("heatRules",[]),(function(e){var n=e.minValue||t.getPrivate(e.dataField+"Low")||0,i=e.maxValue||t.getPrivate(e.dataField+"High")||0;Sk(e.target._entities,(function(r){var o,a,s=r.dataItem.get(e.dataField);wk(s)&&(o=e.logarithmic?(Math.log(s)*Math.LOG10E-Math.log(n)*Math.LOG10E)/(Math.log(i)*Math.LOG10E-Math.log(n)*Math.LOG10E):(s-n)/(i-n),!wk(s)||wk(o)&&Math.abs(o)!=1/0||(o=.5),wk(e.min)?a=e.min+(e.max-e.min)*o:e.min instanceof MT?a=MT.interpolate(o,e.min,e.max):e.min instanceof Kk&&(a=FT(o,e.min,e.max)),e.customFunction?e.customFunction.call(t,r,n,i,s):r.set(e.key,a))}))}));if(this.bullets.length>0){var n=this.dataItems.length,i=this.startIndex(),r=this.endIndex();r<n&&r++,i>0&&i--;for(var o=0;o<i;o++)this._hideBullets(this.dataItems[o]);for(o=i;o<r;o++)this._positionBullets(this.dataItems[o]);for(o=r;o<n;o++)this._hideBullets(this.dataItems[o])}}}),Object.defineProperty(t.prototype,"_positionBullets",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this;e.bullets&&Sk(e.bullets,(function(e){t._positionBullet(e);var n=e.get("sprite");e.get("dynamic")&&(n&&(n._markDirtyKey("fill"),n.markDirtySize()),n instanceof xS&&n.walkChildren((function(e){e._markDirtyKey("fill"),e.markDirtySize(),e instanceof MS&&e.text.markDirtyText()}))),n instanceof MS&&n.get("populateText")&&n.text.markDirtyText()}))}}),Object.defineProperty(t.prototype,"_hideBullets",{enumerable:!1,configurable:!0,writable:!0,value:function(e){e.bullets&&Sk(e.bullets,(function(e){var t=e.get("sprite");t&&t.setPrivate("visible",!1)}))}}),Object.defineProperty(t.prototype,"_positionBullet",{enumerable:!1,configurable:!0,writable:!0,value:function(e){}}),Object.defineProperty(t.prototype,"_placeBulletsContainer",{enumerable:!1,configurable:!0,writable:!0,value:function(e){e.bulletsContainer.children.moveValue(this.bulletsContainer)}}),Object.defineProperty(t.prototype,"_removeBulletsContainer",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this.bulletsContainer;e.parent&&e.parent.children.removeValue(e)}}),Object.defineProperty(t.prototype,"disposeDataItem",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=e.bullets;t&&Sk(t,(function(e){e.dispose()}))}}),Object.defineProperty(t.prototype,"_getItemReaderLabel",{enumerable:!1,configurable:!0,writable:!0,value:function(){return""}}),Object.defineProperty(t.prototype,"showDataItem",{enumerable:!1,configurable:!0,writable:!0,value:function(t,n){return $b(this,void 0,void 0,(function(){var i,r;return Yb(this,(function(o){switch(o.label){case 0:return i=[e.prototype.showDataItem.call(this,t,n)],(r=t.bullets)&&Sk(r,(function(e){i.push(e.get("sprite").show(n))})),[4,Promise.all(i)];case 1:return o.sent(),[2]}}))}))}}),Object.defineProperty(t.prototype,"hideDataItem",{enumerable:!1,configurable:!0,writable:!0,value:function(t,n){return $b(this,void 0,void 0,(function(){var i,r;return Yb(this,(function(o){switch(o.label){case 0:return i=[e.prototype.hideDataItem.call(this,t,n)],(r=t.bullets)&&Sk(r,(function(e){i.push(e.get("sprite").hide(n))})),[4,Promise.all(i)];case 1:return o.sent(),[2]}}))}))}}),Object.defineProperty(t.prototype,"_sequencedShowHide",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return $b(this,void 0,void 0,(function(){var n,i,r=this;return Yb(this,(function(o){switch(o.label){case 0:return this.get("sequencedInterpolation")?(wk(t)||(t=this.get("interpolationDuration",0)),t>0?(n=this.startIndex(),i=this.endIndex(),[4,Promise.all(Tk(this.dataItems,(function(o,a){return $b(r,void 0,void 0,(function(){var r;return Yb(this,(function(s){switch(s.label){case 0:return r=t||0,(a<n-10||a>i+10)&&(r=0),[4,HI((this.get("sequencedDelay",0)+r/(i-n))*(a-n))];case 1:return s.sent(),e?[4,this.showDataItem(o,r)]:[3,3];case 2:return s.sent(),[3,5];case 3:return[4,this.hideDataItem(o,r)];case 4:s.sent(),s.label=5;case 5:return[2]}}))}))})))]):[3,2]):[3,4];case 1:return o.sent(),[3,4];case 2:return[4,Promise.all(Tk(this.dataItems,(function(t){return e?r.showDataItem(t,0):r.hideDataItem(t,0)})))];case 3:o.sent(),o.label=4;case 4:return[2]}}))}))}}),Object.defineProperty(t.prototype,"updateLegendValue",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=e.get("legendDataItem");if(t){var n=t.get("valueLabel");if(n){var i=n.text,r="";n._setDataItem(e),r=this.get("legendValueText",i.get("text","")),n.set("text",r),i.markDirtyText()}var o=t.get("label");if(o){i=o.text,r="";o._setDataItem(e),r=this.get("legendLabelText",i.get("text","")),o.set("text",r),i.markDirtyText()}}}}),Object.defineProperty(t.prototype,"updateLegendMarker",{enumerable:!1,configurable:!0,writable:!0,value:function(e){}}),Object.defineProperty(t.prototype,"_onHide",{enumerable:!1,configurable:!0,writable:!0,value:function(){e.prototype._onHide.call(this);var t=this.getTooltip();t&&t.hide()}}),Object.defineProperty(t.prototype,"hoverDataItem",{enumerable:!1,configurable:!0,writable:!0,value:function(e){}}),Object.defineProperty(t.prototype,"unhoverDataItem",{enumerable:!1,configurable:!0,writable:!0,value:function(e){}}),Object.defineProperty(t.prototype,"_getBase",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this.dataItems[this.startIndex()];return t?t.get(e):0}}),Object.defineProperty(t,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Series"}),Object.defineProperty(t,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:UI.classNames.concat([t.className])}),t}(UI);function qI(e,t){for(var n=0,i=t.length;n<i;n++){var r=t[n];if(r.length>0){var o=r[0];if(o.length>0){var a=o[0];e.moveTo(a.x,a.y);for(var s=0,l=r.length;s<l;s++)WI(e,r[s])}}}}function WI(e,t){for(var n=0,i=t.length;n<i;n++){var r=t[n];e.lineTo(r.x,r.y)}}var XI=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Hb(t,e),Object.defineProperty(t.prototype,"_beforeChanged",{enumerable:!1,configurable:!0,writable:!0,value:function(){e.prototype._beforeChanged.call(this),(this.isDirty("points")||this.isDirty("segments")||this._sizeDirty||this.isPrivateDirty("width")||this.isPrivateDirty("height"))&&(this._clear=!0)}}),Object.defineProperty(t.prototype,"_changed",{enumerable:!1,configurable:!0,writable:!0,value:function(){if(e.prototype._changed.call(this),this._clear){var t=this.get("points"),n=this.get("segments");if(t&&t.length>0){var i=t[0];this._display.moveTo(i.x,i.y),qI(this._display,[[t]])}else if(n)qI(this._display,n);else if(!this.get("draw")){var r=this.width(),o=this.height();this._display.moveTo(0,0),this._display.lineTo(r,o)}}}}),Object.defineProperty(t,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Line"}),Object.defineProperty(t,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:gS.classNames.concat([t.className])}),t}(gS),KI=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return Object.defineProperty(t,"thumb",{enumerable:!0,configurable:!0,writable:!0,value:t._makeThumb()}),Object.defineProperty(t,"startGrip",{enumerable:!0,configurable:!0,writable:!0,value:t._makeButton()}),Object.defineProperty(t,"endGrip",{enumerable:!0,configurable:!0,writable:!0,value:t._makeButton()}),Object.defineProperty(t,"_thumbBusy",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(t,"_startDown",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(t,"_endDown",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(t,"_thumbDown",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(t,"_gripDown",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),t}return Hb(t,e),Object.defineProperty(t.prototype,"_addOrientationClass",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._settings.themeTags=DT(this._settings.themeTags,["scrollbar",this._settings.orientation]),this._settings.background||(this._settings.background=LI.new(this._root,{themeTags:DT(this._settings.themeTags,["main","background"])}))}}),Object.defineProperty(t.prototype,"_makeButton",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this.children.push(FI.new(this._root,{themeTags:["resize","button",this.get("orientation")],icon:gS.new(this._root,{themeTags:["icon"]})}))}}),Object.defineProperty(t.prototype,"_makeThumb",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this.children.push(LI.new(this._root,{themeTags:["thumb",this.get("orientation")]}))}}),Object.defineProperty(t.prototype,"_handleAnimation",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this;e&&this._disposers.push(e.events.on("stopped",(function(){t.setPrivateRaw("isBusy",!1),t._thumbBusy=!1})))}}),Object.defineProperty(t.prototype,"_afterNew",{enumerable:!1,configurable:!0,writable:!0,value:function(){var t=this;this._addOrientationClass(),e.prototype._afterNew.call(this);var n=this.startGrip,i=this.endGrip,r=this.thumb,o=this.get("background");o&&this._disposers.push(o.events.on("click",(function(e){t.setPrivateRaw("isBusy",!0);var n,i,o,a=t._display.toLocal(e.point),s=t.width(),l=t.height(),u=t.get("orientation");n="vertical"==u?(a.y-r.height()/2)/l:(a.x-r.width()/2)/s,"vertical"==u?(i=n*l,o="y"):(i=n*s,o="x");var c=t.get("animationDuration",0);c>0?(t._thumbBusy=!0,t._handleAnimation(t.thumb.animate({key:o,to:i,duration:c,easing:t.get("animationEasing")}))):(t.thumb.set(o,i),t._root.events.on("frameended",(function(){t.setPrivateRaw("isBusy",!1)})))}))),this._disposers.push(r.events.on("dblclick",(function(e){if(hT(e.originalEvent,t)){var n=t.get("animationDuration",0),i=t.get("animationEasing");t.animate({key:"start",to:0,duration:n,easing:i}),t.animate({key:"end",to:1,duration:n,easing:i})}}))),this._disposers.push(n.events.on("pointerdown",(function(){t.setPrivateRaw("isBusy",!0),t._startDown=!0,t._gripDown="start"}))),this._disposers.push(i.events.on("pointerdown",(function(){t.setPrivateRaw("isBusy",!0),t._endDown=!0,t._gripDown="end"}))),this._disposers.push(r.events.on("pointerdown",(function(){t.setPrivateRaw("isBusy",!0),t._thumbDown=!0,t._gripDown=void 0}))),this._disposers.push(n.events.on("globalpointerup",(function(){t._startDown&&t.setPrivateRaw("isBusy",!1),t._startDown=!1}))),this._disposers.push(i.events.on("globalpointerup",(function(){t._endDown&&t.setPrivateRaw("isBusy",!1),t._endDown=!1}))),this._disposers.push(r.events.on("globalpointerup",(function(){t._thumbDown&&t.setPrivateRaw("isBusy",!1),t._thumbDown=!1}))),this._disposers.push(n.on("x",(function(){t._updateThumb()}))),this._disposers.push(i.on("x",(function(){t._updateThumb()}))),this._disposers.push(n.on("y",(function(){t._updateThumb()}))),this._disposers.push(i.on("y",(function(){t._updateThumb()}))),this._disposers.push(r.events.on("positionchanged",(function(){t._updateGripsByThumb()}))),"vertical"==this.get("orientation")?(n.set("x",0),i.set("x",0),this._disposers.push(r.adapters.add("y",(function(e){return Math.max(Math.min(Number(e),t.height()-r.height()),0)}))),this._disposers.push(r.adapters.add("x",(function(e){return t.width()/2}))),this._disposers.push(n.adapters.add("x",(function(e){return t.width()/2}))),this._disposers.push(i.adapters.add("x",(function(e){return t.width()/2}))),this._disposers.push(n.adapters.add("y",(function(e){return Math.max(Math.min(Number(e),t.height()),0)}))),this._disposers.push(i.adapters.add("y",(function(e){return Math.max(Math.min(Number(e),t.height()),0)})))):(n.set("y",0),i.set("y",0),this._disposers.push(r.adapters.add("x",(function(e){return Math.max(Math.min(Number(e),t.width()-r.width()),0)}))),this._disposers.push(r.adapters.add("y",(function(e){return t.height()/2}))),this._disposers.push(n.adapters.add("y",(function(e){return t.height()/2}))),this._disposers.push(i.adapters.add("y",(function(e){return t.height()/2}))),this._disposers.push(n.adapters.add("x",(function(e){return Math.max(Math.min(Number(e),t.width()),0)}))),this._disposers.push(i.adapters.add("x",(function(e){return Math.max(Math.min(Number(e),t.width()),0)}))))}}),Object.defineProperty(t.prototype,"_updateChildren",{enumerable:!1,configurable:!0,writable:!0,value:function(){e.prototype._updateChildren.call(this),(this.isDirty("end")||this.isDirty("start")||this._sizeDirty)&&this.updateGrips()}}),Object.defineProperty(t.prototype,"_changed",{enumerable:!1,configurable:!0,writable:!0,value:function(){if(e.prototype._changed.call(this),this.isDirty("start")||this.isDirty("end")){var t="rangechanged";this.events.isEnabled(t)&&this.events.dispatch(t,{type:t,target:this,start:this.get("start",0),end:this.get("end",1),grip:this._gripDown})}}}),Object.defineProperty(t.prototype,"updateGrips",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this.startGrip,t=this.endGrip,n=this.get("orientation"),i=this.height(),r=this.width();"vertical"==n?(e.set("y",i*this.get("start",0)),t.set("y",i*this.get("end",1))):(e.set("x",r*this.get("start",0)),t.set("x",r*this.get("end",1)));var o,a,s=this.getPrivate("positionTextFunction"),l=Math.round(100*this.get("start",0)),u=Math.round(100*this.get("end",0));s?(o=s.call(this,this.get("start",0)),a=s.call(this,this.get("end",0))):(o=l+"%",a=u+"%"),e.set("ariaLabel",this._t("From %1",void 0,o)),e.set("ariaValueNow",""+l),e.set("ariaValueText",l+"%"),e.set("ariaValueMin","0"),e.set("ariaValueMax","100"),t.set("ariaLabel",this._t("To %1",void 0,a)),t.set("ariaValueNow",""+u),t.set("ariaValueText",u+"%"),t.set("ariaValueMin","0"),t.set("ariaValueMax","100")}}),Object.defineProperty(t.prototype,"_updateThumb",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this.thumb,t=this.startGrip,n=this.endGrip,i=this.height(),r=this.width(),o=t.x(),a=n.x(),s=t.y(),l=n.y(),u=0,c=1;"vertical"==this.get("orientation")?wk(s)&&wk(l)&&(this._thumbBusy||e.isDragging()||(e.set("height",l-s),e.set("y",s)),u=s/i,c=l/i):wk(o)&&wk(a)&&(this._thumbBusy||e.isDragging()||(e.set("width",a-o),e.set("x",o)),u=o/r,c=a/r),!this.getPrivate("isBusy")||this.get("start")==u&&this.get("end")==c||(this.set("start",u),this.set("end",c));var h,d,f=this.getPrivate("positionTextFunction"),p=Math.round(100*this.get("start",0)),g=Math.round(100*this.get("end",0));f?(h=f.call(this,this.get("start",0)),d=f.call(this,this.get("end",0))):(h=p+"%",d=g+"%"),e.set("ariaLabel",this._t("From %1 to %2",void 0,h,d)),e.set("ariaValueNow",""+p),e.set("ariaValueText",p+"%")}}),Object.defineProperty(t.prototype,"_updateGripsByThumb",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this.thumb,t=this.startGrip,n=this.endGrip;if("vertical"==this.get("orientation")){var i=e.height();t.set("y",e.y()),n.set("y",e.y()+i)}else{i=e.width();t.set("x",e.x()),n.set("x",e.x()+i)}}}),Object.defineProperty(t,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Scrollbar"}),Object.defineProperty(t,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:xS.classNames.concat([t.className])}),t}(xS);const QI=Math.PI,JI=2*QI,ZI=1e-6,eE=JI-ZI;function tE(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function nE(){return new tE}function iE(e){return function(){return e}}function rE(e){return"object"==typeof e&&"length"in e?e:Array.from(e)}function oE(e){this._context=e}function aE(e){return new oE(e)}function sE(e){return e[0]}function lE(e){return e[1]}function uE(e,t){var n=iE(!0),i=null,r=aE,o=null;function a(a){var s,l,u,c=(a=rE(a)).length,h=!1;for(null==i&&(o=r(u=nE())),s=0;s<=c;++s)!(s<c&&n(l=a[s],s,a))===h&&((h=!h)?o.lineStart():o.lineEnd()),h&&o.point(+e(l,s,a),+t(l,s,a));if(u)return o=null,u+""||null}return e="function"==typeof e?e:void 0===e?sE:iE(e),t="function"==typeof t?t:void 0===t?lE:iE(t),a.x=function(t){return arguments.length?(e="function"==typeof t?t:iE(+t),a):e},a.y=function(e){return arguments.length?(t="function"==typeof e?e:iE(+e),a):t},a.defined=function(e){return arguments.length?(n="function"==typeof e?e:iE(!!e),a):n},a.curve=function(e){return arguments.length?(r=e,null!=i&&(o=r(i)),a):r},a.context=function(e){return arguments.length?(null==e?i=o=null:o=r(i=e),a):i},a}function cE(e,t,n){var i=null,r=iE(!0),o=null,a=aE,s=null;function l(l){var u,c,h,d,f,p=(l=rE(l)).length,g=!1,m=new Array(p),b=new Array(p);for(null==o&&(s=a(f=nE())),u=0;u<=p;++u){if(!(u<p&&r(d=l[u],u,l))===g)if(g=!g)c=u,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),h=u-1;h>=c;--h)s.point(m[h],b[h]);s.lineEnd(),s.areaEnd()}g&&(m[u]=+e(d,u,l),b[u]=+t(d,u,l),s.point(i?+i(d,u,l):m[u],n?+n(d,u,l):b[u]))}if(f)return s=null,f+""||null}function u(){return uE().defined(r).curve(a).context(o)}return e="function"==typeof e?e:void 0===e?sE:iE(+e),t="function"==typeof t?t:iE(void 0===t?0:+t),n="function"==typeof n?n:void 0===n?lE:iE(+n),l.x=function(t){return arguments.length?(e="function"==typeof t?t:iE(+t),i=null,l):e},l.x0=function(t){return arguments.length?(e="function"==typeof t?t:iE(+t),l):e},l.x1=function(e){return arguments.length?(i=null==e?null:"function"==typeof e?e:iE(+e),l):i},l.y=function(e){return arguments.length?(t="function"==typeof e?e:iE(+e),n=null,l):t},l.y0=function(e){return arguments.length?(t="function"==typeof e?e:iE(+e),l):t},l.y1=function(e){return arguments.length?(n=null==e?null:"function"==typeof e?e:iE(+e),l):n},l.lineX0=l.lineY0=function(){return u().x(e).y(t)},l.lineY1=function(){return u().x(e).y(n)},l.lineX1=function(){return u().x(i).y(t)},l.defined=function(e){return arguments.length?(r="function"==typeof e?e:iE(!!e),l):r},l.curve=function(e){return arguments.length?(a=e,null!=o&&(s=a(o)),l):a},l.context=function(e){return arguments.length?(null==e?o=s=null:s=a(o=e),l):o},l}tE.prototype=nE.prototype={constructor:tE,moveTo:function(e,t){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(e,t){this._+="L"+(this._x1=+e)+","+(this._y1=+t)},quadraticCurveTo:function(e,t,n,i){this._+="Q"+ +e+","+ +t+","+(this._x1=+n)+","+(this._y1=+i)},bezierCurveTo:function(e,t,n,i,r,o){this._+="C"+ +e+","+ +t+","+ +n+","+ +i+","+(this._x1=+r)+","+(this._y1=+o)},arcTo:function(e,t,n,i,r){e=+e,t=+t,n=+n,i=+i,r=+r;var o=this._x1,a=this._y1,s=n-e,l=i-t,u=o-e,c=a-t,h=u*u+c*c;if(r<0)throw new Error("negative radius: "+r);if(null===this._x1)this._+="M"+(this._x1=e)+","+(this._y1=t);else if(h>ZI)if(Math.abs(c*s-l*u)>ZI&&r){var d=n-o,f=i-a,p=s*s+l*l,g=d*d+f*f,m=Math.sqrt(p),b=Math.sqrt(h),y=r*Math.tan((QI-Math.acos((p+h-g)/(2*m*b)))/2),v=y/b,_=y/m;Math.abs(v-1)>ZI&&(this._+="L"+(e+v*u)+","+(t+v*c)),this._+="A"+r+","+r+",0,0,"+ +(c*d>u*f)+","+(this._x1=e+_*s)+","+(this._y1=t+_*l)}else this._+="L"+(this._x1=e)+","+(this._y1=t);else;},arc:function(e,t,n,i,r,o){e=+e,t=+t,o=!!o;var a=(n=+n)*Math.cos(i),s=n*Math.sin(i),l=e+a,u=t+s,c=1^o,h=o?i-r:r-i;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+l+","+u:(Math.abs(this._x1-l)>ZI||Math.abs(this._y1-u)>ZI)&&(this._+="L"+l+","+u),n&&(h<0&&(h=h%JI+JI),h>eE?this._+="A"+n+","+n+",0,1,"+c+","+(e-a)+","+(t-s)+"A"+n+","+n+",0,1,"+c+","+(this._x1=l)+","+(this._y1=u):h>ZI&&(this._+="A"+n+","+n+",0,"+ +(h>=QI)+","+c+","+(this._x1=e+n*Math.cos(r))+","+(this._y1=t+n*Math.sin(r))))},rect:function(e,t,n,i){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)+"h"+ +n+"v"+ +i+"h"+-n+"Z"},toString:function(){return this._}},oE.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t)}}};var hE=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return Object.defineProperty(t,"chartContainer",{enumerable:!0,configurable:!0,writable:!0,value:t.children.push(xS.new(t._root,{width:Zk,height:Zk,interactiveChildren:!1}))}),Object.defineProperty(t,"bulletsContainer",{enumerable:!0,configurable:!0,writable:!0,value:xS.new(t._root,{interactiveChildren:!1,isMeasured:!1,position:"absolute",width:Zk,height:Zk})}),t}return Hb(t,e),Object.defineProperty(t,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Chart"}),Object.defineProperty(t,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:xS.classNames.concat([t.className])}),t}(xS),dE=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return Object.defineProperty(t,"seriesContainer",{enumerable:!0,configurable:!0,writable:!0,value:xS.new(t._root,{width:Zk,height:Zk,isMeasured:!1})}),Object.defineProperty(t,"series",{enumerable:!0,configurable:!0,writable:!0,value:new qk}),t}return Hb(t,e),Object.defineProperty(t.prototype,"_afterNew",{enumerable:!1,configurable:!0,writable:!0,value:function(){var t=this;e.prototype._afterNew.call(this),this._disposers.push(this.series);var n=this.seriesContainer.children;this._disposers.push(this.series.events.onAll((function(e){if("clear"===e.type){Sk(e.oldValues,(function(e){t._removeSeries(e)}));var i=t.get("colors");i&&i.reset()}else if("push"===e.type)n.moveValue(e.newValue),t._processSeries(e.newValue);else if("setIndex"===e.type)n.setIndex(e.index,e.newValue),t._processSeries(e.newValue);else if("insertIndex"===e.type)n.insertIndex(e.index,e.newValue),t._processSeries(e.newValue);else if("removeIndex"===e.type)t._removeSeries(e.oldValue);else{if("moveIndex"!==e.type)throw new Error("Unknown IListEvent type");n.moveValue(e.value,e.newIndex),t._processSeries(e.value)}})))}}),Object.defineProperty(t.prototype,"_processSeries",{enumerable:!1,configurable:!0,writable:!0,value:function(e){e.chart=this,e._placeBulletsContainer(this)}}),Object.defineProperty(t.prototype,"_removeSeries",{enumerable:!1,configurable:!0,writable:!0,value:function(e){e.isDisposed()||(this.seriesContainer.children.removeValue(e),e._removeBulletsContainer())}}),Object.defineProperty(t,"className",{enumerable:!0,configurable:!0,writable:!0,value:"SerialChart"}),Object.defineProperty(t,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:hE.classNames.concat([t.className])}),t}(hE),fE=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Hb(t,e),Object.defineProperty(t,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Tick"}),Object.defineProperty(t,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:XI.classNames.concat([t.className])}),t}(XI),pE=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Hb(t,e),Object.defineProperty(t.prototype,"_afterNew",{enumerable:!1,configurable:!0,writable:!0,value:function(){e.prototype._afterNewApplyThemes.call(this)}}),Object.defineProperty(t.prototype,"_beforeChanged",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.isDirty("colors")&&this.reset()}}),Object.defineProperty(t.prototype,"generateColors",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.setPrivate("currentPass",this.getPrivate("currentPass",0)+1);var e=this.getPrivate("currentPass"),t=this.get("colors",[this.get("baseColor",MT.fromHex(16711680))]);this.getPrivate("numColors")||this.setPrivate("numColors",t.length);for(var n=this.getPrivate("numColors"),i=this.get("passOptions"),r=this.get("reuse"),o=0;o<n;o++)if(r)t.push(t[o]);else{for(var a=t[o].toHSL(),s=a.h+(i.hue||0)*e;s>1;)s-=1;var l=a.s+(i.saturation||0)*e;l>1&&(l=1),l<0&&(l=0);for(var u=a.l+(i.lightness||0)*e;u>1;)u-=1;t.push(MT.fromHSL(s,l,u))}}}),Object.defineProperty(t.prototype,"getIndex",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this.get("colors",[]),n=this.get("saturation");return e>=t.length?(this.generateColors(),this.getIndex(e)):null!=n?MT.saturate(t[e],n):t[e]}}),Object.defineProperty(t.prototype,"next",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this.getPrivate("currentStep",this.get("startIndex",0));return this.setPrivate("currentStep",e+this.get("step",1)),this.getIndex(e)}}),Object.defineProperty(t.prototype,"reset",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.setPrivate("currentStep",this.get("startIndex",0)),this.setPrivate("currentPass",0)}}),Object.defineProperty(t,"className",{enumerable:!0,configurable:!0,writable:!0,value:"ColorSet"}),Object.defineProperty(t,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:lS.classNames.concat([t.className])}),t}(lS),gE=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Hb(t,e),Object.defineProperty(t.prototype,"setupDefaultRules",{enumerable:!1,configurable:!0,writable:!0,value:function(){var t=this;e.prototype.setupDefaultRules.call(this);var n=this._root.interfaceColors,i=this._root.language,r=this.rule.bind(this);r("XYChart").setAll({colors:pE.new(this._root,{}),paddingLeft:20,paddingRight:20,paddingTop:16,paddingBottom:16,panX:!1,panY:!1,wheelStep:.25,arrangeTooltips:!0,pinchZoomX:!1,pinchZoomY:!1}),r("XYChart",["scrollbar","chart"]).setAll({paddingBottom:0,paddingLeft:0,paddingTop:0,paddingRight:0,colors:pE.new(this._root,{saturation:0})}),(o=r("Graphics",["scrollbar","overlay"])).setAll({fillOpacity:.5}),zS(o,"fill",n,"background"),r("RoundedRectangle",["xy","scrollbar","thumb"]).setAll({cornerRadiusTR:0,cornerRadiusTL:0,cornerRadiusBR:0,cornerRadiusBL:0,fillOpacity:0,focusable:!0}),r("RoundedRectangle",["xy","scrollbar","thumb"]).states.create("hover",{fillOpacity:.4}),r("RoundedRectangle",["xy","scrollbar","chart","background"]).setAll({cornerRadiusTL:0,cornerRadiusBL:0,cornerRadiusTR:0,cornerRadiusBR:0}),r("RoundedRectangle",["xy","scrollbar","chart","background","resize","button"]).setAll({cornerRadiusBL:40,cornerRadiusBR:40,cornerRadiusTL:40,cornerRadiusTR:40}),r("AxisRendererX",["xy","chart","scrollbar"]).setAll({strokeOpacity:0,inside:!0}),r("AxisRendererY",["xy","chart","scrollbar"]).setAll({strokeOpacity:0,inside:!0,minGridDistance:5}),r("AxisLabel",["xy","scrollbar","x"]).setAll({opacity:.5,centerY:Zk,minPosition:.01,maxPosition:.99,fontSize:"0.8em"}),r("AxisLabel",["category"]).setAll({text:"{category}",populateText:!0}),r("AxisLabel",["x"]).setAll({centerY:0}),r("AxisLabel",["x","inside"]).setAll({centerY:Zk}),r("AxisLabel",["x","inside","opposite"]).setAll({centerY:0}),r("AxisLabel",["x","opposite"]).setAll({centerY:Zk}),r("AxisLabel",["y"]).setAll({centerX:Zk}),r("AxisLabel",["y","inside"]).setAll({centerX:0}),r("AxisLabel",["y","inside","opposite"]).setAll({centerX:Zk}),r("AxisLabel",["y","opposite"]).setAll({centerX:0}),r("AxisLabel",["xy","scrollbar","y"]).setAll({visible:!1}),r("Grid",["xy","scrollbar","y"]).setAll({visible:!1}),r("Grid",["xy","scrollbar","x"]).setAll({opacity:.5}),r("XYCursor").setAll({behavior:"none",layer:30,exportable:!1,snapToSeriesBy:"xy"}),(o=r("Grid",["cursor","x"])).setAll({strokeOpacity:.8,strokeDasharray:[2,2]}),zS(o,"stroke",n,"alternativeBackground"),(o=r("Grid",["cursor","y"])).setAll({strokeOpacity:.8,strokeDasharray:[2,2]}),zS(o,"stroke",n,"alternativeBackground"),(o=r("Graphics",["cursor","selection"])).setAll({fillOpacity:.15}),zS(o,"fill",n,"alternativeBackground"),r("Axis").setAll({start:0,end:1,minZoomCount:1,maxZoomCount:1/0,maxZoomFactor:1e3,maxDeviation:.1,snapTooltip:!0,tooltipLocation:.5,panX:!0,panY:!0,zoomX:!0,zoomY:!0,fixAxisSize:!0}),r("AxisLabel").setAll({location:.5,multiLocation:0,centerX:eT,centerY:eT,paddingTop:3,paddingBottom:3,paddingLeft:5,paddingRight:5}),r("Container",["axis","header"]).setAll({layer:30}),(o=r("AxisRenderer")).setAll({strokeOpacity:0}),zS(o,"stroke",n,"grid"),r("AxisRendererX").setAll({minGridDistance:120,opposite:!1,inversed:!1,cellStartLocation:0,cellEndLocation:1,width:Zk}),r("AxisRendererY").setAll({minGridDistance:40,opposite:!1,inversed:!1,cellStartLocation:0,cellEndLocation:1,height:Zk}),(o=r("Rectangle",["axis","thumb"])).setAll({fillOpacity:0}),zS(o,"fill",n,"alternativeBackground"),o.states.create("hover",{fillOpacity:.1}),r("Rectangle",["axis","thumb","x"]).setAll({cursorOverStyle:"ew-resize"}),r("Rectangle",["axis","thumb","y"]).setAll({cursorOverStyle:"ns-resize"}),(o=r("Grid")).setAll({location:0,strokeOpacity:.15}),zS(o,"stroke",n,"grid"),r("Grid",["base"]).setAll({strokeOpacity:.3}),(o=r("Graphics",["axis","fill"])).setAll({visible:!1,isMeasured:!1,position:"absolute",fillOpacity:.05}),zS(o,"fill",n,"alternativeBackground"),r("Graphics",["axis","fill","range"]).setAll({isMeasured:!0}),r("Graphics",["series","fill","range"]).setAll({visible:!1,isMeasured:!0}),r("Grid",["series","range"]).setAll({visible:!1}),r("AxisTick",["series","range"]).setAll({visible:!1}),r("AxisLabel",["series","range"]).setAll({visible:!1}),(o=r("AxisTick")).setAll({location:.5,multiLocation:0,strokeOpacity:1,isMeasured:!1,position:"absolute",visible:!1}),zS(o,"stroke",n,"grid"),r("CategoryAxis").setAll({startLocation:0,endLocation:1,fillRule:function(e,t){var n=e.get("axisFill");n&&(wk(t)&&t%2!=0?n.setPrivate("visible",!1):n.setPrivate("visible",!0))}});var o,a=[{timeUnit:"millisecond",count:1},{timeUnit:"millisecond",count:5},{timeUnit:"millisecond",count:10},{timeUnit:"millisecond",count:50},{timeUnit:"millisecond",count:100},{timeUnit:"millisecond",count:500},{timeUnit:"second",count:1},{timeUnit:"second",count:5},{timeUnit:"second",count:10},{timeUnit:"second",count:30},{timeUnit:"minute",count:1},{timeUnit:"minute",count:5},{timeUnit:"minute",count:10},{timeUnit:"minute",count:15},{timeUnit:"minute",count:30},{timeUnit:"hour",count:1},{timeUnit:"hour",count:3},{timeUnit:"hour",count:6},{timeUnit:"hour",count:12},{timeUnit:"day",count:1},{timeUnit:"day",count:2},{timeUnit:"day",count:3},{timeUnit:"day",count:4},{timeUnit:"day",count:5},{timeUnit:"week",count:1},{timeUnit:"month",count:1},{timeUnit:"month",count:2},{timeUnit:"month",count:3},{timeUnit:"month",count:6},{timeUnit:"year",count:1},{timeUnit:"year",count:2},{timeUnit:"year",count:5},{timeUnit:"year",count:10},{timeUnit:"year",count:50},{timeUnit:"year",count:100},{timeUnit:"year",count:200},{timeUnit:"year",count:500},{timeUnit:"year",count:1e3},{timeUnit:"year",count:2e3},{timeUnit:"year",count:5e3},{timeUnit:"year",count:1e4},{timeUnit:"year",count:1e5}],s={millisecond:i.translate("_date_millisecond"),second:i.translate("_date_second"),minute:i.translate("_date_minute"),hour:i.translate("_date_hour"),day:i.translate("_date_day"),week:i.translate("_date_day"),month:i.translate("_date_month"),year:i.translate("_date_year")},l={millisecond:i.translate("_date_millisecond"),second:i.translate("_date_second"),minute:i.translate("_date_minute"),hour:i.translate("_date_day"),day:i.translate("_date_day"),week:i.translate("_date_day"),month:i.translate("_date_month")+" "+i.translate("_date_year"),year:i.translate("_date_year")},u={millisecond:i.translate("_date_millisecond_full"),second:i.translate("_date_second_full"),minute:i.translate("_date_minute_full"),hour:i.translate("_date_hour_full"),day:i.translate("_date_day_full"),week:i.translate("_date_week_full"),month:i.translate("_date_month_full"),year:i.translate("_date_year")};r("CategoryDateAxis").setAll({markUnitChange:!0,gridIntervals:Ak(a),dateFormats:nT(s),periodChangeDateFormats:nT(l)}),r("DateAxis").setAll({strictMinMax:!0,startLocation:0,endLocation:1,markUnitChange:!0,groupData:!1,groupCount:500,gridIntervals:Ak(a),dateFormats:nT(s),periodChangeDateFormats:nT(l),tooltipDateFormats:u,groupIntervals:[{timeUnit:"millisecond",count:1},{timeUnit:"millisecond",count:10},{timeUnit:"millisecond",count:100},{timeUnit:"second",count:1},{timeUnit:"second",count:10},{timeUnit:"minute",count:1},{timeUnit:"minute",count:10},{timeUnit:"hour",count:1},{timeUnit:"day",count:1},{timeUnit:"week",count:1},{timeUnit:"month",count:1},{timeUnit:"year",count:1}],fillRule:function(e){var n=e.get("axisFill");if(n){var i=e.component,r=e.get("value"),o=e.get("endValue"),a=i.intervalDuration(),s=i.getPrivate("baseInterval"),l=i.getPrivate("min",0);if(l=YI(new Date(l),s.timeUnit,s.count,t._root.locale.firstDayOfWeek,t._root.utc,void 0,t._root.timezone).getTime(),null!=r&&null!=o){var u=Math.round((r-l)/a)/2;u==Math.round(u)?n.setPrivate("visible",!0):n.setPrivate("visible",!1)}}}}),r("GaplessDateAxis").setAll({fillRule:function(e){var t=e.get("axisFill");if(t){var n=e.get("index"),i=!1;wk(n)&&n%2!=0||(i=!0),t.setPrivate("visible",i)}}}),r("ValueAxis").setAll({baseValue:0,logarithmic:!1,strictMinMax:!1,fillRule:function(e){var t=e.get("axisFill");if(t){var n=e.component,i=e.get("value"),r=n.getPrivate("step");wk(i)&&wk(r)&&(zT(i/r/2,5)==Math.round(i/r/2)?t.setPrivate("visible",!1):t.setPrivate("visible",!0))}}}),r("DurationAxis").setAll({baseUnit:"second"}),r("XYSeries").setAll({maskBullets:!0,stackToNegative:!0,locationX:.5,locationY:.5,snapTooltip:!1,openValueXGrouped:"open",openValueYGrouped:"open",valueXGrouped:"close",valueYGrouped:"close",seriesTooltipTarget:"series"}),r("BaseColumnSeries").setAll({adjustBulletPosition:!0}),r("ColumnSeries").setAll({clustered:!0}),r("RoundedRectangle",["series","column"]).setAll({position:"absolute",isMeasured:!1,width:Qk(70),height:Qk(70),strokeWidth:1,strokeOpacity:1,cornerRadiusBL:0,cornerRadiusTL:0,cornerRadiusBR:0,cornerRadiusTR:0,fillOpacity:1,role:"figure"}),r("LineSeries").setAll({connect:!0,autoGapCount:1.1,stackToNegative:!1}),r("Graphics",["series","stroke"]).setAll({position:"absolute",strokeWidth:1,strokeOpacity:1,isMeasured:!1}),r("Graphics",["series","fill"]).setAll({visible:!1,fillOpacity:0,position:"absolute",strokeWidth:0,strokeOpacity:0,isMeasured:!1}),r("Graphics",["line","series","legend","marker","stroke"]).setAll({draw:function(e,t){var n=t.parent;if(n){var i=n.height(),r=n.width();e.moveTo(0,i/2),e.lineTo(r,i/2)}}}),zS(o=r("Graphics",["line","series","legend","marker","stroke"]).states.create("disabled",{}),"stroke",n,"disabled"),r("Graphics",["line","series","legend","marker","fill"]).setAll({draw:function(e,t){var n=t.parent;if(n){var i=n.height(),r=n.width();e.moveTo(0,0),e.lineTo(r,0),e.lineTo(r,i),e.lineTo(0,i),e.lineTo(0,0)}}}),zS(o=r("Graphics",["line","series","legend","marker","fill"]).states.create("disabled",{}),"stroke",n,"disabled"),r("SmoothedXYLineSeries").setAll({tension:.5}),r("SmoothedXLineSeries").setAll({tension:.5}),r("SmoothedYLineSeries").setAll({tension:.5}),r("Candlestick").setAll({position:"absolute",isMeasured:!1,width:Qk(50),height:Qk(50),strokeWidth:1,strokeOpacity:1,cornerRadiusBL:0,cornerRadiusTL:0,cornerRadiusBR:0,cornerRadiusTR:0,fillOpacity:1,role:"figure"}),r("OHLC").setAll({width:Qk(80),height:Qk(80)}),r("CandlestickSeries").setAll({lowValueXGrouped:"low",lowValueYGrouped:"low",highValueXGrouped:"high",highValueYGrouped:"high",openValueXGrouped:"open",openValueYGrouped:"open",valueXGrouped:"close",valueYGrouped:"close"}),zS(o=r("Rectangle",["column","autocolor"]).states.create("riseFromOpen",{}),"fill",n,"positive"),zS(o,"stroke",n,"positive"),zS(o=r("Rectangle",["column","autocolor"]).states.create("dropFromOpen",{}),"fill",n,"negative"),zS(o,"stroke",n,"negative"),r("Rectangle",["column","autocolor","pro"]).states.create("riseFromPrevious",{fillOpacity:1}),r("Rectangle",["column","autocolor","pro"]).states.create("dropFromPrevious",{fillOpacity:0})}}),t}(HS),mE=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return Object.defineProperty(t,"xAxes",{enumerable:!0,configurable:!0,writable:!0,value:new qk}),Object.defineProperty(t,"yAxes",{enumerable:!0,configurable:!0,writable:!0,value:new qk}),Object.defineProperty(t,"topAxesContainer",{enumerable:!0,configurable:!0,writable:!0,value:t.chartContainer.children.push(xS.new(t._root,{width:Zk,layout:t._root.verticalLayout}))}),Object.defineProperty(t,"yAxesAndPlotContainer",{enumerable:!0,configurable:!0,writable:!0,value:t.chartContainer.children.push(xS.new(t._root,{width:Zk,height:Zk,layout:t._root.horizontalLayout}))}),Object.defineProperty(t,"bottomAxesContainer",{enumerable:!0,configurable:!0,writable:!0,value:t.chartContainer.children.push(xS.new(t._root,{width:Zk,layout:t._root.verticalLayout}))}),Object.defineProperty(t,"leftAxesContainer",{enumerable:!0,configurable:!0,writable:!0,value:t.yAxesAndPlotContainer.children.push(xS.new(t._root,{height:Zk,layout:t._root.horizontalLayout}))}),Object.defineProperty(t,"plotsContainer",{enumerable:!0,configurable:!0,writable:!0,value:t.yAxesAndPlotContainer.children.push(xS.new(t._root,{width:Zk,height:Zk,maskContent:!1}))}),Object.defineProperty(t,"plotContainer",{enumerable:!0,configurable:!0,writable:!0,value:t.plotsContainer.children.push(xS.new(t._root,{width:Zk,height:Zk}))}),Object.defineProperty(t,"topPlotContainer",{enumerable:!0,configurable:!0,writable:!0,value:t.plotsContainer.children.push(xS.new(t._root,{width:Zk,height:Zk}))}),Object.defineProperty(t,"gridContainer",{enumerable:!0,configurable:!0,writable:!0,value:t.plotContainer.children.push(xS.new(t._root,{width:Zk,height:Zk,isMeasured:!1}))}),Object.defineProperty(t,"topGridContainer",{enumerable:!0,configurable:!0,writable:!0,value:xS.new(t._root,{width:Zk,height:Zk,isMeasured:!1})}),Object.defineProperty(t,"rightAxesContainer",{enumerable:!0,configurable:!0,writable:!0,value:t.yAxesAndPlotContainer.children.push(xS.new(t._root,{height:Zk,layout:t._root.horizontalLayout}))}),Object.defineProperty(t,"axisHeadersContainer",{enumerable:!0,configurable:!0,writable:!0,value:t.plotContainer.children.push(xS.new(t._root,{}))}),Object.defineProperty(t,"zoomOutButton",{enumerable:!0,configurable:!0,writable:!0,value:t.topPlotContainer.children.push(FI.new(t._root,{themeTags:["zoom"],icon:gS.new(t._root,{themeTags:["button","icon"]})}))}),Object.defineProperty(t,"_movePoint",{enumerable:!0,configurable:!0,writable:!0,value:{x:0,y:0}}),Object.defineProperty(t,"_wheelDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(t,"_otherCharts",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(t,"_movePoints",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(t,"_downStartX",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(t,"_downEndX",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(t,"_downStartY",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(t,"_downEndY",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),t}return Hb(t,e),Object.defineProperty(t.prototype,"_afterNew",{enumerable:!1,configurable:!0,writable:!0,value:function(){var t=this;this._defaultThemes.push(gE.new(this._root)),e.prototype._afterNew.call(this),this._disposers.push(this.xAxes),this._disposers.push(this.yAxes);var n=this._root,i=this._root.verticalLayout,r=this.zoomOutButton;r.events.on("click",(function(){t.zoomOut()})),r.set("opacity",0),r.states.lookup("default").set("opacity",1),this.chartContainer.set("layout",i);var o=this.plotContainer;o.children.push(this.seriesContainer),this._disposers.push(this._processAxis(this.xAxes,this.bottomAxesContainer)),this._disposers.push(this._processAxis(this.yAxes,this.leftAxesContainer)),o.children.push(this.topGridContainer),o.children.push(this.bulletsContainer),o.set("interactive",!0),o.set("interactiveChildren",!1),o.set("background",mS.new(n,{themeTags:["xy","background"],fill:MT.fromHex(0),fillOpacity:0})),this._disposers.push(o.events.on("pointerdown",(function(e){t._handlePlotDown(e.originalEvent)}))),this._disposers.push(o.events.on("globalpointerup",(function(e){t._handlePlotUp(e.originalEvent)}))),this._disposers.push(o.events.on("globalpointermove",(function(e){t._handlePlotMove(e.originalEvent)}))),this._maskGrid(),this._setUpTouch()}}),Object.defineProperty(t.prototype,"_beforeChanged",{enumerable:!1,configurable:!0,writable:!0,value:function(){e.prototype._beforeChanged.call(this),(this.isDirty("pinchZoomX")||this.isDirty("pinchZoomY")||this.get("panX")||this.get("panY"))&&this._setUpTouch()}}),Object.defineProperty(t.prototype,"_setUpTouch",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.plotContainer._display.cancelTouch||(this.plotContainer._display.cancelTouch=!!(this.get("pinchZoomX")||this.get("pinchZoomY")||this.get("panX")||this.get("panY")))}}),Object.defineProperty(t.prototype,"_maskGrid",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.gridContainer.set("maskContent",!0),this.topGridContainer.set("maskContent",!0)}}),Object.defineProperty(t.prototype,"_removeSeries",{enumerable:!1,configurable:!0,writable:!0,value:function(t){var n=t.get("xAxis");n&&Dk(n.series,t);var i=t.get("yAxis");i&&Dk(i.series,t);var r=this.get("cursor");if(r){var o=r.get("snapToSeries");o&&Dk(o,t)}e.prototype._removeSeries.call(this,t)}}),Object.defineProperty(t.prototype,"handleWheel",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this,n=this.get("wheelX"),i=this.get("wheelY"),r=this.plotContainer,o=e.originalEvent;if(hT(o,this)){o.preventDefault();var a=r.toLocal(this._root.documentPointToRoot({x:o.clientX,y:o.clientY})),s=this.get("wheelStep",.2),l=o.deltaY/100,u=o.deltaX/100;"zoomX"!==n&&"zoomXY"!==n||0==u||this.xAxes.each((function(e){if(e.get("zoomX")){var n=e.get("start"),i=e.get("end"),o=e.fixPosition(a.x/r.width()),l=n-s*(i-n)*u*o,c=i+s*(i-n)*u*(1-o);1/(c-l)<e.get("maxZoomFactor",1/0)/e.get("minZoomCount",1)&&t._handleWheelAnimation(e.zoom(l,c))}})),"zoomX"!==i&&"zoomXY"!==i||0==l||this.xAxes.each((function(e){if(e.get("zoomX")){var n=e.get("start"),i=e.get("end"),o=e.fixPosition(a.x/r.width()),u=n-s*(i-n)*l*o,c=i+s*(i-n)*l*(1-o);1/(c-u)<e.getPrivate("maxZoomFactor",1/0)/e.get("minZoomCount",1)&&t._handleWheelAnimation(e.zoom(u,c))}})),"zoomY"!==n&&"zoomXY"!==n||0==u||this.yAxes.each((function(e){if(e.get("zoomY")){var n=e.get("start"),i=e.get("end"),o=e.fixPosition(a.y/r.height()),l=n-s*(i-n)*u*o,c=i+s*(i-n)*u*(1-o);1/(c-l)<e.get("maxZoomFactor",1/0)/e.get("minZoomCount",1)&&t._handleWheelAnimation(e.zoom(l,c))}})),"zoomY"!==i&&"zoomXY"!==i||0==l||this.yAxes.each((function(e){if(e.get("zoomY")){var n=e.get("start"),i=e.get("end"),o=e.fixPosition(a.y/r.height()),u=n-s*(i-n)*l*o,c=i+s*(i-n)*l*(1-o);1/(c-u)<e.get("maxZoomFactor",1/0)/e.get("minZoomCount",1)&&t._handleWheelAnimation(e.zoom(u,c))}})),"panX"!==n&&"panXY"!==n||0==u||this.xAxes.each((function(e){if(e.get("panX")){var n=e.get("start"),i=e.get("end"),r=t._getWheelSign(e)*s*(i-n)*u,o=n+r,a=i+r,l=t._fixWheel(o,a);o=l[0],a=l[1],t._handleWheelAnimation(e.zoom(o,a))}})),"panX"!==i&&"panXY"!==i||0==l||this.xAxes.each((function(e){if(e.get("panX")){var n=e.get("start"),i=e.get("end"),r=t._getWheelSign(e)*s*(i-n)*l,o=n+r,a=i+r,u=t._fixWheel(o,a);o=u[0],a=u[1],t._handleWheelAnimation(e.zoom(o,a))}})),"panY"!==n&&"panXY"!==n||0==u||this.yAxes.each((function(e){if(e.get("panY")){var n=e.get("start"),i=e.get("end"),r=t._getWheelSign(e)*s*(i-n)*u,o=n+r,a=i+r,l=t._fixWheel(o,a);o=l[0],a=l[1],t._handleWheelAnimation(e.zoom(o,a))}})),"panY"!==i&&"panXY"!==i||0==l||this.yAxes.each((function(e){if(e.get("panY")){var n=e.get("start"),i=e.get("end"),r=t._getWheelSign(e)*s*(i-n)*l,o=n-r,a=i-r,u=t._fixWheel(o,a);o=u[0],a=u[1],t._handleWheelAnimation(e.zoom(o,a))}}))}}}),Object.defineProperty(t.prototype,"_handleSetWheel",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this,t=this.get("wheelX"),n=this.get("wheelY"),i=this.plotContainer;"none"!==t||"none"!==n?(this._wheelDp=i.events.on("wheel",(function(t){e.handleWheel(t)})),this._disposers.push(this._wheelDp)):this._wheelDp&&this._wheelDp.dispose()}}),Object.defineProperty(t.prototype,"_getWheelSign",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=1;return e.get("renderer").get("inversed")&&(t=-1),t}}),Object.defineProperty(t.prototype,"_fixWheel",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var n=t-e;return e<0&&(t=(e=0)+n),t>1&&(e=(t=1)-n),[e,t]}}),Object.defineProperty(t.prototype,"_handlePlotDown",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this.plotContainer,n=t.toLocal(this._root.documentPointToRoot({x:e.clientX,y:e.clientY}));if((this.get("pinchZoomX")||this.get("pinchZoomY"))&&(e.pointerId&&tT(t._downPoints).length>0)){var i=this.xAxes.getIndex(0),r=this.yAxes.getIndex(0);i&&(this._downStartX=i.get("start",0),this._downEndX=i.get("end",1)),r&&(this._downStartY=r.get("start",0),this._downEndY=r.get("end",1))}if((this.get("panX")||this.get("panY"))&&n.x>=0&&n.y>=0&&n.x<=t.width()&&n.y<=this.height()){this._downPoint={x:e.clientX,y:e.clientY};var o=this.get("panX"),a=this.get("panY");o&&this.xAxes.each((function(e){e._panStart=e.get("start"),e._panEnd=e.get("end")})),a&&this.yAxes.each((function(e){e._panStart=e.get("start"),e._panEnd=e.get("end")}));var s="panstarted";this.events.isEnabled(s)&&this.events.dispatch(s,{type:s,target:this})}}}),Object.defineProperty(t.prototype,"_handleWheelAnimation",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this;e?e.events.on("stopped",(function(){t._dispatchWheelAnimation()})):this._dispatchWheelAnimation()}}),Object.defineProperty(t.prototype,"_dispatchWheelAnimation",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e="wheelended";this.events.isEnabled(e)&&this.events.dispatch(e,{type:e,target:this})}}),Object.defineProperty(t.prototype,"_handlePlotUp",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if(this._downPoint&&(this.get("panX")||this.get("panY"))){var t="panended";this.events.isEnabled(t)&&this.events.dispatch(t,{type:t,target:this})}this._downPoint=void 0,this.xAxes.each((function(e){e._isPanning=!1})),this.yAxes.each((function(e){e._isPanning=!1}))}}),Object.defineProperty(t.prototype,"_handlePlotMove",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this.plotContainer;if(this.get("pinchZoomX")||this.get("pinchZoomY")){var n=e.pointerId;if(n&&(this._movePoints[n]=this._root.documentPointToRoot({x:e.clientX,y:e.clientY}),tT(t._downPoints).length>1))return void this._handlePinch()}var i=this._downPoint;if(i){i=t.toLocal(this._root.documentPointToRoot(i));var r=t.toLocal(this._root.documentPointToRoot({x:e.clientX,y:e.clientY})),o=this.get("panX"),a=this.get("panY");if(o){var s=this.get("scrollbarX");s&&s.events.disableType("rangechanged"),this.xAxes.each((function(e){if(e.get("panX")){e._isPanning=!0;var n=e._panStart,o=e._panEnd,a=(o-n)*(i.x-r.x)/t.width();e.get("renderer").get("inversed")&&(a*=-1);var s=n+a,l=o+a;l-s<1+2*e.get("maxDeviation",1)&&(e.set("start",s),e.set("end",l))}})),s&&s.events.enableType("rangechanged")}if(a){var l=this.get("scrollbarY");l&&l.events.disableType("rangechanged"),this.yAxes.each((function(e){if(e.get("panY")){e._isPanning=!0;var n=e._panStart,o=e._panEnd,a=(o-n)*(i.y-r.y)/t.height();e.get("renderer").get("inversed")&&(a*=-1);var s=n-a,l=o-a;l-s<1+2*e.get("maxDeviation",1)&&(e.set("start",s),e.set("end",l))}})),l&&l.events.enableType("rangechanged")}}}}),Object.defineProperty(t.prototype,"_handlePinch",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e,t,n,i,r=this,o=this.plotContainer,a=0,s=[],l=[];if(iT(o._downPoints,(function(e,t){s[a]=t;var n=r._movePoints[e];n&&(l[a]=n),a++})),s.length>1&&l.length>1){var u=o.width(),c=o.height(),h=s[0],d=s[1],f=l[0],p=l[1];if(h&&d&&f&&p){if(f=o.toLocal(f),p=o.toLocal(p),h=o.toLocal(h),d=o.toLocal(d),this.get("pinchZoomX")){var g=this._downStartX,m=this._downEndX;if(null!=g&&null!=m){h.x>d.x&&(h=(e=qb([d,h],2))[0],d=e[1],f=(t=qb([p,f],2))[0],p=t[1]);var b=g+h.x/u*(m-g),y=g+d.x/u*(m-g),v=g+f.x/u*(m-g),_=g+p.x/u*(m-g),w=g*(k=Math.max(.001,y-b)/Math.max(.001,_-v))+b-v*k,x=m*k+y-_*k;this.xAxes.each((function(e){var t=e.fixPosition(w),n=e.fixPosition(x);e.zoom(t,n,0)}))}}if(this.get("pinchZoomY")){var P=this._downStartY,O=this._downEndY;if(null!=P&&null!=O){h.y<d.y&&(h=(n=qb([d,h],2))[0],d=n[1],f=(i=qb([p,f],2))[0],p=i[1]);b=P+(1-h.y/c)*(O-P),y=P+(1-d.y/c)*(O-P),v=P+(1-f.y/c)*(O-P),_=P+(1-p.y/c)*(O-P);var k,T=P*(k=Math.max(.001,y-b)/Math.max(.001,_-v))+b-v*k,S=O*k+y-_*k;this.yAxes.each((function(e){var t=e.fixPosition(T),n=e.fixPosition(S);e.zoom(t,n,0)}))}}}}}}),Object.defineProperty(t.prototype,"_handleCursorPosition",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this.get("cursor");if(e){var t=e.getPrivate("point"),n=e.get("snapToSeries");if(n&&t){var i=e.get("snapToSeriesBy"),r=[];Sk(n,(function(e){if(!e.isHidden()&&!e.isHiding())if("x!"!=i&&"y!"!=i)for(var t=e.startIndex(),n=e.endIndex(),o=t;o<n;o++){var a=e.dataItems[o];a&&!a.isHidden()&&r.push(a)}else{var s=e.get("tooltipDataItem");s&&r.push(s)}}));var o,a=1/0;if(Sk(r,(function(e){var n=e.get("point");if(n){var r=0;(r="x"==i||"x!"==i?Math.abs(t.x-n.x):"y"==i||"y!"==i?Math.abs(t.y-n.y):Math.hypot(t.x-n.x,t.y-n.y))<a&&(a=r,o=e)}})),Sk(n,(function(e){var t=e.get("tooltip");t&&t._setDataItem(void 0)})),o){var s=o.component;s.showDataItemTooltip(o);var l=o.get("point");l&&e.handleMove(s.toGlobal(l),!0)}}}}}),Object.defineProperty(t.prototype,"_updateCursor",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this.get("cursor");e&&e.handleMove()}}),Object.defineProperty(t.prototype,"_addCursor",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.plotContainer.children.push(e)}}),Object.defineProperty(t.prototype,"_prepareChildren",{enumerable:!1,configurable:!0,writable:!0,value:function(){var t=this;if(e.prototype._prepareChildren.call(this),this.series.each((function(e){t._colorize(e)})),(this.isDirty("wheelX")||this.isDirty("wheelY"))&&this._handleSetWheel(),this.isDirty("cursor")){var n=this._prevSettings.cursor,i=this.get("cursor");i!==n&&(this._disposeProperty("cursor"),n&&n.dispose(),i&&(i._setChart(this),this._addCursor(i),this._pushPropertyDisposer("cursor",i.events.on("selectended",(function(){t._handleCursorSelectEnd()})))),this._prevSettings.cursor=i)}if(this.isDirty("scrollbarX")){n=this._prevSettings.scrollbarX;var r=this.get("scrollbarX");r!==n&&(this._disposeProperty("scrollbarX"),n&&n.dispose(),r&&(r.parent||this.topAxesContainer.children.push(r),this._pushPropertyDisposer("scrollbarX",r.events.on("rangechanged",(function(e){t._handleScrollbar(t.xAxes,e.start,e.end,e.grip)}))),r.setPrivate("positionTextFunction",(function(e){var n=t.xAxes.getIndex(0);return n&&n.getTooltipText(e)||""}))),this._prevSettings.scrollbarX=r)}if(this.isDirty("scrollbarY")){n=this._prevSettings.scrollbarY;var o=this.get("scrollbarY");o!==n&&(this._disposeProperty("scrollbarY"),n&&n.dispose(),o&&(o.parent||this.rightAxesContainer.children.push(o),this._pushPropertyDisposer("scrollbarY",o.events.on("rangechanged",(function(e){t._handleScrollbar(t.yAxes,e.start,e.end,e.grip)}))),o.setPrivate("positionTextFunction",(function(e){var n=t.yAxes.getIndex(0);return n&&n.getTooltipText(e)||""}))),this._prevSettings.scrollbarY=o)}this._handleZoomOut()}}),Object.defineProperty(t.prototype,"_processSeries",{enumerable:!1,configurable:!0,writable:!0,value:function(t){e.prototype._processSeries.call(this,t),this._colorize(t)}}),Object.defineProperty(t.prototype,"_colorize",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this.get("colors");if(t&&null==e.get("fill")){var n=t.next();e._setSoft("stroke",n),e._setSoft("fill",n)}}}),Object.defineProperty(t.prototype,"_handleCursorSelectEnd",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this.get("cursor"),t=e.get("behavior"),n=e.getPrivate("downPositionX",0),i=e.getPrivate("downPositionY",0),r=e.getPrivate("positionX",.5),o=e.getPrivate("positionY",.5);this.xAxes.each((function(e){if("zoomX"===t||"zoomXY"===t){var i=e.toAxisPosition(n),o=e.toAxisPosition(r);e.zoom(i,o)}e.setPrivate("updateScrollbar",!0)})),this.yAxes.each((function(e){if("zoomY"===t||"zoomXY"===t){var n=e.toAxisPosition(i),r=e.toAxisPosition(o);e.zoom(n,r)}e.setPrivate("updateScrollbar",!0)}))}}),Object.defineProperty(t.prototype,"_handleScrollbar",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n,i){e.each((function(e){var r=e.fixPosition(t),o=e.fixPosition(n),a=e.zoom(r,o,void 0,i),s="updateScrollbar";e.setPrivateRaw(s,!1),a?a.events.on("stopped",(function(){e.setPrivateRaw(s,!0)})):e.setPrivateRaw(s,!0)}))}}),Object.defineProperty(t.prototype,"_processAxis",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var n=this;return e.events.onAll((function(e){if("clear"===e.type)Sk(e.oldValues,(function(e){n._removeAxis(e)}));else if("push"===e.type)t.children.push(e.newValue),e.newValue.processChart(n);else if("setIndex"===e.type)t.children.setIndex(e.index,e.newValue),e.newValue.processChart(n);else if("insertIndex"===e.type)t.children.insertIndex(e.index,e.newValue),e.newValue.processChart(n);else if("removeIndex"===e.type)n._removeAxis(e.oldValue);else{if("moveIndex"!==e.type)throw new Error("Unknown IListEvent type");t.children.moveValue(e.value,e.newIndex),e.value.processChart(n)}}))}}),Object.defineProperty(t.prototype,"_removeAxis",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if(!e.isDisposed()){var t=e.parent;t&&t.children.removeValue(e);var n=e.gridContainer,i=n.parent;i&&i.children.removeValue(n);var r=e.topGridContainer,o=r.parent;o&&o.children.removeValue(r)}}}),Object.defineProperty(t.prototype,"_updateChartLayout",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this.leftAxesContainer.width(),t=this.rightAxesContainer.width(),n=this.bottomAxesContainer;n.set("paddingLeft",e),n.set("paddingRight",t);var i=this.topAxesContainer;i.set("paddingLeft",e),i.set("paddingRight",t)}}),Object.defineProperty(t.prototype,"processAxis",{enumerable:!1,configurable:!0,writable:!0,value:function(e){}}),Object.defineProperty(t.prototype,"_handleAxisSelection",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var n,i=e.fixPosition(e.get("start",0)),r=e.fixPosition(e.get("end",1));if(i>r&&(i=(n=qb([r,i],2))[0],r=n[1]),-1!=this.xAxes.indexOf(e)){if(t||e.getPrivate("updateScrollbar")){var o=this.get("scrollbarX");!o||o.getPrivate("isBusy")&&!t||(o.setRaw("start",i),o.setRaw("end",r),o.updateGrips())}}else if(-1!=this.yAxes.indexOf(e)&&(t||e.getPrivate("updateScrollbar"))){var a=this.get("scrollbarY");!a||a.getPrivate("isBusy")&&!t||(a.setRaw("start",i),a.setRaw("end",r),a.updateGrips())}this._handleZoomOut()}}),Object.defineProperty(t.prototype,"_handleZoomOut",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this.zoomOutButton;if(e&&e.parent){var t=!1;this.xAxes.each((function(e){0==e.get("start")&&1==e.get("end")||(t=!0)})),this.yAxes.each((function(e){0==e.get("start")&&1==e.get("end")||(t=!0)})),t?e.isHidden()&&e.show():e.hide()}}}),Object.defineProperty(t.prototype,"inPlot",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this.plotContainer,n=this.getPrivate("otherCharts",this._otherCharts),i=t.toGlobal(e);if(e.x>=-.1&&e.y>=-.1&&e.x<=t.width()+.1&&e.y<=t.height()+.1)return!0;if(n)for(var r=n.length-1;r>=0;r--){var o=n[r];if(o!=this){var a=o.plotContainer,s=this._root.rootPointToDocument(i),l=o._root.documentPointToRoot(s),u=a.toLocal(l);if(u.x>=-.1&&u.y>=-.1&&u.x<=a.width()+.1&&u.y<=a.height()+.1)return!0}}return!1}}),Object.defineProperty(t.prototype,"arrangeTooltips",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e,t,n=this,i=this.plotContainer,r=i.width(),o=i.height(),a=i._display.toGlobal({x:0,y:0}),s=i._display.toGlobal({x:r,y:o}),l=[],u=0,c=1/0,h=this._movePoint,d=this.get("maxTooltipDistance"),f=this.get("maxTooltipDistanceBy","xy");wk(d)&&this.series.each((function(n){var i=n.get("tooltip");if(i){var r=i.get("pointTo");if(r){var o=Math.hypot(h.x-r.x,h.y-r.y);"x"==f?o=Math.abs(h.x-r.x):"y"==f&&(o=Math.abs(h.y-r.y)),o<c&&(c=o,e=n,t=r)}}}));var p=[];if(this.series.each((function(i){var r=i.get("tooltip");if(r){var o=!1,a=r.get("pointTo");if(a){if(d>=0){var s=r.get("pointTo");if(s&&i!=e){var c=Math.hypot(t.x-s.x,t.y-s.y);"x"==f?c=Math.abs(t.x-s.x):"y"==f&&(c=Math.abs(t.y-s.y)),c>d&&(o=!0)}}else-1==d&&i!=e&&(o=!0);n.inPlot(n._tooltipToLocal(a))&&r.dataItem?o||(u+=a.y):o=!0,o||i.isHidden()||i.isHiding()?r.hide(0):(r.show(),l.push(r),p.push(i))}}})),this.setPrivate("tooltipSeries",p),this.get("arrangeTooltips")){var g=this._root.tooltipContainer,m=l.length;if(u/m>o/2+a.y){l.sort((function(e,t){return nS(t.get("pointTo").y,e.get("pointTo").y)}));var b=s.y;Sk(l,(function(e){var t=e.height(),n=e.get("centerY");n instanceof Kk&&(t*=n.value),t+=e.get("marginBottom",0),e.set("bounds",{left:a.x,top:a.y,right:s.x,bottom:b}),b=Math.min(b-t,e._fy-t),g.children.moveValue(e,0)}))}else{l.reverse(),l.sort((function(e,t){return nS(e.get("pointTo").y,t.get("pointTo").y)}));var y=0;Sk(l,(function(e){var t=e.height(),n=e.get("centerY");n instanceof Kk&&(t*=n.value),t+=e.get("marginBottom",0),e.set("bounds",{left:a.x,top:y,right:s.x,bottom:Math.max(a.y+o,y+t)}),g.children.moveValue(e,0),y=Math.max(y+t,e._fy+t)}))}}}}),Object.defineProperty(t.prototype,"_tooltipToLocal",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this.plotContainer.toLocal(e)}}),Object.defineProperty(t.prototype,"zoomOut",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.xAxes.each((function(e){e.setPrivate("updateScrollbar",!0),e.zoom(0,1)})),this.yAxes.each((function(e){e.setPrivate("updateScrollbar",!0),e.zoom(0,1)}))}}),Object.defineProperty(t,"className",{enumerable:!0,configurable:!0,writable:!0,value:"XYChart"}),Object.defineProperty(t,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:dE.classNames.concat([t.className])}),t}(dE),bE=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Hb(t,e),Object.defineProperty(t.prototype,"_beforeChanged",{enumerable:!1,configurable:!0,writable:!0,value:function(){e.prototype._beforeChanged.call(this),(this.isPrivateDirty("width")||this.isPrivateDirty("height"))&&(this._clear=!0)}}),Object.defineProperty(t,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Grid"}),Object.defineProperty(t,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:gS.classNames.concat([t.className])}),t}(gS),yE=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return Object.defineProperty(t,"lineX",{enumerable:!0,configurable:!0,writable:!0,value:t.children.push(bE.new(t._root,{themeTags:["x"]}))}),Object.defineProperty(t,"lineY",{enumerable:!0,configurable:!0,writable:!0,value:t.children.push(bE.new(t._root,{themeTags:["y"]}))}),Object.defineProperty(t,"selection",{enumerable:!0,configurable:!0,writable:!0,value:t.children.push(gS.new(t._root,{themeTags:["selection","cursor"],layer:30}))}),Object.defineProperty(t,"_movePoint",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(t,"_lastPoint",{enumerable:!0,configurable:!0,writable:!0,value:{x:0,y:0}}),Object.defineProperty(t,"_tooltipX",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(t,"_tooltipY",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(t,"chart",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(t,"_toX",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(t,"_toY",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),t}return Hb(t,e),Object.defineProperty(t.prototype,"_afterNew",{enumerable:!1,configurable:!0,writable:!0,value:function(){var t=this;this._settings.themeTags=DT(this._settings.themeTags,["xy","cursor"]),e.prototype._afterNew.call(this),this.setAll({width:Zk,height:Zk,isMeasured:!0,position:"absolute"}),this.states.create("hidden",{visible:!0,opacity:0}),this._drawLines(),this.setPrivateRaw("visible",!1),this._disposers.push(this.setTimeout((function(){t.setPrivate("visible",!0)}),500)),this.lineX.events.on("positionchanged",(function(){t._handleXLine()})),this.lineY.events.on("positionchanged",(function(){t._handleYLine()}))}}),Object.defineProperty(t.prototype,"_setUpTouch",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this.chart;e&&(e.plotContainer._display.cancelTouch="none"!=this.get("behavior"))}}),Object.defineProperty(t.prototype,"_handleXLine",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this.lineX.x(),t=!0;(e<0||e>this.width())&&(t=!1),this.lineX.setPrivate("visible",t)}}),Object.defineProperty(t.prototype,"_handleYLine",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this.lineY.y(),t=!0;(e<0||e>this.height())&&(t=!1),this.lineY.setPrivate("visible",t)}}),Object.defineProperty(t.prototype,"_prepareChildren",{enumerable:!1,configurable:!0,writable:!0,value:function(){var t=this;if(e.prototype._prepareChildren.call(this),this.isDirty("xAxis")){this._tooltipX=!1;var n=this.get("xAxis");if(n){var i=n.get("tooltip");i&&(this._tooltipX=!0,i.on("pointTo",(function(){t._updateXLine(i)})))}}if(this.isDirty("yAxis")){this._tooltipY=!1;var r=this.get("yAxis");if(r){var o=r.get("tooltip");o&&(this._tooltipY=!0,o.on("pointTo",(function(){t._updateYLine(o)})))}}}}),Object.defineProperty(t.prototype,"_handleSyncWith",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this.chart;if(e){var t=this.get("syncWith"),n=[];t&&Sk(t,(function(e){var t=e.chart;t&&n.push(t)})),e._otherCharts=n}}}),Object.defineProperty(t.prototype,"_updateChildren",{enumerable:!1,configurable:!0,writable:!0,value:function(){if(e.prototype._updateChildren.call(this),this._handleSyncWith(),this.isDirty("positionX")||this.isDirty("positionY")){var t=this.get("positionX"),n=this.get("positionY");null==t&&null==n?this.hide(0):(this._movePoint=this.toGlobal(this._getPoint(this.get("positionX",0),this.get("positionY",0))),this.handleMove())}}}),Object.defineProperty(t.prototype,"_updateXLine",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=zT(this._display.toLocal(e.get("pointTo",{x:0,y:0})).x,2);this._toX!=t&&(this.lineX.animate({key:"x",to:t,duration:e.get("animationDuration",0),easing:e.get("animationEasing")}),this._toX=t)}}),Object.defineProperty(t.prototype,"_updateYLine",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=zT(this._display.toLocal(e.get("pointTo",{x:0,y:0})).y,2);this._toY!=t&&(this.lineY.animate({key:"y",to:t,duration:e.get("animationDuration",0),easing:e.get("animationEasing")}),this._toY=t)}}),Object.defineProperty(t.prototype,"_drawLines",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this;this.lineX.set("draw",(function(t){t.moveTo(0,0),t.lineTo(0,e.height())})),this.lineY.set("draw",(function(t){t.moveTo(0,0),t.lineTo(e.width(),0)}))}}),Object.defineProperty(t.prototype,"_setChart",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this;this.chart=e,this._handleSyncWith();var n=e.plotContainer;this.events.on("boundschanged",(function(){t._disposers.push(t.setTimeout((function(){t.get("alwaysShow")&&(t._movePoint=t.toGlobal(t._getPoint(t.get("positionX",0),t.get("positionY",0))),t.handleMove())}),50))})),aT("touchevents")&&(this._disposers.push(n.events.on("click",(function(e){uT(e.originalEvent)&&t._handleMove(e.originalEvent)}))),this._setUpTouch()),this._disposers.push(n.events.on("pointerdown",(function(e){t._handleCursorDown(e.originalEvent)}))),this._disposers.push(n.events.on("globalpointerup",(function(e){t._handleCursorUp(e.originalEvent),e.native||t.isHidden()||t._handleMove(e.originalEvent)}))),this._disposers.push(n.events.on("globalpointermove",(function(e){(t.get("syncWith")||0!=tT(n._downPoints).length||e.native||!t.isHidden())&&t._handleMove(e.originalEvent)})));var i=this.parent;i&&i.children.moveValue(this.selection)}}),Object.defineProperty(t.prototype,"_inPlot",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this.chart;return!!t&&t.inPlot(e)}}),Object.defineProperty(t.prototype,"_handleCursorDown",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this._root.documentPointToRoot({x:e.clientX,y:e.clientY}),n=this._display.toLocal(t),i=this.chart;if(this.selection.set("draw",(function(){})),i&&this._inPlot(n)){if(this._downPoint=n,"none"!=this.get("behavior")){this.selection.show();var r="selectstarted";this.events.isEnabled(r)&&this.events.dispatch(r,{type:r,target:this})}var o=this._getPosition(n).x,a=this._getPosition(n).y;this.setPrivate("downPositionX",o),this.setPrivate("downPositionY",a)}}}),Object.defineProperty(t.prototype,"_handleCursorUp",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if(this._downPoint){var t=this.get("behavior","none");if("none"!=t){"z"===t.charAt(0)&&this.selection.hide();var n=this.get("positionX"),i=this.getPrivate("positionX",0);wk(n)&&(i=n);var r=this.get("positionY"),o=this.getPrivate("positionY",0);wk(r)&&(o=r);var a=!1;if("zoomX"!==t&&"zoomXY"!==t&&"selectX"!==t&&"selectXY"!==t||Math.abs(i-this.getPrivate("downPositionX",0))>.003&&(a=!0),"zoomY"!==t&&"zoomXY"!==t&&"selectY"!==t&&"selectXY"!==t||Math.abs(o-this.getPrivate("downPositionY",0))>.003&&(a=!0),a){var s="selectended";this.events.isEnabled(s)&&this.events.dispatch(s,{type:s,target:this})}}}this._downPoint=void 0}}),Object.defineProperty(t.prototype,"_handleMove",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if(this.getPrivate("visible")){var t=this.chart;if(t&&tT(t.plotContainer._downPoints).length>1)return void this.set("forceHidden",!0);this.set("forceHidden",!1);var n=this._root.documentPointToRoot({x:e.clientX,y:e.clientY}),i=this._lastPoint;if(Math.round(i.x)===Math.round(n.x)&&Math.round(i.y)===Math.round(n.y))return;this._lastPoint=n,this.handleMove({x:n.x,y:n.y})}}}),Object.defineProperty(t.prototype,"_getPosition",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return{x:e.x/this.width(),y:e.y/this.height()}}}),Object.defineProperty(t.prototype,"handleMove",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){e||(e=this._movePoint);var n=this.get("alwaysShow");if(e){this._movePoint=e;var i=this._display.toLocal(e),r=this.chart;if(r&&this._inPlot(i)){if(r._movePoint=e,this.isHidden())this.show(),"z"==this.get("behavior","").charAt(0)&&this.selection.set("draw",(function(){}));var o=i.x,a=i.y,s=this._getPosition(i);this.setPrivate("point",i);var l=this.get("snapToSeries"),u=this.get("positionX"),c=s.x;wk(u)&&(c=u);var h=this.get("positionY"),d=s.y;wk(h)&&(d=h),this.setPrivate("positionX",c),this.setPrivate("positionY",d);var f=this._getPoint(c,d);if(o=f.x,a=f.y,r.xAxes.each((function(e){e._handleCursorPosition(c,l),n&&e.handleCursorShow()})),r.yAxes.each((function(e){e._handleCursorPosition(d,l),n&&e.handleCursorShow()})),!t){r._handleCursorPosition();var p="cursormoved";this.events.isEnabled(p)&&this.events.dispatch(p,{type:p,target:this})}this._updateLines(o,a),r.arrangeTooltips()}else if(!this._downPoint&&!n){this.hide(0);p="cursorhidden";this.events.isEnabled(p)&&this.events.dispatch(p,{type:p,target:this})}this._downPoint&&"none"!=this.get("behavior")&&this._updateSelection(i)}else this.hide(0)}}),Object.defineProperty(t.prototype,"_getPoint",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return{x:this.width()*e,y:this.height()*t}}}),Object.defineProperty(t.prototype,"_updateLines",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){this._tooltipX||this.lineX.set("x",e),this._tooltipY||this.lineY.set("y",t),this._drawLines()}}),Object.defineProperty(t.prototype,"_updateSelection",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this,n=this.selection,i=this.get("behavior"),r=this.width(),o=this.height();e.x<0&&(e.x=0),e.x>r&&(e.x=r),e.y<0&&(e.y=0),e.y>o&&(e.y=o),n.set("draw",(function(n){var a=t._downPoint;a&&("zoomXY"===i||"selectXY"===i?(n.moveTo(a.x,a.y),n.lineTo(a.x,e.y),n.lineTo(e.x,e.y),n.lineTo(e.x,a.y),n.lineTo(a.x,a.y)):"zoomX"===i||"selectX"===i?(n.moveTo(a.x,0),n.lineTo(a.x,o),n.lineTo(e.x,o),n.lineTo(e.x,0),n.lineTo(a.x,0)):"zoomY"!==i&&"selectY"!==i||(n.moveTo(0,a.y),n.lineTo(r,a.y),n.lineTo(r,e.y),n.lineTo(0,e.y),n.lineTo(0,a.y)))}))}}),Object.defineProperty(t.prototype,"_onHide",{enumerable:!1,configurable:!0,writable:!0,value:function(){if(this.isHidden()){var t=this.chart;t&&(t.xAxes.each((function(e){e.handleCursorHide()})),t.yAxes.each((function(e){e.handleCursorHide()})),t.series.each((function(e){e.handleCursorHide()})))}e.prototype._onHide.call(this)}}),Object.defineProperty(t.prototype,"_onShow",{enumerable:!1,configurable:!0,writable:!0,value:function(){if(!this.isHidden()){var t=this.chart;t&&(t.xAxes.each((function(e){e.handleCursorShow()})),t.yAxes.each((function(e){e.handleCursorShow()})))}e.prototype._onShow.call(this)}}),Object.defineProperty(t.prototype,"_dispose",{enumerable:!1,configurable:!0,writable:!0,value:function(){e.prototype._dispose.call(this),this.selection.dispose()}}),Object.defineProperty(t,"className",{enumerable:!0,configurable:!0,writable:!0,value:"XYCursor"}),Object.defineProperty(t,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:xS.classNames.concat([t.className])}),t}(xS);var vE=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return Object.defineProperty(t,"_xField",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(t,"_yField",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(t,"_xOpenField",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(t,"_yOpenField",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(t,"_xLowField",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(t,"_xHighField",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(t,"_yLowField",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(t,"_yHighField",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(t,"_axesDirty",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(t,"_stackDirty",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(t,"_selectionProcessed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(t,"_dataSets",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(t,"_mainContainerMask",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(t,"_x",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(t,"_y",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(t,"mainContainer",{enumerable:!0,configurable:!0,writable:!0,value:t.children.push(xS.new(t._root,{}))}),Object.defineProperty(t,"axisRanges",{enumerable:!0,configurable:!0,writable:!0,value:new Gk}),Object.defineProperty(t,"_skipped",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(t,"_couldStackTo",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(t,"_reallyStackedTo",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(t,"_stackedSeries",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(t,"_aLocationX0",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(t,"_aLocationX1",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(t,"_aLocationY0",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(t,"_aLocationY1",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(t,"_showBullets",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(t,"valueXFields",{enumerable:!0,configurable:!0,writable:!0,value:["valueX","openValueX","lowValueX","highValueX"]}),Object.defineProperty(t,"valueYFields",{enumerable:!0,configurable:!0,writable:!0,value:["valueY","openValueY","lowValueY","highValueY"]}),Object.defineProperty(t,"_valueXFields",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(t,"_valueYFields",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(t,"_valueXShowFields",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(t,"_valueYShowFields",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(t,"__valueXShowFields",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(t,"__valueYShowFields",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(t,"_emptyDataItem",{enumerable:!0,configurable:!0,writable:!0,value:new VI(t,void 0,{})}),Object.defineProperty(t,"_dataSetId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(t,"_tooltipFieldX",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(t,"_tooltipFieldY",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),t}return Hb(t,e),Object.defineProperty(t.prototype,"_afterNew",{enumerable:!1,configurable:!0,writable:!0,value:function(){var t=this;if(this.fields.push("categoryX","categoryY","openCategoryX","openCategoryY"),this.valueFields.push("valueX","valueY","openValueX","openValueY","lowValueX","lowValueY","highValueX","highValueY"),this._setRawDefault("vcx",1),this._setRawDefault("vcy",1),this._setRawDefault("valueXShow","valueXWorking"),this._setRawDefault("valueYShow","valueYWorking"),this._setRawDefault("openValueXShow","openValueXWorking"),this._setRawDefault("openValueYShow","openValueYWorking"),this._setRawDefault("lowValueXShow","lowValueXWorking"),this._setRawDefault("lowValueYShow","lowValueYWorking"),this._setRawDefault("highValueXShow","highValueXWorking"),this._setRawDefault("highValueYShow","highValueYWorking"),this._setRawDefault("lowValueXGrouped","low"),this._setRawDefault("lowValueYGrouped","low"),this._setRawDefault("highValueXGrouped","high"),this._setRawDefault("highValueYGrouped","high"),e.prototype._afterNew.call(this),this._settings.xAxis.series.push(this),this._settings.yAxis.series.push(this),this.set("maskContent",!0),this._disposers.push(this.axisRanges.events.onAll((function(e){if("clear"===e.type)Sk(e.oldValues,(function(e){t._removeAxisRange(e)}));else if("push"===e.type)t._processAxisRange(e.newValue);else if("setIndex"===e.type)t._processAxisRange(e.newValue);else if("insertIndex"===e.type)t._processAxisRange(e.newValue);else if("removeIndex"===e.type)t._removeAxisRange(e.oldValue);else{if("moveIndex"!==e.type)throw new Error("Unknown IStreamEvent type");t._processAxisRange(e.value)}}))),!this.get("baseAxis")){var n=this.get("xAxis"),i=this.get("yAxis");i.isType("CategoryAxis")||i.isType("DateAxis")?this.set("baseAxis",i):this.set("baseAxis",n)}this.states.create("hidden",{opacity:1,visible:!1}),this._makeFieldNames()}}),Object.defineProperty(t.prototype,"_processAxisRange",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=xS.new(this._root,{});e.container=t,this.children.push(t),e.series=this;var n=e.axisDataItem;n.setRaw("isRange",!0);var i=n.component;if(i){i._processAxisRange(n,["range","series"]);var r=n.get("bullet");if(r){var o=r.get("sprite");o&&o.setPrivate("visible",!1)}var a=n.get("axisFill");a&&t.set("mask",a),i._seriesAxisRanges.push(n)}}}),Object.defineProperty(t.prototype,"_removeAxisRange",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=e.axisDataItem,n=t.component;n.disposeDataItem(t),Dk(n._seriesAxisRanges,t);var i=e.container;i&&i.dispose()}}),Object.defineProperty(t.prototype,"_updateFields",{enumerable:!1,configurable:!0,writable:!0,value:function(){var t=this;e.prototype._updateFields.call(this),this._valueXFields=[],this._valueYFields=[],this._valueXShowFields=[],this._valueYShowFields=[],this.__valueXShowFields=[],this.__valueYShowFields=[],this.valueXFields&&Sk(this.valueXFields,(function(e){if(t.get(e+"Field")){t._valueXFields.push(e);var n=t.get(e+"Show");t.__valueXShowFields.push(n),-1!=n.indexOf("Working")?t._valueXShowFields.push(n.split("Working")[0]):t._valueYShowFields.push(n)}})),this.valueYFields&&Sk(this.valueYFields,(function(e){if(t.get(e+"Field")){t._valueYFields.push(e);var n=t.get(e+"Show");t.__valueYShowFields.push(n),-1!=n.indexOf("Working")?t._valueYShowFields.push(n.split("Working")[0]):t._valueYShowFields.push(n)}}))}}),Object.defineProperty(t.prototype,"_dispose",{enumerable:!1,configurable:!0,writable:!0,value:function(){e.prototype._dispose.call(this);var t=this.chart;t&&t.series.removeValue(this),jk(this.get("xAxis").series,this),jk(this.get("yAxis").series,this)}}),Object.defineProperty(t.prototype,"_min",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var n,i,r=(n=this.getPrivate(e),i=t,null==n?i:null==i?n:i<n?i:n);this.setPrivate(e,r)}}),Object.defineProperty(t.prototype,"_max",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var n,i,r=(n=this.getPrivate(e),i=t,null==n?i:null==i?n:i>n?i:n);this.setPrivate(e,r)}}),Object.defineProperty(t.prototype,"_shouldMakeBullet",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return!(!this.get("xAxis").inited||!this.get("yAxis").inited)&&(null!=e.get(this._xField)&&null!=e.get(this._yField))}}),Object.defineProperty(t.prototype,"_makeFieldNames",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this.get("xAxis"),t=this.get("yAxis"),n=e.getPrivate("name"),i=kT(n),r=t.getPrivate("name"),o=kT(r),a=e.get("renderer").getPrivate("letter"),s=t.get("renderer").getPrivate("letter"),l="open",u="low",c="high",h="Show";"ValueAxis"===e.className?(this._xField=this.get(n+a+h),this._xOpenField=this.get(l+i+a+h),this._xLowField=this.get(u+i+a+h),this._xHighField=this.get(c+i+a+h)):(this._xField=n+a,this._xOpenField=l+i+a,this._xLowField=u+i+a,this._xHighField=c+i+a),"ValueAxis"===t.className?(this._yField=this.get(r+s+h),this._yOpenField=this.get(l+o+s+h),this._yLowField=this.get(u+o+s+h),this._yHighField=this.get(c+o+s+h)):(this._yField=r+s,this._yOpenField=l+o+s,this._yLowField=u+o+s,this._yHighField=c+o+s)}}),Object.defineProperty(t.prototype,"_fixVC",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this.get("xAxis"),t=this.get("yAxis"),n=this.get("baseAxis"),i=this.states.lookup("hidden"),r=this.get("sequencedInterpolation");if(i){var o=0;r&&(o=.999999999999),e===n?i.set("vcy",o):(t===n||i.set("vcy",o),i.set("vcx",o))}}}),Object.defineProperty(t.prototype,"_handleMaskBullets",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.isDirty("maskBullets")&&this.bulletsContainer.set("maskContent",this.get("maskBullets"))}}),Object.defineProperty(t.prototype,"_prepareChildren",{enumerable:!1,configurable:!0,writable:!0,value:function(){var t=this;e.prototype._prepareChildren.call(this),(this.isDirty("valueYShow")||this.isDirty("valueXShow"))&&(this._updateFields(),this._makeFieldNames(),this._valuesDirty=!0),this.set("width",this.get("xAxis").width()),this.set("height",this.get("yAxis").height()),this._handleMaskBullets();var n,i,r=this.get("xAxis"),o=this.get("yAxis"),a=this.get("baseAxis");switch(this.get("tooltipPositionX")){case"open":n=this._xOpenField;break;case"low":n=this._xLowField;break;case"high":n=this._xHighField;break;default:n=this._xField}switch(this._tooltipFieldX=n,this.get("tooltipPositionY")){case"open":i=this._yOpenField;break;case"low":i=this._yLowField;break;case"high":i=this._yHighField;break;default:i=this._yField}this._tooltipFieldY=i,this.isDirty("baseAxis")&&this._fixVC(),this.set("x",r.x()-pT(r.get("centerX",0),r.width())-r.parent.get("paddingLeft",0)),this.set("y",o.y()-pT(o.get("centerY",0),o.height())-o.parent.get("paddingTop",0)),this.bulletsContainer.set("y",this.y()),this.bulletsContainer.set("x",this.x());var s=this.get("stacked");if(this.isDirty("stacked")&&(s?this._valuesDirty&&!this._dataProcessed||this._stack():this._unstack()),this._valuesDirty&&!this._dataProcessed&&(this._dataProcessed=!0,s&&this._stack(),Sk(this.dataItems,(function(e){Sk(t._valueXShowFields,(function(n){var i=e.get(n);null!=i&&(s&&(i+=t.getStackedXValue(e,n)),t._min("minX",i),t._max("maxX",i))})),Sk(t._valueYShowFields,(function(n){var i=e.get(n);null!=i&&(s&&(i+=t.getStackedYValue(e,n)),t._min("minY",i),t._max("maxY",i))})),r.processSeriesDataItem(e,t._valueXFields),o.processSeriesDataItem(e,t._valueYFields)})),r._seriesValuesDirty=!0,o._seriesValuesDirty=!0,this.get("ignoreMinMax")||((this.isPrivateDirty("minX")||this.isPrivateDirty("maxX"))&&r.markDirtyExtremes(),(this.isPrivateDirty("minY")||this.isPrivateDirty("maxY"))&&o.markDirtyExtremes()),this._markStakedDirtyStack(),this.updateLegendValue(void 0)),(this.isDirty("vcx")||this.isDirty("vcy"))&&this._markStakedDirtyStack(),this._dataGrouped||(r._groupSeriesData(this),o._groupSeriesData(this),this._dataGrouped=!0),this._valuesDirty||this.isPrivateDirty("startIndex")||this.isPrivateDirty("endIndex")||this.isDirty("vcx")||this.isDirty("vcy")||this._stackDirty){var l=this.startIndex(),u=this.endIndex(),c=this.get("minBulletDistance",0);if(c>0&&a&&(a.get("renderer").axisLength()/(u-l)>c?this._showBullets=!0:this._showBullets=!1),(this._psi!=l||this._pei!=u||this.isDirty("vcx")||this.isDirty("vcy")||this._stackDirty||this._valuesDirty)&&!this._selectionProcessed){this._selectionProcessed=!0;var h=this.get("vcx",1),d=this.get("vcy",1),f=this.get("stacked",!1),p=this.getPrivate("outOfSelection");if(a===r)if(o._calculateTotals(),this.setPrivateRaw("selectionMinY",void 0),this.setPrivateRaw("selectionMaxY",void 0),p)o.markDirtySelectionExtremes();else for(var g=l;g<u;g++)this.processYSelectionDataItem(this.dataItems[g],d,f);else if(a===o)if(r._calculateTotals(),this.setPrivateRaw("selectionMinX",void 0),this.setPrivateRaw("selectionMaxX",void 0),p)o.markDirtySelectionExtremes();else for(g=l;g<u;g++)this.processXSelectionDataItem(this.dataItems[g],h,f);if(a===r){if("valueYWorking"!==this.get("valueYShow")){var m=this.getPrivate("selectionMinY");null!=m&&(this.setPrivateRaw("minY",m),o.markDirtyExtremes());var b=this.getPrivate("selectionMaxY");null!=b&&(this.setPrivateRaw("maxY",b),o.markDirtyExtremes())}}else if(a===o&&"valueXWorking"!==this.get("valueXShow")){var y=this.getPrivate("selectionMinX");null!=y&&(this.setPrivateRaw("minX",y),o.markDirtyExtremes());var v=this.getPrivate("selectionMaxX");null!=v&&(this.setPrivateRaw("maxX",v),r.markDirtyExtremes())}(this.isPrivateDirty("selectionMinX")||this.isPrivateDirty("selectionMaxX"))&&r.markDirtySelectionExtremes(),(this.isPrivateDirty("selectionMinY")||this.isPrivateDirty("selectionMaxY"))&&o.markDirtySelectionExtremes()}}}}),Object.defineProperty(t.prototype,"_makeRangeMask",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this;if(this.axisRanges.length>0){var t=this._mainContainerMask;null==t&&(t=this.children.push(gS.new(this._root,{})),this._mainContainerMask=t,t.set("draw",(function(n,i){var r=e.parent;if(r){var o=e._root.container.width(),a=e._root.container.height();n.moveTo(-o,-a),n.lineTo(-o,2*a),n.lineTo(2*o,2*a),n.lineTo(2*o,-a),n.lineTo(-o,-a),e.axisRanges.each((function(e){var t=e.axisDataItem.get("axisFill");if(r&&t){var o=t.get("draw");o&&o(n,i)}}))}e.mainContainer._display.mask=t._display}))),t.markDirty(),t._markDirtyKey("fill")}else this.mainContainer._display.mask=null}}),Object.defineProperty(t.prototype,"_updateChildren",{enumerable:!1,configurable:!0,writable:!0,value:function(){e.prototype._updateChildren.call(this),this._x=this.x(),this._y=this.y(),this._makeRangeMask()}}),Object.defineProperty(t.prototype,"_stack",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this.chart;if(e){var t=e.series.indexOf(this);if(this._couldStackTo=[],t>0)for(var n=void 0,i=t-1;i>=0&&((n=e.series.getIndex(i)).get("xAxis")!==this.get("xAxis")||n.get("yAxis")!==this.get("yAxis")||n.className!==this.className||(this._couldStackTo.push(n),n.get("stacked")));i--);this._stackDataItems()}}}),Object.defineProperty(t.prototype,"_unstack",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this;iT(this._reallyStackedTo,(function(t,n){delete n._stackedSeries[e.uid]})),this._reallyStackedTo={},Sk(this.dataItems,(function(e){e.setRaw("stackToItemY",void 0),e.setRaw("stackToItemX",void 0)}))}}),Object.defineProperty(t.prototype,"_stackDataItems",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e,t,n=this,i=this.get("baseAxis"),r=this.get("xAxis"),o=this.get("yAxis");i===r?(e="valueY",t="stackToItemY"):i===o&&(e="valueX",t="stackToItemX");var a=this._couldStackTo.length,s=0,l=this.get("stackToNegative");this._reallyStackedTo={},Sk(this.dataItems,(function(i){for(var r=0;r<a;r++){var o=n._couldStackTo[r],u=o.dataItems[s],c=i.get(e);if(u){var h=u.get(e);if(l){if(!wk(c))break;if(wk(h)){if(c>=0&&h>=0){i.setRaw(t,u),n._reallyStackedTo[o.uid]=o,o._stackedSeries[n.uid]=n;break}if(c<0&&h<0){i.setRaw(t,u),n._reallyStackedTo[o.uid]=o,o._stackedSeries[n.uid]=n;break}}}else if(wk(c)&&wk(h)){i.setRaw(t,u),n._reallyStackedTo[o.uid]=o,o._stackedSeries[n.uid]=n;break}}}s++}))}}),Object.defineProperty(t.prototype,"processXSelectionDataItem",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n){var i=this;Sk(this.__valueXShowFields,(function(r){var o=e.get(r);null!=o&&(n&&(o+=i.getStackedXValueWorking(e,r)),i._min("selectionMinX",o),i._max("selectionMaxX",o*t))}))}}),Object.defineProperty(t.prototype,"processYSelectionDataItem",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n){var i=this;Sk(this.__valueYShowFields,(function(r){var o=e.get(r);null!=o&&(n&&(o+=i.getStackedYValueWorking(e,r)),i._min("selectionMinY",o),i._max("selectionMaxY",o*t))}))}}),Object.defineProperty(t.prototype,"getStackedYValueWorking",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var n=e.get("stackToItemY");if(n){var i=n.component;return n.get(t,0)*i.get("vcy",1)+this.getStackedYValueWorking(n,t)}return 0}}),Object.defineProperty(t.prototype,"getStackedXValueWorking",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var n=e.get("stackToItemX");if(n){var i=n.component;return n.get(t,0)*i.get("vcx",1)+this.getStackedXValueWorking(n,t)}return 0}}),Object.defineProperty(t.prototype,"getStackedYValue",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var n=e.get("stackToItemY");return n?n.get(t,0)+this.getStackedYValue(n,t):0}}),Object.defineProperty(t.prototype,"getStackedXValue",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var n=e.get("stackToItemX");return n?n.get(t,0)+this.getStackedXValue(n,t):0}}),Object.defineProperty(t.prototype,"createLegendMarker",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.updateLegendMarker()}}),Object.defineProperty(t.prototype,"_markDirtyAxes",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._axesDirty=!0,this.markDirty()}}),Object.defineProperty(t.prototype,"_markDataSetDirty",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._afterDataChange(),this._valuesDirty=!0,this._dataProcessed=!1,this._aggregatesCalculated=!1,this.markDirty()}}),Object.defineProperty(t.prototype,"_clearDirty",{enumerable:!1,configurable:!0,writable:!0,value:function(){e.prototype._clearDirty.call(this),this._axesDirty=!1,this._selectionProcessed=!1,this._stackDirty=!1,this._dataProcessed=!1}}),Object.defineProperty(t.prototype,"_positionBullet",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=e.get("sprite");if(t){var n=t.dataItem,i=e.get("locationX",n.get("locationX",.5)),r=e.get("locationY",n.get("locationY",.5)),o=this.get("xAxis"),a=this.get("yAxis"),s=o.getDataItemPositionX(n,this._xField,i,this.get("vcx",1)),l=a.getDataItemPositionY(n,this._yField,r,this.get("vcy",1)),u=this.getPoint(s,l),c=n.get("left",u.x),h=n.get("right",u.x),d=n.get("top",u.y),f=n.get("bottom",u.y);if(this._shouldShowBullet(s,l)){e.getPrivate("hidden")?t.setPrivate("visible",!1):t.setPrivate("visible",!0);var p=h-c,g=f-d;t.isType("Label")&&(t.setPrivate("maxWidth",Math.abs(p)),t.setPrivate("maxHeight",Math.abs(g)));var m=c+p*i,b=f-g*r;t.set("x",m),t.set("y",b)}else t.setPrivate("visible",!1)}}}),Object.defineProperty(t.prototype,"_shouldShowBullet",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return this._showBullets}}),Object.defineProperty(t.prototype,"setDataSet",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if(this._dataSets[e]){this._handleDataSetChange(),this._dataItems=this._dataSets[e],this._markDataSetDirty(),this._dataSetId=e;var t="datasetchanged";this.events.isEnabled(t)&&this.events.dispatch(t,{type:t,target:this,id:e})}}}),Object.defineProperty(t.prototype,"_handleDataSetChange",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.bullets.length>0&&Sk(this._dataItems,(function(e){var t=e.bullets;t&&Sk(t,(function(e){var t=e.get("sprite");t&&t.setPrivate("visible",!1)}))})),this._selectionProcessed=!1}}),Object.defineProperty(t.prototype,"show",{enumerable:!1,configurable:!0,writable:!0,value:function(t){return $b(this,void 0,void 0,(function(){var n,i=this;return Yb(this,(function(r){switch(r.label){case 0:return this._fixVC(),(n=[]).push(e.prototype.show.call(this,t).then((function(){i._isShowing=!1;var e=i.get("xAxis"),t=i.get("yAxis"),n=i.get("baseAxis");t!==n&&t.markDirtySelectionExtremes(),e!==n&&e.markDirtySelectionExtremes()}))),n.push(this.bulletsContainer.show(t)),n.push(this._sequencedShowHide(!0,t)),[4,Promise.all(n)];case 1:return r.sent(),[2]}}))}))}}),Object.defineProperty(t.prototype,"hide",{enumerable:!1,configurable:!0,writable:!0,value:function(t){return $b(this,void 0,void 0,(function(){var n,i=this;return Yb(this,(function(r){switch(r.label){case 0:return this._fixVC(),(n=[]).push(e.prototype.hide.call(this,t).then((function(){i._isHiding=!1}))),n.push(this.bulletsContainer.hide(t)),n.push(this._sequencedShowHide(!1,t)),[4,Promise.all(n)];case 1:return r.sent(),[2]}}))}))}}),Object.defineProperty(t.prototype,"showDataItem",{enumerable:!1,configurable:!0,writable:!0,value:function(t,n){return $b(this,void 0,void 0,(function(){var i,r;return Yb(this,(function(o){switch(o.label){case 0:return i=[e.prototype.showDataItem.call(this,t,n)],wk(n)||(n=this.get("stateAnimationDuration",0)),r=this.get("stateAnimationEasing"),Sk(this._valueFields,(function(e){i.push(t.animate({key:e+"Working",to:t.get(e),duration:n,easing:r}).waitForStop())})),[4,Promise.all(i)];case 1:return o.sent(),[2]}}))}))}}),Object.defineProperty(t.prototype,"hideDataItem",{enumerable:!1,configurable:!0,writable:!0,value:function(t,n){return $b(this,void 0,void 0,(function(){var i,r,o,a,s,l,u,c,h;return Yb(this,(function(d){switch(d.label){case 0:return i=[e.prototype.hideDataItem.call(this,t,n)],r=this.states.create("hidden",{}),wk(n)||(n=r.get("stateAnimationDuration",this.get("stateAnimationDuration",0))),o=r.get("stateAnimationEasing",this.get("stateAnimationEasing")),a=this.get("xAxis"),s=this.get("yAxis"),l=this.get("baseAxis"),u=this.get("stacked"),l!==a&&l||Sk(this._valueYFields,(function(e){var r=s.getPrivate("min"),a=s.baseValue();wk(r)&&r>a&&(a=r),u&&(a=0),i.push(t.animate({key:e+"Working",to:a,duration:n,easing:o}).waitForStop())})),l!==s&&l||(c=a.getPrivate("min"),h=a.baseValue(),wk(c)&&c>h&&(h=c),u&&(h=0),Sk(this._valueXFields,(function(e){i.push(t.animate({key:e+"Working",to:h,duration:n,easing:o}).waitForStop())}))),[4,Promise.all(i)];case 1:return d.sent(),[2]}}))}))}}),Object.defineProperty(t.prototype,"_markDirtyStack",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._stackDirty=!0,this.markDirty(),this._markStakedDirtyStack()}}),Object.defineProperty(t.prototype,"_markStakedDirtyStack",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this._stackedSeries;e&&iT(e,(function(e,t){t._stackDirty||t._markDirtyStack()}))}}),Object.defineProperty(t.prototype,"_afterChanged",{enumerable:!1,configurable:!0,writable:!0,value:function(){e.prototype._afterChanged.call(this),this._skipped&&(this._markDirtyAxes(),this._skipped=!1)}}),Object.defineProperty(t.prototype,"showDataItemTooltip",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if(this.updateLegendMarker(e),this.updateLegendValue(e),this.get("tooltip"))if(this.isHidden())this.hideTooltip();else{var t=this.get("tooltip");if(t&&(t._setDataItem(e),e)){var n=this.get("locationX",0),i=this.get("locationY",1),r=e.get("locationX",n),o=e.get("locationY",i),a=this.get("xAxis"),s=this.get("yAxis"),l=this.get("vcx",1),u=this.get("vcy",1),c=a.getDataItemPositionX(e,this._tooltipFieldX,this._aLocationX0+(this._aLocationX1-this._aLocationX0)*r,l),h=s.getDataItemPositionY(e,this._tooltipFieldY,this._aLocationY0+(this._aLocationY1-this._aLocationY0)*o,u),d=this.getPoint(c,h),f=!0;if(Sk(this._valueFields,(function(t){null==e.get(t)&&(f=!1)})),f){var p=this.chart;p&&p.inPlot(d)?(t.label.text.markDirtyText(),t.set("tooltipTarget",this._getTooltipTarget(e)),t.set("pointTo",this._display.toGlobal({x:d.x,y:d.y}))):t._setDataItem(void 0)}else t._setDataItem(void 0)}}}}),Object.defineProperty(t.prototype,"_getTooltipTarget",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if("bullet"==this.get("seriesTooltipTarget")){var t=e.bullets;if(t&&t.length>0){var n=t[0].get("sprite");if(n)return n}}return this}}),Object.defineProperty(t.prototype,"updateLegendValue",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this.get("legendDataItem");if(t){var n=t.get("label");if(n){var i="";e?(n._setDataItem(e),i=this.get("legendLabelText",n.get("text",this.get("name","")))):(n._setDataItem(this._emptyDataItem),i=this.get("legendRangeLabelText",this.get("legendLabelText",n.get("text",this.get("name",""))))),n.set("text",i)}var r=t.get("valueLabel");if(r){i="";e?(r._setDataItem(e),i=this.get("legendValueText",r.get("text",""))):(r._setDataItem(this._emptyDataItem),i=this.get("legendRangeValueText",r.get("text",""))),r.set("text",i)}}}}),Object.defineProperty(t.prototype,"_getItemReaderLabel",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e="X: {"+this._xField;return this.get("xAxis").isType("DateAxis")&&(e+=".formatDate()"),e+="}; Y: {"+this._yField,this.get("yAxis").isType("DateAxis")&&(e+=".formatDate()"),e+="}"}}),Object.defineProperty(t.prototype,"getPoint",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return{x:this.get("xAxis").get("renderer").positionToCoordinate(e),y:this.get("yAxis").get("renderer").positionToCoordinate(t)}}}),Object.defineProperty(t.prototype,"_shouldInclude",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return!0}}),Object.defineProperty(t.prototype,"handleCursorHide",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.hideTooltip(),this.updateLegendValue(void 0),this.updateLegendMarker(void 0)}}),Object.defineProperty(t.prototype,"_afterDataChange",{enumerable:!1,configurable:!0,writable:!0,value:function(){e.prototype._afterDataChange.call(this),this.resetExtremes()}}),Object.defineProperty(t.prototype,"resetExtremes",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.setPrivate("selectionMinX",void 0),this.setPrivate("selectionMaxX",void 0),this.setPrivate("selectionMinY",void 0),this.setPrivate("selectionMaxY",void 0),this.setPrivate("minX",void 0),this.setPrivate("minY",void 0),this.setPrivate("maxX",void 0),this.setPrivate("maxY",void 0)}}),Object.defineProperty(t.prototype,"createAxisRange",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this.axisRanges.push({axisDataItem:e})}}),Object.defineProperty(t,"className",{enumerable:!0,configurable:!0,writable:!0,value:"XYSeries"}),Object.defineProperty(t,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:GI.classNames.concat([t.className])}),t}(GI),_E=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return Object.defineProperty(t,"_series",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(t,"_isPanning",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(t,"labelsContainer",{enumerable:!0,configurable:!0,writable:!0,value:t.children.push(xS.new(t._root,{}))}),Object.defineProperty(t,"gridContainer",{enumerable:!0,configurable:!0,writable:!0,value:xS.new(t._root,{width:Zk,height:Zk})}),Object.defineProperty(t,"topGridContainer",{enumerable:!0,configurable:!0,writable:!0,value:xS.new(t._root,{width:Zk,height:Zk})}),Object.defineProperty(t,"bulletsContainer",{enumerable:!0,configurable:!0,writable:!0,value:t.children.push(xS.new(t._root,{isMeasured:!1,width:Zk,height:Zk,position:"absolute"}))}),Object.defineProperty(t,"chart",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(t,"_rangesDirty",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(t,"_panStart",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(t,"_panEnd",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(t,"_sAnimation",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(t,"_eAnimation",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(t,"_skipSync",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(t,"axisRanges",{enumerable:!0,configurable:!0,writable:!0,value:new Gk}),Object.defineProperty(t,"_seriesAxisRanges",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(t,"ghostLabel",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(t,"_cursorPosition",{enumerable:!0,configurable:!0,writable:!0,value:-1}),Object.defineProperty(t,"_snapToSeries",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(t,"_seriesValuesDirty",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(t,"axisHeader",{enumerable:!0,configurable:!0,writable:!0,value:t.children.push(xS.new(t._root,{themeTags:["axis","header"],position:"absolute",background:mS.new(t._root,{themeTags:["header","background"],fill:t._root.interfaceColors.get("background")})}))}),t}return Hb(t,e),Object.defineProperty(t.prototype,"_dispose",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.gridContainer.dispose(),this.topGridContainer.dispose(),this.bulletsContainer.dispose(),this.labelsContainer.dispose(),this.axisHeader.dispose(),e.prototype._dispose.call(this)}}),Object.defineProperty(t.prototype,"_afterNew",{enumerable:!1,configurable:!0,writable:!0,value:function(){var t=this;e.prototype._afterNew.call(this),this.setPrivate("updateScrollbar",!0),this._disposers.push(this.axisRanges.events.onAll((function(e){if("clear"===e.type)Sk(e.oldValues,(function(e){t.disposeDataItem(e)}));else if("push"===e.type)t._processAxisRange(e.newValue,["range"]);else if("setIndex"===e.type)t._processAxisRange(e.newValue,["range"]);else if("insertIndex"===e.type)t._processAxisRange(e.newValue,["range"]);else if("removeIndex"===e.type)t.disposeDataItem(e.oldValue);else{if("moveIndex"!==e.type)throw new Error("Unknown IStreamEvent type");t._processAxisRange(e.value,["range"])}})));var n=this.get("renderer");n&&(n.axis=this,n.processAxis()),this.children.push(n),this.ghostLabel=n.makeLabel(new VI(this,void 0,{}),[]),this.ghostLabel.set("opacity",0)}}),Object.defineProperty(t.prototype,"zoom",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n,i){var r,o=this;if(this.get("start")!==e||this.get("end")!=t){var a=this._sAnimation,s=this._eAnimation,l=this.get("maxDeviation",.5)*Math.min(1,t-e);e<-l&&(e=-l),t>1+l&&(t=1+l),e>t&&(e=(r=qb([t,e],2))[0],t=r[1]),wk(n)||(n=this.get("interpolationDuration",0)),i||(i="end");var u=this.getPrivate("maxZoomFactor",this.get("maxZoomFactor",100)),c=u;1===t&&0!==e&&(i=e<this.get("start")?"start":"end"),0===e&&1!==t&&(i=t>this.get("end")?"end":"start");var h=this.get("minZoomCount"),d=this.get("maxZoomCount");wk(h)&&(u=c/h);var f=1;if(wk(d)&&(f=c/d),"start"===i?(d>0&&1/(t-e)<f&&(t=e+1/f),1/(t-e)>u&&(t=e+1/u),t>1&&t-e<1/u&&(e=t-1/u)):(d>0&&1/(t-e)<f&&(e=t-1/f),1/(t-e)>u&&(e=t-1/u),e<0&&t-e<1/u&&(t=e+1/u)),1/(t-e)>u&&(t=e+1/u),1/(t-e)>u&&(e=t-1/u),null!=d&&null!=h&&e==this.get("start")&&t==this.get("end")){var p=this.chart;p&&p._handleAxisSelection(this,!0)}if((a&&a.playing&&a.to==e||this.get("start")==e)&&(s&&s.playing&&s.to==t||this.get("end")==t))return;if(n>0){var g,m,b=this.get("interpolationEasing");if(this.get("start")!=e&&(g=this.animate({key:"start",to:e,duration:n,easing:b})),this.get("end")!=t&&(m=this.animate({key:"end",to:t,duration:n,easing:b})),this._sAnimation=g,this._eAnimation=m,g)return g;if(m)return m}else this.set("start",e),this.set("end",t),this._root.events.once("frameended",(function(){o._markDirtyKey("start"),o._root._markDirty()}))}else this._sAnimation&&this._sAnimation.stop(),this._eAnimation&&this._eAnimation.stop()}}),Object.defineProperty(t.prototype,"series",{get:function(){return this._series},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_processAxisRange",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){e.setRaw("isRange",!0),this._createAssets(e,t),this._rangesDirty=!0,this._prepareDataItem(e);var n=e.get("above"),i=this.topGridContainer,r=e.get("grid");n&&r&&i.children.moveValue(r);var o=e.get("axisFill");n&&o&&i.children.moveValue(o)}}),Object.defineProperty(t.prototype,"_prepareDataItem",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){}}),Object.defineProperty(t.prototype,"markDirtyExtremes",{enumerable:!1,configurable:!0,writable:!0,value:function(){}}),Object.defineProperty(t.prototype,"markDirtySelectionExtremes",{enumerable:!1,configurable:!0,writable:!0,value:function(){}}),Object.defineProperty(t.prototype,"_calculateTotals",{enumerable:!1,configurable:!0,writable:!0,value:function(){}}),Object.defineProperty(t.prototype,"_updateAxisRanges",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this;this.axisRanges.each((function(t){e._prepareDataItem(t)})),Sk(this._seriesAxisRanges,(function(t){e._prepareDataItem(t)}))}}),Object.defineProperty(t.prototype,"_prepareChildren",{enumerable:!1,configurable:!0,writable:!0,value:function(){if(e.prototype._prepareChildren.call(this),this.get("fixAxisSize")?this.ghostLabel.set("visible",!0):this.ghostLabel.set("visible",!1),this.isDirty("start")||this.isDirty("end")){this.chart._updateCursor();var t=this.get("start",0),n=this.get("end",1),i=this.get("maxDeviation",.5)*Math.min(1,n-t);if(t<-i){var r=t+i;t=-i,this.setRaw("start",t),this.isDirty("end")&&this.setRaw("end",n-r)}if(n>1+i){r=n-1-i;n=1+i,this.setRaw("end",n),this.isDirty("start")&&this.setRaw("start",t-r)}}var o=this.get("renderer");if(o._start=this.get("start"),o._end=this.get("end"),o._inversed=o.get("inversed",!1),o._axisLength=o.axisLength()/(o._end-o._start),o._updateLC(),this.isDirty("tooltip")){var a=this.get("tooltip");if(a){var s=o.get("themeTags");a.addTag("axis"),a.addTag(this.className.toLowerCase()),a._applyThemes(),s&&(a.set("themeTags",DT(a.get("themeTags"),s)),a.label._applyThemes())}}}}),Object.defineProperty(t.prototype,"_updateTooltipBounds",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this.get("tooltip");e&&this.get("renderer").updateTooltipBounds(e)}}),Object.defineProperty(t.prototype,"_updateBounds",{enumerable:!1,configurable:!0,writable:!0,value:function(){e.prototype._updateBounds.call(this),this._updateTooltipBounds()}}),Object.defineProperty(t.prototype,"processChart",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this;this.chart=e,this.get("renderer").chart=e,e.gridContainer.children.push(this.gridContainer),e.topGridContainer.children.push(this.topGridContainer),e.axisHeadersContainer.children.push(this.axisHeader),this.on("start",(function(){e._handleAxisSelection(t)})),this.on("end",(function(){e._handleAxisSelection(t)})),e.plotContainer.onPrivate("width",(function(){t.markDirtySize()})),e.plotContainer.onPrivate("height",(function(){t.markDirtySize()})),e.processAxis(this)}}),Object.defineProperty(t.prototype,"hideDataItem",{enumerable:!1,configurable:!0,writable:!0,value:function(t){return this._toggleDataItem(t,!1),e.prototype.hideDataItem.call(this,t)}}),Object.defineProperty(t.prototype,"showDataItem",{enumerable:!1,configurable:!0,writable:!0,value:function(t){return this._toggleDataItem(t,!0),e.prototype.showDataItem.call(this,t)}}),Object.defineProperty(t.prototype,"_toggleDataItem",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var n=e.get("label");n&&n.setPrivate("visible",t);var i=e.get("grid");i&&i.setPrivate("visible",t);var r=e.get("tick");r&&r.setPrivate("visible",t);var o=e.get("axisFill");o&&o.setPrivate("visible",t);var a=e.get("bullet");if(a){var s=a.get("sprite");s&&s.setPrivate("visible",t)}}}),Object.defineProperty(t.prototype,"_createAssets",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var n=this.get("renderer");e.get("label")||n.makeLabel(e,t),e.get("grid")||n.makeGrid(e,t),e.get("tick")||n.makeTick(e,t),e.get("axisFill")||n.makeAxisFill(e,t),this._processBullet(e)}}),Object.defineProperty(t.prototype,"_processBullet",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=e.get("bullet"),n=this.get("bullet");if(t||!n||e.get("isRange")||(t=n(this._root,this,e)),t){t.axis=this;var i=t.get("sprite");i&&(i._setDataItem(e),e.setRaw("bullet",t),i.parent||this.bulletsContainer.children.push(i))}}}),Object.defineProperty(t.prototype,"_afterChanged",{enumerable:!1,configurable:!0,writable:!0,value:function(){e.prototype._afterChanged.call(this);var t=this.chart;t&&(t._updateChartLayout(),t.axisHeadersContainer.markDirtySize()),this.get("renderer")._updatePositions()}}),Object.defineProperty(t.prototype,"disposeDataItem",{enumerable:!1,configurable:!0,writable:!0,value:function(t){e.prototype.disposeDataItem.call(this,t);var n=this.get("renderer"),i=t.get("label");i&&(n.labels.removeValue(i),i.dispose());var r=t.get("tick");r&&(n.ticks.removeValue(r),r.dispose());var o=t.get("grid");o&&(n.grid.removeValue(o),o.dispose());var a=t.get("axisFill");a&&(n.axisFills.removeValue(a),a.dispose());var s=t.get("bullet");s&&s.dispose()}}),Object.defineProperty(t.prototype,"_updateGhost",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this.ghostLabel;if(!e.isHidden()){var t=e.localBounds(),n=t.right-t.left;Sk(this.dataItems,(function(t){var i=t.get("label");if(i&&!i.isHidden()){var r=i.localBounds();r.right-r.left>n&&e.set("text",i.text._getText())}}))}var i=this.get("start",0),r=this.get("end",1);this.get("renderer").updateLabel(e,i+.5*(r-i))}}),Object.defineProperty(t.prototype,"_handleCursorPosition",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){e=this.get("renderer").toAxisPosition(e),this._cursorPosition=e,this._snapToSeries=t,this.updateTooltip()}}),Object.defineProperty(t.prototype,"updateTooltip",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this,t=this._snapToSeries,n=this._cursorPosition,i=this.get("tooltip"),r=this.get("renderer");wk(n)&&(Sk(this.series,(function(i){if(i.get("baseAxis")===e){var r=e.getSeriesItem(i,n);i.setRaw("tooltipDataItem",r),t&&-1!=t.indexOf(i)?(i.updateLegendMarker(r),i.updateLegendValue(r)):i.showDataItemTooltip(r)}})),i&&(r.updateTooltipBounds(i),this.get("snapTooltip")&&(n=this.roundAxisPosition(n,this.get("tooltipLocation",.5))),gk(n)?i.hide(0):(this.setPrivateRaw("tooltipPosition",n),this._updateTooltipText(i,n),r.positionTooltip(i,n),n<this.get("start")||n>this.get("end")?i.hide(0):i.show(0))))}}),Object.defineProperty(t.prototype,"_updateTooltipText",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){e.label.set("text",this.getTooltipText(t))}}),Object.defineProperty(t.prototype,"roundAxisPosition",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return e}}),Object.defineProperty(t.prototype,"handleCursorShow",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this.get("tooltip");e&&e.show()}}),Object.defineProperty(t.prototype,"handleCursorHide",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this.get("tooltip");e&&e.hide()}}),Object.defineProperty(t.prototype,"processSeriesDataItem",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){}}),Object.defineProperty(t.prototype,"_clearDirty",{enumerable:!1,configurable:!0,writable:!0,value:function(){e.prototype._clearDirty.call(this),this._sizeDirty=!1,this._rangesDirty=!1}}),Object.defineProperty(t.prototype,"coordinateToPosition",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this.get("renderer");return t.toAxisPosition(e/t.axisLength())}}),Object.defineProperty(t.prototype,"toAxisPosition",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this.get("renderer").toAxisPosition(e)}}),Object.defineProperty(t.prototype,"fixPosition",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this.get("renderer").fixPosition(e)}}),Object.defineProperty(t.prototype,"shouldGap",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n,i){return!1}}),Object.defineProperty(t.prototype,"createAxisRange",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this.axisRanges.push(e)}}),Object.defineProperty(t.prototype,"_groupSeriesData",{enumerable:!1,configurable:!0,writable:!0,value:function(e){}}),Object.defineProperty(t,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Axis"}),Object.defineProperty(t,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:UI.classNames.concat([t.className])}),t}(UI),wE=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return Object.defineProperty(t,"_frequency",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(t,"_itemMap",{enumerable:!0,configurable:!0,writable:!0,value:{}}),t}return Hb(t,e),Object.defineProperty(t.prototype,"_afterNew",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._settings.themeTags=DT(this._settings.themeTags,["axis"]),this.fields.push("category"),this.setPrivateRaw("name","category"),this.addTag("category"),e.prototype._afterNew.call(this)}}),Object.defineProperty(t.prototype,"_prepareChildren",{enumerable:!1,configurable:!0,writable:!0,value:function(){var t=this;e.prototype._prepareChildren.call(this);var n=this.dataItems.length,i=0;this._valuesDirty&&(Sk(this.dataItems,(function(e){e.setRaw("index",i),t._itemMap[e.get("category")]=e,i++})),this.setPrivateRaw("maxZoomFactor",n)),this.setPrivateRaw("startIndex",Math.max(Math.round(this.get("start",0)*n),0)),this.setPrivateRaw("endIndex",Math.min(Math.round(this.get("end",1)*n),n)),(this._sizeDirty||this._valuesDirty||this.isDirty("start")||this.isDirty("end")||this.isPrivateDirty("endIndex")||this.isPrivateDirty("startIndex")||this.isPrivateDirty("width")||this.isPrivateDirty("height"))&&this.dataItems.length>0&&(this._handleRangeChange(),this._prepareAxisItems(),this._updateAxisRanges())}}),Object.defineProperty(t.prototype,"_handleRangeChange",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this;Sk(this.series,(function(n){var i=e.dataItems[e.startIndex()].get("category"),r=e.dataItems[e.endIndex()-1].get("category"),o=n.get("baseAxis"),a=n.get("xAxis"),s=n.get("yAxis");if(a instanceof t&&s instanceof t)n._markDirtyAxes();else if(o===e){var l=void 0,u=void 0,c=s;if(a===o?(n.get("categoryXField")&&(l="categoryX"),n.get("openCategoryXField")&&(u="openCategoryX")):s===o&&(n.get("categoryYField")&&(l="categoryY"),n.get("openCategoryYField")&&(u="openCategoryY"),c=a),"ValueAxis"==c.className&&(l||u)){for(var h=void 0,d=void 0,f=0,p=n.dataItems.length;f<p;f++){var g=n.dataItems[f];if(l&&g.get(l)===i){h=g;break}if(u&&g.get(u)===i){h=g;break}}for(f=n.dataItems.length-1;f>=0;f--){g=n.dataItems[f];if(l&&g.get(l)===r){d=g;break}if(u&&g.get(u)===r){d=g;break}}h&&n.setPrivate("startIndex",n.dataItems.indexOf(h)),d&&n.setPrivate("endIndex",n.dataItems.indexOf(d)+1)}n._markDirtyAxes()}}))}}),Object.defineProperty(t.prototype,"_prepareAxisItems",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this.get("renderer"),t=this.dataItems.length,n=this.startIndex();n>0&&n--;var i=this.endIndex();i<t&&i++;var r=e.axisLength()/Math.max(e.get("minGridDistance"),1/Number.MAX_SAFE_INTEGER),o=Math.max(1,Math.min(t,Math.ceil((i-n)/r)));n=Math.floor(n/o)*o,this._frequency=o;for(var a=0;a<t;a++)this.dataItems[a].hide();for(var s=this.dataItems[n].get("index",0),l=n;l<i;l+=o){var u=this.dataItems[l];this._createAssets(u,[]),u.isHidden()&&u.show(),this._prepareDataItem(u,s,o),s++}this._updateGhost()}}),Object.defineProperty(t.prototype,"_prepareDataItem",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n){var i=this.get("renderer"),r=e.get("categoryLocation",0),o=e.get("endCategoryLocation",1),a=e.get("index");wk(a)||(a=this.categoryToIndex(e.get("category")));var s,l=this.indexToPosition(a,r),u=e.get("endCategory");u&&wk(s=this.categoryToIndex(u))||(s=a);var c,h,d=this.indexToPosition(s,o);c=e.get("isRange")?s:a+this._frequency-1,h=this.indexToPosition(c,o),i.updateLabel(e.get("label"),l,d,n),i.updateGrid(e.get("grid"),l,d),i.updateTick(e.get("tick"),l,d,n),i.updateFill(e.get("axisFill"),l,h),this._processBullet(e),i.updateBullet(e.get("bullet"),l,d);var f=this.get("fillRule");f&&f(e,t)}}),Object.defineProperty(t.prototype,"startIndex",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this.dataItems.length;return Math.min(Math.max(this.getPrivate("startIndex",0),0),e-1)}}),Object.defineProperty(t.prototype,"endIndex",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this.dataItems.length;return Math.max(1,Math.min(this.getPrivate("endIndex",e),e))}}),Object.defineProperty(t.prototype,"baseValue",{enumerable:!1,configurable:!0,writable:!0,value:function(){}}),Object.defineProperty(t.prototype,"basePosition",{enumerable:!1,configurable:!0,writable:!0,value:function(){return 0}}),Object.defineProperty(t.prototype,"getX",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this._itemMap[e];return t?this._settings.renderer.positionToCoordinate(this.indexToPosition(t.get("index",0))):NaN}}),Object.defineProperty(t.prototype,"getY",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this._itemMap[e];return t?this._settings.renderer.positionToCoordinate(this.indexToPosition(t.get("index",0))):NaN}}),Object.defineProperty(t.prototype,"getDataItemPositionX",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n,i){var r=e.get(t),o=this._itemMap[r];return o?this.indexToPosition(o.get("index",0),n):NaN}}),Object.defineProperty(t.prototype,"getDataItemCoordinateX",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n,i){return this._settings.renderer.positionToCoordinate(this.getDataItemPositionX(e,t,n,i))}}),Object.defineProperty(t.prototype,"getDataItemPositionY",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n,i){var r=e.get(t),o=this._itemMap[r];return o?this.indexToPosition(o.get("index",0),n):NaN}}),Object.defineProperty(t.prototype,"getDataItemCoordinateY",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n,i){return this._settings.renderer.positionToCoordinate(this.getDataItemPositionY(e,t,n,i))}}),Object.defineProperty(t.prototype,"indexToPosition",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){wk(t)||(t=.5);var n=this.dataItems.length,i=this.get("startLocation",0);n-=i;var r=(e+t-i)/(n-=1-this.get("endLocation",1)),o=this.dataItems[e];return o&&(r+=o.get("deltaPosition",0)),r}}),Object.defineProperty(t.prototype,"categoryToIndex",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this._itemMap[e];return t?t.get("index"):NaN}}),Object.defineProperty(t.prototype,"dataItemToPosition",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this.indexToPosition(e.get("index"))}}),Object.defineProperty(t.prototype,"roundAxisPosition",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return this.indexToPosition(this.axisPositionToIndex(e),t)}}),Object.defineProperty(t.prototype,"axisPositionToIndex",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this.dataItems.length;return $T(Math.floor(e*t),0,t-1)}}),Object.defineProperty(t.prototype,"getTooltipText",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this.dataItems[this.axisPositionToIndex(e)];if(t){var n=t.get("label");if(n)return OS(n,this.get("tooltipText",""))}}}),Object.defineProperty(t.prototype,"_updateTooltipText",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){e._setDataItem(this.dataItems[this.axisPositionToIndex(t)]),e.label.text.markDirtyText()}}),Object.defineProperty(t.prototype,"getSeriesItem",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){if(this.dataItems.length>0){var n=this.getPrivate("name")+this.get("renderer").getPrivate("letter"),i=this.axisPositionToIndex(t),r=e.dataItems[i],o=this.dataItems[i],a=o.get("category");if(r&&o&&r.get(n)===a)return r;for(var s=0,l=e.dataItems.length;s<l;s++){var u=e.dataItems[s];if(u.get(n)===a)return u}}}}),Object.defineProperty(t.prototype,"zoomToIndexes",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n){var i=this.dataItems.length;this.zoom(e/i,t/i,n)}}),Object.defineProperty(t.prototype,"zoomToCategories",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n){this.zoomToIndexes(this.categoryToIndex(e),this.categoryToIndex(t)+1,n)}}),Object.defineProperty(t,"className",{enumerable:!0,configurable:!0,writable:!0,value:"CategoryAxis"}),Object.defineProperty(t,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:_E.classNames.concat([t.className])}),t}(_E),xE=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return Object.defineProperty(t,"_dirtyExtremes",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(t,"_dirtySelectionExtremes",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(t,"_deltaMinMax",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(t,"_minReal",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(t,"_maxReal",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(t,"_baseValue",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(t,"_syncDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(t,"_minLogAdjusted",{enumerable:!0,configurable:!0,writable:!0,value:1}),t}return Hb(t,e),Object.defineProperty(t.prototype,"markDirtyExtremes",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._dirtyExtremes=!0,this.markDirty()}}),Object.defineProperty(t.prototype,"markDirtySelectionExtremes",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._dirtySelectionExtremes=!0,this.markDirty()}}),Object.defineProperty(t.prototype,"_afterNew",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._settings.themeTags=DT(this._settings.themeTags,["axis"]),this.setPrivateRaw("name","value"),this.addTag("value"),e.prototype._afterNew.call(this)}}),Object.defineProperty(t.prototype,"_prepareChildren",{enumerable:!1,configurable:!0,writable:!0,value:function(){var t=this;if(e.prototype._prepareChildren.call(this),this.isDirty("syncWithAxis")){this._prevSettings.syncWithAxis&&this._syncDp&&this._syncDp.dispose();var n=this.get("syncWithAxis");n&&(this._syncDp=new Hk([n.onPrivate("selectionMinFinal",(function(){t._dirtySelectionExtremes=!0})),n.onPrivate("selectionMaxFinal",(function(){t._dirtySelectionExtremes=!0}))]))}(this._sizeDirty||this._dirtyExtremes||this._valuesDirty||this.isPrivateDirty("width")||this.isPrivateDirty("height")||this.isDirty("min")||this.isDirty("max")||this.isDirty("extraMin")||this.isDirty("extraMax")||this.isDirty("logarithmic")||this.isDirty("treatZeroAs")||this.isDirty("baseValue")||this.isDirty("strictMinMax")||this.isDirty("strictMinMaxSelection")||this.isDirty("maxPrecision")||this.isDirty("numberFormat"))&&(this._getMinMax(),this.ghostLabel.set("text",""),this._dirtyExtremes=!1),this._dirtySelectionExtremes&&!this._isPanning&&(this._getSelectionMinMax(),this._dirtySelectionExtremes=!1),this._groupData(),(this._sizeDirty||this._valuesDirty||this.isDirty("start")||this.isDirty("end")||this.isPrivateDirty("min")||this.isPrivateDirty("selectionMax")||this.isPrivateDirty("selectionMin")||this.isPrivateDirty("max")||this.isPrivateDirty("step")||this.isPrivateDirty("width")||this.isPrivateDirty("height")||this.isDirty("logarithmic"))&&(this._handleRangeChange(),this._prepareAxisItems(),this._updateAxisRanges()),this._baseValue=this.baseValue()}}),Object.defineProperty(t.prototype,"_groupData",{enumerable:!1,configurable:!0,writable:!0,value:function(){}}),Object.defineProperty(t.prototype,"_formatText",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this.get("numberFormat"),n=this.getNumberFormatter();return t?n.format(e,t):n.format(e,void 0,this.getPrivate("stepDecimalPlaces"))}}),Object.defineProperty(t.prototype,"_prepareAxisItems",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this.getPrivate("min"),t=this.getPrivate("max");if(wk(e)&&wk(t)){var n=this.get("logarithmic"),i=this.getPrivate("step"),r=this.getPrivate("selectionMin"),o=this.getPrivate("selectionMax")+i,a=r-i,s=0,l=1,u=e;if(n){if((a=this._minLogAdjusted)<r)for(;a<r;)a+=i;(u=a)<=0&&(u=1,i<1&&(u=i)),(l=Math.log(o-i)*Math.LOG10E-Math.log(u)*Math.LOG10E)>2&&(a=Math.pow(10,Math.log(u)*Math.LOG10E-5))}for(;a<o;){var c=void 0;this.dataItems.length<s+1?(c=new VI(this,void 0,{}),this._dataItems.push(c),this.processDataItem(c)):c=this.dataItems[s],this._createAssets(c,[]),c.isHidden()&&c.show(),c.setRaw("value",a);var h=c.get("label");h&&h.set("text",this._formatText(a)),this._prepareDataItem(c),n&&l>2?a=Math.pow(10,Math.log(u)*Math.LOG10E+s-5):a+=i;var d=Math.pow(10,Math.floor(Math.log(Math.abs(i))*Math.LOG10E));if(d<1)a=zT(a,Math.round(Math.abs(Math.log(Math.abs(d))*Math.LOG10E))+2);s++}for(var f=s;f<this.dataItems.length;f++)this.dataItems[f].hide();Sk(this.series,(function(e){e.inited&&e._markDirtyAxes()})),this._updateGhost()}}}),Object.defineProperty(t.prototype,"_prepareDataItem",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var n=this.get("renderer"),i=e.get("value"),r=e.get("endValue"),o=this.valueToPosition(i),a=o,s=this.valueToPosition(i+this.getPrivate("step"));wk(r)&&(s=a=this.valueToPosition(r)),n.updateLabel(e.get("label"),o,a,t);var l=e.get("grid");if(n.updateGrid(l,o,a),l&&(i==this.get("baseValue",0)?(l.addTag("base"),l._applyThemes()):l.hasTag("base")&&(l.removeTag("base"),l._applyThemes())),n.updateTick(e.get("tick"),o,a,t),n.updateFill(e.get("axisFill"),o,s),this._processBullet(e),n.updateBullet(e.get("bullet"),o,a),!e.get("isRange")){var u=this.get("fillRule");u&&u(e)}}}),Object.defineProperty(t.prototype,"_handleRangeChange",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e,t,n=this.positionToValue(this.get("start",0)),i=this.positionToValue(this.get("end",1)),r=this.get("renderer").gridCount(),o=this._adjustMinMax(n,i,r,!0),a=(e=o.step,(t=(""+e).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/))?Math.max(0,(t[1]?t[1].length:0)-(t[2]?+t[2]:0)):0);this.setPrivateRaw("stepDecimalPlaces",a),n=zT(n,a),i=zT(i,a);var s=(o=this._adjustMinMax(n,i,r,!0)).step;n=o.min,i=o.max,this.getPrivate("selectionMin")===n&&this.getPrivate("selectionMax")===i&&this.getPrivate("step")===s||(this.setPrivateRaw("selectionMin",n),this.setPrivateRaw("selectionMax",i),this.setPrivateRaw("step",s))}}),Object.defineProperty(t.prototype,"positionToValue",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this.getPrivate("min"),n=this.getPrivate("max");return this.get("logarithmic")?Math.pow(Math.E,(e*(Math.log(n)*Math.LOG10E-Math.log(t)*Math.LOG10E)+Math.log(t)*Math.LOG10E)/Math.LOG10E):e*(n-t)+t}}),Object.defineProperty(t.prototype,"valueToPosition",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this.getPrivate("min"),n=this.getPrivate("max");if(this.get("logarithmic")){if(e<=0){var i=this.get("treatZeroAs");wk(i)&&(e=i)}return(Math.log(e)*Math.LOG10E-Math.log(t)*Math.LOG10E)/(Math.log(n)*Math.LOG10E-Math.log(t)*Math.LOG10E)}return(e-t)/(n-t)}}),Object.defineProperty(t.prototype,"valueToFinalPosition",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this.getPrivate("minFinal"),n=this.getPrivate("maxFinal");if(this.get("logarithmic")){if(e<=0){var i=this.get("treatZeroAs");wk(i)&&(e=i)}return(Math.log(e)*Math.LOG10E-Math.log(t)*Math.LOG10E)/(Math.log(n)*Math.LOG10E-Math.log(t)*Math.LOG10E)}return(e-t)/(n-t)}}),Object.defineProperty(t.prototype,"getX",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n){e=n+(e-n)*t;var i=this.valueToPosition(e);return this._settings.renderer.positionToCoordinate(i)}}),Object.defineProperty(t.prototype,"getY",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n){e=n+(e-n)*t;var i=this.valueToPosition(e);return this._settings.renderer.positionToCoordinate(i)}}),Object.defineProperty(t.prototype,"getDataItemCoordinateX",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n,i){return this._settings.renderer.positionToCoordinate(this.getDataItemPositionX(e,t,n,i))}}),Object.defineProperty(t.prototype,"getDataItemPositionX",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n,i){var r=e.get(t);e.get("stackToItemX")?r=r*i+e.component.getStackedXValueWorking(e,t):r=this._baseValue+(r-this._baseValue)*i;return this.valueToPosition(r)}}),Object.defineProperty(t.prototype,"getDataItemCoordinateY",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n,i){return this._settings.renderer.positionToCoordinate(this.getDataItemPositionY(e,t,n,i))}}),Object.defineProperty(t.prototype,"getDataItemPositionY",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n,i){var r=e.get(t);e.get("stackToItemY")?r=r*i+e.component.getStackedYValueWorking(e,t):r=this._baseValue+(r-this._baseValue)*i;return this.valueToPosition(r)}}),Object.defineProperty(t.prototype,"basePosition",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this.valueToPosition(this.baseValue())}}),Object.defineProperty(t.prototype,"baseValue",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=Math.min(this.getPrivate("minFinal",-1/0),this.getPrivate("selectionMin",-1/0)),t=Math.max(this.getPrivate("maxFinal",1/0),this.getPrivate("selectionMax",1/0)),n=this.get("baseValue",0);return n<e&&(n=e),n>t&&(n=t),n}}),Object.defineProperty(t.prototype,"cellEndValue",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return e}}),Object.defineProperty(t.prototype,"fixSmallStep",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return 1+e===1?(e*=2,this.fixSmallStep(e)):e}}),Object.defineProperty(t.prototype,"_fixMin",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return e}}),Object.defineProperty(t.prototype,"_fixMax",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return e}}),Object.defineProperty(t.prototype,"_calculateTotals",{enumerable:!1,configurable:!0,writable:!0,value:function(){if(this.get("calculateTotals")){var e=this.series[0];if(e){var t=e.startIndex();if(e.dataItems.length>0){t>0&&t--;var n,i,r=e.endIndex();r<e.dataItems.length&&r++,e.get("yAxis")==this?(n="valueY",i="vcy"):e.get("xAxis")==this&&(n="valueX",i="vcx");var o=n+"Working";if(n)for(var a=function(e){var t=0,r=0;Sk(s.series,(function(n){if(!n.get("excludeFromTotal")){var a=n.dataItems[e];if(a){var s=a.get(o)*n.get(i);gk(s)||(t+=s,r+=Math.abs(s))}}})),Sk(s.series,(function(a){if(!a.get("excludeFromTotal")){var s=a.dataItems[e];if(s){var l=s.get(o)*a.get(i);gk(l)||(s.set(n+"Total",r),s.set(n+"Sum",t),s.set(n+"TotalPercent",l/r*100))}}}))},s=this,l=t;l<r;l++)a(l)}}}}}),Object.defineProperty(t.prototype,"_getSelectionMinMax",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e,t=this,n=this.getPrivate("minFinal"),i=this.getPrivate("maxFinal"),r=this.get("min"),o=this.get("max"),a=this.get("extraMin",0),s=this.get("extraMax",0);this.get("logarithmic")&&(null==this.get("extraMin")&&(a=.1),null==this.get("extraMax")&&(s=.2));var l=this.get("renderer").gridCount(),u=this.get("strictMinMaxSelection"),c=this.get("strictMinMax");if(wk(n)&&wk(i)){var h=i,d=n;if(Sk(this.series,(function(e){if(!e.get("ignoreMinMax")){var n=void 0,i=void 0,r=e.getPrivate("outOfSelection");e.get("xAxis")===t?r||(n=e.getPrivate("selectionMinX",e.getPrivate("minX")),i=e.getPrivate("selectionMaxX",e.getPrivate("maxX"))):e.get("yAxis")===t&&(r||(n=e.getPrivate("selectionMinY",e.getPrivate("minY")),i=e.getPrivate("selectionMaxY",e.getPrivate("maxY")))),e.isHidden()||e.isShowing()||(wk(n)&&(h=Math.min(h,n)),wk(i)&&(d=Math.max(d,i)))}})),this.axisRanges.each((function(e){if(e.get("affectsMinMax")){var t=e.get("value");null!=t&&(h=Math.min(h,t),d=Math.max(d,t)),null!=(t=e.get("endValue"))&&(h=Math.min(h,t),d=Math.max(d,t))}})),h>d&&(e=qb([d,h],2),h=e[0],d=e[1]),wk(r)?h=c?r:n:c&&wk(this._minReal)&&(h=this._minReal),wk(o)?d=c?o:i:c&&wk(this._maxReal)&&(d=this._maxReal),h===d){h-=this._deltaMinMax,d+=this._deltaMinMax;var f=this._adjustMinMax(h,d,l,c);h=f.min,d=f.max}var p=h,g=d;d+=(d-(h-=(d-h)*a))*s;var m=this._adjustMinMax(h,d,l);h=m.min,d=m.max,h=$T(h,n,i),d=$T(d,n,i),m=this._adjustMinMax(h,d,l,!0),c||(h=m.min,d=m.max);var b=this.get("syncWithAxis");b&&(m=this._syncAxes(h,d,m.step,b.getPrivate("selectionMinFinal",b.getPrivate("minFinal",0)),b.getPrivate("selectionMaxFinal",b.getPrivate("maxFinal",1)),b.getPrivate("selectionStepFinal",b.getPrivate("step",1))),h=m.min,d=m.max),c&&(wk(r)&&(h=Math.max(h,r)),wk(o)&&(d=Math.min(d,o))),u&&(d=g+(d-(h=p-(d-h)*a))*s),this.get("logarithmic")&&(h<=0&&(h=p*(1-Math.min(a,.99))),h<n&&(h=n),d>i&&(d=i));var y=this.valueToFinalPosition(h),v=this.valueToFinalPosition(d);this.setPrivateRaw("selectionMinFinal",h),this.setPrivateRaw("selectionMaxFinal",d),this.setPrivateRaw("selectionStepFinal",m.step),this.zoom(y,v)}}}),Object.defineProperty(t.prototype,"_getMinMax",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this,t=this.get("min"),n=this.get("max"),i=1/0,r=-1/0,o=this.get("extraMin",0),a=this.get("extraMax",0);this.get("logarithmic")&&(null==this.get("extraMin")&&(o=.1),null==this.get("extraMax")&&(a=.2));var s=1/0;if(Sk(this.series,(function(t){if(!t.get("ignoreMinMax")){var n=void 0,o=void 0;if(t.get("xAxis")===e?(n=t.getPrivate("minX"),o=t.getPrivate("maxX")):t.get("yAxis")===e&&(n=t.getPrivate("minY"),o=t.getPrivate("maxY")),wk(n)&&wk(o)){i=Math.min(i,n),r=Math.max(r,o);var a=o-n;a<=0&&(a=Math.abs(o/100)),a<s&&(s=a)}}})),this.axisRanges.each((function(e){if(e.get("affectsMinMax")){var t=e.get("value");null!=t&&(i=Math.min(i,t),r=Math.max(r,t)),null!=(t=e.get("endValue"))&&(i=Math.min(i,t),r=Math.max(r,t))}})),this.get("logarithmic")){var l=this.get("treatZeroAs");wk(l)&&i<=0&&(i=l)}if(0===i&&0===r&&(r=.9,i=-.9),wk(t)&&(i=t),wk(n)&&(r=n),i!==1/0&&r!==-1/0){var u=i,c=r,h=this.adapters.fold("min",i),d=this.adapters.fold("max",r);if(wk(h)&&(i=h),wk(d)&&(r=d),i=this._fixMin(i),(r=this._fixMax(r))-i<=1/Math.pow(10,15)){if(r-i!=0)this._deltaMinMax=(r-i)/2;else{var f=Math.log(Math.abs(r))*Math.LOG10E,p=Math.pow(10,Math.floor(f));p/=10,this._deltaMinMax=p}i-=this._deltaMinMax,r+=this._deltaMinMax}r+=(r-(i-=(r-i)*o))*a,this.get("logarithmic")&&(i<0&&u>=0&&(i=0),r>0&&c<=0&&(r=0)),this._minReal=i,this._maxReal=r;var g=this.get("strictMinMax"),m=this.get("strictMinMaxSelection",!1);m&&(g=m);var b=g;wk(n)&&(b=!0);var y=this.get("renderer").gridCount(),v=this._adjustMinMax(i,r,y,b);i=v.min,r=v.max,v=this._adjustMinMax(i,r,y,!0),i=v.min,r=v.max,g&&(i=wk(t)?t:this._minReal,(r=wk(n)?n:this._maxReal)-i<=1e-8&&(i-=this._deltaMinMax,r+=this._deltaMinMax),r+=(r-(i-=(r-i)*o))*a),h=this.adapters.fold("min",i),d=this.adapters.fold("max",r),wk(h)&&(i=h),wk(d)&&(r=d),s==1/0&&(s=r-i);var _=this.get("syncWithAxis");if(_&&(v=this._syncAxes(i,r,v.step,_.getPrivate("minFinal",_.getPrivate("min",0)),_.getPrivate("maxFinal",_.getPrivate("max",1)),_.getPrivate("step",1)),i=v.min,r=v.max),this.setPrivateRaw("maxZoomFactor",(r-i)/s*this.get("maxZoomFactor",100)),this.get("logarithmic")&&(this._minLogAdjusted=i,i=this._minReal,r=this._maxReal,i<=0&&(i=u*(1-Math.min(o,.99)))),wk(i)&&wk(r)&&(this.getPrivate("minFinal")!==i||this.getPrivate("maxFinal")!==r)){this.setPrivate("minFinal",i),this.setPrivate("maxFinal",r),this._saveMinMax(i,r);var w=this.get("interpolationDuration",0),x=this.get("interpolationEasing");this.animatePrivate({key:"min",to:i,duration:w,easing:x}),this.animatePrivate({key:"max",to:r,duration:w,easing:x})}}}}),Object.defineProperty(t.prototype,"_saveMinMax",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){}}),Object.defineProperty(t.prototype,"_adjustMinMax",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n,i){n<=1&&(n=1),n=Math.round(n);var r=e,o=t,a=t-e;0===a&&(a=Math.abs(t));var s=Math.log(Math.abs(a))*Math.LOG10E,l=Math.pow(10,Math.floor(s)),u=l/=10;i&&(u=0),i?(e=Math.floor(e/l)*l,t=Math.ceil(t/l)*l):(e=Math.ceil(e/l)*l-u,t=Math.floor(t/l)*l+u),e<0&&r>=0&&(e=0),t>0&&o<=0&&(t=0),s=Math.log(Math.abs(a))*Math.LOG10E,l=Math.pow(10,Math.floor(s)),l/=100;var c=Math.ceil(a/n/l)*l,h=Math.pow(10,Math.floor(Math.log(Math.abs(c))*Math.LOG10E)),d=Math.ceil(c/h);d>5?d=10:d<=5&&d>2&&(d=5),c=Math.ceil(c/(h*d))*h*d;var f=this.get("maxPrecision");if(wk(f)){var p=function(e,t){if(!wk(t)||t<=0)return Math.ceil(e);var n=Math.pow(10,t);return Math.ceil(e*n)/n}(c,f);f<Number.MAX_VALUE&&c!==p&&(c=p)}var g=0;h<1&&(c=zT(c,g=Math.round(Math.abs(Math.log(Math.abs(h))*Math.LOG10E))+1));var m,b=Math.floor(e/c);return e=zT(c*b,g),(m=i?Math.floor(t/c):Math.ceil(t/c))===b&&m++,(t=zT(c*m,g))<o&&(t+=c),e>r&&(e-=c),{min:e,max:t,step:c=this.fixSmallStep(c)}}}),Object.defineProperty(t.prototype,"getTooltipText",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this.get("tooltipNumberFormat",this.get("numberFormat")),n=this.getNumberFormatter(),i=this.get("extraTooltipPrecision",0),r=this.getPrivate("stepDecimalPlaces",0)+i,o=zT(this.positionToValue(e),r);return t?n.format(o,t):n.format(o,void 0,r)}}),Object.defineProperty(t.prototype,"getSeriesItem",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var n,i=this.getPrivate("name")+this.get("renderer").getPrivate("letter"),r=this.positionToValue(t),o=void 0;if(Sk(e.dataItems,(function(e,t){var a=Math.abs(e.get(i)-r);(void 0===o||a<n)&&(o=t,n=a)})),null!=o)return e.dataItems[o]}}),Object.defineProperty(t.prototype,"zoomToValues",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n){var i=this.getPrivate("minFinal",0),r=this.getPrivate("maxFinal",0);null!=this.getPrivate("min")&&null!=this.getPrivate("max")&&this.zoom((e-i)/(r-i),(t-i)/(r-i),n)}}),Object.defineProperty(t.prototype,"_syncAxes",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n,i,r,o){if(this.get("syncWithAxis")){var a=Math.round(r-i)/o,s=Math.round((t-e)/n),l=this.get("renderer").gridCount();if(wk(a)&&wk(s))for(var u=!1,c=0,h=.01*(t-e),d=e,f=t,p=n;1!=u;)if(u=this._checkSync(d,f,p,a),++c>500&&(u=!0),u)e=d,t=f,n=p;else{c/3==Math.round(c/3)?(d=e-h*c,e>=0&&d<0&&(d=0)):(f=t+h*c)<=0&&f>0&&(f=0);var g=this._adjustMinMax(d,f,l,!0);d=g.min,f=g.max,p=g.step}}return{min:e,max:t,step:n}}}),Object.defineProperty(t.prototype,"_checkSync",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n,i){for(var r=(t-e)/n,o=1;o<i;o++)if(zT(r/o,1)==i||r*o==i)return!0;return!1}}),Object.defineProperty(t,"className",{enumerable:!0,configurable:!0,writable:!0,value:"ValueAxis"}),Object.defineProperty(t,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:_E.classNames.concat([t.className])}),t}(_E),PE=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return Object.defineProperty(t,"_tickPoints",{enumerable:!0,configurable:!0,writable:!0,value:[]}),t}return Hb(t,e),Object.defineProperty(t,"className",{enumerable:!0,configurable:!0,writable:!0,value:"AxisLabel"}),Object.defineProperty(t,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:MS.classNames.concat([t.className])}),t}(MS),OE=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return Object.defineProperty(t,"_tickPoints",{enumerable:!0,configurable:!0,writable:!0,value:[]}),t}return Hb(t,e),Object.defineProperty(t,"className",{enumerable:!0,configurable:!0,writable:!0,value:"AxisTick"}),Object.defineProperty(t,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:fE.classNames.concat([t.className])}),t}(fE),kE=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return Object.defineProperty(t,"_axisLength",{enumerable:!0,configurable:!0,writable:!0,value:100}),Object.defineProperty(t,"_start",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(t,"_end",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(t,"_inversed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(t,"_minSize",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(t,"chart",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(t,"_lc",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(t,"_ls",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(t,"_thumbDownPoint",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(t,"_downStart",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(t,"_downEnd",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(t,"ticks",{enumerable:!0,configurable:!0,writable:!0,value:new Wk(dS.new({}),(function(){return OE._new(t._root,{themeTags:DT(t.ticks.template.get("themeTags",[]),t.get("themeTags",[]))},[t.ticks.template])}))}),Object.defineProperty(t,"grid",{enumerable:!0,configurable:!0,writable:!0,value:new Wk(dS.new({}),(function(){return bE._new(t._root,{themeTags:DT(t.grid.template.get("themeTags",[]),t.get("themeTags",[]))},[t.grid.template])}))}),Object.defineProperty(t,"axisFills",{enumerable:!0,configurable:!0,writable:!0,value:new Wk(dS.new({}),(function(){return gS._new(t._root,{themeTags:DT(t.axisFills.template.get("themeTags",["axis","fill"]),t.get("themeTags",[]))},[t.axisFills.template])}))}),Object.defineProperty(t,"labels",{enumerable:!0,configurable:!0,writable:!0,value:new Wk(dS.new({}),(function(){return PE._new(t._root,{themeTags:DT(t.labels.template.get("themeTags",[]),t.get("themeTags",[]))},[t.labels.template])}))}),Object.defineProperty(t,"axis",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(t,"thumb",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),t}return Hb(t,e),Object.defineProperty(t.prototype,"makeTick",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var n=this.ticks.make();return n._setDataItem(e),e.setRaw("tick",n),n.set("themeTags",DT(n.get("themeTags"),t)),this.axis.labelsContainer.children.push(n),this.ticks.push(n),n}}),Object.defineProperty(t.prototype,"makeGrid",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var n=this.grid.make();return n._setDataItem(e),e.setRaw("grid",n),n.set("themeTags",DT(n.get("themeTags"),t)),this.axis.gridContainer.children.push(n),this.grid.push(n),n}}),Object.defineProperty(t.prototype,"makeAxisFill",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var n=this.axisFills.make();return n._setDataItem(e),n.set("themeTags",DT(n.get("themeTags"),t)),this.axis.gridContainer.children.push(n),e.setRaw("axisFill",n),this.axisFills.push(n),n}}),Object.defineProperty(t.prototype,"makeLabel",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var n=this.labels.make();return n.set("themeTags",DT(n.get("themeTags"),t)),this.axis.labelsContainer.children.moveValue(n,0),n._setDataItem(e),e.setRaw("label",n),this.labels.push(n),n}}),Object.defineProperty(t.prototype,"axisLength",{enumerable:!1,configurable:!0,writable:!0,value:function(){return 0}}),Object.defineProperty(t.prototype,"gridCount",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this.axisLength()/this.get("minGridDistance",50)}}),Object.defineProperty(t.prototype,"_updatePositions",{enumerable:!1,configurable:!0,writable:!0,value:function(){}}),Object.defineProperty(t.prototype,"_afterNew",{enumerable:!1,configurable:!0,writable:!0,value:function(){var t=this;e.prototype._afterNew.call(this),this.set("isMeasured",!1);var n=this.thumb;n&&(this._disposers.push(n.events.on("pointerdown",(function(e){t._handleThumbDown(e.originalEvent)}))),this._disposers.push(n.events.on("globalpointerup",(function(e){t._handleThumbUp(e.originalEvent)}))),this._disposers.push(n.events.on("globalpointermove",(function(e){t._handleThumbMove(e.originalEvent)}))))}}),Object.defineProperty(t.prototype,"_changed",{enumerable:!1,configurable:!0,writable:!0,value:function(){if(e.prototype._changed.call(this),this.isDirty("pan")){var t=this.thumb;if(t){var n=this.axis.labelsContainer,i=this.get("pan");"zoom"==i?n.children.push(t):"none"==i&&n.children.removeValue(t)}}}}),Object.defineProperty(t.prototype,"_handleThumbDown",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this._thumbDownPoint=this.toLocal(this._root.documentPointToRoot({x:e.clientX,y:e.clientY}));var t=this.axis;this._downStart=t.get("start"),this._downEnd=t.get("end")}}),Object.defineProperty(t.prototype,"_handleThumbUp",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this._thumbDownPoint=void 0}}),Object.defineProperty(t.prototype,"_handleThumbMove",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this._thumbDownPoint;if(t){var n=this.toLocal(this._root.documentPointToRoot({x:e.clientX,y:e.clientY})),i=this._downStart,r=this._downEnd,o=this._getPan(n,t)*Math.min(1,r-i)/2;this.axis.setAll({start:i-o,end:r+o})}}}),Object.defineProperty(t.prototype,"_getPan",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return 0}}),Object.defineProperty(t.prototype,"positionToCoordinate",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this._inversed?(this._end-e)*this._axisLength:(e-this._start)*this._axisLength}}),Object.defineProperty(t.prototype,"updateTooltipBounds",{enumerable:!1,configurable:!0,writable:!0,value:function(e){}}),Object.defineProperty(t.prototype,"_updateSize",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.markDirty(),this._clear=!0}}),Object.defineProperty(t.prototype,"toAxisPosition",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this._start||0,n=this._end||1;return e*=n-t,e=this.get("inversed")?n-e:t+e}}),Object.defineProperty(t.prototype,"fixPosition",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this.get("inversed")?1-e:e}}),Object.defineProperty(t.prototype,"_updateLC",{enumerable:!1,configurable:!0,writable:!0,value:function(){}}),Object.defineProperty(t.prototype,"toggleVisibility",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n,i){var r=this.axis,o=r.get("start",0),a=r.get("end",1);t<o+(a-o)*(n-1e-4)||t>o+(a-o)*(i+1e-4)?e.setPrivate("visible",!1):e.setPrivate("visible",!0)}}),Object.defineProperty(t.prototype,"_positionTooltip",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var n=this.chart;n&&(n.inPlot(t)?e.set("pointTo",this._display.toGlobal(t)):e.hide())}}),Object.defineProperty(t.prototype,"processAxis",{enumerable:!1,configurable:!0,writable:!0,value:function(){}}),Object.defineProperty(t,"className",{enumerable:!0,configurable:!0,writable:!0,value:"AxisRenderer"}),Object.defineProperty(t,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:gS.classNames.concat([t.className])}),t}(gS),TE=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return Object.defineProperty(t,"thumb",{enumerable:!0,configurable:!0,writable:!0,value:mS.new(t._root,{width:Zk,isMeasured:!1,themeTags:["axis","x","thumb"]})}),t}return Hb(t,e),Object.defineProperty(t.prototype,"_afterNew",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._settings.themeTags=DT(this._settings.themeTags,["renderer","x"]),e.prototype._afterNew.call(this),this.setPrivateRaw("letter","X");var t=this.grid.template;t.set("height",Zk),t.set("width",0),t.set("draw",(function(e,t){e.moveTo(0,0),e.lineTo(0,t.height())})),this.set("draw",(function(e,t){e.moveTo(0,0),e.lineTo(t.width(),0)}))}}),Object.defineProperty(t.prototype,"_changed",{enumerable:!1,configurable:!0,writable:!0,value:function(){e.prototype._changed.call(this);var t=this.axis;t.ghostLabel.setPrivate("visible",!this.get("inside"));var n="opposite",i="inside";if(this.isDirty(n)||this.isDirty(i)){var r=this.chart,o=t.children;if(this.get(i)?t.addTag(i):t.removeTag(i),r){var a;if(this.get(n))-1==(a=r.topAxesContainer.children).indexOf(t)&&a.insertIndex(0,t),t.addTag(n),o.moveValue(this);else-1==(a=r.bottomAxesContainer.children).indexOf(t)&&a.moveValue(t),t.removeTag(n),o.moveValue(this,0);t.ghostLabel._applyThemes(),this.labels.each((function(e){e._applyThemes()})),this.root._markDirtyRedraw()}t.markDirtySize()}this.thumb.setPrivate("height",t.labelsContainer.height())}}),Object.defineProperty(t.prototype,"_getPan",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return(t.x-e.x)/this.width()}}),Object.defineProperty(t.prototype,"toAxisPosition",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this._start||0,n=this._end||1;return e=(e-=this._ls)*(n-t)/this._lc,e=this.get("inversed")?n-e:t+e}}),Object.defineProperty(t.prototype,"_updateLC",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this.axis,t=e.parent;if(t){var n=t.innerWidth();this._lc=this.axisLength()/n,this._ls=(e.x()-t.get("paddingLeft",0))/n}}}),Object.defineProperty(t.prototype,"_updatePositions",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this.axis;e.gridContainer.set("x",e.x()-pT(e.get("centerX",0),e.width())-e.parent.get("paddingLeft",0)),e.bulletsContainer.set("y",this.y());var t=e.chart;if(t){var n=t.plotContainer,i=e.axisHeader,r=e.get("marginLeft",0),o=e.x()-r,a=e.parent;a&&(o-=a.get("paddingLeft",0)),i.children.length>0?(r=e.axisHeader.width(),e.set("marginLeft",r)):i.set("width",r),i.setAll({x:o,y:-1,height:n.height()+2})}}}),Object.defineProperty(t.prototype,"processAxis",{enumerable:!1,configurable:!0,writable:!0,value:function(){e.prototype.processAxis.call(this);var t=this.axis;t.set("width",Zk);var n=this._root.verticalLayout;t.set("layout",n),t.labelsContainer.set("width",Zk),t.axisHeader.setAll({layout:n})}}),Object.defineProperty(t.prototype,"axisLength",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this.axis.width()}}),Object.defineProperty(t.prototype,"positionToPoint",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return{x:this.positionToCoordinate(e),y:0}}}),Object.defineProperty(t.prototype,"updateTick",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n,i){if(e){wk(t)||(t=0);var r=.5;r=wk(i)&&i>1?e.get("multiLocation",r):e.get("location",r),wk(n)&&n!=t&&(t+=(n-t)*r),e.set("x",this.positionToCoordinate(t));var o=e.get("length",0),a=e.get("inside",this.get("inside",!1));this.get("opposite")?(e.set("y",Zk),a||(o*=-1)):(e.set("y",0),a&&(o*=-1)),e.set("draw",(function(e){e.moveTo(0,0),e.lineTo(0,o)})),this.toggleVisibility(e,t,e.get("minPosition",0),e.get("maxPosition",1))}}}),Object.defineProperty(t.prototype,"updateLabel",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n,i){if(e){var r=.5;r=wk(i)&&i>1?e.get("multiLocation",r):e.get("location",r),wk(t)||(t=0);var o=e.get("inside",this.get("inside",!1));this.get("opposite")?o?(e.set("position","absolute"),e.set("y",0)):(e.set("position","relative"),e.set("y",Zk)):o?(e.set("y",0),e.set("position","absolute")):(e.set("y",void 0),e.set("position","relative")),wk(n)&&n!=t&&(t+=(n-t)*r),e.set("x",this.positionToCoordinate(t)),this.toggleVisibility(e,t,e.get("minPosition",0),e.get("maxPosition",1))}}}),Object.defineProperty(t.prototype,"updateGrid",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n){if(e){wk(t)||(t=0);var i=e.get("location",.5);wk(n)&&n!=t&&(t+=(n-t)*i),e.set("x",Math.round(this.positionToCoordinate(t))),this.toggleVisibility(e,t,0,1)}}}),Object.defineProperty(t.prototype,"updateBullet",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n){if(e){var i=e.get("sprite");if(i){wk(t)||(t=0);var r=e.get("location",.5);wk(n)&&n!=t&&(t+=(n-t)*r),i.set("x",this.positionToCoordinate(t)),this.toggleVisibility(i,t,0,1)}}}}),Object.defineProperty(t.prototype,"updateFill",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n){if(e){wk(t)||(t=0),wk(n)||(n=1);var i=this.positionToCoordinate(t),r=this.positionToCoordinate(n);this.fillDrawMethod(e,i,r)}}}),Object.defineProperty(t.prototype,"fillDrawMethod",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n){var i=this;e.set("draw",(function(e){var r,o=i.axis.gridContainer.height(),a=i.width();n<t&&(r=qb([t,n],2),n=r[0],t=r[1]),t>a||n<0||(e.moveTo(t,0),e.lineTo(n,0),e.lineTo(n,o),e.lineTo(t,o),e.lineTo(t,0))}))}}),Object.defineProperty(t.prototype,"positionTooltip",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){this._positionTooltip(e,{x:this.positionToCoordinate(t),y:0})}}),Object.defineProperty(t.prototype,"updateTooltipBounds",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this.get("inside"),n=1e5,i=this._display.toGlobal({x:0,y:0}),r=i.x,o=0,a=this.axisLength(),s=n,l="up";this.get("opposite")?t?(l="up",o=i.y,s=n):(l="down",o=i.y-n,s=n):t?(l="down",o=i.y-n,s=n):(l="up",o=i.y,s=n);var u={left:r,right:r+a,top:o,bottom:o+s};jT(u,e.get("bounds"))||(e.set("bounds",u),e.set("pointerOrientation",l))}}),Object.defineProperty(t,"className",{enumerable:!0,configurable:!0,writable:!0,value:"AxisRendererX"}),Object.defineProperty(t,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:kE.classNames.concat([t.className])}),t}(kE),SE=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return Object.defineProperty(t,"_downY",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(t,"thumb",{enumerable:!0,configurable:!0,writable:!0,value:mS.new(t._root,{height:Zk,isMeasured:!1,themeTags:["axis","y","thumb"]})}),t}return Hb(t,e),Object.defineProperty(t.prototype,"_afterNew",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._settings.themeTags=DT(this._settings.themeTags,["renderer","y"]),this._settings.opposite&&this._settings.themeTags.push("opposite"),e.prototype._afterNew.call(this),this.setPrivateRaw("letter","Y");var t=this.grid.template;t.set("width",Zk),t.set("height",0),t.set("draw",(function(e,t){e.moveTo(0,0),e.lineTo(t.width(),0)})),this.set("draw",(function(e,t){e.moveTo(0,0),e.lineTo(0,t.height())}))}}),Object.defineProperty(t.prototype,"_getPan",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return(e.y-t.y)/this.height()}}),Object.defineProperty(t.prototype,"_changed",{enumerable:!1,configurable:!0,writable:!0,value:function(){e.prototype._changed.call(this);var t=this.axis;t.ghostLabel.setPrivate("visible",!this.get("inside"));var n=this.thumb,i="opposite",r="inside";if(this.isDirty(i)||this.isDirty(r)){var o=this.chart,a=t.children;if(this.get(r)?t.addTag(r):t.removeTag(r),o){var s;if(this.get(i))-1==(s=o.rightAxesContainer.children).indexOf(t)&&s.moveValue(t,0),t.addTag(i),a.moveValue(this,0),n.set("centerX",0);else-1==(s=o.leftAxesContainer.children).indexOf(t)&&s.moveValue(t),t.removeTag(i),a.moveValue(this),n.set("centerX",Zk);t.ghostLabel._applyThemes(),this.labels.each((function(e){e._applyThemes()})),this.root._markDirtyRedraw()}t.markDirtySize()}n.setPrivate("width",t.labelsContainer.width())}}),Object.defineProperty(t.prototype,"processAxis",{enumerable:!1,configurable:!0,writable:!0,value:function(){e.prototype.processAxis.call(this);var t=this.axis;null==t.get("height")&&t.set("height",Zk);var n=this._root.horizontalLayout;t.set("layout",n),t.labelsContainer.set("height",Zk),t.axisHeader.set("layout",n)}}),Object.defineProperty(t.prototype,"_updatePositions",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this.axis;e.gridContainer.set("y",e.y()-pT(e.get("centerY",0),e.height())),e.bulletsContainer.set("x",this.x());var t=e.chart;if(t){var n=t.plotContainer,i=e.axisHeader,r=e.get("marginTop",0);i.children.length>0?(r=e.axisHeader.height(),e.set("marginTop",r)):i.set("height",r),i.setAll({y:e.y()-r,x:-1,width:n.width()+2})}}}),Object.defineProperty(t.prototype,"axisLength",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this.axis.innerHeight()}}),Object.defineProperty(t.prototype,"positionToPoint",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return{x:0,y:this.positionToCoordinate(e)}}}),Object.defineProperty(t.prototype,"updateLabel",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n,i){if(e){wk(t)||(t=0);var r=.5;r=wk(i)&&i>1?e.get("multiLocation",r):e.get("location",r);var o=this.get("opposite"),a=e.get("inside",this.get("inside",!1));o?(e.set("x",0),a?e.set("position","absolute"):e.set("position","relative")):a?(e.set("x",0),e.set("position","absolute")):(e.set("x",void 0),e.set("position","relative")),wk(n)&&n!=t&&(t+=(n-t)*r),e.set("y",this.positionToCoordinate(t)),this.toggleVisibility(e,t,e.get("minPosition",0),e.get("maxPosition",1))}}}),Object.defineProperty(t.prototype,"updateGrid",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n){if(e){wk(t)||(t=0);var i=e.get("location",.5);wk(n)&&n!=t&&(t+=(n-t)*i);var r=this.positionToCoordinate(t);e.set("y",r),this.toggleVisibility(e,t,0,1)}}}),Object.defineProperty(t.prototype,"updateTick",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n,i){if(e){wk(t)||(t=0);var r=.5;r=wk(i)&&i>1?e.get("multiLocation",r):e.get("location",r),wk(n)&&n!=t&&(t+=(n-t)*r),e.set("y",this.positionToCoordinate(t));var o=e.get("length",0),a=e.get("inside",this.get("inside",!1));this.get("opposite")?(e.set("x",0),a&&(o*=-1)):a||(o*=-1),e.set("draw",(function(e){e.moveTo(0,0),e.lineTo(o,0)})),this.toggleVisibility(e,t,e.get("minPosition",0),e.get("maxPosition",1))}}}),Object.defineProperty(t.prototype,"updateBullet",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n){if(e){var i=e.get("sprite");if(i){wk(t)||(t=0);var r=e.get("location",.5);wk(n)&&n!=t&&(t+=(n-t)*r),i.set("y",this.positionToCoordinate(t)),this.toggleVisibility(i,t,0,1)}}}}),Object.defineProperty(t.prototype,"updateFill",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n){if(e){wk(t)||(t=0),wk(n)||(n=1);var i=this.positionToCoordinate(t),r=this.positionToCoordinate(n);this.fillDrawMethod(e,i,r)}}}),Object.defineProperty(t.prototype,"fillDrawMethod",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n){var i=this;e.set("draw",(function(e){var r,o=i.axis.gridContainer.width(),a=i.height();n<t&&(r=qb([t,n],2),n=r[0],t=r[1]),t>a||n<0||(e.moveTo(0,t),e.lineTo(o,t),e.lineTo(o,n),e.lineTo(0,n),e.lineTo(0,t))}))}}),Object.defineProperty(t.prototype,"positionToCoordinate",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this._inversed?(e-this._start)*this._axisLength:(this._end-e)*this._axisLength}}),Object.defineProperty(t.prototype,"positionTooltip",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){this._positionTooltip(e,{x:0,y:this.positionToCoordinate(t)})}}),Object.defineProperty(t.prototype,"updateTooltipBounds",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this.get("inside"),n=1e5,i=this._display.toGlobal({x:0,y:0}),r=i.y,o=0,a=this.axisLength(),s=n,l="right";this.get("opposite")?t?(l="right",o=i.x-n,s=n):(l="left",o=i.x,s=n):t?(l="left",o=i.x,s=n):(l="right",o=i.x-n,s=n);var u={left:o,right:o+s,top:r,bottom:r+a};jT(u,e.get("bounds"))||(e.set("bounds",u),e.set("pointerOrientation",l))}}),Object.defineProperty(t.prototype,"_updateLC",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this.axis,t=e.parent;if(t){var n=t.innerHeight();this._lc=this.axisLength()/n,this._ls=e.y()/n}}}),Object.defineProperty(t.prototype,"toAxisPosition",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this._start||0,n=this._end||1;return e=(e-=this._ls)*(n-t)/this._lc,e=this.get("inversed")?t+e:n-e}}),Object.defineProperty(t.prototype,"fixPosition",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this.get("inversed")?e:1-e}}),Object.defineProperty(t,"className",{enumerable:!0,configurable:!0,writable:!0,value:"AxisRendererY"}),Object.defineProperty(t,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:kE.classNames.concat([t.className])}),t}(kE),IE=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return Object.defineProperty(t,"_endIndex",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(t,"_strokeGenerator",{enumerable:!0,configurable:!0,writable:!0,value:uE()}),Object.defineProperty(t,"_fillGenerator",{enumerable:!0,configurable:!0,writable:!0,value:cE()}),Object.defineProperty(t,"_legendStroke",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(t,"_legendFill",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(t,"strokes",{enumerable:!0,configurable:!0,writable:!0,value:new Wk(dS.new({}),(function(){return gS._new(t._root,{themeTags:DT(t.strokes.template.get("themeTags",[]),["line","series","stroke"])},[t.strokes.template])}))}),Object.defineProperty(t,"fills",{enumerable:!0,configurable:!0,writable:!0,value:new Wk(dS.new({}),(function(){return gS._new(t._root,{themeTags:DT(t.strokes.template.get("themeTags",[]),["line","series","fill"])},[t.fills.template])}))}),Object.defineProperty(t,"_fillTemplate",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(t,"_strokeTemplate",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(t,"_previousPoint",{enumerable:!0,configurable:!0,writable:!0,value:[0,0,0,0]}),Object.defineProperty(t,"_dindex",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(t,"_sindex",{enumerable:!0,configurable:!0,writable:!0,value:0}),t}return Hb(t,e),Object.defineProperty(t.prototype,"_afterNew",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._fillGenerator.y0((function(e){return e[3]})),this._fillGenerator.x0((function(e){return e[2]})),this._fillGenerator.y1((function(e){return e[1]})),this._fillGenerator.x1((function(e){return e[0]})),e.prototype._afterNew.call(this)}}),Object.defineProperty(t.prototype,"makeStroke",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this.mainContainer.children.push(e.make());return e.push(t),t}}),Object.defineProperty(t.prototype,"makeFill",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this.mainContainer.children.push(e.make());return e.push(t),t}}),Object.defineProperty(t.prototype,"_updateChildren",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._strokeTemplate=void 0,this._fillTemplate=void 0;var t=this.get("xAxis"),n=this.get("yAxis");if(this.isDirty("stroke")){var i=this.get("stroke");this.strokes.template.set("stroke",i);var r=this._legendStroke;r&&r.states.lookup("default").set("stroke",i)}if(this.isDirty("fill")){var o=this.get("fill");this.fills.template.set("fill",o);var a=this._legendFill;a&&a.states.lookup("default").set("fill",o)}if(this.isDirty("curveFactory")){var s=this.get("curveFactory");s&&(this._strokeGenerator.curve(s),this._fillGenerator.curve(s))}if(t.inited&&n.inited){if(this._axesDirty||this._valuesDirty||this._stackDirty||this.isDirty("vcx")||this.isDirty("vcy")||this._sizeDirty||this.isDirty("connect")||this.isDirty("curveFactory")){this.fills.each((function(e){e.setPrivate("visible",!1)})),this.strokes.each((function(e){e.setPrivate("visible",!1)})),this.axisRanges.each((function(e){var t=e.fills;t&&t.each((function(e){e.setPrivate("visible",!1)}));var n=e.strokes;n&&n.each((function(e){e.setPrivate("visible",!1)}))}));var l=this.startIndex(),u=this.strokes.template.get("templateField"),c=this.fills.template.get("templateField"),h=!0,d=!0;u&&(h=!1),c&&(d=!1);for(var f=function(e){var t=p.dataItems[e],n=!0,i=t.dataContext;if(u&&i[u]&&(h=!0),c&&i[c]&&(d=!0),Sk(p._valueFields,(function(e){wk(t.get(e))||(n=!1)})),n&&h&&d)return l=e,"break"},p=this,g=l-1;g>=0;g--){if("break"===f(g))break}var m=this.dataItems.length,b=this.endIndex();if(b<m){b++;var y=function(e){var t=v.dataItems[e],n=!0;if(Sk(v._valueFields,(function(e){wk(t.get(e))||(n=!1)})),n)return b=e+1,"break"},v=this;for(g=b;g<m;g++){if("break"===y(g))break}}for(l>0&&l--,this._endIndex=b,this._clearGraphics(),this._sindex=0,this._dindex=l;this._dindex<b-1;)this._startSegment(this._dindex),this._sindex++}}else this._skipped=!0;e.prototype._updateChildren.call(this)}}),Object.defineProperty(t.prototype,"_clearGraphics",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.strokes.clear(),this.fills.clear()}}),Object.defineProperty(t.prototype,"_startSegment",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this,n=this._endIndex,i=n,r=this.get("autoGapCount"),o=this.get("connect"),a=this.makeFill(this.fills),s=this._fillTemplate,l=this.fills.template;s&&s!=l&&(a.template=s),a.setPrivate("visible",!0);var u=this.makeStroke(this.strokes),c=this._strokeTemplate;c&&c!=this.strokes.template&&(u.template=c),u.setPrivate("visible",!0);var h=this.get("xAxis"),d=this.get("yAxis"),f=this.get("baseAxis"),p=this.get("vcx",1),g=this.get("vcy",1),m=this._xField,b=this._yField,y=this._xOpenField,v=this._yOpenField,_=this.get("openValueXField"),w=this.get("openValueYField");_||(y=this._xField),w||(v=this._yField);var x,P=this.get("stacked"),O=h.basePosition(),k=d.basePosition();x=f===d?this._yField:this._xField;var T=[],S=[];T.push(S);var I,E=this.strokes.template.get("templateField"),D=this.fills.template.get("templateField"),j=this.get("locationX",.5),C=this.get("locationY",.5),A=this.get("openLocationX",j),M=this.get("openLocationY",C),R=this.get("minDistance",0),N=this.fills.template.get("visible");this.axisRanges.length>0&&(N=!0);var L=!1;(P||_||w)&&(L=!0);var F={points:S,segments:T,stacked:P,getOpen:L,basePosX:O,basePosY:k,fillVisible:N,xField:m,yField:b,xOpenField:y,yOpenField:v,vcx:p,vcy:g,baseAxis:f,xAxis:h,yAxis:d,locationX:j,locationY:C,openLocationX:A,openLocationY:M,minDistance:R};for(I=e;I<i;I++){this._dindex=I;var B=this._dataItems[I],V=B.get(m),U=B.get(b);if(null==V||null==U?o||(S=[],T.push(S),F.points=S):this._getPoints(B,F),E){var H=B.dataContext[E];if(H){if(H instanceof dS||(H=dS.new(H)),this._strokeTemplate=H,I>e){i=I;break}u.template=H}}if(D){var z=B.dataContext[D];if(z){if(z instanceof dS||(z=dS.new(z)),this._fillTemplate=z,I>e){i=I;break}a.template=z}}if(!o){var $=this.dataItems[I+1];$&&f.shouldGap(B,$,r,x)&&(S=[],T.push(S),F.points=S)}}a.setRaw("userData",[e,I]),u.setRaw("userData",[e,I]),I===n&&this._endLine(S,T[0][0]),u&&this._drawStroke(u,T),a&&this._drawFill(a,T),this.axisRanges.each((function(n){var i=n.container,r=n.fills,o=t.makeFill(r);i&&i.children.push(o),o.setPrivate("visible",!0),t._drawFill(o,T);var a=n.strokes,s=t.makeStroke(a);i&&i.children.push(s),s.setPrivate("visible",!0),t._drawStroke(s,T),o.setRaw("userData",[e,I]),s.setRaw("userData",[e,I])}))}}),Object.defineProperty(t.prototype,"_getPoints",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var n=t.points,i=e.get("locationX",t.locationX),r=e.get("locationY",t.locationY),o=t.xAxis.getDataItemPositionX(e,t.xField,i,t.vcx),a=t.yAxis.getDataItemPositionY(e,t.yField,r,t.vcy);if(this._shouldInclude(o)){var s=this.getPoint(o,a),l=[s.x,s.y];if(s.x+=this._x,s.y+=this._y,e.set("point",s),t.fillVisible){var u=o,c=a;if(t.baseAxis===t.xAxis?c=t.basePosY:t.baseAxis===t.yAxis&&(u=t.basePosX),t.getOpen){var h=e.get(t.xOpenField),d=e.get(t.yOpenField);if(null!=h&&null!=d){var f=e.get("openLocationX",t.openLocationX),p=e.get("openLocationY",t.openLocationY);if(t.stacked){var g=e.get("stackToItemX"),m=e.get("stackToItemY");g?gk(u=t.xAxis.getDataItemPositionX(g,t.xField,f,g.component.get("vcx")))&&(u=t.basePosX):u=t.yAxis===t.baseAxis?t.basePosX:t.xAxis.getDataItemPositionX(e,t.xOpenField,f,t.vcx),m?gk(c=t.yAxis.getDataItemPositionY(m,t.yField,p,m.component.get("vcy")))&&(c=t.basePosY):c=t.xAxis===t.baseAxis?t.basePosY:t.yAxis.getDataItemPositionY(e,t.yOpenField,p,t.vcy)}else u=t.xAxis.getDataItemPositionX(e,t.xOpenField,f,t.vcx),c=t.yAxis.getDataItemPositionY(e,t.yOpenField,p,t.vcy)}}var b=this.getPoint(u,c);l[2]=b.x,l[3]=b.y}if(t.minDistance>0){var y=l[0],v=l[1],_=l[2],w=l[3],x=this._previousPoint,P=x[0],O=x[1],k=x[2],T=x[3];(Math.hypot(y-P,v-O)>t.minDistance||_&&w&&Math.hypot(_-k,w-T)>t.minDistance)&&(n.push(l),this._previousPoint=l)}else n.push(l)}}}),Object.defineProperty(t.prototype,"_endLine",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){}}),Object.defineProperty(t.prototype,"_drawStroke",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var n=this;e.get("visible")&&e.set("draw",(function(e){Sk(t,(function(t){n._strokeGenerator.context(e),n._strokeGenerator(t)}))}))}}),Object.defineProperty(t.prototype,"_drawFill",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var n=this;e.get("visible")&&e.set("draw",(function(e){Sk(t,(function(t){n._fillGenerator.context(e),n._fillGenerator(t)}))}))}}),Object.defineProperty(t.prototype,"_processAxisRange",{enumerable:!1,configurable:!0,writable:!0,value:function(t){var n=this;e.prototype._processAxisRange.call(this,t),t.fills=new Wk(dS.new({}),(function(){return gS._new(n._root,{themeTags:DT(t.fills.template.get("themeTags",[]),["line","series","fill"])},[n.fills.template,t.fills.template])})),t.strokes=new Wk(dS.new({}),(function(){return gS._new(n._root,{themeTags:DT(t.strokes.template.get("themeTags",[]),["line","series","stroke"])},[n.strokes.template,t.strokes.template])}))}}),Object.defineProperty(t.prototype,"createLegendMarker",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this.get("legendDataItem");if(t){var n=t.get("marker"),i=t.get("markerRectangle");i&&i.setPrivate("visible",!1),n.set("background",mS.new(n._root,{fillOpacity:0,fill:AT(0)}));var r=n.children.push(gS._new(n._root,{themeTags:["line","series","legend","marker","stroke"],interactive:!1},[this.strokes.template]));this._legendStroke=r;var o=n.children.push(gS._new(n._root,{themeTags:["line","series","legend","marker","fill"]},[this.fills.template]));this._legendFill=o;var a=this._root.interfaceColors.get("disabled");if(r.states.create("disabled",{fill:a,stroke:a}),o.states.create("disabled",{fill:a,stroke:a}),this.bullets.length>0){var s=this.bullets.getIndex(0);if(s){var l=s(n._root,this,new VI(this,{},{}));if(l){var u=l.get("sprite");u instanceof gS&&u.states.create("disabled",{fill:a,stroke:a}),u&&(u.set("tooltipText",void 0),n.children.push(u),u.setAll({x:n.width()/2,y:n.height()/2}))}}}}}}),Object.defineProperty(t,"className",{enumerable:!0,configurable:!0,writable:!0,value:"LineSeries"}),Object.defineProperty(t,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:vE.classNames.concat([t.className])}),t}(vE);function EE(e){let t;return{c(){t=f("div"),t.textContent="No GPS Data Selected.",y(t,"class","alert alert-red my-1"),y(t,"role","alert")},m(e,n){c(e,t,n)},d(e){e&&h(t)}}}function DE(t){let n,i,r,o,a,s,l,d=null===t[0]&&EE();return{c(){n=f("section"),i=f("div"),r=f("p"),r.textContent="Speed Chart (Km/h):",o=g(),d&&d.c(),a=g(),s=f("div"),y(r,"class","font-bold my-1"),y(s,"class",l=(null===t[0]?"h-0":"h-96")+" w-full rounded-lg"),y(i,"class","p-4"),y(n,"class","card h-fit scale-in-center")},m(e,l){c(e,n,l),u(n,i),u(i,r),u(i,o),d&&d.m(i,null),u(i,a),u(i,s),t[2](s)},p(e,[t]){null===e[0]?d||(d=EE(),d.c(),d.m(i,a)):d&&(d.d(1),d=null),1&t&&l!==(l=(null===e[0]?"h-0":"h-96")+" w-full rounded-lg")&&y(s,"class",l)},i:e,o:e,d(e){e&&h(n),d&&d.d(),t[2](null)}}}function jE(e,t,n){let i,r,o,{selectedGPSData:a}=t,s=null;const l=()=>{let e=[];if(a){a.features.forEach(((t,n)=>{const i=t.properties.Speed?t.properties.Speed:0;e.push({index:n,value:i})}))}else e.push({index:0,value:0});return e};P((()=>{(()=>{try{let t=NI.new(i),n=t.container.children.push(mE.new(t,{panX:!0,panY:!0,wheelX:"panX",wheelY:"zoomX",pinchZoomX:!0}));n.set("cursor",yE.new(t,{behavior:"none"})).lineY.set("visible",!1);let a=TE.new(t,{minGridDistance:30});a.labels.template.setAll({rotation:-90,centerY:eT,centerX:Zk,paddingRight:15}),r=n.xAxes.push(wE.new(t,{categoryField:"index",renderer:a,tooltip:NS.new(t,{})}));var e=n.yAxes.push(xE.new(t,{renderer:SE.new(t,{})}));o=n.series.push(IE.new(t,{name:"Series",xAxis:r,yAxis:e,valueYField:"value",categoryXField:"index"})),o.set("tooltip",NS.new(t,{})).label.set("text","{valueY}"),o=n.series.push(IE.new(t,{name:"Series",xAxis:r,yAxis:e,valueYField:"value",sequencedInterpolation:!0,categoryXField:"index",tooltip:NS.new(t,{labelText:"{valueY}"})})),n.set("scrollbarX",KI.new(t,{orientation:"horizontal"}));let u=l();r.data.setAll(u),o.data.setAll(u),s=!0,o.appear(1e3),n.appear(1e3,100)}catch(e){alert(e)}})()}));const u=()=>{if(null!==a)try{s&&(()=>{let e=l();r.data.setAll(e),o.data.setAll(e)})()}catch(e){alert(e)}};return e.$$set=e=>{"selectedGPSData"in e&&n(0,a=e.selectedGPSData)},e.$$.update=()=>{1&e.$$.dirty&&a&&u()},[a,i,function(e){T[e?"unshift":"push"]((()=>{i=e,n(1,i)}))}]}class CE extends X{constructor(e){super(),W(this,e,jE,DE,o,{selectedGPSData:0})}}function AE(e){let t,n,i,r,o,a,s,l;function u(t){e[23](t)}let d={};function p(t){e[24](t)}void 0!==e[6]&&(d.dateTimeDictionary=e[6]),n=new ke({props:d}),T.push((()=>z(n,"dateTimeDictionary",u)));let m={fetchFirebaseData:e[17]};return void 0!==e[6]&&(m.dateTimeDictionary=e[6]),a=new _e({props:m}),T.push((()=>z(a,"dateTimeDictionary",p))),{c(){t=f("div"),$(n.$$.fragment),r=g(),o=f("div"),$(a.$$.fragment),y(t,"class","col-span-1 md:col-span-3 row-span-1"),y(o,"class","col-span-1 md:col-span-3 row-span-1")},m(e,i){c(e,t,i),Y(n,t,null),c(e,r,i),c(e,o,i),Y(a,o,null),l=!0},p(e,t){const r={};!i&&64&t[0]&&(i=!0,r.dateTimeDictionary=e[6],C((()=>i=!1))),n.$set(r);const o={};!s&&64&t[0]&&(s=!0,o.dateTimeDictionary=e[6],C((()=>s=!1))),a.$set(o)},i(e){l||(U(n.$$.fragment,e),U(a.$$.fragment,e),l=!0)},o(e){H(n.$$.fragment,e),H(a.$$.fragment,e),l=!1},d(e){e&&h(t),G(n),e&&h(r),e&&h(o),G(a)}}}function ME(e){let t,n,i,r,o;function a(t){e[26](t)}let s={signOut:e[1]};return void 0!==e[0]&&(s.user=e[0]),n=new mP({props:s}),T.push((()=>z(n,"user",a))),{c(){t=f("div"),$(n.$$.fragment),y(t,"class",r="col-span-1 md:col-span-3 row-span-1 ")},m(e,i){c(e,t,i),Y(n,t,null),o=!0},p(e,t){const r={};2&t[0]&&(r.signOut=e[1]),!i&&1&t[0]&&(i=!0,r.user=e[0],C((()=>i=!1))),n.$set(r)},i(e){o||(U(n.$$.fragment,e),o=!0)},o(e){H(n.$$.fragment,e),o=!1},d(e){e&&h(t),G(n)}}}function RE(e){let t,n,i,r,o,a,s,l,u,d,p,m,b,v;function _(t){e[27](t)}let w={};function x(t){e[28](t)}void 0!==e[15]&&(w.selectedVideoFile=e[15]),n=new sk({props:w}),T.push((()=>z(n,"selectedVideoFile",_)));let P={};function O(t){e[29](t)}void 0!==e[16]&&(P.selectedGPSData=e[16]),s=new CE({props:P}),T.push((()=>z(s,"selectedGPSData",x)));let k={};return void 0!==e[16]&&(k.selectedGPSData=e[16]),p=new pk({props:k}),T.push((()=>z(p,"selectedGPSData",O))),{c(){t=f("div"),$(n.$$.fragment),o=g(),a=f("div"),$(s.$$.fragment),u=g(),d=f("div"),$(p.$$.fragment),y(t,"class",r="col-span-1 md:col-span-3 row-span-1 "),y(a,"class","col-span-1 md:col-span-2 row-span-1"),y(d,"class",b="col-span-1 md:col-span-1 row-span-1 ")},m(e,i){c(e,t,i),Y(n,t,null),c(e,o,i),c(e,a,i),Y(s,a,null),c(e,u,i),c(e,d,i),Y(p,d,null),v=!0},p(e,t){const r={};!i&&32768&t[0]&&(i=!0,r.selectedVideoFile=e[15],C((()=>i=!1))),n.$set(r);const o={};!l&&65536&t[0]&&(l=!0,o.selectedGPSData=e[16],C((()=>l=!1))),s.$set(o);const a={};!m&&65536&t[0]&&(m=!0,a.selectedGPSData=e[16],C((()=>m=!1))),p.$set(a)},i(e){v||(U(n.$$.fragment,e),U(s.$$.fragment,e),U(p.$$.fragment,e),v=!0)},o(e){H(n.$$.fragment,e),H(s.$$.fragment,e),H(p.$$.fragment,e),v=!1},d(e){e&&h(t),G(n),e&&h(o),e&&h(a),G(s),e&&h(u),e&&h(d),G(p)}}}function NE(e){let t;return{c(){t=f("div"),t.innerHTML='<p class="align-middle">Loading Data...</p>',y(t,"class","absolute top-0 z-100 map-loading rounded-lg")},m(e,n){c(e,t,n)},d(e){e&&h(t)}}}function LE(e){let t;return{c(){t=f("div"),t.innerHTML='<p class="align-middle">Error, unable to Fetch Data</p>',y(t,"class","absolute top-0 z-100 map-error rounded-lg")},m(e,n){c(e,t,n)},d(e){e&&h(t)}}}function FE(e){let t,n,i,r,o,a,s,l,d,p,m,b,v,_,w,x,P,O,k,S,I,E,D,j,A,M,R,N,L,F,q,W,X,K,Q,J,Z,ee,te,ne,ie,re,oe,se,le,ue,ce;function he(t){e[20](t)}function de(t){e[21](t)}t=new SO({props:{title:"Dashboard Camera Viewer",color:"bg-dark",zHeight:"z-10"}}),i=new DO({props:{message:"Dashcam Viewer shows all of your trips data. It displays your\r\ncar's driving metrics on the screen as your video plays."}});let fe={};function pe(t){e[22](t)}void 0!==e[10]&&(fe.selectedMenu=e[10]),void 0!==e[9]&&(fe.menuComponents=e[9]),o=new RO({props:fe}),T.push((()=>z(o,"selectedMenu",he))),T.push((()=>z(o,"menuComponents",de)));let ge={};void 0!==e[5]&&(ge.layerList=e[5]),b=new Ne({props:ge}),T.push((()=>z(b,"layerList",pe)));let me=0===e[10]&&AE(e);function ye(t){e[25](t)}let ve={};void 0!==e[4]&&(ve.pointOfInterest=e[4]),P=new Ge({props:ve}),T.push((()=>z(P,"pointOfInterest",ye)));let _e=2===e[10]&&ME(e),we=3===e[10]&&RE(e);function xe(t){e[30](t)}function Pe(t){e[31](t)}function Oe(t){e[32](t)}function ke(t){e[33](t)}function Te(t){e[34](t)}function Se(t){e[35](t)}function Ie(t){e[36](t)}let Ee={};function De(t){e[37](t)}function je(t){e[38](t)}void 0!==e[8]&&(Ee.cityDetails=e[8]),void 0!==e[11]&&(Ee.gpsData=e[11]),void 0!==e[3]&&(Ee.isReadyForStyleSwitching=e[3]),void 0!==e[5]&&(Ee.layerList=e[5]),void 0!==e[7]&&(Ee.mapStyle=e[7]),void 0!==e[4]&&(Ee.pointOfInterest=e[4]),void 0!==e[10]&&(Ee.selectedMenu=e[10]),j=new be({props:Ee}),T.push((()=>z(j,"cityDetails",xe))),T.push((()=>z(j,"gpsData",Pe))),T.push((()=>z(j,"isReadyForStyleSwitching",Oe))),T.push((()=>z(j,"layerList",ke))),T.push((()=>z(j,"mapStyle",Te))),T.push((()=>z(j,"pointOfInterest",Se))),T.push((()=>z(j,"selectedMenu",Ie)));let Ce={};void 0!==e[7]&&(Ce.mapStyle=e[7]),void 0!==e[3]&&(Ce.isReadyForStyleSwitching=e[3]),K=new Ue({props:Ce}),T.push((()=>z(K,"mapStyle",De))),T.push((()=>z(K,"isReadyForStyleSwitching",je)));let Ae=!0===e[12]&&NE(),Me=!0===e[13]&&LE();function Re(t){e[39](t)}function Le(t){e[40](t)}function Fe(t){e[41](t)}function Be(t){e[42](t)}let Ve={verifyAccessToken:e[18],fetchGPSDataForFile:e[19]};return void 0!==e[0]&&(Ve.user=e[0]),void 0!==e[2]&&(Ve.accessTokenValue=e[2]),void 0!==e[14]&&(Ve.files=e[14]),void 0!==e[15]&&(Ve.selectedVideoFile=e[15]),ne=new nk({props:Ve}),T.push((()=>z(ne,"user",Re))),T.push((()=>z(ne,"accessTokenValue",Le))),T.push((()=>z(ne,"files",Fe))),T.push((()=>z(ne,"selectedVideoFile",Be))),ue=new ae({}),{c(){$(t.$$.fragment),n=g(),$(i.$$.fragment),r=g(),$(o.$$.fragment),l=g(),d=f("section"),p=f("div"),m=f("div"),$(b.$$.fragment),_=g(),me&&me.c(),w=g(),x=f("div"),$(P.$$.fragment),S=g(),_e&&_e.c(),I=g(),we&&we.c(),E=g(),D=f("div"),$(j.$$.fragment),W=g(),X=f("div"),$(K.$$.fragment),Z=g(),Ae&&Ae.c(),ee=g(),Me&&Me.c(),te=g(),$(ne.$$.fragment),le=g(),$(ue.$$.fragment),y(m,"class","col-span-1 md:col-span-3 row-span-1"),y(x,"class",k="col-span-1 md:col-span-3 row-span-1 "+(1===e[10]?"":"hidden")),y(p,"class","col-span-1 md:col-span-6 row-span-6 grid grid-cols-1 md:grid-cols-3 gap-4 h-fit"),y(X,"class","absolute top-1 left-1 "),y(D,"class","col-span-1 md:col-span-6 row-span-6 relative"),y(d,"class","grid grid-cols-1 md:grid-cols-12 grid-rows-6 gap-4 my-4 px-4 h-fit ")},m(e,a){Y(t,e,a),c(e,n,a),Y(i,e,a),c(e,r,a),Y(o,e,a),c(e,l,a),c(e,d,a),u(d,p),u(p,m),Y(b,m,null),u(p,_),me&&me.m(p,null),u(p,w),u(p,x),Y(P,x,null),u(p,S),_e&&_e.m(p,null),u(p,I),we&&we.m(p,null),u(d,E),u(d,D),Y(j,D,null),u(D,W),u(D,X),Y(K,X,null),u(D,Z),Ae&&Ae.m(D,null),u(D,ee),Me&&Me.m(D,null),c(e,te,a),Y(ne,e,a),c(e,le,a),Y(ue,e,a),ce=!0},p(e,t){const n={};!a&&1024&t[0]&&(a=!0,n.selectedMenu=e[10],C((()=>a=!1))),!s&&512&t[0]&&(s=!0,n.menuComponents=e[9],C((()=>s=!1))),o.$set(n);const i={};!v&&32&t[0]&&(v=!0,i.layerList=e[5],C((()=>v=!1))),b.$set(i),0===e[10]?me?(me.p(e,t),1024&t[0]&&U(me,1)):(me=AE(e),me.c(),U(me,1),me.m(p,w)):me&&(B(),H(me,1,1,(()=>{me=null})),V());const r={};!O&&16&t[0]&&(O=!0,r.pointOfInterest=e[4],C((()=>O=!1))),P.$set(r),(!ce||1024&t[0]&&k!==(k="col-span-1 md:col-span-3 row-span-1 "+(1===e[10]?"":"hidden")))&&y(x,"class",k),2===e[10]?_e?(_e.p(e,t),1024&t[0]&&U(_e,1)):(_e=ME(e),_e.c(),U(_e,1),_e.m(p,I)):_e&&(B(),H(_e,1,1,(()=>{_e=null})),V()),3===e[10]?we?(we.p(e,t),1024&t[0]&&U(we,1)):(we=RE(e),we.c(),U(we,1),we.m(p,null)):we&&(B(),H(we,1,1,(()=>{we=null})),V());const l={};!A&&256&t[0]&&(A=!0,l.cityDetails=e[8],C((()=>A=!1))),!M&&2048&t[0]&&(M=!0,l.gpsData=e[11],C((()=>M=!1))),!R&&8&t[0]&&(R=!0,l.isReadyForStyleSwitching=e[3],C((()=>R=!1))),!N&&32&t[0]&&(N=!0,l.layerList=e[5],C((()=>N=!1))),!L&&128&t[0]&&(L=!0,l.mapStyle=e[7],C((()=>L=!1))),!F&&16&t[0]&&(F=!0,l.pointOfInterest=e[4],C((()=>F=!1))),!q&&1024&t[0]&&(q=!0,l.selectedMenu=e[10],C((()=>q=!1))),j.$set(l);const u={};!Q&&128&t[0]&&(Q=!0,u.mapStyle=e[7],C((()=>Q=!1))),!J&&8&t[0]&&(J=!0,u.isReadyForStyleSwitching=e[3],C((()=>J=!1))),K.$set(u),!0===e[12]?Ae||(Ae=NE(),Ae.c(),Ae.m(D,ee)):Ae&&(Ae.d(1),Ae=null),!0===e[13]?Me||(Me=LE(),Me.c(),Me.m(D,null)):Me&&(Me.d(1),Me=null);const c={};!ie&&1&t[0]&&(ie=!0,c.user=e[0],C((()=>ie=!1))),!re&&4&t[0]&&(re=!0,c.accessTokenValue=e[2],C((()=>re=!1))),!oe&&16384&t[0]&&(oe=!0,c.files=e[14],C((()=>oe=!1))),!se&&32768&t[0]&&(se=!0,c.selectedVideoFile=e[15],C((()=>se=!1))),ne.$set(c)},i(e){ce||(U(t.$$.fragment,e),U(i.$$.fragment,e),U(o.$$.fragment,e),U(b.$$.fragment,e),U(me),U(P.$$.fragment,e),U(_e),U(we),U(j.$$.fragment,e),U(K.$$.fragment,e),U(ne.$$.fragment,e),U(ue.$$.fragment,e),ce=!0)},o(e){H(t.$$.fragment,e),H(i.$$.fragment,e),H(o.$$.fragment,e),H(b.$$.fragment,e),H(me),H(P.$$.fragment,e),H(_e),H(we),H(j.$$.fragment,e),H(K.$$.fragment,e),H(ne.$$.fragment,e),H(ue.$$.fragment,e),ce=!1},d(e){G(t,e),e&&h(n),G(i,e),e&&h(r),G(o,e),e&&h(l),e&&h(d),G(b),me&&me.d(),G(P),_e&&_e.d(),we&&we.d(),G(j),G(K),Ae&&Ae.d(),Me&&Me.d(),e&&h(te),G(ne,e),e&&h(le),G(ue,e)}}}function BE(e,t,n){let i,{user:r}=t,{signOut:o}=t;fP.subscribe((e=>{n(2,i=e)}));let a=!1,s=null,l=[],u={startDateTime:"2015-06-23T00:00",endDateTime:"2022-12-23T00:00"},c="satellite-streets-v11",h={id:0,center:[-122.4194,37.773972],zoom:11,pitch:0,bearing:-17.6},d=[{id:0,title:"Firebase",icon:"fa-database"},{id:1,title:"Street View",icon:"fa-road"},{id:2,title:"Profile",icon:"fa-user"},{id:3,title:"Video Player",icon:"fa-video"}],f=d[0].id,p=[],g=!1,m=!1;let b=[];sessionStorage.getItem("Files")&&(b=JSON.parse(sessionStorage.getItem("Files")));let y=null,v=null;return e.$$set=e=>{"user"in e&&n(0,r=e.user),"signOut"in e&&n(1,o=e.signOut)},[r,o,i,a,s,l,u,c,h,d,f,p,g,m,b,y,v,async()=>{n(12,g=!0),n(13,m=!1);const e=await(async(e,t)=>{try{const n=[],i=rm(aP,"users",e.uid);let r=null;if(""===t.startDateTime||""===t.endDateTime)r=ab(im(i,"geojson"));else{const e=Vb.firestore.Timestamp.fromDate(new Date(t.startDateTime)),n=Vb.firestore.Timestamp.fromDate(new Date(t.endDateTime));r=ab(im(i,"geojson"),lb("dateTime",">",e),lb("dateTime","<",n),cb("dateTime","desc"))}return(await Tb(r)).forEach((e=>{const t=e.data();n.push(t)})),{status:200,data:n}}catch(e){return e}})(r,u);200===e.status?e.data.length>=1?(n(11,p=cP(e.data)),n(8,h={id:0,center:p[0].features[0].geometry.coordinates,zoom:15,pitch:0,bearing:-17.6}),alert("Successfully loaded Firebase Data")):alert("No GPS data found"):(alert(e.message),n(13,m=!0)),n(12,g=!1)},async()=>{null===i&&(n(2,i=await hP()),fP.set(i))},async e=>{n(12,g=!0),n(13,m=!1),n(15,y=e);const t=le(e,b);if(t){const e=await(async(e,t)=>{try{const n={key:1,user_id:`${e.uid}`,coord_link:`https://drive.google.com/file/d/${t.id}/view?usp=sharing`};return await OO({method:"post",url:"http://127.0.0.1:8000/fetchGPSData",headers:{"Content-Type":"application/json"},data:JSON.stringify(n)})}catch(e){return e.response?e.response.status:e.request?e.request:e.message}})(r,t);200===e.status?e.data?(n(11,p=cP([e.data])),n(8,h={id:0,center:p[0].features[0].geometry.coordinates,zoom:15,pitch:0,bearing:-17.6}),n(16,v=p[0]),alert("Added Trip to the Map")):alert("No GPS data found"):(alert(e),n(13,m=!0))}else alert("Coordinates File does not exist, but you can still view the video"),n(16,v=null),n(11,p=[]);n(10,f=3),n(12,g=!1),document.body.scrollIntoView()},function(e){f=e,n(10,f)},function(e){d=e,n(9,d)},function(e){l=e,n(5,l)},function(e){u=e,n(6,u)},function(e){u=e,n(6,u)},function(e){s=e,n(4,s)},function(e){r=e,n(0,r)},function(e){y=e,n(15,y)},function(e){v=e,n(16,v)},function(e){v=e,n(16,v)},function(e){h=e,n(8,h)},function(e){p=e,n(11,p)},function(e){a=e,n(3,a)},function(e){l=e,n(5,l)},function(e){c=e,n(7,c)},function(e){s=e,n(4,s)},function(e){f=e,n(10,f)},function(e){c=e,n(7,c)},function(e){a=e,n(3,a)},function(e){r=e,n(0,r)},function(e){i=e,n(2,i)},function(e){b=e,n(14,b)},function(e){y=e,n(15,y)}]}class VE extends X{constructor(e){super(),W(this,e,BE,FE,o,{user:0,signOut:1},null,[-1,-1])}}function UE(e){return"function"==typeof e}var HE,zE,$E=(HE=function(e){return function(t){e(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map((function(e,t){return t+1+") "+e.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t}},zE=HE((function(e){Error.call(e),e.stack=(new Error).stack})),zE.prototype=Object.create(Error.prototype),zE.prototype.constructor=zE,zE);function YE(e,t){if(e){var n=e.indexOf(t);0<=n&&e.splice(n,1)}}var GE=function(){function e(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}return e.prototype.unsubscribe=function(){var e,t,n,i,r;if(!this.closed){this.closed=!0;var o=this._parentage;if(o)if(this._parentage=null,Array.isArray(o))try{for(var a=Gb(o),s=a.next();!s.done;s=a.next()){s.value.remove(this)}}catch(t){e={error:t}}finally{try{s&&!s.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}else o.remove(this);var l=this.initialTeardown;if(UE(l))try{l()}catch(e){r=e instanceof $E?e.errors:[e]}var u=this._finalizers;if(u){this._finalizers=null;try{for(var c=Gb(u),h=c.next();!h.done;h=c.next()){var d=h.value;try{WE(d)}catch(e){r=null!=r?r:[],e instanceof $E?r=Wb(Wb([],qb(r)),qb(e.errors)):r.push(e)}}}catch(e){n={error:e}}finally{try{h&&!h.done&&(i=c.return)&&i.call(c)}finally{if(n)throw n.error}}}if(r)throw new $E(r)}},e.prototype.add=function(t){var n;if(t&&t!==this)if(this.closed)WE(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(t)}},e.prototype._hasParent=function(e){var t=this._parentage;return t===e||Array.isArray(t)&&t.includes(e)},e.prototype._addParent=function(e){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e},e.prototype._removeParent=function(e){var t=this._parentage;t===e?this._parentage=null:Array.isArray(t)&&YE(t,e)},e.prototype.remove=function(t){var n=this._finalizers;n&&YE(n,t),t instanceof e&&t._removeParent(this)},e.EMPTY=function(){var t=new e;return t.closed=!0,t}(),e}();function qE(e){return e instanceof GE||e&&"closed"in e&&UE(e.remove)&&UE(e.add)&&UE(e.unsubscribe)}function WE(e){UE(e)?e():e.unsubscribe()}GE.EMPTY;var XE={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},KE={setTimeout:function(e,t){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];var r=KE.delegate;return(null==r?void 0:r.setTimeout)?r.setTimeout.apply(r,Wb([e,t],qb(n))):setTimeout.apply(void 0,Wb([e,t],qb(n)))},clearTimeout:function(e){var t=KE.delegate;return((null==t?void 0:t.clearTimeout)||clearTimeout)(e)},delegate:void 0};function QE(){}var JE=function(e){function t(t){var n=e.call(this)||this;return n.isStopped=!1,t?(n.destination=t,qE(t)&&t.add(n)):n.destination=rD,n}return Hb(t,e),t.create=function(e,t,n){return new nD(e,t,n)},t.prototype.next=function(e){this.isStopped||this._next(e)},t.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){try{this.destination.error(e)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(GE),ZE=Function.prototype.bind;function eD(e,t){return ZE.call(e,t)}var tD=function(){function e(e){this.partialObserver=e}return e.prototype.next=function(e){var t=this.partialObserver;if(t.next)try{t.next(e)}catch(e){iD(e)}},e.prototype.error=function(e){var t=this.partialObserver;if(t.error)try{t.error(e)}catch(e){iD(e)}else iD(e)},e.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(e){iD(e)}},e}(),nD=function(e){function t(t,n,i){var r,o,a=e.call(this)||this;UE(t)||!t?r={next:null!=t?t:void 0,error:null!=n?n:void 0,complete:null!=i?i:void 0}:a&&XE.useDeprecatedNextContext?((o=Object.create(t)).unsubscribe=function(){return a.unsubscribe()},r={next:t.next&&eD(t.next,o),error:t.error&&eD(t.error,o),complete:t.complete&&eD(t.complete,o)}):r=t;return a.destination=new tD(r),a}return Hb(t,e),t}(JE);function iD(e){var t;t=e,KE.setTimeout((function(){throw t}))}var rD={closed:!0,next:QE,error:function(e){throw e},complete:QE},oD="function"==typeof Symbol&&Symbol.observable||"@@observable";function aD(e){return e}function sD(e){return 0===e.length?aD:1===e.length?e[0]:function(t){return e.reduce((function(e,t){return t(e)}),t)}}var lD=function(){function e(e){e&&(this._subscribe=e)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(e,t,n){var i,r=this,o=(i=e)&&i instanceof JE||function(e){return e&&UE(e.next)&&UE(e.error)&&UE(e.complete)}(i)&&qE(i)?e:new nD(e,t,n);return function(e){e()}((function(){var e=r,t=e.operator,n=e.source;o.add(t?t.call(o,n):n?r._subscribe(o):r._trySubscribe(o))})),o},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.error(t)}},e.prototype.forEach=function(e,t){var n=this;return new(t=uD(t))((function(t,i){var r=new nD({next:function(t){try{e(t)}catch(e){i(e),r.unsubscribe()}},error:i,complete:t});n.subscribe(r)}))},e.prototype._subscribe=function(e){var t;return null===(t=this.source)||void 0===t?void 0:t.subscribe(e)},e.prototype[oD]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return sD(e)(this)},e.prototype.toPromise=function(e){var t=this;return new(e=uD(e))((function(e,n){var i;t.subscribe((function(e){return i=e}),(function(e){return n(e)}),(function(){return e(i)}))}))},e.create=function(t){return new e(t)},e}();function uD(e){var t;return null!==(t=null!=e?e:XE.Promise)&&void 0!==t?t:Promise}
/**
     * @license
     * Copyright 2018 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
function cD(e){return new lD((function(t){var n=function(e,t,n,i){return bt(e).onAuthStateChanged(t,n,i)}(e,t.next.bind(t),t.error.bind(t),t.complete.bind(t));return{unsubscribe:n}}))}function hD(e){let t,n,i;return{c(){t=f("hr"),n=g(),i=f("p"),i.textContent="The GPS vidoes collected through the dashcam are saved in each users Google Drive Account. Users who accept the machine learning terms and conditions are also allowed to process their videos\r\n\t\t\t\t\tand use the online dashcam managment tool.",y(t,"class","my-2")},m(e,r){c(e,t,r),c(e,n,r),c(e,i,r)},d(e){e&&h(t),e&&h(n),e&&h(i)}}}function dD(t){let n,o,a,s,l,d,p,m,v,_,w,x,P,O=t[1]&&hD();return{c(){n=f("section"),o=f("section"),a=f("p"),a.textContent="Sign In",s=g(),l=f("p"),l.textContent="Use your Google Account",d=g(),p=f("button"),p.innerHTML='<i class="fa-brands fa-google"></i> Signin with Google',m=g(),v=f("div"),_=f("button"),_.textContent="Why do I need a Google Account?",w=g(),O&&O.c(),y(a,"class","text-bold text-2xl"),y(l,"class","text-center my-2"),y(p,"class","card-btn card-btn-blue my-4"),y(_,"class","text-center hover:underline"),y(v,"class","items-center justify-center mt-4"),y(o,"class","h-fit card rounded-lg shadow-xl p-4 text-sm w-96 text-center"),y(n,"class","py-4 px-4 flex h-screen items-center justify-center")},m(e,i){c(e,n,i),u(n,o),u(o,a),u(o,s),u(o,l),u(o,d),u(o,p),u(o,m),u(o,v),u(v,_),u(v,w),O&&O.m(v,null),x||(P=[b(p,"click",(function(){r(t[0])&&t[0].apply(this,arguments)})),b(_,"click",t[2])],x=!0)},p(e,[n]){(t=e)[1]?O||(O=hD(),O.c(),O.m(v,null)):O&&(O.d(1),O=null)},i:e,o:e,d(e){e&&h(n),O&&O.d(),x=!1,i(P)}}}function fD(e,t,n){let{login:i}=t,r=!1;return e.$$set=e=>{"login"in e&&n(0,i=e.login)},[i,r,()=>{n(1,r=!r)}]}class pD extends X{constructor(e){super(),W(this,e,fD,dD,o,{login:0})}}function gD(t){let n,i;return n=new pD({props:{login:t[1]}}),{c(){$(n.$$.fragment)},m(e,t){Y(n,e,t),i=!0},p:e,i(e){i||(U(n.$$.fragment,e),i=!0)},o(e){H(n.$$.fragment,e),i=!1},d(e){G(n,e)}}}function mD(e){let t,n;return t=new VE({props:{user:e[0],signOut:e[2]}}),{c(){$(t.$$.fragment)},m(e,i){Y(t,e,i),n=!0},p(e,n){const i={};1&n&&(i.user=e[0]),t.$set(i)},i(e){n||(U(t.$$.fragment,e),n=!0)},o(e){H(t.$$.fragment,e),n=!1},d(e){G(t,e)}}}function bD(e){let t,n,i,r;const o=[mD,gD],a=[];function s(e,t){return e[0]?0:1}return t=s(e),n=a[t]=o[t](e),{c(){n.c(),i=m()},m(e,n){a[t].m(e,n),c(e,i,n),r=!0},p(e,[r]){let l=t;t=s(e),t===l?a[t].p(e,r):(B(),H(a[l],1,1,(()=>{a[l]=null})),V(),n=a[t],n?n.p(e,r):(n=a[t]=o[t](e),n.c()),U(n,1),n.m(i.parentNode,i))},i(e){r||(U(n),r=!0)},o(e){H(n),r=!1},d(e){a[t].d(e),e&&h(i)}}}function yD(e,t,n){let i;return O(cD(sP).subscribe((e=>n(0,i=e)))),[i,async()=>{const e=await hP();fP.set(e)},()=>{sP.signOut()}]}return new class extends X{constructor(e){super(),W(this,e,yD,bD,o,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
